"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[5170],{53225:function(n,a,e){e.r(a);e(64996),e(94841),e(60761),e(95528),e(20694);var t=e(18468),r=(e(56311),e(80101),e(31875),e(46232)),s=e(96052),i=e(92379),l=e(58914),c=e(651);a.default=function(){return(0,c.jsx)(r.dY,{children:(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)(s.Z,{}),children:(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,c.jsxs)("p",{children:[l.texts[0].value,(0,c.jsx)("code",{children:l.texts[1].value}),l.texts[2].value,(0,c.jsx)("code",{children:l.texts[3].value}),l.texts[4].value]}),(0,c.jsxs)("h3",{id:"绘制图片栅格---tms",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制图片栅格---tms",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"绘制图片栅格 - TMS"]}),(0,c.jsx)(t.Z,{lang:"javascript",children:l.texts[5].value}),(0,c.jsxs)("h3",{id:"绘制图片栅格---wms",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制图片栅格---wms",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"绘制图片栅格 - WMS"]}),(0,c.jsx)(t.Z,{lang:"javascript",children:l.texts[6].value}),(0,c.jsxs)("h3",{id:"绘制图片栅格---wmts",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制图片栅格---wmts",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"绘制图片栅格 - WMTS"]}),(0,c.jsx)(t.Z,{lang:"javascript",children:l.texts[7].value}),(0,c.jsxs)("h3",{id:"绘制数据栅格---arraybuffer",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制数据栅格---arraybuffer",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"绘制数据栅格 - arraybuffer"]}),(0,c.jsx)(t.Z,{lang:"javascript",children:l.texts[8].value}),(0,c.jsxs)("h3",{id:"绘制数据栅格---rgb",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制数据栅格---rgb",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"绘制数据栅格 - rgb"]}),(0,c.jsx)(t.Z,{lang:"javascript",children:l.texts[9].value})]})})})})}},49578:function(n,a,e){e.d(a,{T:function(){return t.T}});var t=e(54614)},86957:function(n,a,e){e.d(a,{p:function(){return t.p}});var t=e(3691)},256:function(n,a,e){e.d(a,{G:function(){return t.G}});var t=e(91229)},15461:function(n,a,e){e.d(a,{S:function(){return t.S}});var t=e(53275)},58914:function(n,a,e){e.r(a),e.d(a,{texts:function(){return t}});const t=[{value:"栅格瓦片图层包括图片栅格和数据栅格，其中图片栅格通常加载 ",paraId:0},{value:"png/jpg",paraId:0},{value:" 图片，数据栅格则加载 ",paraId:0},{value:"tiff/lerc",paraId:0},{value:" 等栅格数据文件.",paraId:0},{value:"// 图片瓦片图层 - 卫星图\nconst layer = new RasterLayer().source(\n  'http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',\n  {\n    parser: {\n      type: 'rasterTile',\n      updateStrategy: 'overlap',\n    },\n  },\n);\n",paraId:1,tocIndex:0},{value:"// 绘制 WMS 格式瓦片\nconst url =\n  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR=3857&DPI=90';\n\nconst layer = new RasterLayer().source(url, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    zoomOffset: 1,\n  },\n});\n",paraId:2,tocIndex:1},{value:"// 绘制 WMTS 格式瓦片\nconst url1 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\nconst layer1 = new RasterLayer().source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    wmtsOptions: {\n      layer: 'img',\n      tileMatrixset: 'w',\n      format: 'tiles',\n    },\n  },\n});\n",paraId:3,tocIndex:2},{value:"const tileSource = new Source(\n  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',\n  {\n    parser: {\n      type: 'rasterTile',\n      dataType: 'arraybuffer',\n      tileSize: 256,\n      maxZoom: 13.1,\n      format: async (data) => {\n        const tiff = await GeoTIFF.fromArrayBuffer(data);\n        const image = await tiff.getImage();\n        const width = image.getWidth();\n        const height = image.getHeight();\n        const values = await image.readRasters();\n        return { rasterData: values[0], width, height };\n      },\n    },\n  },\n);\n\nlayer.source(tileSource).style({\n  domain: [0.001, 11.001],\n  clampLow: false,\n  rampColors: {\n    colors: colorList,\n    positions,\n  },\n});\n",paraId:4,tocIndex:3},{value:"const url = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\nconst tiffdata = await getTiffData(url);\nconst layer = new RasterLayer({ zIndex: 10 }).source(\n  [\n    {\n      data: tiffdata,\n      bands: [7, 6, 5].map((v) => v - 1),\n    },\n  ],\n  {\n    parser: {\n      type: 'rasterRgb',\n      format: async (data, bands) => {\n        const tiff = await GeoTIFF.fromArrayBuffer(data);\n        const image1 = await tiff.getImage();\n        const value = await image1.readRasters();\n        return bands.map((band) => {\n          return {\n            rasterData: value[band],\n            width: value.width,\n            height: value.height,\n          };\n        });\n      },\n      operation: 'rgb',\n      extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n    },\n  },\n);\n",paraId:5,tocIndex:4}]}}]);