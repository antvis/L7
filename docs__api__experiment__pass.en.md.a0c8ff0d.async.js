"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[1547],{13329:function(e,n,s){s.r(n);s(35164),s(43801),s(6974),s(27068),s(33574);var t=s(7808),a=(s(19480),s(97595),s(22593),s(99500)),r=s(13273),i=s(92379),o=s(94625),l=s(651);n.default=function(){return(0,l.jsx)(a.dY,{children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(r.Z,{}),children:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"markdown",children:[(0,l.jsx)("p",{children:o.texts[0].value}),(0,l.jsx)("p",{children:o.texts[1].value}),(0,l.jsxs)("h2",{id:"use",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#use",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"use"]}),(0,l.jsx)(t.Z,{lang:"jsx",children:o.texts[2].value}),(0,l.jsx)("img",{width:"60%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PIXmQ6m1C10AAAAAAAAAAAAAARQnAQ"}),(0,l.jsxs)("h3",{id:"turn-on-post-processing",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#turn-on-post-processing",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"Turn on post-processing"]}),(0,l.jsx)("p",{children:o.texts[3].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[4].value}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:o.texts[5].value}),(0,l.jsxs)("li",{children:[o.texts[6].value,(0,l.jsx)("br",{}),o.texts[7].value]})]}),(0,l.jsxs)("h3",{id:"single-layer-post-processing",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#single-layer-post-processing",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"Single layer post-processing"]}),(0,l.jsx)("p",{children:o.texts[8].value}),(0,l.jsxs)("h3",{id:"update-pass-options",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#update-pass-options",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"update pass options"]}),(0,l.jsx)("p",{children:o.texts[9].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[10].value}),(0,l.jsxs)("h3",{id:"setmultipassenablemultipassrenderer-boolean-passes-pass",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#setmultipassenablemultipassrenderer-boolean-passes-pass",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"setMultiPass(enableMultiPassRenderer: boolean, passes?: pass[])"]}),(0,l.jsx)("p",{children:o.texts[11].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[12].value}),(0,l.jsxs)("h3",{id:"post-processing-link",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#post-processing-link",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"Post-processing link"]}),(0,l.jsx)("p",{children:o.texts[13].value}),(0,l.jsxs)("h3",{id:"prefabricated-post-processing",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#prefabricated-post-processing",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"Prefabricated post-processing"]}),(0,l.jsx)("p",{children:o.texts[14].value}),(0,l.jsxs)("h4",{id:"bloom",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#bloom",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"bloom"]}),(0,l.jsx)("img",{width:"40%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*I3FCSo-gZR4AAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[15].value}),(0,l.jsx)("p",{children:o.texts[16].value}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[o.texts[17].value,(0,l.jsx)("br",{}),o.texts[18].value]}),(0,l.jsx)("li",{children:o.texts[19].value}),(0,l.jsx)("li",{children:o.texts[20].value})]}),(0,l.jsxs)("h4",{id:"blurv",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#blurv",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"blurv"]}),(0,l.jsx)("img",{width:"40%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NrNGSIQuZ4oAAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)("p",{children:o.texts[21].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[22].value}),(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:o.texts[23].value})}),(0,l.jsxs)("h4",{id:"colorhalftone",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#colorhalftone",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"colorHalftone"]}),(0,l.jsx)("img",{width:"40%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*QstwSr4dj20AAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)("p",{children:o.texts[24].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[25].value}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:o.texts[26].value}),(0,l.jsx)("li",{children:o.texts[27].value}),(0,l.jsx)("li",{children:o.texts[28].value}),(0,l.jsx)("li",{children:o.texts[29].value})]}),(0,l.jsxs)("h4",{id:"hexagonalpixelate",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#hexagonalpixelate",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"hexagonalPixelate"]}),(0,l.jsx)("img",{width:"40%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*IQOMQrbDQ5IAAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)("p",{children:o.texts[30].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[31].value}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:o.texts[32].value}),(0,l.jsx)("li",{children:o.texts[33].value}),(0,l.jsx)("li",{children:o.texts[34].value})]}),(0,l.jsxs)("h4",{id:"ink",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#ink",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"ink"]}),(0,l.jsx)("img",{width:"40%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*IpogQbe-5K4AAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)("p",{children:o.texts[35].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[36].value}),(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:o.texts[37].value})}),(0,l.jsxs)("h4",{id:"noise",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#noise",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"noise"]}),(0,l.jsx)("img",{width:"40%",style:{display:"block",margin:"0 auto"},alt:"Ê°à‰æã",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*6lcVS7YFrvUAAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)("p",{children:o.texts[38].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[39].value}),(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:o.texts[40].value})}),(0,l.jsxs)("h3",{id:"custom-post-processing",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#custom-post-processing",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"Custom post-processing"]}),(0,l.jsx)("p",{children:o.texts[41].value}),(0,l.jsx)(t.Z,{lang:"javascript",children:o.texts[42].value})]})})})})}},23832:function(e,n,s){s.d(n,{T:function(){return t.T}});var t=s(87575)},90779:function(e,n,s){s.d(n,{p:function(){return t.p}});var t=s(25441)},41102:function(e,n,s){s.d(n,{G:function(){return t.G}});var t=s(4481)},3088:function(e,n,s){s.d(n,{S:function(){return t.S}});var t=s(74284)},94625:function(e,n,s){s.r(n),s.d(n,{texts:function(){return t}});const t=[{value:"Post-Process Effect is a common processing effect in 3D rendering. It is a technology for reprocessing the rendered images and is generally used to achieve various special effects. L7's post-processing module provides users with some common post-processing effects, and also provides standard specifications to allow users to customize post-processing effects.",paraId:0},{value:"üåü It should be noted that using post-processing usually results in additional performance consumption. Users should use post-processing reasonably according to the actual situation of the project.",paraId:1},{value:"const layer = new LineLayer({\n  enableMultiPassRenderer: true,\n  passes: [\n    [\n      'bloom',\n      {\n        bloomBaseRadio: 0.8,\n        bloomRadius: 2,\n        bloomIntensity: 1\n      }\n    ]\n  ]\n}).source(data)\n  .size('ELEV', h => [ h % 50 === 0 ? 1.0 : 0.5, (h - 1300) * 0.2 ])\n  .shape('line')\n  .scale('ELEV', {\n    type: 'quantize'\n  })\n  .color('ELEV', [\n    '#094D4A',\n    ...\n  ]);\nscene.addLayer(layer);\n",paraId:2,tocIndex:0},{value:"In order to enable the post-processing capability of the layer, we need to configure enableMultiPassRenderer to true when initializing the layer, and also pass in the processing effect configuration of the layer.",paraId:3,tocIndex:1},{value:"let pointLayer = new PointLayer({\n  zIndex: 1,\n  enableMultiPassRenderer: false,\n  passes: [\n    [\n      'bloom',\n      {\n        bloomBaseRadio: 0.95,\n        bloomRadius: 4,\n        bloomIntensity: 1.1,\n      },\n    ],\n  ],\n});\n",paraId:4,tocIndex:1},{value:"enableMultiPassRenderer configures whether the layer starts post-processing capabilities",paraId:5,tocIndex:1},{value:"passes post-processing configuration list",paraId:5,tocIndex:1},{value:"\nüåü passes need to be configured according to certain rules",paraId:5,tocIndex:1},{value:"Traditional post-processing rendering often performs unified post-processing on all objects in the scene, but many times we only need to post-process a part of the scene. L7‚Äôs post-processing module naturally supports post-processing on a layer-by-layer basis, which gives users a higher degree of freedom in processing L7 scene content.",paraId:6,tocIndex:2},{value:"After the user initializes the layer object, if he wants to adjust the parameters of the post-processing effect, he can directly use the style method.",paraId:7,tocIndex:3},{value:"layer.style({ passes: [ [ 'color Halftone', { // Update the position of center center: [newX, newY], }, ], ],\n});\nscene.render();\n",paraId:8,tocIndex:3},{value:"In order to facilitate users to switch the state of post-processing (on or off post-processing), we provide users with a special method",paraId:9,tocIndex:4},{value:"// MultiPass exists in the current layer and we need to close it\n//Close directly\nlayer.setMultiPass(false);\n// Clear passes while closing\nlayer.setMultiPass(false, []);\n\n// MultiPass does not exist in the current layer, when we need to enable it\n// passes have been passed in during layer initialization\nconst layer = new PolygonLayer({\n  zIndex: 0,\n  enableMultiPassRenderer: false,\n  passes: [\n    [\n      'bloom',\n      {\n        bloomBaseRadio: 0.5,\n        bloomRadius: 20,\n        bloomIntensity: 1,\n      },\n    ],\n  ],\n});\nlayer.setMultiPass(true);\n\n// No passes are passed in when initializing the layer\nlayer.setMultiPass(true, [\n  [\n    'bloom',\n    {\n      bloomRadius: 10,\n      bloomIntensity: 1,\n    },\n  ],\n]);\n",paraId:10,tocIndex:4},{value:"passes can pass in a variety of post-processing. The result of ordinary rendering is the input of the first post-processing, the output of the previous post-processing is the input of the next post-processing, and the final result is output to the screen.",paraId:11,tocIndex:5},{value:"L7's post-processing module presets several post-processing effects, so users can configure and use them directly in passes.",paraId:12,tocIndex:6},{value:"const bloomPass = [\n  'bloom',\n  {\n    bloomBaseRadio: 0.5,\n    bloomRadius: 20,\n    bloomIntensity: 1,\n  },\n];\n",paraId:13,tocIndex:7},{value:"Glow post-processing",paraId:14,tocIndex:7},{value:"bloomBaseRadio",paraId:15,tocIndex:7},{value:"\nSet the proportion that maintains the original style of the graphic. The value is between 0 and 1. When the value is 1, the original style is completely preserved.",paraId:15,tocIndex:7},{value:"bloomRadius\nSet the radius of bloom. The larger the value, the larger the bloom range.",paraId:15,tocIndex:7},{value:"bloomIntensity\nSet the intensity of bloom. The larger the value, the stronger the glow.",paraId:15,tocIndex:7},{value:"Vertical Blur/Horizontal Blur",paraId:16,tocIndex:8},{value:"const blurVPass = [\n  'blurV',\n  {\n    blurRadius: 5,\n  },\n];\nconst blurHPass = [\n  'blurH',\n  {\n    blurRadius: 5,\n  },\n];\n",paraId:17,tocIndex:8},{value:"blurRadius\nSet blur radius",paraId:18,tocIndex:8},{value:"colorHalftone",paraId:19,tocIndex:9},{value:"const colorHalftonePass = [\n  'colorHalftone',\n  {\n    angle: 0,\n    size: 8,\n    centerX: 0.5,\n    centerY: 0.5,\n  },\n];\n",paraId:20,tocIndex:9},{value:"angle\nSet angle",paraId:21,tocIndex:9},{value:"size\nSet size",paraId:21,tocIndex:9},{value:"centerX\nSet center point X",paraId:21,tocIndex:9},{value:"centerY\nSet center point Y",paraId:21,tocIndex:9},{value:"hexagonal pixels",paraId:22,tocIndex:10},{value:"const hexagonalPixelatePass = [\n  'hexagonalPixelate',\n  {\n    scale: 10,\n    centerX: 0.5,\n    centerY: 0.5,\n  },\n];\n",paraId:23,tocIndex:10},{value:"scale\nSet zoom",paraId:24,tocIndex:10},{value:"centerX\nSet center point X",paraId:24,tocIndex:10},{value:"centerY\nSet center point Y",paraId:24,tocIndex:10},{value:"ink",paraId:25,tocIndex:11},{value:"const inkPass = [\n  'ink',\n  {\n    strength: 1,\n  },\n];\n",paraId:26,tocIndex:11},{value:"strength\nSet intensity",paraId:27,tocIndex:11},{value:"noise",paraId:28,tocIndex:12},{value:"const noisePass = [\n  'noise',\n  {\n    amount: 1,\n  },\n];\n",paraId:29,tocIndex:12},{value:"amount\nSet the amount of noise",paraId:30,tocIndex:12},{value:"Users can easily customize post-processing effects through L7-defined standards.",paraId:31,tocIndex:13},{value:"import { BasePostProcessingPass, PolygonLayer, Scene } from '@antv/l7';\n\ninterface IDotScreenEffectConfig {\n  center: [number, number]; // pattern ÂúÜÂøÉ\n  angle: number; // dot ÊóãËΩ¨ËßíÂ∫¶\n  size: number; // dot Â∞∫ÂØ∏\n}\n\nclass DotScreenEffect extends BasePostProcessingPass<IDotScreenEffectConfig> {\n  protected setupShaders() {\n    this.shaderModuleService.registerModule('dotScreenEffect', {\n      vs: this.quad,\n      fs: `\n      varying vec2 v_UV;\n\n      uniform sampler2D u_Texture;\n      uniform vec2 u_ViewportSize : [1.0, 1.0];\n      uniform vec2 u_Center : [0.5, 0.5];\n      uniform float u_Angle : 1;\n      uniform float u_Size : 3;\n\n      float pattern(vec2 texSize, vec2 texCoord) {\n        float scale = 3.1415 / u_Size;\n        float s = sin(u_Angle), c = cos(u_Angle);\n        vec2 tex = texCoord * texSize - u_Center * texSize;\n        vec2 point = vec2(\n          c * tex.x - s * tex.y,\n          s * tex.x + c * tex.y\n        ) * scale;\n        return (sin(point.x) * sin(point.y)) * 4.0;\n      }\n      vec4 dotScreen_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n        float average = (color.r + color.g + color.b) / 3.0;\n        return vec4(vec3(average * 10.0 - 5.0 + pattern(texSize, texCoord)), color.a);\n      }\n\n      void main() {\n        gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n        gl_FragColor = dotScreen_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n      }\n      `,\n    });\n    const { vs, fs, uniforms } = this.shaderModuleService.getModule('dotScreenEffect');\n    const { width, height } = this.rendererService.getViewportSize();\n    return {\n      vs,\n      fs,\n      uniforms: {\n        ...uniforms,\n        u_ViewportSize: [width, height],\n      },\n    };\n  }\n}\n\n// Ê≥®ÂÜåËá™ÂÆö‰πâÂêéÂ§ÑÁêÜÊïàÊûú\nscene.registerPostProcessingPass(DotScreenEffect, 'dotScreenEffect');\nconst layer = new PolygonLayer({\n  enableMultiPassRenderer: true,\n  passes: [\n    [\n      'dotScreenEffect',\n      {\n        size: 8,\n        angle: 1,\n      },\n    ],\n  ],\n});\n",paraId:32,tocIndex:13}]}}]);