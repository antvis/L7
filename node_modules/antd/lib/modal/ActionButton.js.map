{"version":3,"sources":["modal/ActionButton.jsx"],"names":["ActionButton","props","onClick","actionFn","closeModal","ret","length","then","setState","loading","e","console","error","state","autoFocus","$this","ReactDOM","findDOMNode","timeoutId","setTimeout","focus","clearTimeout","type","children","buttonProps","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;IACqBA,Y;;;;;AACjB,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,sFAAMA,KAAN;;AACA,UAAKC,OAAL,GAAe,YAAM;AAAA,wBACgB,MAAKD,KADrB;AAAA,UACTE,QADS,eACTA,QADS;AAAA,UACCC,UADD,eACCA,UADD;;AAEjB,UAAID,QAAJ,EAAc;AACV,YAAIE,GAAJ;;AACA,YAAIF,QAAQ,CAACG,MAAb,EAAqB;AACjBD,UAAAA,GAAG,GAAGF,QAAQ,CAACC,UAAD,CAAd;AACH,SAFD,MAGK;AACDC,UAAAA,GAAG,GAAGF,QAAQ,EAAd;;AACA,cAAI,CAACE,GAAL,EAAU;AACND,YAAAA,UAAU;AACb;AACJ;;AACD,YAAIC,GAAG,IAAIA,GAAG,CAACE,IAAf,EAAqB;AACjB,gBAAKC,QAAL,CAAc;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAAd;;AACAJ,UAAAA,GAAG,CAACE,IAAJ,CAAS,YAAa;AAClB;AACA;AACAH,YAAAA,UAAU,MAAV;AACH,WAJD,EAIG,UAACM,CAAD,EAAO;AACN;AACA;AACAC,YAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd,EAHM,CAIN;;AACA,kBAAKF,QAAL,CAAc;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAAd;AACH,WAVD;AAWH;AACJ,OAzBD,MA0BK;AACDL,QAAAA,UAAU;AACb;AACJ,KA/BD;;AAgCA,UAAKS,KAAL,GAAa;AACTJ,MAAAA,OAAO,EAAE;AADA,KAAb;AAlCe;AAqClB;;;;wCACmB;AAChB,UAAI,KAAKR,KAAL,CAAWa,SAAf,EAA0B;AACtB,YAAMC,KAAK,GAAGC,QAAQ,CAACC,WAAT,CAAqB,IAArB,CAAd;AACA,aAAKC,SAAL,GAAiBC,UAAU,CAAC;AAAA,iBAAMJ,KAAK,CAACK,KAAN,EAAN;AAAA,SAAD,CAA3B;AACH;AACJ;;;2CACsB;AACnBC,MAAAA,YAAY,CAAC,KAAKH,SAAN,CAAZ;AACH;;;6BACQ;AAAA,yBACmC,KAAKjB,KADxC;AAAA,UACGqB,IADH,gBACGA,IADH;AAAA,UACSC,QADT,gBACSA,QADT;AAAA,UACmBC,WADnB,gBACmBA,WADnB;AAAA,UAEGf,OAFH,GAEe,KAAKI,KAFpB,CAEGJ,OAFH;AAGL,aAAQ,oBAAC,kBAAD;AAAQ,QAAA,IAAI,EAAEa,IAAd;AAAoB,QAAA,OAAO,EAAE,KAAKpB,OAAlC;AAA2C,QAAA,OAAO,EAAEO;AAApD,SAAiEe,WAAjE,GACPD,QADO,CAAR;AAGH;;;;EAtDqCE,KAAK,CAACC,S","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Button from '../button';\nexport default class ActionButton extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onClick = () => {\n            const { actionFn, closeModal } = this.props;\n            if (actionFn) {\n                let ret;\n                if (actionFn.length) {\n                    ret = actionFn(closeModal);\n                }\n                else {\n                    ret = actionFn();\n                    if (!ret) {\n                        closeModal();\n                    }\n                }\n                if (ret && ret.then) {\n                    this.setState({ loading: true });\n                    ret.then((...args) => {\n                        // It's unnecessary to set loading=false, for the Modal will be unmounted after close.\n                        // this.setState({ loading: false });\n                        closeModal(...args);\n                    }, (e) => {\n                        // Emit error when catch promise reject\n                        // eslint-disable-next-line no-console\n                        console.error(e);\n                        // See: https://github.com/ant-design/ant-design/issues/6183\n                        this.setState({ loading: false });\n                    });\n                }\n            }\n            else {\n                closeModal();\n            }\n        };\n        this.state = {\n            loading: false,\n        };\n    }\n    componentDidMount() {\n        if (this.props.autoFocus) {\n            const $this = ReactDOM.findDOMNode(this);\n            this.timeoutId = setTimeout(() => $this.focus());\n        }\n    }\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId);\n    }\n    render() {\n        const { type, children, buttonProps } = this.props;\n        const { loading } = this.state;\n        return (<Button type={type} onClick={this.onClick} loading={loading} {...buttonProps}>\n        {children}\n      </Button>);\n    }\n}\n"],"file":"ActionButton.js"}