"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[4259],{14883:function(e,n,t){t.r(n);t(35164),t(43801),t(6974),t(27068),t(12520);var a=t(7808),r=(t(19480),t(64700),t(12318),t(99500)),s=t(13273),i=t(92379),o=t(52142),c=t(651);n.default=function(){return(0,c.jsx)(r.dY,{children:(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)(s.Z,{}),children:(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,c.jsx)("p",{children:o.texts[0].value}),(0,c.jsxs)("h3",{id:"option",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#option",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"option"]}),(0,c.jsxs)("p",{children:[o.texts[1].value,(0,c.jsx)("code",{children:o.texts[2].value}),o.texts[3].value]}),(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:[(0,c.jsx)("code",{children:o.texts[4].value}),o.texts[5].value,(0,c.jsx)("ul",{children:(0,c.jsx)("li",{children:o.texts[6].value})})]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("code",{children:o.texts[7].value}),o.texts[8].value,(0,c.jsx)("ul",{children:(0,c.jsx)("li",{children:o.texts[9].value})})]})]}),(0,c.jsx)(a.Z,{lang:"javascript",children:o.texts[10].value}),(0,c.jsxs)("h4",{id:"mask",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#mask",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"Mask"]}),(0,c.jsxs)("p",{children:[o.texts[11].value,(0,c.jsx)("code",{children:o.texts[12].value}),o.texts[13].value,(0,c.jsx)("code",{children:o.texts[14].value}),o.texts[15].value]}),(0,c.jsx)(a.Z,{lang:"js",children:o.texts[16].value}),(0,c.jsxs)("h3",{id:"source",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#source",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"source"]}),(0,c.jsxs)("p",{children:[o.texts[17].value,(0,c.jsx)("code",{children:o.texts[18].value}),o.texts[19].value,(0,c.jsx)("code",{children:o.texts[20].value}),o.texts[21].value]}),(0,c.jsx)("img",{width:"80%",style:{display:"block",margin:"0 auto"},alt:"案例",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cMFMTqF7WoIAAAAAAAAAAAAAARQnAQ"}),(0,c.jsx)(a.Z,{lang:"javascript",children:o.texts[22].value}),(0,c.jsxs)("h3",{id:"event",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#event",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"event"]}),(0,c.jsx)("p",{children:o.texts[23].value}),(0,c.jsx)(a.Z,{lang:"javascript",children:o.texts[24].value})]})})})})}},53980:function(e,n,t){t.d(n,{G:function(){return u}});var a=t(97502),r=t(99500),s=(t(92379),"d8ttRdvsaeIwjsXPUrV3"),i="YWbojl5X0YI9jR8WQ6vF",o="nHrVcWv4dgQMNfb_O3dk",c="kLT5PvcX6twH_8KM1K4Y",l="HdNrro6Kmg0q9gTP4YLJ",d=t(651);var u=function(e){var n,t=e.isPlayground,u=e.exampleId,x=e.header,h=e.error;return(0,d.jsxs)("div",{className:s,children:[t?null:(0,d.jsx)("div",{className:i,children:x}),(0,d.jsxs)("div",{className:o,children:[(0,d.jsx)("div",{id:"playgroundScriptContainer_".concat(u),className:c}),h?(0,d.jsx)(a.ZP,{className:l,status:"error",title:(0,d.jsx)(r._H,{id:"演示代码报错，请检查"}),subTitle:(0,d.jsx)("pre",{children:(n=h,(n.reason?n.reason:n.message?n.message:n).toString())})}):null]})]})}},19298:function(e,n,t){t.d(n,{S:function(){return S}});var a=t(28633),r=t.n(a),s=t(5572),i=t(49377),o=t(23622),c=t(99500),l=t(35510),d=t(92379),u=t(4667),x=t(53980),h=t(8131),p=t(95913),v=t(32686),f=t(29318),m=t(52486),j=t(65879),g=t.n(j),I=t(72916),y=t(54014),b={},w=t(651),A=function(e){var n=e.title,t=e.relativePath,a=e.githubUrl,r=(0,c.WF)().themeConfig.relativePath;(0,y.KI)(),new(g())(location.href);return(0,w.jsx)(p.Z,{ghost:!1,title:n,subTitle:(0,w.jsx)(v.Z,{title:(0,w.jsx)(c._H,{id:"在 GitHub 上编辑"}),children:(0,w.jsx)("a",{href:function(e){var n=e.githubUrl,t=e.relativePath;e.prefix;return"".concat(n,"/edit/master/").concat(r,"/examples/").concat(t)}({githubUrl:a,relativePath:t,prefix:"examples"}),target:"_blank",rel:"noopener noreferrer",className:b.editOnGtiHubButton,children:(0,w.jsx)(h.Z,{})})}),extra:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(f.Z,{split:(0,w.jsx)(m.Z,{type:"vertical"})}),(0,w.jsx)(I.Z,{})]})})},k=t(24325),Z=t.n(k),_=t(72725);function L(e,n,t,a){var r=function(e){var n=new Map;return(0,_.Z)(e,(function(e){(0,_.Z)(e.examples,(function(t){(0,_.Z)(t.demos,(function(a){n.set("".concat(e.id,"-").concat(t.id,"-").concat(a.id),Z()(Z()({},a),{},{relativePath:"".concat(e.id,"/").concat(t.id,"/demo/").concat(a.filename),targetExample:t,targetTopic:e}))}))}))})),n}(e);return r.get("".concat(n,"-").concat(t,"-").concat(a))}var S=function(e){var n=e.exampleTopics,t=e.topic,a=e.example,h=e.demo,p=e.size,v=e.replaceId,f=e.isPlayground,m=e.notFound,j=void 0===m?(0,w.jsx)(s.T,{}):m,g=L(n,t,a,h);if(!g)return j;var I=g.title,y=g.source,b=g.relativePath,k=(0,c.WF)().themeConfig,Z=k.githubUrl,_=k.playground,S=(0,d.useState)(),z=r()(S,2),N=z[0],P=z[1],H=(0,d.useState)(!1),T=r()(H,2),C=(T[0],T[1]),F=((0,c.bU)(),(0,w.jsx)(A,{title:(0,o.ic)(I),relativePath:b,githubUrl:Z})),R="".concat(t,"_").concat(a,"_").concat(h);return(0,w.jsxs)(u.Z,{split:"vertical",defaultSize:"".concat(100*(1-p),"%"),minSize:100,children:[(0,w.jsx)(x.G,{exampleId:R,error:N,header:F,isPlayground:f}),(0,w.jsx)(i.p,{exampleId:R,source:y,relativePath:b,replaceId:v,onError:P,onFullscreen:C,onDestroy:l.Z,onReady:l.Z,playground:_})]})}},72916:function(e,n,t){var a=t(35957),r=(t(92379),t(48229)),s=t(651),i=function(){return(0,s.jsx)("img",{width:16,style:{margin:"5px"},src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*iDSwRorar_QAAAAAAAAAAAAADmJ7AQ/original",alt:"react 组件库"})};n.Z=function(e){e.readingTime;return(0,s.jsxs)("div",{style:{float:"right",display:"flex",gap:"10px"},children:[(0,s.jsx)(r.Z,{href:"https://github.com/antvis/L7/issues/new","data-icon":"octicon-issue-opened","data-size":"large","data-show-count":"true","aria-label":"Issue antvis/l7 on GitHub",children:"反馈问题"}),(0,s.jsx)(r.Z,{href:"https://github.com/antvis/l7","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star antvis/l7 on GitHub",children:"关注项目"}),(0,s.jsx)(a.Z,{icon:(0,s.jsx)(i,{}),style:{fontWeight:600,height:"30px",padding:"1px 6px"},target:"blank",href:"https://larkmap.antv.antgroup.com/components/lark-map",children:"React 组件库"})]})}},54014:function(e,n,t){function a(){for(var e=window.location.pathname.replace("/docs/","/").replace("/zh/","/").split("/"),n=[],t=e.length;t>0;t--){var a=e.slice(0,t);n.push(a.join("/"))}return n}function r(){var e=window.location.pathname;e=(e=e.replace("/zh/","/")).replace("/docs","");var n=window.location.pathname.startsWith("/en")?/(\/[A-z]*\/?\/[A-z]*)\/?/:/(\/[A-z]*)\/?/;return e.match(n)[1]}function s(e){var n=[],t=e[0];for(n.push(t.key);t.children;)t=t.children[0],n.push(t.key);return n[n.length-1]}function i(e,n,t){return e.includes("/docs/")||e.includes("/zh/")?e.replace("/docs/","/").replace("/zh/","/"):t.every((function(n){var t="".concat(n).toLowerCase();return![t,"".concat(t,"/")].includes(e.toLowerCase())}))?n:e}t.d(n,{Gd:function(){return i},KI:function(){return r},Xd:function(){return a},iX:function(){return s}})},52142:function(e,n,t){t.r(n),t.d(n,{texts:function(){return a}});const a=[{value:"瓦片图层相比于普通的图层而言，在使用上有许多需要注意的地方。",paraId:0},{value:"在初始化瓦片的时候，除了普通图层支持的 ",paraId:1,tocIndex:0},{value:"options",paraId:1,tocIndex:0},{value:" 参数之外，还需要需要我们提前设置矢量数据相关的参数。",paraId:1,tocIndex:0},{value:"featureId",paraId:2,tocIndex:0},{value:": string\n",paraId:2,tocIndex:0},{value:"用于可以自定义指定。用于指定瓦片的拾取高亮。",paraId:3,tocIndex:0},{value:"sourceLayer",paraId:2,tocIndex:0},{value:": string\n",paraId:2,tocIndex:0},{value:"用于必须传入，且要在返回的矢量数据中存在，指定绘制矢量数据中那一图层数据。",paraId:4,tocIndex:0},{value:"const layer = new RasterLayer({\n  featureId: 'id',\n  sourceLayer: 'water',\n});\n",paraId:5,tocIndex:0},{value:"瓦片图层的掩模使用和普通的图层一样，同样在 ",paraId:6,tocIndex:1},{value:"options",paraId:6,tocIndex:1},{value:" 中设置 ",paraId:6,tocIndex:1},{value:"mask、maskfence",paraId:6,tocIndex:1},{value:" 参数即可，不过矢量瓦片图层暂时不支持设置掩模。",paraId:6,tocIndex:1},{value:"fetch('https://gw.alipayobjects.com/os/bmw-prod/fccd80c0-2611-49f9-9a9f-e2a4dd12226f.json')\n  .then((res) => res.json())\n  .then((maskData) => {\n    const layer = new RasterLayer({\n      mask: true,\n      maskfence: maskData,\n    });\n\n    const tileSource = new Source(\n      'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',\n      {\n        parser: {\n          type: 'rasterTile',\n          dataType: 'arraybuffer',\n          tileSize: 256,\n          maxZoom: 13.1,\n          format: async (data) => {\n            const tiff = await GeoTIFF.fromArrayBuffer(data);\n            const image = await tiff.getImage();\n            const width = image.getWidth();\n            const height = image.getHeight();\n            const values = await image.readRasters();\n            return { rasterData: values[0], width, height };\n          },\n        },\n      },\n    );\n    layer.source(tileSource).style({\n      domain: [0.001, 11.001],\n      clampLow: false,\n      rampColors: {\n        colors: colorList,\n        positions,\n      },\n    });\n    scene.addLayer(layer);\n  });\n",paraId:7,tocIndex:1},{value:"在有些场景下，尤其是是矢量瓦片地图的场景，同一份瓦片数据会同时包含多图层的数据，此时我们需要让多图层复用同一个 ",paraId:8,tocIndex:2},{value:"source",paraId:8,tocIndex:2},{value:" 对象。如下图所示，我们使用同一份数据绘制省市的面、边界和名称，此时我们就应该复用 ",paraId:8,tocIndex:2},{value:"source",paraId:8,tocIndex:2},{value:" 对象。",paraId:8,tocIndex:2},{value:"  const tileSource = new Source(\n    'http://localhost:3000/file.mbtiles/{z}/{x}/{y}.pbf',\n    {\n      parser: {\n        type: 'mvt',\n        tileSize: 256,\n        zoomOffset: 0,\n        maxZoom: 9,\n        extent: [-180, -85.051129, 179, 85.051129],\n      },\n    });\n  const option = {\n    featureId: 'NAME_CHN',\n    sourceLayer: 'city'\n  }\n  const linelayer = new LineLayer(option)\n    .source(tileSource)\n    .color('#f00')\n    .size(1)\n    .style({\n      opacity: 0.5,\n    });\n  this.scene.addLayer(linelayer);\n\n  const polygonlayer = new PolygonLayer(option)\n    .source(tileSource)\n    .color('citycode', (v: string) => {\n        return getRandomColor(v);\n      }\n    })\n    .style({\n      opacity: 0.4,\n    })\n    .select(true);\n  this.scene.addLayer(polygonlayer);\n\n  const pointlayer = new PointLayer(option)\n    .source(tileSource)\n    .shape('NAME_CHN', 'text')\n    .color('#f00')\n    .size(12)\n    .style({\n      stroke: '#fff',\n      strokeWidth: 2,\n    });\n\n  this.scene.addLayer(pointlayer);\n",paraId:9,tocIndex:2},{value:"在使用上，瓦片图层绑定事件的操作和普通图层事件保持一致，但是在事件的返回参数中，瓦片图层对分布的数据进行合并操作，以求获取到当前图层的完整数据。",paraId:10,tocIndex:3},{value:"layer.on('click', e => {...})；\n",paraId:11,tocIndex:3}]}}]);