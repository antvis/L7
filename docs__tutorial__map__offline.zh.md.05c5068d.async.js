"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[8563],{54545:function(e,a,t){t.r(a);t(92326),t(1364),t(43033),t(2043),t(10474);var l=t(27498),d=(t(52972),t(32149),t(13437),t(75910)),n=t(10465),s=t(92379),x=t(33390),r=t(651);a.default=function(){return(0,r.jsx)(d.dY,{children:(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(n.Z,{}),children:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"markdown",children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,r.jsxs)("p",{children:[x.texts[0].value,(0,r.jsx)("code",{children:x.texts[1].value}),x.texts[2].value,(0,r.jsx)("code",{children:x.texts[3].value}),x.texts[4].value,(0,r.jsx)("code",{children:x.texts[5].value}),x.texts[6].value,(0,r.jsx)("code",{children:x.texts[7].value}),x.texts[8].value,(0,r.jsx)("code",{children:x.texts[9].value}),x.texts[10].value,(0,r.jsx)("code",{children:x.texts[11].value}),x.texts[12].value,(0,r.jsx)("code",{children:x.texts[13].value}),x.texts[14].value]}),(0,r.jsxs)("h3",{id:"l7-如何引入-mapbox",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#l7-如何引入-mapbox",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"L7 如何引入 Mapbox"]}),(0,r.jsx)(l.Z,{lang:"javascript",children:x.texts[15].value}),(0,r.jsxs)("h3",{id:"为什么离线化",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#为什么离线化",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"为什么离线化"]}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:x.texts[16].value}),(0,r.jsx)("li",{children:x.texts[17].value}),(0,r.jsxs)("li",{children:[x.texts[18].value,(0,r.jsx)("code",{children:x.texts[19].value})]})]}),(0,r.jsxs)("h3",{id:"如何离线化使用-mapbox",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#如何离线化使用-mapbox",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"如何离线化使用 MapBox"]}),(0,r.jsxs)("p",{children:[x.texts[20].value,(0,r.jsx)("code",{children:x.texts[21].value}),x.texts[22].value,(0,r.jsx)("code",{children:x.texts[23].value}),x.texts[24].value,(0,r.jsx)("code",{children:x.texts[25].value}),x.texts[26].value]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:x.texts[27].value}),x.texts[28].value]}),(0,r.jsxs)("p",{children:[x.texts[29].value,(0,r.jsx)("code",{children:x.texts[30].value}),x.texts[31].value]}),(0,r.jsxs)("h4",{id:"mapbox-样式参数",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#mapbox-样式参数",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"Mapbox 样式参数"]}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:x.texts[32].value}),x.texts[33].value,(0,r.jsx)("code",{children:x.texts[34].value}),x.texts[35].value]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:x.texts[36].value}),x.texts[37].value]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:x.texts[38].value}),x.texts[39].value]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:x.texts[40].value}),x.texts[41].value,(0,r.jsx)("code",{children:x.texts[42].value}),x.texts[43].value]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:x.texts[44].value}),x.texts[45].value,(0,r.jsx)("code",{children:x.texts[46].value}),x.texts[47].value,(0,r.jsx)("code",{children:x.texts[48].value}),x.texts[49].value]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:x.texts[50].value}),x.texts[51].value]})]}),(0,r.jsxs)("p",{children:[x.texts[52].value,(0,r.jsx)("code",{children:x.texts[53].value}),x.texts[54].value,(0,r.jsx)("code",{children:x.texts[55].value}),x.texts[56].value]}),(0,r.jsxs)("p",{children:[x.texts[57].value,(0,r.jsx)("code",{children:x.texts[58].value}),x.texts[59].value,(0,r.jsx)("code",{children:x.texts[60].value}),x.texts[61].value]}),(0,r.jsxs)("p",{children:[x.texts[62].value,(0,r.jsx)("code",{children:x.texts[63].value}),x.texts[64].value,(0,r.jsx)("code",{children:x.texts[65].value}),x.texts[66].value]}),(0,r.jsxs)("p",{children:[x.texts[67].value,(0,r.jsx)("code",{children:x.texts[68].value}),x.texts[69].value,(0,r.jsx)("code",{children:x.texts[70].value}),x.texts[71].value]}),(0,r.jsx)(l.Z,{lang:"javascript",children:x.texts[72].value}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:x.texts[73].value}),x.texts[74].value,(0,r.jsx)("code",{children:x.texts[75].value}),x.texts[76].value,(0,r.jsx)("code",{children:x.texts[77].value}),x.texts[78].value,(0,r.jsx)("code",{children:x.texts[79].value}),x.texts[80].value]}),(0,r.jsxs)("h4",{id:"本地化雪碧图",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#本地化雪碧图",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"本地化雪碧图"]}),(0,r.jsxs)("p",{children:[x.texts[81].value,(0,r.jsx)("code",{children:x.texts[82].value}),x.texts[83].value,(0,r.jsx)("br",{}),x.texts[84].value,(0,r.jsx)("br",{}),x.texts[85].value,(0,r.jsx)("br",{}),x.texts[86].value]}),(0,r.jsxs)("p",{children:[x.texts[87].value,(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://lzxue.github.io/font-glyphs/sprite/sprite",children:x.texts[88].value})]}),(0,r.jsxs)("h4",{id:"本地化字体",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#本地化字体",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"本地化字体"]}),(0,r.jsxs)("p",{children:[x.texts[89].value,(0,r.jsx)("code",{children:x.texts[90].value}),x.texts[91].value,(0,r.jsx)("code",{children:x.texts[92].value}),x.texts[93].value]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:x.texts[94].value}),x.texts[95].value,(0,r.jsx)("br",{}),x.texts[96].value]}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:x.texts[97].value}),(0,r.jsx)("li",{children:x.texts[98].value}),(0,r.jsx)("li",{children:x.texts[99].value}),(0,r.jsx)("li",{children:x.texts[100].value})]}),(0,r.jsx)("p",{children:(0,r.jsx)("em",{children:x.texts[101].value})}),(0,r.jsxs)("p",{children:[x.texts[102].value,(0,r.jsx)("a",{href:"https://github.com/lzxue/font-glyphs/tree/gh-pages",children:x.texts[103].value}),x.texts[104].value,(0,r.jsx)("code",{children:x.texts[105].value}),x.texts[106].value]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:x.texts[107].value}),(0,r.jsx)("br",{}),x.texts[108].value,(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://lzxue.github.io/font-glyphs/glyphs/%7Bfontstack%7D/%7Brange%7D.pbf",children:x.texts[109].value}),(0,r.jsx)("br",{}),x.texts[110].value,(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/%7Bfontstack%7D/%7Brange%7D.pbf",children:x.texts[111].value})]}),(0,r.jsxs)("h4",{id:"地图服务本地化",children:[(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#地图服务本地化",children:(0,r.jsx)("span",{className:"icon icon-link"})}),"地图服务本地化"]}),(0,r.jsxs)("p",{children:[x.texts[112].value,(0,r.jsx)("a",{href:"https://github.com/htoooth/Leaflet.ChineseTmsProviders",children:x.texts[113].value}),x.texts[114].value,(0,r.jsx)("code",{children:x.texts[115].value}),x.texts[116].value,(0,r.jsx)("br",{}),x.texts[117].value,(0,r.jsx)("a",{href:"https://openmaptiles.com/downloads/planet/",children:x.texts[118].value}),x.texts[119].value,(0,r.jsx)("br",{}),x.texts[120].value]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:x.texts[121].value}),(0,r.jsx)("br",{}),x.texts[122].value,(0,r.jsx)("a",{href:"https://jingsam.github.io/foxgis-server-lite/#/",children:x.texts[123].value})]}),(0,r.jsx)("h4",{id:"",children:(0,r.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#",children:(0,r.jsx)("span",{className:"icon icon-link"})})}),(0,r.jsxs)("p",{children:[x.texts[124].value,(0,r.jsx)("code",{children:x.texts[125].value}),x.texts[126].value,(0,r.jsx)("code",{children:x.texts[127].value}),x.texts[128].value,(0,r.jsx)("code",{children:x.texts[129].value}),x.texts[130].value]}),(0,r.jsx)(l.Z,{lang:"javascript",children:x.texts[131].value}),(0,r.jsxs)("p",{children:[(0,r.jsx)("a",{href:"https://codesandbox.io/embed/frosty-architecture-tv6uv?fontsize=14&hidenavigation=1&theme=dark",children:x.texts[132].value}),(0,r.jsx)("br",{})]})]})})})})}},9730:function(e,a,t){t.d(a,{T:function(){return l.T}});var l=t(80427)},71297:function(e,a,t){t.d(a,{Z:function(){return l.Z}});var l=t(87785)},33390:function(e,a,t){t.r(a),t.d(a,{texts:function(){return l}});const l=[{value:"目前 ",paraId:0},{value:"L7",paraId:0},{value:" 支持高德和 ",paraId:0},{value:"Mapbox",paraId:0},{value:" 两种底图，高德地图由于使用在线 ",paraId:0},{value:"API",paraId:0},{value:" 不能做离线部署，如果你有离线部署的需求可以采用 ",paraId:0},{value:"MapBox",paraId:0},{value:"做底图。",paraId:0},{value:"L7",paraId:0},{value:" 在接口层统一了不同底图直接的差异，一套可视化代码可以运行在 ",paraId:0},{value:"L7",paraId:0},{value:" 支持的任意底图上。本文主要介绍如何离线使用，国内加速使用 ",paraId:0},{value:"MapBox",paraId:0},{value:"，同时也提供了在线的字体服务，你也可也下载到本地使用。",paraId:0},{value:"import { Scene, LineLayer } from '@antv/l7';\nimport { Mapbox } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new Mapbox({\n    style: 'dark',\n    center: [103.83735604457024, 1.360253881403068],\n    pitch: 4.00000000000001,\n    zoom: 10.210275860702593,\n    rotation: 19.313180925794313,\n    token: 'xxxx',\n  }),\n});\n",paraId:1,tocIndex:0},{value:"离线部署",paraId:2,tocIndex:1},{value:"国内加速",paraId:2,tocIndex:1},{value:"不使用 ",paraId:2,tocIndex:1},{value:"mapbox token",paraId:2,tocIndex:1},{value:"你只要不使用 ",paraId:3,tocIndex:2},{value:"MapBox",paraId:3,tocIndex:2},{value:" 的数据底图服务就可以离线使用，",paraId:3,tocIndex:2},{value:"mapbox",paraId:3,tocIndex:2},{value:" 所有数据服务资源都是在 ",paraId:3,tocIndex:2},{value:"style",paraId:3,tocIndex:2},{value:" 里面配置的。除了数据服务以外还有一些静态资源，这些主要是图片标注，文字标注的时候使用。",paraId:3,tocIndex:2},{value:"mapbox",paraId:4,tocIndex:2},{value:" 本身数据资源在国外如果在国内单独部署使用，加载速度体验还是很好的。",paraId:4,tocIndex:2},{value:"我们先了解一下 ",paraId:5,tocIndex:2},{value:"MapBox",paraId:5,tocIndex:2},{value:" 样式包含哪些配置项。",paraId:5,tocIndex:2},{value:"version",paraId:6,tocIndex:3},{value:"：",paraId:6,tocIndex:3},{value:"JS SDK",paraId:6,tocIndex:3},{value:" 对应版本必须为 8。",paraId:6,tocIndex:3},{value:"name",paraId:6,tocIndex:3},{value:"：样式的命名。",paraId:6,tocIndex:3},{value:"sprite",paraId:6,tocIndex:3},{value:"：雪碧图，将一个地图涉及到的所有零星图标图片都包含到一张大图中。",paraId:6,tocIndex:3},{value:"glyphs",paraId:6,tocIndex:3},{value:"：",paraId:6,tocIndex:3},{value:".pbf",paraId:6,tocIndex:3},{value:" 格式的字体样式，例如微软雅黑等字体库。",paraId:6,tocIndex:3},{value:"sources",paraId:6,tocIndex:3},{value:"：图层的资源文件，可以支持矢量切片、栅格、",paraId:6,tocIndex:3},{value:"dem",paraId:6,tocIndex:3},{value:" 栅格、图片、",paraId:6,tocIndex:3},{value:"geojson",paraId:6,tocIndex:3},{value:"、视频等格式。",paraId:6,tocIndex:3},{value:"layers",paraId:6,tocIndex:3},{value:"：是对每个图层样式的描述，这里就是对地图样式渲染的关键，可以做定制化地图样式。",paraId:6,tocIndex:3},{value:"具体参数及其 ",paraId:7,tocIndex:3},{value:"api",paraId:7,tocIndex:3},{value:" 可以参考 ",paraId:7,tocIndex:3},{value:"mapbox",paraId:7,tocIndex:3},{value:" 官网。",paraId:7,tocIndex:3},{value:"如果做到本地化只需要 ",paraId:8,tocIndex:3},{value:"sprite",paraId:8,tocIndex:3},{value:"，",paraId:8,tocIndex:3},{value:"glyphs",paraId:8,tocIndex:3},{value:" 本地化就可以了，地图服务可以加载其他服务。",paraId:8,tocIndex:3},{value:"如果你不需要使用 ",paraId:9,tocIndex:3},{value:"MapBox",paraId:9,tocIndex:3},{value:" 数据服务，可视化层完成用 ",paraId:9,tocIndex:3},{value:"L7",paraId:9,tocIndex:3},{value:" 渲染那就更简单了。",paraId:9,tocIndex:3},{value:"你只需要将 ",paraId:10,tocIndex:3},{value:"MapBox",paraId:10,tocIndex:3},{value:" 的地图样式设置 ",paraId:10,tocIndex:3},{value:"blank",paraId:10,tocIndex:3},{value:"。",paraId:10,tocIndex:3},{value:"const scene = new Scene({\n  id: 'map',\n  map: new Mapbox({\n    style: 'blank',\n    center: [103.83735604457024, 1.360253881403068],\n    pitch: 4.00000000000001,\n    zoom: 10.210275860702593,\n    rotation: 19.313180925794313,\n  }),\n});\n",paraId:11,tocIndex:3},{value:"blank",paraId:12,tocIndex:3},{value:" 样式以为无底图样式，这种样式下就不需要使用 ",paraId:12,tocIndex:3},{value:"mapbox",paraId:12,tocIndex:3},{value:" 服务，也不需要使用 ",paraId:12,tocIndex:3},{value:"mapbox",paraId:12,tocIndex:3},{value:" 的 ",paraId:12,tocIndex:3},{value:"token",paraId:12,tocIndex:3},{value:"。",paraId:12,tocIndex:3},{value:"如果你需要使用 ",paraId:13,tocIndex:4},{value:"mapbox",paraId:13,tocIndex:4},{value:" 字段的图片标注，你需要本地化雪碧图资源",paraId:13,tocIndex:4},{value:"只需要下载两个文件即可",paraId:13,tocIndex:4},{value:"sprite.json 主要记录每个图表在大图上位置",paraId:13,tocIndex:4},{value:"sprite.png  每个小图标组成的大图",paraId:13,tocIndex:4},{value:"在线雪碧图服务地址:",paraId:14,tocIndex:4},{value:"https://lzxue.github.io/font-glyphs/sprite/sprite",paraId:14,tocIndex:4},{value:"如果需要使用 ",paraId:15,tocIndex:5},{value:"mapbox",paraId:15,tocIndex:5},{value:" 文章标注功能需要本地化，如果你的渲染能力都是用 ",paraId:15,tocIndex:5},{value:"L7",paraId:15,tocIndex:5},{value:" 实现的，这个过程也是不需要的。",paraId:15,tocIndex:5},{value:"L7",paraId:16,tocIndex:5},{value:" 提供了在线字体服务",paraId:16,tocIndex:5},{value:" 目前支持4种字体。",paraId:16,tocIndex:5},{value:"阿里巴巴普惠体",paraId:17,tocIndex:5},{value:"noto",paraId:17,tocIndex:5},{value:"opensan",paraId:17,tocIndex:5},{value:"roboto",paraId:17,tocIndex:5},{value:"如果你有新的字体需求可提PR，帮你自动生成在线可用的字体服务，你可以在线使用，也可以下载到本地使用。",paraId:18,tocIndex:5},{value:"字体服务下载：",paraId:19,tocIndex:5},{value:"gh-pages分支",paraId:19,tocIndex:5},{value:" 你可以 ",paraId:19,tocIndex:5},{value:"clone",paraId:19,tocIndex:5},{value:" 下来直接使用。",paraId:19,tocIndex:5},{value:"你也可以使用在线服务",paraId:20,tocIndex:5},{value:"github服务",paraId:20,tocIndex:5},{value:"https://lzxue.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",paraId:20,tocIndex:5},{value:"蚂蚁CDN：",paraId:20,tocIndex:5},{value:"https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf",paraId:20,tocIndex:5},{value:"1.加载",paraId:21,tocIndex:6},{value:"第三方底图",paraId:21,tocIndex:6},{value:"，栅格瓦片图层做底图，如天地图，高德，",paraId:21,tocIndex:6},{value:"google",paraId:21,tocIndex:6},{value:" 的栅格瓦片都可以",paraId:21,tocIndex:6},{value:" 2.下载",paraId:21,tocIndex:6},{value:"opensteetmap ",paraId:21,tocIndex:6},{value:"矢量瓦片地图做底图",paraId:21,tocIndex:6},{value:" 3.自己业务数据发布底图服务，或者矢量瓦片服务。",paraId:21,tocIndex:6},{value:"这里还有个更完备的解决方案",paraId:22,tocIndex:6},{value:" ",paraId:22,tocIndex:6},{value:"https://jingsam.github.io/foxgis-server-lite/#/",paraId:22,tocIndex:6},{value:"所有的服务资源已经准备好了，这样我们就可以独立使用 ",paraId:23,tocIndex:7},{value:"mapbox",paraId:23,tocIndex:7},{value:" 服务，不需要再申请 ",paraId:23,tocIndex:7},{value:"mapbox",paraId:23,tocIndex:7},{value:" 的 ",paraId:23,tocIndex:7},{value:"token",paraId:23,tocIndex:7},{value:"。",paraId:23,tocIndex:7},{value:"import { Scene, LineLayer } from '@antv/l7';\nimport { Mapbox } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new Mapbox({\n    style: {\n      version: 8,\n      name: 'blank',\n      sprite: 'https://lzxue.github.io/font-glyphs/sprite/sprite',\n      glyphs:\n        'https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf',\n      sources: {},\n      layers: [\n        {\n          id: 'background',\n          type: 'background',\n          paint: {\n            'background-color': 'white',\n          },\n        },\n      ],\n    },\n    center: [103.83735604457024, 1.360253881403068],\n    pitch: 4.00000000000001,\n    zoom: 10.210275860702593,\n    rotation: 19.313180925794313,\n    token: 'xxxx',\n  }),\n});\n",paraId:24,tocIndex:7},{value:"离线，无token使用mapbox demo",paraId:25,tocIndex:7}]}}]);