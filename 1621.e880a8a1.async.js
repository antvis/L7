"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[1621],{91847:function(t,e,r){r.d(e,{Z:function(){return c}});var n=r(80250),o=r(92379),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},i=r(34344),a=function(t,e){return o.createElement(i.Z,(0,n.Z)({},t,{ref:e,icon:u}))};var c=o.forwardRef(a)},68585:function(t,e,r){r.d(e,{w:function(){return p}});var n=r(78527),o=r(75313),u=r(92379),i=r(39635),a=r(24134),c=r(95295),f=r(81341),l=r(46831);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,u,i,a=[],c=!0,f=!1;try{if(u=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=u.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=function(t){var e,r,y=t.popperPlacement,p=t.btnText,v=t.title,m=t.vertical,d=t.position,h=t.className,b=t.options,g=t.popperTrigger,w=t.popperClassName,O=t.btnIcon,S=t.style,j=t.onAdd,E=t.onRemove,M=t.onShow,L=t.onHide,P=t.onPopperShow,x=t.onPopperHide,A=t.onSelectChange,k=(0,a.$)(),C=s((0,u.useState)(),2),I=C[0],T=C[1],Z=(0,u.useMemo)((function(){return(0,i.L)(S)}),[S]),_=(e=O,r=(0,u.useRef)(document.createElement("span")),{portal:e?(0,c.createPortal)(e,r.current):null,dom:e?r.current:void 0}),R=_.portal,N=_.dom,U=(0,u.useMemo)((function(){return{popperPlacement:y,popperTrigger:g,popperClassName:w,btnText:p,title:v,vertical:m,position:d,className:h,options:b,style:Z,btnIcon:N}}),[b,y,g,w,p,v,m,d,h,Z,N]);return(0,u.useEffect)((function(){var t=new n.MapTheme((0,o.Z)(U,(function(t){return void 0===t})));return T(t),k.addControl(t),function(){k.removeControl(t),T(void 0)}}),[]),(0,f.m)(I,U),(0,l.H)(I,{add:j,remove:E,show:M,hide:L,popperShow:P,popperHide:x,selectChange:A}),u.createElement(u.Fragment,null,R)}},46831:function(t,e,r){r.d(e,{H:function(){return a}});var n=r(57354),o=r(92379);function u(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var a=function(t,e){var r=(0,o.useMemo)((function(){return Object.keys(e)}),[e]);(0,o.useEffect)((function(){return t&&r.forEach((function(r){var n=e[r];n&&t.on(r,n)})),function(){t&&r.forEach((function(r){var n=e[r];n&&t.off(r,n)}))}}),[t].concat(u(Object.values(e)))),(0,n.Z)((function(){t&&r.forEach((function(r){var n=e[r];n&&t.off(r,n)}))}))}},81341:function(t,e,r){r.d(e,{m:function(){return u}});var n=r(63137),o=r(92379),u=function(t,e){var r=(0,o.useRef)(!0),u=(0,o.useMemo)((function(){return Object.keys(e)}),[e]);(0,n.Z)((function(n){if(r.current)r.current=!1;else{var o={};n.forEach((function(t){var r=u[t];o[r]=e[r]})),null==t||t.setOptions(o)}}),Object.values(e))}},38772:function(t,e,r){r.d(e,{d:function(){return u}});var n=r(92379),o=r(92845),u=function(){var t=(0,n.useContext)(o.G);if(!t)throw new Error("The useLayerManager must be used in the LarkMap container");return t.layerManager}},24134:function(t,e,r){r.d(e,{$:function(){return u}});var n=r(92379),o=r(92845),u=function(){var t=(0,n.useContext)(o.G);if(!t)throw new Error("The useScene must be used in the LarkMap container");return t.scene}},92845:function(t,e,r){r.d(e,{$:function(){return J},G:function(){return F}});var n,o=r(78527),u=r(92379),i=r(27753),a=r.n(i),c=(n=u.useEffect,function(t,e){var r,o,i=(0,u.useRef)(void 0),c=(0,u.useRef)(0);void 0!==e&&(r=e,o=i.current,void 0===r&&(r=[]),void 0===o&&(o=[]),a()(r,o))||(c.current+=1),i.current=e,n(t,[c.current])}),f=r(80324),l=r.n(f),s=r(78757),y=r(47033),p=r(61360),v=r(4868);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,u=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw u}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M(n.key),n)}}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function E(t,e,r){return(e=M(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m(e)?e:String(e)}var L=0,P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(u,t);var e,r,n,o=w(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),E(S(e=o.call(this)),"scene",void 0),E(S(e),"options",void 0),E(S(e),"layerMap",new Map),e.scene=t.scene,e.options=t,e}return e=u,(r=[{key:"hasLayer",value:function(t){return this.layerMap.has(t)}},{key:"addLayer",value:function(t){var e=this.getLayerId(t);this.layerMap.set(e,t),t.addTo(this.scene),this.emit("add",t)}},{key:"addLayers",value:function(t){var e=this;t.forEach((function(t){e.addLayer(t)}))}},{key:"removeLayer",value:function(t){var e="string"==typeof t?t:this.getLayerId(t),r=this.layerMap.get(e);return!!r&&(this.layerMap.delete(e),r.remove(),this.emit("remove",e),!0)}},{key:"getLayers",value:function(){return Array.from(this.layerMap.values())}},{key:"getLayerById",value:function(t){return this.layerMap.get(t)}},{key:"getLayer",value:function(t){return this.getLayerById(t)}},{key:"removeAllLayer",value:function(){var t,e=d(this.layerMap.values());try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(t){e.e(t)}finally{e.f()}this.layerMap.clear()}},{key:"isEmpty",value:function(){return 0===this.layerMap.size}},{key:"getLayerId",value:function(t){return"id"in t?t.id:"".concat(L++)}},{key:"destroy",value:function(){this.removeAllLayer()}}])&&b(e.prototype,r),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Z);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function A(){A=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},i=u.iterator||"@@iterator",a=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var u=e&&e.prototype instanceof d?e:d,i=Object.create(u.prototype),a=new C(n||[]);return o(i,"_invoke",{value:M(t,r,a)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var y="suspendedStart",p="executing",v="completed",m={};function d(){}function h(){}function b(){}var g={};f(g,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,i)&&(g=O);var S=b.prototype=d.prototype=Object.create(g);function j(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,u,i,a){var c=s(t[o],t,u);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==x(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){f.value=t,i(f)}),(function(t){return r("throw",t,i,a)}))}a(c.arg)}var u;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return u=u?u.then(o,o):o()}})}function M(e,r,n){var o=y;return function(u,i){if(o===p)throw new Error("Generator is already running");if(o===v){if("throw"===u)throw i;return{value:t,done:!0}}for(n.method=u,n.arg=i;;){var a=n.delegate;if(a){var c=L(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var f=s(e,r,n);if("normal"===f.type){if(o=n.done?v:"suspendedYield",f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=v,n.method="throw",n.arg=f.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var u=s(o,e.iterator,r.arg);if("throw"===u.type)return r.method="throw",r.arg=u.arg,r.delegate=null,m;var i=u.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,u=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return u.next=u}}throw new TypeError(x(e)+" is not iterable")}return h.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=f(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(E.prototype),f(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,u){void 0===u&&(u=Promise);var i=new E(l(t,r,n,o),u);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(S),f(S,c,"Generator"),f(S,i,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var u=this.tryEntries.length-1;u>=0;--u){var i=this.tryEntries[u],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),f=n.call(i,"finallyLoc");if(c&&f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var u=o;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=e&&e<=u.finallyLoc&&(u=null);var i=u?u.completion:{};return i.type=t,i.arg=e,u?(this.method="next",this.next=u.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function k(t,e,r,n,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}var C=function(){var t,e=(t=A().mark((function t(e,n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Map"!==e){t.next=2;break}return t.abrupt("return",new o.Map(n));case 2:if("Gaode"!==e){t.next=6;break}return t.abrupt("return",new o.GaodeMap(n));case 6:if("GaodeV1"!==e){t.next=10;break}return t.abrupt("return",new o.GaodeMapV1(n));case 10:if("GaodeV2"!==e){t.next=12;break}return t.abrupt("return",new o.GaodeMapV2(n));case 12:if("Tencent"!==e){t.next=14;break}return t.abrupt("return",new o.TencentMap(n));case 14:if("Baidu"!==e){t.next=16;break}return t.abrupt("return",new o.BaiduMap(n));case 16:return t.abrupt("return",Promise.resolve(Promise.resolve().then(r.bind(r,78527))).then((function(t){return new(0,t.Mapbox)(n)})));case 17:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var u=t.apply(e,r);function i(t){k(u,n,o,i,a,"next",t)}function a(t){k(u,n,o,i,a,"throw",t)}i(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),I=r(63137),T=r(57354),Z={onLoaded:"loaded",onDestroy:"destroy",onResize:"resize",onMapMove:"mapmove",onMoveStart:"movestart",onMoveEnd:"moveend",onZoomChange:"zoomchange",onZoomStart:"zoomstart",onZoomEnd:"zoomend",onClick:"click",onDblclick:"dblclick",onContextMenu:"contextmenu",onMouseMove:"mousemove",onMouseWheel:"mousewheel",onMouseDown:"mousedown",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseUp:"mouseup",onDragStart:"dragstart",onDragging:"dragging",onDragEnd:"dragend"},_=Object.keys(Z);function R(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}var D=["id","style","className","map","mapType","mapOptions","onLayerManagerCreated","onSceneLoaded","children"];function z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?z(Object(r),!0).forEach((function(e){H(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function H(t,e,r){var n;return n=function(t,e){if("object"!=U(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==U(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,u,i,a=[],c=!0,f=!1;try{if(u=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=u.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var F=u.createContext(null),J=(0,u.memo)((0,u.forwardRef)((function(t,e){var r=t.id,n=t.style,i=t.className,a=t.map,f=t.mapType,v=void 0===f?"Gaode":f,m=t.mapOptions,d=void 0===m?{}:m,h=t.onLayerManagerCreated,b=t.onSceneLoaded,g=t.children,w=B(t,D),O=(0,u.useRef)(),S=V((0,u.useState)(null),2),j=S[0],E=S[1],M=(0,u.useRef)({scene:null,layerManager:null}).current;(0,u.useEffect)((function(){var t,e=!0,r=(0,s.Z)(a)?C(v,d):"function"==typeof a?a():a;return Promise.resolve(r).then((function(r){if(e){t=new o.Scene(G(G({},w),{},{id:O.current,map:r}));var n=new P({scene:t});M.scene=t,M.layerManager=n,t.once("loaded",(function(){b&&b(t),h&&h(n),E(t)}))}})).catch((function(t){console.error(t)})),function(){e=!1,t&&(M.scene=null,M.layerManager=null,t.destroy())}}),[]),function(t,e){(0,I.Z)((function(e,r,n){if(t){var o=e.filter((function(t){return!!t})).map((function(t){return t-1}));e.includes(0)&&(o=_.map((function(t,e){return e}))),o.forEach((function(e){var o=Z[_[e]],u=r[e+1],i=n[e+1];u&&t.off(o,u),i&&t.on(o,i)}))}}),[t].concat(R(_.map((function(t){return e[t]}))))),(0,T.Z)((function(){t&&_.forEach((function(r){var n=Z[r],o=e[r];n&&o&&t.off(n,o)}))}))}(j,t),(0,u.useImperativeHandle)(e,(function(){return{getScene:function(){return j},getMap:function(){return j.map}}}),[j]),(0,u.useEffect)((function(){j&&d.style&&j.setMapStyle(d.style)}),[d.style]),c((function(){(0,y.Z)(j)||(d.center&&(0,p.Z)(d.zoom)?j.setZoomAndCenter(d.zoom,d.center):(0,p.Z)(d.zoom)?j.setZoom(d.zoom):d.center&&j.setCenter(d.center))}),[d.zoom,d.center]),(0,u.useEffect)((function(){j&&(0,p.Z)(d.pitch)&&j.setPitch(d.pitch)}),[d.pitch]),(0,u.useEffect)((function(){j&&(0,p.Z)(d.rotation)&&j.setRotation(d.rotation)}),[d.rotation]);var L=(0,u.useMemo)((function(){return G({position:"relative"},n)}),[n]);return u.createElement("div",{id:r,ref:O,style:L,className:l()("larkmap",i)},j&&u.createElement(F.Provider,{value:M},g))})))},91802:function(t,e,r){r.d(e,{K:function(){return g}});var n=r(78527),o=r(75313),u=r(92379),i=r(39635),a=r(81341),c=r(46831),f=r(24134),l=r(38772);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,u,i,a=[],c=!0,f=!1;try{if(u=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=u.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=r(95295),v=function(t,e){if(t instanceof Function){var r=document.createElement(e);return function(){var e=t.apply(void 0,arguments),n=p.createPortal(e,r);return p.render(n,r),r}}var n=document.createElement(e),o=p.createPortal(t,n);return p.render(o,n),n};function m(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,u,i,a=[],c=!0,f=!1;try{if(u=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=u.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw o}}return a}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g=function(t){var e=t.style,r=t.closeButton,y=t.closeButtonOffsets,p=t.closeOnClick,h=t.closeOnEsc,b=t.maxWidth,g=t.anchor,w=t.offsets,O=t.stopPropagation,S=t.autoPan,j=t.autoClose,E=t.className,M=t.lngLat,L=t.items,P=t.trigger,x=t.onOpen,A=t.onClose,k=t.onShow,C=t.onHide,I=(0,f.$)(),T=d((0,u.useState)(),2),Z=T[0],_=T[1],R=(0,u.useMemo)((function(){return(0,i.L)(e)}),[e]),N=function(){var t=(0,l.d)(),e=s((0,u.useState)((null==t?void 0:t.getLayers())||[]),2),r=e[0],n=e[1];return(0,u.useEffect)((function(){if(t){var e=function(){n(t.getLayers())};return t.on("add",e),t.on("remove",e),function(){t.off("add",e),t.off("remove",e)}}}),[t]),r}(),U=(0,u.useMemo)((function(){var t=[];return L.forEach((function(e){var r;if("string"==typeof e.layer){var n=N.find((function(t){return t.id===e.layer}));if(!n)return;r=n}else r=e.layer;var o=[];r.isComposite?o.push.apply(o,m(r.getInteractionSubLayers())):o.push(r),o.forEach((function(r){var n,o={layer:r};e.title&&(o.title=v(e.title,"div")),e.customContent&&(o.customContent=v(e.customContent,"div")),null!==(n=e.fields)&&void 0!==n&&n.length&&(o.fields=e.fields.map((function(t){if("string"==typeof t)return t;var e={field:t.field,getValue:t.getValue};return t.formatField&&(e.formatField=v(t.formatField,"span")),t.formatValue&&(e.formatValue=v(t.formatValue,"span")),e}))),t.push(o)}))})),t}),[N,L]),D=(0,u.useMemo)((function(){return{style:R,closeButton:r,closeButtonOffsets:y,closeOnClick:p,closeOnEsc:h,maxWidth:b,anchor:g,offsets:w,stopPropagation:O,autoPan:S,autoClose:j,followCursor:"hover"===P,className:E,lngLat:M,items:U,trigger:P}}),[R,r,JSON.stringify(y),p,h,b,g,JSON.stringify(w),O,S,j,E,P,JSON.stringify(M),U]);return(0,u.useEffect)((function(){var t=new n.LayerPopup((0,o.Z)(D,(function(t){return void 0===t})));return _(t),I.addPopup(t),function(){I.removePopup(t),_(void 0)}}),[]),(0,a.m)(Z,D),(0,c.H)(Z,{open:x,close:A,show:k,hide:C}),u.createElement(u.Fragment,null)}},40080:function(t,e,r){r.d(e,{C:function(){return f}});var n=r(1781),o=r(92379),u=r(80678),i=r(18454),a=r(86699),c=Object.assign(u.m,{onSelect:"select",onUnselect:"unselect"}),f=(0,o.memo)((0,o.forwardRef)((function(t,e){var r=(0,i.n)(n.C,t);return(0,a.g)(r.current,t,c),(0,o.useImperativeHandle)(e,(function(){return r.current})),null})))},18454:function(t,e,r){r.d(e,{n:function(){return m}});var n=r(2679),o=r(85723),u=r(8504),i=r(92379),a=r(38772);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var f=["onCreated","source"],l=["data"],s=["data"];function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t,e,r){var n;return n=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==c(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var m=function(t,e){var r=e.onCreated,c=e.source,m=v(e,f),d=(0,a.d)(),h=(0,i.useRef)(),b=(0,i.useRef)(m),g=(0,i.useRef)(c);return h.current||(h.current=new t(e),r&&h.current.once("inited",(function(){return r(h.current)})),d.addLayer(h.current)),(0,n.Z)((function(){h.current&&(!(0,o.Z)(b.current,m)&&(h.current.update(m),b.current=(0,u.Z)(m)))}),[m]),(0,n.Z)((function(){if(h.current){var t=c.data,e=v(c,l),r=g.current,n=r.data,u=v(r,s);(t!==n||!(0,o.Z)(e,u))&&(h.current.changeData(c),g.current=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},c))}}),[c]),(0,i.useEffect)((function(){return function(){h.current&&(d.removeLayer(h.current),h.current=null)}}),[]),h}},80678:function(t,e,r){r.d(e,{m:function(){return n}});var n={onRemove:"remove",onShow:"show",onHide:"hide",onDataUpdate:"dataUpdate",onLegend:"legend",onLegendColor:"legend:color",onLegendSize:"legend:size",onClick:"click",onUnClick:"unclick",onDblClick:"dblclick",onUndblclick:"undblclick",onContextMenu:"contextmenu",onUnContextMenu:"uncontextmenu",onMouseEnter:"mouseenter",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseUp:"mouseup",onMouseDown:"mousedown",onUnMousemove:"unmousemove",onUnMouseup:"unmouseup",onUnMousedown:"unmousedown",onUnPick:"unpick"}},86699:function(t,e,r){r.d(e,{g:function(){return i}});var n=r(57354),o=r(92379),u=r(80678),i=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.m,i=(0,o.useMemo)((function(){return Object.keys(r)}),[r]),a=function(n){i.forEach((function(o){var u=r[o],i=e[o];o&&i&&t[n](u,i)}))},c=function(){return a("on")},f=function(){return a("off")},l=(0,o.useRef)(!0);l.current&&c(),(0,o.useEffect)((function(){return l.current?l.current=!1:c(),function(){f()}}),i.map((function(t){return e[t]}))),(0,n.Z)((function(){f()}))}},39635:function(t,e,r){r.d(e,{L:function(){return i}});var n=r(56442);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,u,i,a=[],c=!0,f=!1;try{if(u=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=u.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(null!=t?t:{}).map((function(t){var e=o(t,2),r=e[0],u=e[1],i=(0,n.Z)(r),a=u;return"number"==typeof a?a="".concat(a,"px"):"string"==typeof a&&(a=a.replace("'","")),"".concat(i," :").concat(a)})).join("; ")}},63137:function(t,e,r){var n=r(92379);e.Z=function(t,e){var r=(0,n.useRef)(void 0);(0,n.useEffect)((function(){var n,o,u=(n=r.current,o=e,n?n.map((function(t,e){return Object.is(n[e],null==o?void 0:o[e])?-1:e})).filter((function(t){return t>=0})):o?o.map((function(t,e){return e})):[]),i=r.current;return r.current=e,t(u,i,e)}),e)}},57354:function(t,e,r){r.d(e,{Z:function(){return u}});var n=r(92379);var o=function(t){var e=(0,n.useRef)(t);return e.current=t,e},u=function(t){var e=o(t);(0,n.useEffect)((function(){return function(){e.current()}}),[])}},2679:function(t,e,r){r.d(e,{Z:function(){return u}});var n=r(92379),o=function(t){return function(e,r){var o=(0,n.useRef)(!1);t((function(){return function(){o.current=!1}}),[]),t((function(){if(o.current)return e();o.current=!0}),r)}},u=o(n.useEffect)}}]);