---
title: æœ¬åœ°è¿è¡Œ
order: 1
---
<embed src="@/docs/common/style.md"></embed>

### ä¸€ã€æ‰“å¼€L7demoé¡µé¢


é€‰æ‹©ä¸€ä¸ªä»»æ„ä¸€ä¸ªä½ æƒ³çœ‹çš„ `demo`ã€‚

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*bKT5TrlYlGEAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

ä½ å¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°ï¼Œä»£ç åŒºçš„ä¸Šæ–¹æœ‰ä¸€æ’å·¥å…·æŒ‰é’®ã€‚


### äºŒã€æ‰“å¼€ codesandboxã€‚

ç‚¹å‡»å·¦ä¾§ç¬¬ä¸‰ä¸ªæŒ‰é’®ï¼Œä½ å°±è¿›å…¥äº† `codesandbox`ã€‚

![L7 åœ°ç†å¯è§†åŒ–](https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*TrpMSJrrSDMAAAAAAAAAAABkARQnAQ)

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*coZsTLbX2FQAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

ä½ å‘ç°ä½ è¿›å…¥äº†ä¸€ä¸ªåœ¨çº¿çš„ä»£ç ç¼–è¾‘å™¨ï¼Œåœ¨è¿™é‡Œé¢ä½ å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œå¹¶ä¸”èƒ½å¤Ÿéšæ—¶çœ‹åˆ°æ•ˆæœã€‚        

ä½ å¯èƒ½æƒ³è¯´æˆ‘å°±æƒ³æœ¬åœ°è·‘èµ·æ¥ï¼Œä¸æƒ³åœ¨çº¿ä¿®æ”¹ã€‚      

å½“ç„¶æ˜¯æ˜¯å¯ä»¥çš„ã€‚        

### ä¸‰ã€ä¸‹è½½demoæºç 

1. åœ¨ `codesandbox` çš„æ–‡ä»¶ç›®å½•å·¥å…·æœ‰ä¸‹è½½æŒ‰é’®ï¼Œå‚ç…§å›¾ä¸­çº¢è‰²éƒ¨åˆ†ã€‚

2. ç‚¹å‡»ä¸‹è½½ä½ å¯ä»¥æŠŠè¿™ä¸ª `demo` çš„æºç ä¸‹è½½åˆ°æœ¬åœ°ã€‚

### å››ã€å¯åŠ¨é¡¹ç›®

è§£å‹é¡¹ç›®ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ã€‚

1. å®‰è£…ç¯å¢ƒä¾èµ–

å¦‚æœä¸çŸ¥é“  `yarn` å¯èƒ½éœ€è¦è¡¥å……ä¸€ä¸‹å‰ç«¯çŸ¥è¯†äº†ï¼Œå¦‚æœæ²¡æœ‰ `yarn` ç¯å¢ƒä½ éœ€è¦å®‰è£…ä¸€ä¸‹ã€‚

```bash
yarn install 
```

2. å¯åŠ¨é¡¹ç›®

```bash
yarn start
```
æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€Â [http://localhost:3000/](http://localhost:3000/)ï¼Œè¿™æ · `demo` å°±è·‘èµ·æ¥äº†ã€‚

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*oQQ2RbOzx0oAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

ç°åœ¨ä½ å¯ä»¥å°½æƒ…çš„æœ¬åœ°ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ è‡ªå·±çš„å›¾å±‚äº†ã€‚    
`L7` æ‰€æœ‰ `demo` éƒ½å¯ä»¥åœ¨ `codesandbox` æ‰“å¼€ï¼Œä½ å¯ä»¥ä¸‹è½½ä»£ç ã€‚


---
title: local run
order: 1
---

<embed src="@/docs/common/style.md"></embed>

### 1. Open the L7demo page

Choose any one you want to see`demo`ã€‚

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*bKT5TrlYlGEAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

You may not have noticed that there is a row of tool buttons above the code area.

### 2. Open codesandbox.

Click the third button on the left and you will enter`codesandbox`ã€‚

![L7 åœ°ç†å¯è§†åŒ–](https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*TrpMSJrrSDMAAAAAAAAAAABkARQnAQ)

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*coZsTLbX2FQAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

You find that you have entered an online code editor, where you can modify the code and see the effect at any time.

You may want to say that I just want to run it locally and don't want to modify it online.

Of course it is possible.

### 3. Download demo source code

1. exist`codesandbox`The file directory tool has a download button, refer to the red part in the picture.

2. Click to download and you can put this`demo`Download the source code locally.

### 4. Start the project

Unzip the project and enter the project directory.

1. Install environment dependencies

If you don't know`yarn`You may need to add some front-end knowledge, if not`yarn`You need to install the environment.

```bash
yarn install 
```

2. Startup project

```bash
yarn start
```

The browser will automatically open<http://localhost:3000/>,so`demo`Just started running.

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*oQQ2RbOzx0oAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

Now you can freely modify the code locally and add your own layers.\
`L7`all`demo`All can be found in`codesandbox`Open and you can download the code.
---
title: å›¾å±‚åˆå§‹åŒ–
order: 1
---
<embed src="@/docs/common/style.md"></embed>

åœ¨åœ°å›¾åº”ç”¨ä¸­ï¼Œæ¸²æŸ“å¤§æ•°æ®çš„åœ°ç†æ•°æ®æ˜¯ååˆ†å¸¸è§çš„éœ€æ±‚ï¼Œä¸ºäº†ä¿è¯åº”ç”¨çš„æµç•…æ€§ï¼Œéœ€è¦è¿½æ±‚æè‡´çš„æ¸²æŸ“æ€§èƒ½ï¼Œä¸ºæ­¤ç›‘æ§å¼•æ“æ¸²æŸ“å†…å®¹å¯¹äºä¼˜åŒ–æ€§èƒ½ï¼Œå»ºè®¾åœ°å›¾å¯è§†åŒ–åº”ç”¨æ€§èƒ½æŒ‡æ ‡æœ‰åˆ‡å®çš„æ„ä¹‰ã€‚

### å®ç°

ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ L7 æä¾›çš„èƒ½åŠ›ç®€å•è·å–å›¾å±‚çš„åˆå§‹åŒ–çš„ä¿¡æ¯ã€‚

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 60, 40.7128 ],
    zoom: 2
  }),
  debug: true
});
scene.on('loaded', () => {
  const debugService = scene.getDebugService();
  const layer = new PointLayer()
  .source([{lng: 120, lat: 30}], {
    parser: {
      type: 'json',
      x: 'lng',
      y: 'lat',
    }
  })
  .shape('circle')
  .size(10)
  .color('#f00');
  layer.on('inited', () => {
    console.log(debugService.getLog(layer.id));
  })
  scene.addLayer(layer);
});
```

---
title: æ¸²æŸ“ç›‘æ§
order: 3
---
<embed src="@/docs/common/style.md"></embed>

åœ¨åœ°å›¾åº”ç”¨ä¸­ï¼Œæ¸²æŸ“å¤§æ•°æ®çš„åœ°ç†æ•°æ®æ˜¯ååˆ†å¸¸è§çš„éœ€æ±‚ï¼Œä¸ºäº†ä¿è¯åº”ç”¨çš„æµç•…æ€§ï¼Œéœ€è¦è¿½æ±‚æè‡´çš„æ¸²æŸ“æ€§èƒ½ï¼Œä¸ºæ­¤ç›‘æ§å¼•æ“æ¸²æŸ“å†…å®¹å¯¹äºä¼˜åŒ–æ€§èƒ½ï¼Œå»ºè®¾åœ°å›¾å¯è§†åŒ–åº”ç”¨æ€§èƒ½æŒ‡æ ‡æœ‰åˆ‡å®çš„æ„ä¹‰ã€‚

### å®ç°

ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ L7 æä¾›çš„èƒ½åŠ›ç®€å•è·å–åº”ç”¨çš„æ¸²æŸ“æ€§èƒ½ä¿¡æ¯ã€‚

```javascript
import { Scene } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 60, 40.7128 ],
    zoom: 2
  }),
  debug: true
});
scene.on('loaded', () => {
  const debugService = scene.getDebugService();
  // å¼€å¯æ¯å¸§æ¸²æŸ“çš„ç›‘æ§
  debugService.renderDebug(true)
  debugService.on('renderEnd', renderInfo => {
    const {
      renderUid,			// å½“å‰å¸§æ¸²æŸ“å”¯ä¸€ç¼–å·
      renderStart,		// å½“å‰å¸§æ¸²æŸ“å¼€å§‹æ—¶é—´
      renderEnd,			// å½“å‰å¸§æ¸²æŸ“ç»“æŸæ—¶é—´
      renderDuration	// å½“å‰å¸§æ¸²æŸ“æ—¶é—´
    } = renderInfo;
    ...
  }
                  
  setTimeout(() => {
    debugService.renderDebug(false);
    debugService.off('renderEnd');
  }, 1000); // ç›‘å¬ 1s å†…çš„æ¸²æŸ“æƒ…å†µ
});
```

---
title: Layer init
order: 1
---

<embed src="@/docs/common/style.md"></embed>

In map applications, rendering big data geographical data is a very common requirement. In order to ensure the smoothness of the application, it is necessary to pursue the ultimate rendering performance. For this reason, monitoring engine rendering content is of practical significance for optimizing performance and building map visualization application performance indicators. significance.

### accomplish

The following describes how to use the capabilities provided by L7 to simply obtain the initialization information of the layer.

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 60, 40.7128 ],
    zoom: 2
  }),
  debug: true
});
scene.on('loaded', () => {
  const debugService = scene.getDebugService();
  const layer = new PointLayer()
  .source([{lng: 120, lat: 30}], {
    parser: {
      type: 'json',
      x: 'lng',
      y: 'lat',
    }
  })
  .shape('circle')
  .size(10)
  .color('#f00');
  layer.on('inited', () => {
    console.log(debugService.getLog(layer.id));
  })
  scene.addLayer(layer);
});
```
---
title: Render 
order: 3
---

<embed src="@/docs/common/style.md"></embed>

In map applications, rendering big data geographical data is a very common requirement. In order to ensure the smoothness of the application, it is necessary to pursue the ultimate rendering performance. For this reason, monitoring engine rendering content is of practical significance for optimizing performance and building map visualization application performance indicators. significance.

### accomplish

The following describes how to use the capabilities provided by L7 to simply obtain the rendering performance information of the application.

```javascript
import { Scene } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 60, 40.7128 ],
    zoom: 2
  }),
  debug: true
});
scene.on('loaded', () => {
  const debugService = scene.getDebugService();
  // Enable monitoring of each frame rendering
  debugService.renderDebug(true)
  debugService.on('renderEnd', renderInfo => {
    const {
      renderUid, // The unique number of the current frame rendering
      renderStart, // current frame rendering start time
      renderEnd, // current frame rendering end time
      renderDuration // current frame rendering time
    } = renderInfo;
    ...
  }
                  
  setTimeout(() => {
    debugService.renderDebug(false);
    debugService.off('renderEnd');
  }, 1000); // Monitor the rendering within 1s
});
```
---
title: Map init
order: 1
---

<embed src="@/docs/common/style.md"></embed>

In map applications, rendering big data geographical data is a very common requirement. In order to ensure the smoothness of the application, it is necessary to pursue the ultimate rendering performance. For this reason, monitoring engine rendering content is of practical significance for optimizing performance and building map visualization application performance indicators. significance.

### accomplish

The following describes how to use the capabilities provided by L7 to simply obtain map initialization information.

```javascript
import { Scene } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 60, 40.7128 ],
    zoom: 2
  }),
  debug: true
});
scene.on('loaded', () => {
  const debugService = scene.getDebugService();
  console.log(debugService.getLog('map');)
});
```
---
title: åœ°å›¾åˆå§‹åŒ–
order: 1
---
<embed src="@/docs/common/style.md"></embed>

åœ¨åœ°å›¾åº”ç”¨ä¸­ï¼Œæ¸²æŸ“å¤§æ•°æ®çš„åœ°ç†æ•°æ®æ˜¯ååˆ†å¸¸è§çš„éœ€æ±‚ï¼Œä¸ºäº†ä¿è¯åº”ç”¨çš„æµç•…æ€§ï¼Œéœ€è¦è¿½æ±‚æè‡´çš„æ¸²æŸ“æ€§èƒ½ï¼Œä¸ºæ­¤ç›‘æ§å¼•æ“æ¸²æŸ“å†…å®¹å¯¹äºä¼˜åŒ–æ€§èƒ½ï¼Œå»ºè®¾åœ°å›¾å¯è§†åŒ–åº”ç”¨æ€§èƒ½æŒ‡æ ‡æœ‰åˆ‡å®çš„æ„ä¹‰ã€‚

### å®ç°

ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ L7 æä¾›çš„èƒ½åŠ›ç®€å•è·å–åœ°å›¾çš„åˆå§‹åŒ–çš„ä¿¡æ¯ã€‚

```javascript
import { Scene } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 60, 40.7128 ],
    zoom: 2
  }),
  debug: true
});
scene.on('loaded', () => {
  const debugService = scene.getDebugService();
  console.log(debugService.getLog('map');)
});
```

---
title: Radar
order: 4
---

<embed src="@/docs/common/style.md"></embed>

Point layers also support a special layer type: radar charts.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*YJmVRpmW7FEAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Letâ€™s introduce how to draw a common radar chart.

* you can`L7`Found on the official website[Online case](/examples/point/scatter#radarpoint)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 120, 30 ],
    zoom: 13
  })
});

const layer = new PointLayer()
  .source([{ lng: 120, lat: 30 } ],
    {
      parser: {
        type: 'json',
        x: 'lng',
        y: 'lat'
      }
    }
  )
  .shape('radar')
  .size(100)
  .color('#d00')
  .style({
    speed: 5
  })
  .animate(true);
```

### source

Radar charts accept plain point data.

### shape

Radar chart`shape`is a fixed value`radar`ã€‚

### animate

The radar chart needs to be`animate`Set as`true`will take effect

```javascript
.animate(true)

.animate({
  enable: true
})
```

### style

pass`speed`Set rotation speed, default is`1`, the larger the value, the faster the speed.
---
title: é›·è¾¾å›¾
order: 4
---
<embed src="@/docs/common/style.md"></embed>

ç‚¹å›¾å±‚è¿˜æ”¯æŒä¸€ç§ç‰¹æ®Šçš„å›¾å±‚ç±»å‹ï¼šé›·è¾¾å›¾ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*YJmVRpmW7FEAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„é›·è¾¾å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/scatter#radarpoint)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 120, 30 ],
    zoom: 13
  })
});

const layer = new PointLayer()
  .source([{ lng: 120, lat: 30 } ],
    {
      parser: {
        type: 'json',
        x: 'lng',
        y: 'lat'
      }
    }
  )
  .shape('radar')
  .size(100)
  .color('#d00')
  .style({
    speed: 5
  })
  .animate(true);
```

### source

é›·è¾¾å›¾æ¥å—æ™®é€šçš„ç‚¹æ•°æ®ã€‚
### shape

é›·è¾¾å›¾çš„ `shape` ä¸ºå›ºå®šå€¼ `radar`ã€‚

### animate

é›·è¾¾å›¾éœ€è¦å°† `animate` è®¾ç½®ä¸º `true` æ‰ä¼šç”Ÿæ•ˆ

```javascript
.animate(true)

.animate({
  enable: true
})
```
### style

é€šè¿‡ `speed` è®¾ç½®æ—‹è½¬é€Ÿåº¦ï¼Œé»˜è®¤ä¸º `1`ï¼Œå€¼è¶Šå¤§è½¬é€Ÿè¶Šå¿«ã€‚---
title: å¤åˆå›¾è¡¨åœ°å›¾
order: 8
---
<embed src="@/docs/common/style.md"></embed>

æˆ‘ä»¬åœ¨é€šè¿‡è‡ªå®šä¹‰ `Marker` ä»£æ›¿ç‚¹å›¾å±‚èŠ‚ç‚¹çš„æ—¶å€™å‰‹æ’å…¥å®ç°è‡ªå®šä¹‰å›¾è¡¨ï¼Œå¦‚ä½¿ç”¨äºŒç»´ç»Ÿè®¡å›¾è¡¨ä»£æ›¿ç‚¹çŠ¶ç¬¦å·ã€‚å¤åˆå›¾è¡¨åœ°å›¾ä¸­å¸¸ç”¨æ‰©å±•å›¾å½¢æœ‰æŸ±çŠ¶å›¾ã€æ›²çº¿å›¾ã€ç«ç‘°å›¾ç­‰

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*6AR6Qq0Bq-MAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„åœ°å›¾å¤åˆå›¾è¡¨ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/chart#bar)


```javascript
import { Scene, Marker } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';
import * as G2 from '@antv/g2';
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 2.6125016864608597, 49.359131 ],
    zoom: 4.19
  })
});
scene.on('loaded', () => {
  addChart();
  scene.render();
});
function addChart() {
  fetch('https://gw.alipayobjects.com/os/basement_prod/0b96cca4-7e83-449a-93d0-2a77053e74ab.json')
    .then(res => res.json())
    .then(data => {
      data.nodes.forEach(function(item) {
        const el = document.createElement('div');
        const total = item.gdp.Agriculture + item.gdp.Industry + item.gdp.Service;
        const size = Math.min(parseInt(total / 30000, 10), 70);
        if (size < 30) { return; }
        const itemData = [ {
            item: 'Agriculture',
            count: item.gdp.Agriculture,
            percent: item.gdp.Agriculture / total
          },
          {
            item: 'Industry',
            count: item.gdp.Industry,
            percent: item.gdp.Industry / total
          },
          {
            item: 'Service',
            count: item.gdp.Service,
            percent: item.gdp.Service / total
          }
        ];
        const chart = new G2.Chart({
          container: el,
          width: size,
          height: size,
          render: 'svg',
          padding: 0
        });
        chart.legend(false);
        chart.source(itemData);
        chart.tooltip(false);
        chart.axis('count', { grid: false });
        chart.interval()
          .position('item*count')
          .color('item', [ '#5CCEA1', '#5D7092', '#5B8FF9' ])
          .opacity(1);
        chart.render();
        const marker = new Marker({ element: el })
        .setLnglat({
          lng: item.coordinates[0],
          lat: item.coordinates[1]
        });
        scene.addMarker(marker);
      });
    });
}
```---
title: 3D Column
order: 1
---

<embed src="@/docs/common/style.md"></embed>

`3D`Column charts are columns of varying heights displayed over a geographic area, with the height of the column proportional to its value in the data set.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*RVw4QKTJe7kAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Below we will introduce how to draw a common`3D`Column chart.

* you can`L7`Found on the official website[Online case](/examples/point/column/#clumn_shape)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 66.02383,
    center: [ 121.400257, 31.25287 ],
    zoom: 14.55,
    rotation: 134.95
  })
});
fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new PointLayer({})
    .source(data, {
      parser: {
        type: 'json',
        x: 'longitude',
        y: 'latitude'
      }
    })
    .shape('name', [ 'cylinder', 'triangleColumn', 'hexagonColumn', 'squareColumn' ])
    .color('name', [ '#739DFF', '#61FCBF', '#FFDE74', '#FF896F' ]);
    .size('unit_price', h => [ 6, 6, h / 500 ] 
    scene.addLayer(pointLayer);
  })
```

### shape

`3D`Column chart`shape`The method supports the following parameters:

* `cylinder`cylinder
* `triangleColumn`triangular prism
* `hexagonColumn`hexagonal column
* `squareColumn`four corner pillars

### size

`3D`column chart`size`Support setting three dimensions`[w, l, z]`ï¼š

* `w`Width
* `l`long
* `z`high

1. `size`Set constant

```js
layer.size([2,2,3])
```

2. `size`Set callback function

```js
layer.size('unit_price', h => {
  return [ 6, 6, h / 500 ];
})
```

### animate

`3D`Column chart supports growth animation, through`animate`Method to set, specific usage can be viewed[Detailed documentation](</api/point_layer/animate#Growth animation>)

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*l-SUQ5nU6n8AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### style

`3D`Column charts have special`style`Attributes, specific usage can be found[Detailed documentation](/api/point_layer/style#3d-column)
---
title: Chart
order: 8
---

<embed src="@/docs/common/style.md"></embed>

We are customizing`Marker`When replacing point layer nodes, you can insert a custom chart, such as using a two-dimensional statistical chart instead of point symbols. Commonly used extended graphics in composite chart maps include bar charts, curve charts, rose charts, etc.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*6AR6Qq0Bq-MAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple map composite chart.

* you can`L7`Found on the official website[Online case](/examples/point/chart#bar)

```javascript
import { Scene, Marker } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';
import * as G2 from '@antv/g2';
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 2.6125016864608597, 49.359131 ],
    zoom: 4.19
  })
});
scene.on('loaded', () => {
  addChart();
  scene.render();
});
function addChart() {
  fetch('https://gw.alipayobjects.com/os/basement_prod/0b96cca4-7e83-449a-93d0-2a77053e74ab.json')
    .then(res => res.json())
    .then(data => {
      data.nodes.forEach(function(item) {
        const el = document.createElement('div');
        const total = item.gdp.Agriculture + item.gdp.Industry + item.gdp.Service;
        const size = Math.min(parseInt(total / 30000, 10), 70);
        if (size < 30) { return; }
        const itemData = [ {
            item: 'Agriculture',
            count: item.gdp.Agriculture,
            percent: item.gdp.Agriculture / total
          },
          {
            item: 'Industry',
            count: item.gdp.Industry,
            percent: item.gdp.Industry / total
          },
          {
            item: 'Service',
            count: item.gdp.Service,
            percent: item.gdp.Service / total
          }
        ];
        const chart = new G2.Chart({
          container: el,
          width: size,
          height: size,
          render: 'svg',
          padding: 0
        });
        chart.legend(false);
        chart.source(itemData);
        chart.tooltip(false);
        chart.axis('count', { grid: false });
        chart.interval()
          .position('item*count')
          .color('item', [ '#5CCEA1', '#5D7092', '#5B8FF9' ])
          .opacity(1);
        chart.render();
        const marker = new Marker({ element: el })
        .setLnglat({
          lng: item.coordinates[0],
          lat: item.coordinates[1]
        });
        scene.addMarker(marker);
      });
    });
}
```
---
title: 3D æŸ±å›¾
order: 1
---
<embed src="@/docs/common/style.md"></embed>

`3D` æŸ±å›¾æ˜¯åœ¨åœ°ç†åŒºåŸŸä¸Šæ–¹æ˜¾ç¤ºçš„ä¸åŒé«˜åº¦çš„æŸ±ä½“ï¼ŒæŸ±å­çš„é«˜åº¦ä¸å…¶åœ¨æ•°æ®é›†ä¸­çš„æ•°å€¼ä¼šæˆæ­£æ¯”ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*RVw4QKTJe7kAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„ `3D` æŸ±å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/column/#clumn_shape)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 66.02383,
    center: [ 121.400257, 31.25287 ],
    zoom: 14.55,
    rotation: 134.95
  })
});
fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new PointLayer({})
    .source(data, {
      parser: {
        type: 'json',
        x: 'longitude',
        y: 'latitude'
      }
    })
    .shape('name', [ 'cylinder', 'triangleColumn', 'hexagonColumn', 'squareColumn' ])
    .color('name', [ '#739DFF', '#61FCBF', '#FFDE74', '#FF896F' ]);
    .size('unit_price', h => [ 6, 6, h / 500 ] 
    scene.addLayer(pointLayer);
  })
```

### shape

`3D` æŸ±å›¾ `shape` æ–¹æ³•æ”¯æŒä»¥ä¸‹å‚æ•°ï¼š

- `cylinder` åœ†æŸ±ä½“
- `triangleColumn` ä¸‰è§’æŸ±
- `hexagonColumn` å…­è§’æŸ±
- `squareColumn` å››è§’æŸ±

### size

`3D` æŸ±å›¾çš„ `size` æ”¯æŒè®¾ç½®ä¸‰ä¸ªç»´åº¦ `[w, l, z]`ï¼š

- `w` å®½
- `l` é•¿
- `z` é«˜åº¦

1. `size` è®¾ç½®å¸¸é‡

```js
 layer.size([2,2,3])
```

2. `size` è®¾ç½®å›è°ƒå‡½æ•°

```js
layer.size('unit_price', h => {
  return [ 6, 6, h / 500 ];
})
```

### animate

`3D` æŸ±å›¾æ”¯æŒç”Ÿé•¿åŠ¨ç”»ï¼Œé€šè¿‡ `animate` æ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥æŸ¥çœ‹[è¯¦ç»†æ–‡æ¡£](/api/point_layer/animate#ç”Ÿé•¿åŠ¨ç”»)

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*l-SUQ5nU6n8AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### style

`3D` æŸ±å›¾æœ‰ç‰¹æ®Šçš„ `style` å±æ€§ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥æŸ¥æ‰¾[è¯¦ç»†æ–‡æ¡£](/api/point_layer/style#3d-column)---
title: Simple
order: 9
---

<embed src="@/docs/common/style.md"></embed>

Point layers support the simple points of sprite mode. Point layers in sprite mode are more efficient and the points always face the camera.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*dVFmQIKh5TUAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple point layer.

* you can`L7`Found on the official website[Online case](/examples/point/simple#simple)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 20,
    center: [ 120, 20 ],
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data)
        .shape('simple')
        .size(15)
        .color('mag', mag =>  mag > 4.5 ? '#5B8FF9' : '#5CCEA1';)
        .style({
          opacity: 0.6,
          strokeWidth: 3
        });
      scene.addLayer(pointLayer);
    });
});
```

### shape

Simple point layer use`shape`The parameters are fixed to`simple`ã€‚

### use

* The use of simple point layers behaves the same as general point layers.

* A simple point layer is essentially a sprite map, so a simple point layer always faces the camera (a normal 2D point layer stays facing up)

* ğŸŒŸ When the user has no requirements for the orientation of the point layer or the visual effect of the point layer is relatively simple, it is recommended to use a simple point layer as much as possible, which can save a lot of performance

* ğŸŒŸ Since the simple point layer is essentially a sprite map, there is a size limit: generally \[1, 64], which varies between different devices.

```javascript
// L7 provides query methods for quick viewing

scene.getPointSizeRange(); // Float32Array - [min, max]
```
---
title: ç®€å•ç‚¹
order: 9
---
<embed src="@/docs/common/style.md"></embed>

ç‚¹å›¾å±‚æ”¯æŒç²¾çµæ¨¡å¼çš„ç®€å•ç‚¹ï¼Œç²¾çµæ¨¡å¼çš„ç‚¹å›¾å±‚æ•ˆç‡æ›´é«˜ï¼Œç‚¹å§‹ç»ˆé¢å‘ç›¸æœºã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*dVFmQIKh5TUAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•ç‚¹å›¾å±‚ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/simple#simple)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 20,
    center: [ 120, 20 ],
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data)
        .shape('simple')
        .size(15)
        .color('mag', mag =>  mag > 4.5 ? '#5B8FF9' : '#5CCEA1';)
        .style({
          opacity: 0.6,
          strokeWidth: 3
        });
      scene.addLayer(pointLayer);
    });
});
```

### shape

ç®€å•ç‚¹å›¾å±‚ä½¿ç”¨çš„ `shape` å‚æ•°å›ºå®šä¸º `simple`ã€‚

### use

- ç®€å•ç‚¹å›¾å±‚çš„ä½¿ç”¨å’Œä¸€èˆ¬çš„ç‚¹å›¾å±‚è¡¨ç°ä¸€è‡´

- ç®€å•ç‚¹å›¾å±‚çš„å®è´¨æ˜¯ç²¾çµè´´å›¾ï¼Œå› æ­¤ç®€å•ç‚¹å›¾å±‚å§‹ç»ˆé¢å‘ç›¸æœºï¼ˆæ™®é€šçš„ 2D ç‚¹å›¾å±‚ä¿æŒé¢å‘ä¸Šï¼‰

- ğŸŒŸ å½“ç”¨æˆ·å¯¹ç‚¹å›¾å±‚çš„æœå‘æ²¡æœ‰è¦æ±‚æˆ–æ˜¯å¯¹ç‚¹å›¾å±‚çš„å¯è§†åŒ–æ•ˆæœè¦æ±‚æ¯”è¾ƒç®€å•ï¼Œé‚£ä¹ˆæ¨èå°½é‡ä½¿ç”¨ç®€å•ç‚¹å›¾å±‚ï¼Œå¯ä»¥èŠ‚çœå¤§é‡æ€§èƒ½

- ğŸŒŸ ç®€å•ç‚¹å›¾å±‚ç”±äºå®è´¨æ˜¯ç²¾çµè´´å›¾ï¼Œå› æ­¤æœ‰å¤§å°é™åˆ¶ï¼šä¸€èˆ¬æ˜¯ [1, 64]ï¼Œä¸åŒè®¾å¤‡ä¹‹é—´å­˜åœ¨å·®å¼‚

```javascript
// L7 æä¾›äº†æŸ¥è¯¢æ–¹æ³•å¿«é€ŸæŸ¥çœ‹

scene.getPointSizeRange(); // Float32Array - [min, max]
```
---
title: èšåˆå›¾
order: 2
---
<embed src="@/docs/common/style.md"></embed>

èšåˆå›¾é€šå¸¸ç”¨æ¥æè¿°æ•°æ®åœ¨åœ°ç†ä¸Šè¡¨ç°çš„èšåˆæƒ…å†µï¼Œç±»ä¼¼çƒ­åŠ›å›¾ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºæ•°æ®ç‚¹ä½çš„é›†ä¸­ã€‚    

ğŸŒŸ ç›®å‰ `L7` åªæœ‰ç‚¹æ•°æ®æ”¯æŒèšåˆå›¾ï¼Œèšç±»æ–¹æ³•ä¸»è¦ä»æ•°æ®å±‚èšåˆæ•°æ®ï¼Œåœ¨ `Source` æ–¹æ³•é…ç½® `cluster` å‚æ•°ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*paQsRKykjL4AAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„èšåˆå›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/cluster/#cluster)

```js
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 120.19382669582967, 30.258134 ],
    style: 'dark',
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data, { cluster: true })
        .shape('circle')
        .scale('point_count', {
          type: 'quantile'
        })
        .size('point_count', [ 5, 10, 15, 20, 25 ])
        .active(true)
        .color('yellow')
        .style({
          opacity: 0.5,
          strokeWidth: 1
        });
      scene.addLayer(pointLayer);
    });
});
```

### source

èšåˆå›¾åœ¨æ¥å—æ™®é€šçš„ç‚¹æ•°æ®ä¹‹åè¿˜éœ€è¦é…ç½®èšåˆå‚æ•°ã€‚

```js
const source = new Source(data, {
  cluster: true,
  clusterOption: {
    radius: 40,
    minZoom: 0,
    maxZoom: 16,
  }
})
```

- `cluster: boolean` è¡¨ç¤ºæ˜¯å¦å¯¹æ•°æ®è¿›è¡Œèšåˆæ“ä½œï¼Œç›®å‰åªæœ‰ç‚¹å›¾å±‚æ”¯æŒï¼Œé»˜è®¤å€¼ä¸º `false`ã€‚
- `clusterOption: IClusterOption` å…·ä½“çš„èšåˆå‚æ•°
  - `radius: number` èšåˆåŠå¾„ï¼Œé»˜è®¤å€¼ä¸º `40`ã€‚
  - `minZoom: number` æœ€å°èšåˆç¼©æ”¾ç­‰çº§ï¼Œé»˜è®¤å€¼ä¸º `0`ã€‚
  - `maxZoom: number` æœ€å¤§èšåˆç¼©æ”¾ç­‰çº§ï¼Œé»˜è®¤å€¼ä¸º `16`ã€‚

```js
interface IClusterOption {
  radius,
  minZoom
  maxZoom
}
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/cluster#cluster)

### shape

èšåˆå›¾ä½¿ç”¨é€šç”¨çš„èšåˆæ ·å¼ï¼Œ`shape` åªè¦ä½¿ç”¨ç‚¹å›¾å±‚ç±»å‹çš„ `shape` å³å¯ã€‚

### FAQ

`PointLayer` çš„èšåˆå›¾é‡‡ç”¨ `WebGL` ç»˜åˆ¶ï¼Œä¸æ”¯æŒè‡ªå®šä¹‰å…·ä½“èšåˆæ ·å¼ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰çš„éœ€æ±‚å¯ä»¥ä½¿ç”¨ `MarkerLayer` çš„èšåˆåŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡ `Dom` å®Œå…¨è‡ªå®šä¹‰æ ·å¼ã€‚

[MarkerLayer èšåˆ](/api/component/markerlayer)
---
title: Dot
order: 4
---

<embed src="@/docs/common/style.md"></embed>

The brightness map is also called the point density map. The more the number of internal points per unit area, the brighter the brightness will be. The brightness map is generally used to express the distribution of massive point data.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*xr8BQouXGvoAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple brightness map.

* you can`L7`Found on the official website[Online case](/examples/gallery/basic#normal)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 121.417463, 31.215175 ],
    style: 'dark',
    zoom: 11
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/BElVQFEFvpAKzddxFZxJ.txt')
    .then(res => res.text())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            y: 'lat',
            x: 'lng'
          }
        })
        .size(0.5)
        .color('#080298');
      scene.addLayer(pointLayer);
    });
});
```

### shape

Using the brightness map requires converting`shape`The parameters are set to`dot`, or not set`shape`function.
---
title: äº®åº¦å›¾
order: 4
---
<embed src="@/docs/common/style.md"></embed>

äº®åº¦å›¾åˆç§°ç‚¹å¯†åº¦å›¾ï¼Œå•ä½é¢ç§¯çš„å†…ç‚¹çš„ä¸ªæ•°è¶Šå¤šï¼Œäº®åº¦ä¼šè¶Šäº®ï¼Œäº®åº¦å›¾ä¸€èˆ¬ç”¨æ¥è¡¨è¾¾æµ·é‡ç‚¹æ•°æ®åˆ†å¸ƒæƒ…å†µ

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*xr8BQouXGvoAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„äº®åº¦å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/basic#normal)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 121.417463, 31.215175 ],
    style: 'dark',
    zoom: 11
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/BElVQFEFvpAKzddxFZxJ.txt')
    .then(res => res.text())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            y: 'lat',
            x: 'lng'
          }
        })
        .size(0.5)
        .color('#080298');
      scene.addLayer(pointLayer);
    });
});
```

### shape

ä½¿ç”¨äº®åº¦å›¾éœ€è¦å°† `shape` çš„å‚æ•°è®¾ç½®ä¸º `dot`ï¼Œæˆ–è€…ä¸è®¾ç½® `shape` å‡½æ•°ã€‚
---
title: cluster
order: 2
---

<embed src="@/docs/common/style.md"></embed>

Aggregation graphs are usually used to describe the aggregation of data geographically. Similar to heat maps, they can be used to represent the concentration of data points.

ğŸŒŸ Currently`L7`Only point data supports aggregated graphs. The clustering method mainly aggregates data from the data layer. In`Source`Method configuration`cluster`parameter.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*paQsRKykjL4AAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a common aggregation chart.

* you can`L7`Found on the official website[Online case](/examples/point/cluster/#cluster)

```js
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 120.19382669582967, 30.258134 ],
    style: 'dark',
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data, { cluster: true })
        .shape('circle')
        .scale('point_count', {
          type: 'quantile'
        })
        .size('point_count', [ 5, 10, 15, 20, 25 ])
        .active(true)
        .color('yellow')
        .style({
          opacity: 0.5,
          strokeWidth: 1
        });
      scene.addLayer(pointLayer);
    });
});
```

### source

After accepting ordinary point data, the aggregation chart also needs to configure aggregation parameters.

```js
const source = new Source(data, {
  cluster: true,
  clusterOption: {
    radius: 40,
    minZoom: 0,
    maxZoom: 16,
  }
})
```

* `cluster: boolean`Indicates whether to perform aggregation operations on data. Currently only point layers support it. The default value is`false`ã€‚
* `clusterOption: IClusterOption`Specific aggregation parameters
  * `radius: number`Aggregation radius, default value is`40`ã€‚
  * `minZoom: number`Minimum aggregate zoom level, default value is`0`ã€‚
  * `maxZoom: number`Maximum aggregate zoom level, default value is`16`ã€‚

```js
interface IClusterOption {
  radius,
  minZoom
  maxZoom
}
```

[Online case](/examples/point/cluster#cluster)

### shape

Aggregation graphs use common aggregation styles,`shape`Just use the point layer type`shape`Thatâ€™s it.

### FAQ

`PointLayer`The aggregation graph uses`WebGL`Drawing does not support customizing specific aggregation styles. You can use it if you have customized requirements.`MarkerLayer`The aggregation function, you can pass`Dom`Fully customizable styling.

[MarkerLayer Aggregation](/api/component/markerlayer)
---
title: iconfont
order: 7
---

<embed src="@/docs/common/style.md"></embed>

In addition to supporting drawing text annotations, the point layer also supports drawing and building simple icons by drawing text, that is, drawing`iconfont`. Through simple icons drawn with text, we can`color`Method to directly modify the color.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*WdOfSI_uyxIAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Below we will introduce how to draw a simple`iconfont`Icon point layer.

* you can`L7`Found on the official website[Online case](/examples/point/text#iconfont)

```javascript
// Specify iconfont to be mapped to the name of the font style
const fontFamily = 'iconfont';
//Specify iconfont font file
const fontPath ='//at.alicdn.com/t/font_2534097_fcae9o2mxbv.woff2?t=1622200439140';
//Add resources globally
scene.addFontFace(fontFamily, fontPath);
// Add the mapping of the iconfont field globally
scene.addIconFont('icon1', 'î›”');
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/bmw-prod/70408903-80db-4278-a318-461604acb2df.json')
    .then((res) => res.json())
    .then((data) => {
      const pointLayer = new PointLayer({})
        .source(data.list, {
          parser: {
            type: 'json',
            x: 'j',
            y: 'w',
          },
        })
        .shape('icon', 'text') //Specify that the field to be mapped is icon, and the shape type is the same as ordinary text annotation, which is text.
        .size(20)
        .color('w', ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99'])
        .style({
          textAnchor: 'center', // The position of the text relative to the anchor point center|left|right|top|bottom|top-left
          textOffset: [40, 0], // Offset of text relative to anchor point [horizontal, vertical]
          padding: [0, 0], // Text bounding box padding [horizontal, vertical], affects the collision detection results and prevents adjacent texts from being too close
          stroke: '#ffffff', // stroke color
          fontFamily,
          iconfont: true, // Enable iconfont mapping
        });
      scene.addLayer(pointLayer);
    });
});
```

1. `iconfont`Drawn is`unicode`Icon, you need to specify the corresponding icon in advance when using it`unicode`mapping file.
2. about`iconfont`Resource usage can go to`iconfont`Official website[Official website portal](https://iconfont.cn/)ã€‚

### shape(field: string, shapeType: 'text'): ILayer

`iconfont`In fact, it is a special text annotation, so`shape`The usage is consistent with the usage of ordinary text annotation.

* `field`Labeled field name.
* `shapeType`The default is`text`ã€‚

```javascript
layer.shape('iconfontField', 'text');
```

### style

we are using`iconfont`When drawing simple icons, you need to`style`method lieutenant general`iconfont`The parameters are set to`true`ã€‚

âœ¨ iconfont The use of other style parameters is consistent with the parameters of ordinary text annotations.
---
title: iconfont æ ‡æ³¨
order: 7
---
<embed src="@/docs/common/style.md"></embed>

ç‚¹å›¾å±‚é™¤äº†æ”¯æŒç»˜åˆ¶æ–‡å­—æ ‡æ³¨ä¹‹å¤–è¿˜æ”¯æŒé€šè¿‡ç»˜åˆ¶æ–‡å­—çš„æ–¹å¼ç»˜åˆ¶å»ºç®€å•çš„å›¾æ ‡ï¼Œå³ç»˜åˆ¶ `iconfont`ã€‚é€šè¿‡æ–‡å­—æ–¹å¼ç»˜åˆ¶çš„ç®€å•å›¾æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ `color` æ–¹æ³•ç›´æ¥ä¿®æ”¹é¢œè‰²ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*WdOfSI_uyxIAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„ `iconfont` å›¾æ ‡ç‚¹å›¾å±‚ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/text#iconfont)

```javascript
// æŒ‡å®š iconfont æ˜ å°„ä¸ºå­—ä½“æ ·å¼çš„åç§°
const fontFamily = 'iconfont';
// æŒ‡å®š iconfont å­—ä½“æ–‡ä»¶
const fontPath ='//at.alicdn.com/t/font_2534097_fcae9o2mxbv.woff2?t=1622200439140';
// å…¨å±€æ·»åŠ èµ„æº
scene.addFontFace(fontFamily, fontPath);
// å…¨å±€æ·»åŠ  iconfont å­—æ®µçš„æ˜ å°„
scene.addIconFont('icon1', '&#xe6d4;');
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/bmw-prod/70408903-80db-4278-a318-461604acb2df.json')
    .then((res) => res.json())
    .then((data) => {
      const pointLayer = new PointLayer({})
        .source(data.list, {
          parser: {
            type: 'json',
            x: 'j',
            y: 'w',
          },
        })
        .shape('icon', 'text') // æŒ‡å®šéœ€è¦æ˜ å°„å­—æ®µä¸º iconã€shape ç±»å‹å’Œæ™®é€šçš„æ–‡å­—æ ‡æ³¨ä¸€æ ·ä¸º text
        .size(20)
        .color('w', ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99'])
        .style({
          textAnchor: 'center', // æ–‡æœ¬ç›¸å¯¹é”šç‚¹çš„ä½ç½® center|left|right|top|bottom|top-left
          textOffset: [40, 0], // æ–‡æœ¬ç›¸å¯¹é”šç‚¹çš„åç§»é‡ [æ°´å¹³, å‚ç›´]
          padding: [0, 0], // æ–‡æœ¬åŒ…å›´ç›’ padding [æ°´å¹³ï¼Œå‚ç›´]ï¼Œå½±å“ç¢°æ’æ£€æµ‹ç»“æœï¼Œé¿å…ç›¸é‚»æ–‡æœ¬é çš„å¤ªè¿‘
          stroke: '#ffffff', // æè¾¹é¢œè‰²
          fontFamily,
          iconfont: true, // å¼€å¯ iconfont æ˜ å°„
        });
      scene.addLayer(pointLayer);
    });
});
```

1. `iconfont` ç»˜åˆ¶çš„æ˜¯ `unicode` å›¾æ ‡ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦æå‰æŒ‡å®šå¯¹åº”çš„ `unicode` æ˜ å°„æ–‡ä»¶ã€‚
2. å…³äº `iconfont` èµ„æºä½¿ç”¨å¯ä»¥å‰å¾€ `iconfont` å®˜ç½‘ [å®˜ç½‘ä¼ é€é—¨](https://iconfont.cn/)ã€‚

### shape(field: string, shapeType: 'text'): ILayer

`iconfont` å…¶å®å°±æ˜¯ç‰¹æ®Šçš„æ–‡æœ¬æ ‡æ³¨ï¼Œå› æ­¤ `shape` çš„ç”¨æ³•å’Œæ™®é€šæ–‡æœ¬æ ‡æ³¨çš„ç”¨æ³•ä¿æŒä¸€è‡´ã€‚

- `field` æ ‡æ³¨çš„å­—æ®µåç§°ã€‚
- `shapeType` é»˜è®¤ä¸º `text`ã€‚

```javascript
layer.shape('iconfontField', 'text');
```

### style

æˆ‘ä»¬åœ¨ä½¿ç”¨ `iconfont` ç»˜åˆ¶ç®€å•å›¾æ ‡çš„æ—¶å€™éœ€è¦åœ¨ `style` æ–¹æ³•ä¸­å°† `iconfont` å‚æ•°è®¾ç½®ä¸º `true`ã€‚

âœ¨ iconfont å…¶ä»– style å‚æ•°çš„ä½¿ç”¨å’Œæ™®é€šçš„æ–‡æœ¬æ ‡æ³¨çš„å‚æ•°ä¿æŒä¸€è‡´ã€‚
---
title: ç¬¦å·å›¾
order: 5
---
<embed src="@/docs/common/style.md"></embed>

ç‚¹å›¾å±‚æ”¯æŒç»˜åˆ¶å›¾æ ‡ï¼Œåœ¨åœ°ç†åŒºåŸŸä¸Šæ”¾ç½®ä¸åŒå›¾ç‰‡ä½œä¸ºç¬¦å·ï¼Œé€šå¸¸è¡¨ç¤ºä¸åŒåœ°ç†è¦ç´ åˆ†å¸ƒæƒ…å†µ

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*oVyHT5S3sv0AAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„ç¬¦å·åœ°å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/image/#image)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 121.434765, 31.256735 ],
    zoom: 14.83
  })
});
scene.addImage('00', 'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg');
scene.addImage('01', 'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg');
scene.addImage('02', 'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg');
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')
    .then(res => res.json())
    .then(data => {
      const imageLayer = new PointLayer()
        .source(data, {
          parser: {
            type: 'json',
            x: 'longitude',
            y: 'latitude'
          }
        })
        .shape('name', [ '00', '01', '02' ])
        .size(25);
      scene.addLayer(imageLayer);
    });
});
```

### addImage(field: string, url: string): void

ä¸ºäº†ä½¿ç”¨ç‚¹å›¾å±‚ç»˜åˆ¶å›¾æ ‡ï¼Œæˆ‘ä»¬éœ€è¦äº‹å…ˆåœ¨ `scene` å…¨å±€æ·»åŠ å¯¹åº”çš„å›¾ç‰‡èµ„æºã€‚ä¹‹åæˆ‘ä»¬å°±å¯ä»¥åœ¨ç‚¹å›¾å±‚çš„ `shape` æ–¹æ³•ä¸­æŒ‡å®šå¯¹åº”çš„å›¾ç‰‡ã€‚

```js
scene.addImage('02', 'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg');
```

### shape

æˆ‘ä»¬éœ€è¦é€šè¿‡ `shape` æ–¹æ³•æŒ‡å®šå½“å‰ç‚¹å›¾å±‚éœ€è¦åŠ è½½çš„å›¾ç‰‡èµ„æº `ID`ï¼Œ`ID` æ˜¯ç”¨æˆ·ä½¿ç”¨ `scene.addImage(id, url)` å…¨å±€æ·»åŠ å›¾ç‰‡èµ„æºæ—¶å€™çš„ `ID`ï¼Œå³ç¬¦å·å›¾éœ€è¦æŠŠ `shape` è®¾ç½®æˆå›¾ç‰‡çš„ `id`ã€‚

```javascript
scene.addImage('00','https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg');
scene.addImage('01','https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg');

layer.shape('00');
```

âš ï¸ ç¬¦å·å›¾çš„ `ID` ä¸èƒ½ä¸ç‚¹å›¾å±‚å·²æœ‰ shape åç§°ç›¸åŒï¼Œæ¯”å¦‚ä¸èƒ½è®¾ç½® `circle`ã€‚

åŒæ ·ç¬¦å·å›¾ `shape` ä¹Ÿæ”¯æŒæ•°æ®æ˜ å°„

```javascript
const scatter = new PointLayer()
  .source(data)
  .shape('name', v => {
    switch(v) {
      case 'p1':
        return '00';
      case 'p2':
        return '01';
    }
  })
  .size(5)
  .style({
    opacity: 0.3,
    strokeWidth: 1,
  });
```

âš ï¸ ç¬¦å·å›¾ä¸åº”è¯¥è®¾ç½® `color` ä¼ å…¥é¢œè‰²ï¼Œ`color` è®¾ç½®çš„é¢œè‰²ä¼šè¦†ç›–å›¾ç‰‡çš„é¢œè‰²ã€‚

âš ï¸ ä¸ºäº†å¾—åˆ°æ›´å¥½çš„ç°å®æ•ˆæœï¼ˆå›¾ç‰‡æ¸…æ™°ï¼Œæ— æ˜æ˜¾é”¯é½¿ï¼‰ï¼Œæˆ‘ä»¬åœ¨é€‰æ‹©å›¾ç‰‡ä»¥åŠè®¾ç½®å›¾æ ‡å¤§å°çš„æ—¶å€™åº”ä¿æŒç›¸å½“ï¼Œæˆ–è€…åœ¨ L7 å›¾å±‚ä¸­è®¾ç½®çš„å›¾æ ‡å¤§å°ç•¥å°äºå®é™…å›¾ç‰‡çš„åƒç´ å¤§å°ã€‚

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/image#image)
### style
#### billboard

1. é»˜è®¤é€šè¿‡ `PointLayer` å®ä¾‹åŒ–çš„ `image` æœ¬è´¨ä¸Šæ˜¯ç²¾çµè´´å›¾ï¼Œå› æ­¤æœ‰å§‹ç»ˆé¢å‘ç›¸æœºçš„ç‰¹æ€§ï¼ŒåŒæ—¶è´´å›¾çš„å¤§å°ä¹Ÿæ”¶åˆ°è®¾å¤‡çš„é™åˆ¶ã€‚  
2. ç”±äºç²¾çµå§‹ç»ˆé¢å‘ç›¸æœºï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿæ— æ³•è‡ªå®šä¹‰é…ç½® `image` çš„æ—‹è½¬è§’åº¦ã€‚

ä¸ºäº†è§£å†³ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼ˆ1. å¤§å°å—é™ï¼Œ2. æ— æ³•è‡ªå®šä¹‰æ—‹è½¬è§’åº¦ï¼‰ï¼Œæˆ‘ä»¬å•ç‹¬æä¾›äº†éç²¾çµæ¨¡å¼`billboard` çš„æ¨¡å¼ã€‚  

åªéœ€è¦åœ¨ style ä¸­é…ç½®  billboard ä¸º ```false```

```javascript
const imageLayer = new PointLayer({ layerType: 'fillImage',})
  .source(data, {
    parser: {
      type: 'json',
      x: 'longitude',
      y: 'latitude',
    },
  })
  .shape('name', ['00', '01', '02'])
  .style({
    rotation: 0,
    billboard: false,
  })
  .size(45);

```

##### rotation

æˆ‘ä»¬æ”¯æŒä½¿ç”¨ `rotation` è‡ªå®šä¹‰é…ç½®å›¾æ ‡çš„æ—‹è½¬è§’åº¦ï¼ˆé¡ºæ—¶é’ˆæ–¹å‘ã€è§’åº¦åˆ¶ï¼‰ã€‚

- `rotation`: number|undefined // è§’åº¦å•ä½ 0-360

```ts
layer.style({
  rotation: 90
})
```

rotation æ”¯æŒå¸¸é‡ï¼Œä¹Ÿæ”¯æŒæ•°æ®æ˜ å°„

```ts
layer.style({
  rotation: {
    field: 'rotate',
    value: [0,360]
  }
})
```

```tsx
layer.style({
  rotation: {
    field: 'rotate',
    value: (rotate)=>{
      return rotate
    }
  }
})
```
  

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1kBZTaains4AAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/image#fillimage)


ç¬¦å·å›¾çš„ é billboard æ¨¡å¼æ”¯æŒ `rotation` æ–¹æ³•æ ¹æ®æ•°æ®æ˜ å°„æ—‹è½¬è§’åº¦ã€‚

 
```javascript
const imageLayer = new PointLayer()
  .source(data)
  .shape('wind', (wind) => {
    if (wind === 'up') {
      return 'arrBlue';
    }
    return 'arrRed';
  })
  .size(15)
  .style({
    rotation: 0, // 
    billboard: false,
  });
scene.addLayer(imageLayer);
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/image#monsoon)
---
title: æ•£ç‚¹å›¾
order: 2
---
<embed src="@/docs/common/style.md"></embed>

æ•£ç‚¹å›¾åœ¨åœ°ç†åŒºåŸŸä¸Šæ”¾ç½®ç›¸ç­‰å¤§å°çš„åœ†ç‚¹ï¼Œç”¨æ¥è¡¨ç¤ºåœ°åŸŸä¸Šçš„ç©ºé—´å¸ƒå±€æˆ–æ•°æ®åˆ†å¸ƒã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*LnlmQ7sFWigAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„æ•£ç‚¹å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/scatter/#scatter)


```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ -121.24357, 37.58264 ],
    zoom: 6.45
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/6c4bb5f2-850b-419d-afc4-e46032fc9f94.csv')
    .then(res => res.text())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'Longitude',
            y: 'Latitude'
          }
        })
        .shape('circle')
        .size(4)
        .color('Magnitude', [
          '#0A3663',
          '#1558AC',
          '#3771D9',
          '#4D89E5',
          '#64A5D3',
          '#72BED6',
          '#83CED6',
          '#A6E1E0',
          '#B8EFE2',
          '#D7F9F0'
        ])
      scene.addLayer(pointLayer);
    });
});
```

### shape

æ•£ç‚¹å›¾ `shape` ä¸€èˆ¬è®¾ç½®æˆå¸¸é‡ï¼Œé€šå¸¸æ˜¯ `2D` çš„å›¾è¡¨ã€‚

- circle
- square
- hexagon
- triangle
- pentagon
- octogon
- hexagram
- rhombus
- vesica




---
title: Scatter
order: 2
---

<embed src="@/docs/common/style.md"></embed>

A scatter plot places equal-sized dots over a geographical area to represent the spatial layout or distribution of data over a geographical area.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*LnlmQ7sFWigAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a common scatter plot.

* you can`L7`Found on the official website[Online case](/examples/point/scatter/#scatter)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ -121.24357, 37.58264 ],
    zoom: 6.45
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/6c4bb5f2-850b-419d-afc4-e46032fc9f94.csv')
    .then(res => res.text())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'Longitude',
            y: 'Latitude'
          }
        })
        .shape('circle')
        .size(4)
        .color('Magnitude', [
          '#0A3663',
          '#1558AC',
          '#3771D9',
          '#4D89E5',
          '#64A5D3',
          '#72BED6',
          '#83CED6',
          '#A6E1E0',
          '#B8EFE2',
          '#D7F9F0'
        ])
      scene.addLayer(pointLayer);
    });
});
```

### shape

Scatter plot`shape`Generally set to a constant, usually`2D`chart.

* circle
* square
* hexagon
* triangle
* pentagon
* octogon
* hexagram
* rhombus
* vesica
---
title: Symbol
order: 5
---

<embed src="@/docs/common/style.md"></embed>

The point layer supports drawing icons and placing different pictures as symbols on geographical areas, usually representing the distribution of different geographical features.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*oVyHT5S3sv0AAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a common symbol map.

* you can`L7`Found on the official website[Online case](/examples/point/image/#image)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 121.434765, 31.256735 ],
    zoom: 14.83
  })
});
scene.addImage('00', 'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg');
scene.addImage('01', 'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg');
scene.addImage('02', 'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg');
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')
    .then(res => res.json())
    .then(data => {
      const imageLayer = new PointLayer()
        .source(data, {
          parser: {
            type: 'json',
            x: 'longitude',
            y: 'latitude'
          }
        })
        .shape('name', [ '00', '01', '02' ])
        .size(25);
      scene.addLayer(imageLayer);
    });
});
```

### addImage(field: string, url: string): void

In order to draw an icon using a point layer, we need to`scene`Add corresponding image resources globally. Then we can click on the layer`shape`Specify the corresponding image in the method.

```js
scene.addImage('02', 'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg');
```

### shape

we need to pass`shape`The method specifies the image resources that need to be loaded for the current point layer.`ID`ï¼Œ`ID`is used by users`scene.addImage(id, url)`When adding image resources globally`ID`, that is, the symbolic diagram needs to`shape`set as picture`id`ã€‚

```javascript
scene.addImage('00','https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg');
scene.addImage('01','https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg');

layer.shape('00');
```

âš ï¸ Symbol diagram`ID`It cannot be the same as the existing shape name of the point layer. For example, it cannot be set.`circle`ã€‚

Same symbol diagram`shape`Data mapping is also supported

```javascript
const scatter = new PointLayer()
  .source(data)
  .shape('name', v => {
    switch(v) {
      case 'p1':
        return '00';
      case 'p2':
        return '01';
    }
  })
  .size(5)
  .style({
    opacity: 0.3,
    strokeWidth: 1,
  });
```

âš ï¸ Symbol diagram should not be set`color`Pass in color,`color`The color you set will override the color of the image.

âš ï¸ In order to get a better realistic effect (the picture is clear and has no obvious aliasing), we should keep it consistent when selecting the picture and setting the icon size, or the icon size set in the L7 layer is slightly smaller than the pixel size of the actual picture.

[Online case](/examples/point/image#image)

### style

#### billboard

1. Pass by default`PointLayer`instantiated`image`It is essentially a sprite map, so it always faces the camera, and the size of the map is also limited by the device.
2. Since the sprite always faces the camera, we can't customize the configuration either`image`of rotation angle.

In order to solve the above two problems (1. Limited size, 2. Unable to customize the rotation angle), we provide a separate non-elf mode`billboard`mode.

Just configure billboard in style as`false`

```javascript
const imageLayer = new PointLayer({ layerType: 'fillImage',})
  .source(data, {
    parser: {
      type: 'json',
      x: 'longitude',
      y: 'latitude',
    },
  })
  .shape('name', ['00', '01', '02'])
  .style({
    rotation: 0,
    billboard: false,
  })
  .size(45);
```

##### rotation

We support using`rotation`Customize the rotation angle of the configuration icon (clockwise, angle system).

* `rotation`: number|undefined // Angle unit 0-360

```ts
layer.style({
  rotation: 90
})
```

rotation supports constants and data mapping

```ts
layer.style({
  rotation: {
    field: 'rotate',
    value: [0,360]
  }
})
```

```tsx
layer.style({
  rotation: {
    field: 'rotate',
    value: (rotate)=>{
      return rotate
    }
  }
})
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1kBZTaains4AAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/point/image#fillimage)

Non-billboard mode support for symbol graphs`rotation`Method maps rotation angle based on data.

```javascript
const imageLayer = new PointLayer()
  .source(data)
  .shape('wind', (wind) => {
    if (wind === 'up') {
      return 'arrBlue';
    }
    return 'arrRed';
  })
  .size(15)
  .style({
    rotation: 0, // 
    billboard: false,
  });
scene.addLayer(imageLayer);
```

[Online case](/examples/point/image#monsoon)
---
title: text
order: 6
---

<embed src="@/docs/common/style.md"></embed>

Point layers support drawing text labels.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*7blvQ4v7Q1UAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a common text annotation map.

* you can`L7`Found on the official website[Online case](/examples/point/text/#point_text)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 110, 36 ],
    style: 'light',
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data.list, {
          parser: {
            type: 'json',
            x: 'j',
            y: 'w'
          }
        })
        .shape('m', 'text')
        .size(12)
        .color('w', [ '#0e0030', '#0e0030', '#0e0030' ])
        .style({
          textAnchor: 'center', // The position of the text relative to the anchor point center|left|right|top|bottom|top-left
          textOffset: [ 0, 0 ], // Offset of text relative to anchor point [horizontal, vertical]
          spacing: 2, // character spacing
          padding: [ 1, 1 ], // Text bounding box padding [horizontal, vertical], affects the collision detection results and prevents adjacent texts from being too close
          stroke: '#ffffff', // stroke color
          strokeWidth: 0.3, // Stroke width
        });
      scene.addLayer(pointLayer);
    });
});
```

### shape(field: name: shapeType: 'text'): ILayer

* `field`Labeled field name.
* `shapeType`The default value is`text`ã€‚

```javascript
layer.shape('name', 'text');
```

### style

* textAnchor `string`The position of the text relative to the anchor point`'right' | 'top-right' | 'left' | 'bottom-right' | 'left' | 'top-left' | 'bottom-left' | 'bottom' | 'bottom-right' | 'bottom-left' | 'top' | 'top-right' | 'top-left' | 'center';`
* padding:`number`Text bounding box padding \[horizontal, vertical], affects the collision detection results and prevents adjacent text from being too close
* spacing: number text spacing
* stroke:`string`; stroke color
* strokeWidth `number`stroke width
* strokeOpacity `number`stroke transparency
* fontWeight `string`Font weight
* fontFamily `string`Font size
* textOffset `[number, number]`text offset
* textAllowOverlap:`boolean`Whether to allow text masking
* raisingHeight sets the raising height of the text label
---
title: æ–‡æœ¬æ ‡æ³¨
order: 6
---
<embed src="@/docs/common/style.md"></embed>

ç‚¹å›¾å±‚æ”¯æŒç»˜åˆ¶æ–‡æœ¬æ ‡æ³¨ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*7blvQ4v7Q1UAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„æ–‡æœ¬æ ‡æ³¨åœ°å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/text/#point_text)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 110, 36 ],
    style: 'light',
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data.list, {
          parser: {
            type: 'json',
            x: 'j',
            y: 'w'
          }
        })
        .shape('m', 'text')
        .size(12)
        .color('w', [ '#0e0030', '#0e0030', '#0e0030' ])
        .style({
          textAnchor: 'center', // æ–‡æœ¬ç›¸å¯¹é”šç‚¹çš„ä½ç½® center|left|right|top|bottom|top-left
          textOffset: [ 0, 0 ], // æ–‡æœ¬ç›¸å¯¹é”šç‚¹çš„åç§»é‡ [æ°´å¹³, å‚ç›´]
          spacing: 2, // å­—ç¬¦é—´è·
          padding: [ 1, 1 ], // æ–‡æœ¬åŒ…å›´ç›’ padding [æ°´å¹³ï¼Œå‚ç›´]ï¼Œå½±å“ç¢°æ’æ£€æµ‹ç»“æœï¼Œé¿å…ç›¸é‚»æ–‡æœ¬é çš„å¤ªè¿‘
          stroke: '#ffffff', // æè¾¹é¢œè‰²
          strokeWidth: 0.3, // æè¾¹å®½åº¦
        });
      scene.addLayer(pointLayer);
    });
});
```

### shape(field: name: shapeType: 'text'): ILayer

- `field` æ ‡æ³¨çš„å­—æ®µåç§°ã€‚
- `shapeType` é»˜è®¤å€¼ä¸º `text`ã€‚

```javascript
layer.shape('name', 'text');
```

### style

- textAnchor `string` æ–‡æœ¬ç›¸å¯¹é”šç‚¹çš„ä½ç½®
  `'right' | 'top-right' | 'left' | 'bottom-right' | 'left' | 'top-left' | 'bottom-left' | 'bottom' | 'bottom-right' | 'bottom-left' | 'top' | 'top-right' | 'top-left' | 'center';`
- padding: `number` æ–‡æœ¬åŒ…å›´ç›’ padding [æ°´å¹³ï¼Œå‚ç›´]ï¼Œå½±å“ç¢°æ’æ£€æµ‹ç»“æœï¼Œé¿å…ç›¸é‚»æ–‡æœ¬é çš„å¤ªè¿‘
- spacing: number æ–‡æœ¬é—´éš”
- stroke: `string`; æè¾¹é¢œè‰²
- strokeWidth `number` æè¾¹å®½åº¦
- strokeOpacity `number` æè¾¹é€æ˜åº¦
- fontWeight `string` å­—ä½“ç²—ç»†
- fontFamily `string` å­—å·
- textOffset `[number, number]` æ–‡æœ¬åç§»é‡
- textAllowOverlap: `boolean` æ˜¯å¦å…è®¸æ–‡å­—é®ç›–
- raisingHeight è®¾ç½®æ–‡æœ¬æ ‡æ³¨çš„æŠ¬å‡é«˜åº¦
---
title: Marker
order: 8
---

<embed src="@/docs/common/style.md"></embed>

Points on the map can be customized`DOM`, we will customize`DOM`called`Marker`ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_855bab/afts/img/A*2vBbRYT2bgIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Below we will introduce how to draw a simple`Marker`layers.

* you can`L7`Found on the official website[Online case](/examples/component/marker#marker)

```javascript
import { Scene, Marker } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 105.790327, 36.495636 ],
    zoom: 4
  })
});
scene.on('loaded', () => {
  addMarkers();
  scene.render();
});
function addMarkers() {
  fetch('https://gw.alipayobjects.com/os/basement_prod/67f47049-8787-45fc-acfe-e19924afe032.json')
    .then(res => res.json())
    .then(nodes => {
      for (let i = 0; i < nodes.length; i++) {
        if (nodes[i].g !== '1' || nodes[i].v === '') { continue; }
        const el = document.createElement('label');
        el.className = 'labelclass';
        el.textContent = nodes[i].v + 'â„ƒ';
        el.style.background = getColor(nodes[i].v);
        el.style.borderColor = getColor(nodes[i].v);
        const marker = new Marker({
          element: el
        }).setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });
        scene.addMarker(marker);
      }
    });
}
function getColor(v) {
  return v > 50
    ? '#800026'
    : v > 40
      ? '#BD0026'
      : v > 30
        ? '#E31A1C'
        : v > 20
          ? '#FC4E2A'
          : v > 10
            ? '#FD8D3C'
            : v > 5
              ? '#FEB24C'
              : v > 0
                ? '#FED976'
                : '#FFEDA0';
}
```

### Use documentation

[Marker documentation](/api/component/marker/marker)

[MarkerLayer documentation](/api/component/marker/markerlayer)
---
title: Marker
order: 8
---
<embed src="@/docs/common/style.md"></embed>

åœ°å›¾ä¸Šçš„ç‚¹å¯ä»¥æ˜¯è‡ªå®šä¹‰çš„ `DOM`ï¼Œæˆ‘ä»¬å°†è‡ªå®šçš„ `DOM` ç§°ä¸º `Marker` ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_855bab/afts/img/A*2vBbRYT2bgIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„ `Marker` å›¾å±‚ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/component/marker#marker)

```javascript
import { Scene, Marker } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 105.790327, 36.495636 ],
    zoom: 4
  })
});
scene.on('loaded', () => {
  addMarkers();
  scene.render();
});
function addMarkers() {
  fetch('https://gw.alipayobjects.com/os/basement_prod/67f47049-8787-45fc-acfe-e19924afe032.json')
    .then(res => res.json())
    .then(nodes => {
      for (let i = 0; i < nodes.length; i++) {
        if (nodes[i].g !== '1' || nodes[i].v === '') { continue; }
        const el = document.createElement('label');
        el.className = 'labelclass';
        el.textContent = nodes[i].v + 'â„ƒ';
        el.style.background = getColor(nodes[i].v);
        el.style.borderColor = getColor(nodes[i].v);
        const marker = new Marker({
          element: el
        }).setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });
        scene.addMarker(marker);
      }
    });
}
function getColor(v) {
  return v > 50
    ? '#800026'
    : v > 40
      ? '#BD0026'
      : v > 30
        ? '#E31A1C'
        : v > 20
          ? '#FC4E2A'
          : v > 10
            ? '#FD8D3C'
            : v > 5
              ? '#FEB24C'
              : v > 0
                ? '#FED976'
                : '#FFEDA0';
}
```

### ä½¿ç”¨æ–‡æ¡£

[Marker æ–‡æ¡£](/api/component/marker/marker)

[MarkerLayer æ–‡æ¡£](/api/component/marker/markerlayer)
---
title: Bubble
order: 0
---

<embed src="@/docs/common/style.md"></embed>

Dots of different sizes appear above the geographic area of â€‹â€‹the bubble chart, and the area of â€‹â€‹the circle is proportional to its value in the data set.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*fNGiS7YI1tIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Letâ€™s introduce how to draw a common bubble chart.

* you can`L7`Found on the official website[Online case](/examples/point/bubble/#point)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 140.067171, 36.26186 ],
    zoom: 5.32,
    maxZoom: 10
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data)
        .shape('circle')
        .size('mag', [ 1, 25 ])
        .color('mag', mag => {
          return mag > 4.5 ? '#5B8FF9' : '#5CCEA1';
        })
        .style({
          opacity: 0.3,
          strokeWidth: 1
        });
      scene.addLayer(pointLayer);
    });
});
```

### source

Bubble charts accept plain point data.

### shape

bubble chart`shape`Generally`circle`,can also be`square`ã€`triangle`and other shapes.

### size

bubble chart`size`Generally used to represent a certain field in the data, so constants are not used but data mapping is used.

```js
layer.size('area', [1, 100]); // Use interval mapping
layer.size('area', area => { // Use callback function to implement mapping
  return area * 10;
})
```

### color

bubble chart`color`It is generally used to represent a certain field in the data, so constants are not used but data mapping is used.

```js
layer.color('area', ['#f00', '#ff0']); // Use interval mapping
layer.color('area', area => { // Use callback function to implement mapping
  if(area > 100) {
    return '#f00';
  } else {
    return '#ff0';
  }
})
```
---
title: æ°”æ³¡å›¾
order: 0
---
<embed src="@/docs/common/style.md"></embed>

æ°”æ³¡å›¾åœ°ç†åŒºåŸŸä¸Šæ–¹ä¼šæ˜¾ç¤ºä¸åŒå¤§å°çš„åœ†ç‚¹ï¼Œåœ†å½¢é¢ç§¯ä¸å…¶åœ¨æ•°æ®é›†ä¸­çš„æ•°å€¼ä¼šæˆæ­£æ¯”ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*fNGiS7YI1tIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„æ°”æ³¡å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/bubble/#point)

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 140.067171, 36.26186 ],
    zoom: 5.32,
    maxZoom: 10
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data)
        .shape('circle')
        .size('mag', [ 1, 25 ])
        .color('mag', mag => {
          return mag > 4.5 ? '#5B8FF9' : '#5CCEA1';
        })
        .style({
          opacity: 0.3,
          strokeWidth: 1
        });
      scene.addLayer(pointLayer);
    });
});
```

### source

æ°”æ³¡å›¾æ¥å—æ™®é€šçš„ç‚¹æ•°æ®ã€‚
### shape

æ°”æ³¡å›¾çš„ `shape` ä¸€èˆ¬ä¸º `circle`ï¼Œä¹Ÿå¯ä»¥æ˜¯ `square`ã€`triangle` ç­‰å…¶ä»–å½¢çŠ¶ã€‚

### size

æ°”æ³¡å›¾çš„ `size` ä¸€èˆ¬ç”¨äºè¡¨ç¤ºæ•°æ®ä¸­çš„æŸä¸ªå­—æ®µï¼Œå› æ­¤ä¸ä¼šä½¿ç”¨å¸¸é‡è€Œæ˜¯ä½¿ç”¨æ•°æ®æ˜ å°„ã€‚

```js
layer.size('area', [1, 100]); // ä½¿ç”¨åŒºé—´æ˜ å°„
layer.size('area', area => {  // ä½¿ç”¨å›è°ƒå‡½æ•°å®ç°æ˜ å°„
  return area * 10;
})
```

### color

æ°”æ³¡å›¾çš„ `color` ä¸€èˆ¬ä¹Ÿä¼šç”¨äºè¡¨ç¤ºæ•°æ®ä¸­çš„æŸä¸ªå­—æ®µï¼Œå› æ­¤ä¸ä¼šä½¿ç”¨å¸¸é‡è€Œæ˜¯ä½¿ç”¨æ•°æ®æ˜ å°„ã€‚

```js
layer.color('area', ['#f00', '#ff0']); // ä½¿ç”¨åŒºé—´æ˜ å°„
layer.color('area', area => {  // ä½¿ç”¨å›è°ƒå‡½æ•°å®ç°æ˜ å°„
  if(area > 100) {
    return '#f00';
  } else {
    return '#ff0';
  }
})
```---
title: wave
order: 3
---

<embed src="@/docs/common/style.md"></embed>

When the animation mode is turned on, the plane point layer is a special layer type: water wave point. The layer is made up of rings that spread outward.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*pcp3RKnNK1oAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

A simple water wave point case can be implemented according to the following code.

* you can`L7`Found on the official website[Online case](/examples/point/scatter#animatepoint)ã€‚

* Specific usage can be viewed[Detailed documentation](</api/point_layer/animate#Water wave point>)ã€‚

```js
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 112, 23.69 ],
    zoom: 2.5
  })
});
fetch('https://gw.alipayobjects.com/os/basement_prod/9078fd36-ce8d-4ee2-91bc-605db8315fdf.csv')
  .then(res => res.text())
  .then(data => {
    const pointLayer = new PointLayer({})
      .source(data, {
        parser: {
          type: 'csv',
          x: 'Longitude',
          y: 'Latitude'
        }
      })
      .shape('circle')
      .animate(true)
      .size(40)
      .color('#ffa842')
    scene.addLayer(pointLayer);
  });
```

### shape

In order to achieve water wave points, the point layer`shape`The parameters only need to be`circle`ã€`triangle`ã€`square`Just wait for the flat graphics.

### animate

* boolean ï½œ animateOption

```javascript
.animate(true)

.animate({
  enable: true
})
```

#### Water wave configuration items

* `speed`water wave speed
* `rings`Water wave ring number

### size

In the water wave point layer, due to the transparent edges, the size of the points looks smaller than the non-water wave points of the same size.
---
title: æ°´æ³¢å›¾
order: 3
---
<embed src="@/docs/common/style.md"></embed>

å¹³é¢ç‚¹å›¾å±‚åœ¨å¼€å¯åŠ¨ç”»æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å›¾å±‚ç±»å‹ï¼šæ°´æ³¢ç‚¹ã€‚å›¾å±‚ç”±ä¸€åœˆåœˆå‘å¤–æ‰©æ•£çš„åœ†ç¯æ„æˆã€‚


<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*pcp3RKnNK1oAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

æ ¹æ®ä¸‹é¢çš„ä»£ç å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„æ°´æ³¢ç‚¹æ¡ˆä¾‹ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/point/scatter#animatepoint)ã€‚

- å…·ä½“çš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹[è¯¦ç»†æ–‡æ¡£](/api/point_layer/animate#æ°´æ³¢ç‚¹)ã€‚

```js
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 112, 23.69 ],
    zoom: 2.5
  })
});
fetch('https://gw.alipayobjects.com/os/basement_prod/9078fd36-ce8d-4ee2-91bc-605db8315fdf.csv')
  .then(res => res.text())
  .then(data => {
    const pointLayer = new PointLayer({})
      .source(data, {
        parser: {
          type: 'csv',
          x: 'Longitude',
          y: 'Latitude'
        }
      })
      .shape('circle')
      .animate(true)
      .size(40)
      .color('#ffa842')
    scene.addLayer(pointLayer);
  });
```
### shape

ä¸ºäº†å®ç°æ°´æ³¢ç‚¹ï¼Œç‚¹å›¾å±‚çš„ `shape` å‚æ•°åªè¦æ˜¯ `circle`ã€`triangle`ã€`square` ç­‰å¹³é¢å›¾å½¢å³å¯ã€‚

### animate

- boolean ï½œ animateOption

```javascript
.animate(true)

.animate({
  enable: true
})
```

#### æ°´æ³¢é…ç½®é¡¹

- `speed` æ°´æ³¢é€Ÿåº¦
- `rings` æ°´æ³¢ç¯æ•°

### size

åœ¨æ°´æ³¢ç‚¹å›¾å±‚ä¸­ï¼Œç”±äºè¾¹ç¼˜é€æ˜çš„åŸå› ï¼Œç‚¹çš„å¤§å°çœ‹ä¸Šå»è¦æ¯”ç›¸åŒ size çš„éæ°´æ³¢ç‚¹è¦å°ä¸€äº›ã€‚
---
title: Scale åº¦é‡
order: 2
---
<embed src="@/docs/common/style.md"></embed>

## Scale ç®€ä»‹

Scale åº¦é‡æ˜¯ç”¨äºå°†åœ°å›¾æ•°æ®å€¼ï¼ˆæ•°å­—ã€æ—¥æœŸã€ç±»åˆ«ç­‰æ•°æ®ï¼‰è½¬æˆè§†è§‰å˜é‡ï¼ˆé¢œè‰²ã€å¤§å°ã€å½¢çŠ¶ï¼‰ã€‚Scale æ˜¯æ•°æ®å¯è§†åŒ–çš„åŸºæœ¬å…ƒç´ ï¼Œå› ä¸ºå®ƒä»¬å†³å®šäº†æ•°æ®è§†è§‰ç¼–ç çš„æ–¹å¼ã€‚L7 ç›®å‰æ”¯æŒè¿ç»­ã€ç¦»æ•£ã€æšä¸¾ç±»å‹ç­‰å¸¸ç”¨çš„ Scaleã€‚

![L7 Scale](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*AOIvTpmPOmgAAAAAAAAAAAAADmJ7AQ/original)

## Scale ä¸­çš„ä¸¤ä¸ªé‡è¦æ¦‚å¿µ:

Range å’Œ Domain

Domain: åœ°å›¾æ•°æ®å€¼çš„å®šä¹‰åŒºé—´

Rangeï¼šè§†è§‰å€¼çš„åŒºé—´å®šä¹‰



ä¸åŒ Scale çš„å·®å¼‚åœ¨äº Domain-> Range çš„è½¬æ¢æ–¹æ³•ä¸åŒ

|æ•°æ®ç±»|åº¦é‡ç±»å‹|
|----|------|
| è¿ç»­ | linearã€logã€pow |
| è¿ç»­åˆ†ç±» | quantize quantile,threshold,diverging |
| åˆ†ç±» æšä¸¾| cat |


## L7 Scale

åœ¨ä½¿ç”¨ L7 è¿‡ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸éœ€è¦è¿›è¡Œ Scale çš„é…ç½®ï¼Œå› ä¸º L7 ä¼šæ ¹æ®æ•°æ®ç±»å‹å¯¹ scale æ¨æ–­ï¼Œæ¨æ–­è¿‡ç¨‹å¦‚ä¸‹ï¼š

æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦è®¾ç½®äº† Scaleï¼Œå¦‚æœæ²¡æœ‰:

åˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€æ¡æ•°æ®çš„å­—æ®µç±»å‹ï¼Œå¦‚æœæ•°æ®ä¸­ä¸å­˜åœ¨å¯¹åº”çš„å­—æ®µï¼š

è®¤ä¸ºæ˜¯å¸¸é‡ä¸ºå›ºå®šå€¼

å¦‚æœæ˜¯æ•°å­—åˆ™ä¸º 'linear';

å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹ 'cat';

## Cat æšä¸¾

Cat æŒ‡æšä¸¾ç±»å‹ï¼Œç”¨äºå±•ç¤ºåˆ†ç±»æ•°æ®ï¼Œæ¯”å¦‚å†œä½œç‰©ç§æ¤åŒºåˆ†å¸ƒå›¾ï¼Œæ°´ç¨»ã€ç‰ç±³ã€å¤§è±†ç­‰ä¸åŒç±»åˆ«éœ€è¦æ˜ å°„ä¸ºä¸åŒçš„é¢œè‰²ã€‚åœ¨ L7 å¦‚æœåˆ¤æ–­å­—æ®µçš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œå°†è®¤ä¸ºæ˜¯ Cat ç±»å‹å¹¶è‡ªåŠ¨è·å–ç±»å‹çš„å”¯ä¸€å€¼ï¼Œè®¾ç½®ä¸º domain ã€‚è¿™æ ·ä¸‰ç§ä½œç‰©å°±ä¼šè¢«ä¸€ä¸€æ˜ å°„æˆå¯¹åº”çš„é¢œè‰²ã€‚

```tsx

const data = [
   {
   type:'A',
   x: 110,
   y:30
 },
 {
   type:'B',
   x: 110,
   y:32
 },
 {
   type:'C',
   x: 110,
   y:31
 }
 ,{
   type:'D',
   x: 111,
   y:33
 }ï¼Œ
 ,{
   type:'E',
   x: 112,
   y:30
 }
 ,{
   type:'F',
   x: 110,
   y:30
 }
]
layer.color('type',['red','white','blue','yellow'])
```

å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œå›¾å±‚æ²¡æœ‰è®¾ç½® Scale, L7 æ ¹æ®ç¬¬ä¸€ä¸ªæ•°æ®"A"çš„ç±»å‹ ,æ¨æ–­ä¸ºæšä¸¾ç±»å‹ã€‚åŒæ—¶å–å‡ºè¯¥å­—æ®µçš„å»é‡åçš„æ‰€æœ‰å€¼ ['A','B','C','D','E','F'] è®¾ç½®ä¸º scale çš„ domain, é‚£ä¹ˆ range å°±æ˜¯å¯¹åº”çš„é¢œè‰² ['red','white','blue','yellow']ã€‚

![L7 scale Catæ˜ å°„](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*rO53SYNk8hgAAAAAAAAAAAAADmJ7AQ/original)

å¦‚æœä¸è®¾ç½® domainï¼ŒL7 å†…éƒ¨ä¼šè‡ªåŠ¨è®¡ç®— domainï¼Œdomain é¡ºåºè·Ÿæ•°æ®é¡ºåºç›¸å…³ã€‚å¦‚æœå¸Œæœ›å›ºå®šdomain å¯è‡ªå·±è®¾ç½® domainã€‚domain æ•°å€¼ å’Œ rangeæ•°å€¼ ä¸€ä¸€å¯¹åº”ã€‚

```

layer.scale('type', {
  type: 'cat',
  domain: ['B', 'A', 'C', 'D'],
});
layer.color('type', ['red', 'white', 'blue', 'yellow']);

```
![L7 Cat ](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kyP2RpUXdGUAAAAAAAAAAAAADmJ7AQ/original)

## Linear è¿ç»­çº¿æ€§

çº¿æ€§æ˜¯è¿ç»­æ•°æ®çš„æ˜ å°„æ–¹æ³•ï¼Œæ•°æ®å’Œè§†è§‰å€¼æ˜¯é€šè¿‡çº¿æ€§æ–¹æ³•è®¡ç®—çš„ã€‚å¦‚æ•°æ®èŒƒå›´domain [0,1000] çº¿æ€§æ˜ å°„åˆ° range [red,blue] æ¸å˜è‰²ï¼Œå°±æ˜¯ä¾æ®çº¿æ€§å‡½å®Œæˆä¸€ä¸€è½¬æ¢ã€‚

![L7 Scale çº¿æ€§](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z_rGRr-jgI0AAAAAAAAAAAAADmJ7AQ/original')

```tsx
layer.color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])
```
å¯¹äºè¿ç»­å‹
æ•°æ® L7 é»˜è®¤ä¼šè®¾ç½®ä¸º linear, domainä¸ºæ•°æ®çš„minã€maxå€¼ã€‚é¢œè‰²ä¼šæ ¹æ® range é¢œè‰²ç”Ÿæˆæ¸å˜è‰²ã€‚linear
é»˜è®¤å¯ä¸è®¾ç½® domain åŒºé—´

```ts
layer.scale('value', {
  type: 'linear',
  domain: [5, 100], // å¯å®šä¹‰domain,ä¹Ÿå¯ä»¥ä¸è®¾ç½®ï¼Œè‡ªå®šæ ¹æ®æ•°æ®è®¡ç®—
});
```

## quantize è¿ç»­ç­‰é—´è·

ç­‰é—´è·åˆ†ç±»ä¼šæ ¹æ®å±æ€§å€¼èŒƒå›´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„å­èŒƒå›´ã€‚ç›¸ç­‰é—´éš”æœ€é€‚ç”¨äºå¸¸è§çš„æ•°æ®èŒƒå›´ï¼Œå¦‚ç™¾åˆ†æ¯”å’Œæ¸©åº¦ã€‚è¿™ç§æ–¹æ³•å¼ºè°ƒçš„æ˜¯æŸä¸ªå±æ€§å€¼ç›¸å¯¹äºå…¶ä»–å€¼çš„é‡ã€‚

![L7 Scale è¿ç»­ç­‰é—´è·](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*YmwwQ5L-d7QAAAAAAAAAAAAADmJ7AQ/original)

ç­‰é—´è·åˆ†ç±»åªä¸æ•°æ® mixã€max æœ‰å…³ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® domain,å°†è‡ªåŠ¨è®¡ç®—æ•°æ®çš„ minã€max è¿›è¡Œåˆ†æ®µï¼Œåˆ†æ®µä¸ªæ•°ä¾æ® range é¢œè‰²çš„ä¸ªæ•°ã€‚ç­‰é—´è·ä¼šå‡ºç°ç©ºç±»ï¼Œè€Œä¸”æ¯ä¸ªåˆ†ç±»è¦ç´ åˆ†å¸ƒä¸å‡åŒ€ã€‚

```tsx
layer.color('type', ['red', 'white', 'blue', 'yellow']);
```
ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ domain

```ts

layer.scale('value', {
  type: 'quantize',
  domain: [5, 100],
});

layer.color('type', ['red', 'white', 'blue', 'yellow']);

```
![L7 scale quantize](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*N61_Q6-U7jIAAAAAAAAAAAAADmJ7AQ/original)

## quantile è¿ç»­ç­‰åˆ†ä½ 

ç­‰åˆ†ä½è¦æ±‚æ¯ä¸ªåˆ†ç±»åŒºé—´éƒ½å«æœ‰ç›¸ç­‰æ•°é‡çš„è¦ç´ ã€‚åˆ†ä½æ•°ä¸ºæ¯ä¸ªåˆ†ç±»åˆ†é…ç›¸ç­‰æ•°é‡æ•°æ®å€¼ï¼Œä¸å­˜åœ¨ç©ºç±»ï¼Œä¹Ÿä¸å­˜åœ¨å€¼è¿‡å¤šæˆ–è¿‡å°‘çš„ç±»ã€‚

![L7 scale quantile](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2SFpSLRD3yYAAAAAAAAAAAAADmJ7AQ/original)

ç­‰åˆ†ä½ä¸æ•°æ®çš„åˆ†å¸ƒç›¸å…³ï¼Œéœ€è¦æ‹¿åˆ°å…¨é‡æ•°æ®æ‰èƒ½è®¡ç®—ï¼Œå› æ­¤ç­‰åˆ†ä½çš„ scale ä¸èƒ½å•ç‹¬è®¾ç½® domainï¼Œåªèƒ½è‡ªåŠ¨è®¡ç®—ã€‚

```tsx

layer.scale('value', {
  type: 'quantile',
});

layer.color('value', ['red', 'white', 'blue', 'yellow']);
```

![L7 Scale quantile](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*EMcjSrYe1l0AAAAAAAAAAAAADmJ7AQ/original)


## threshold è‡ªå®šä¹‰åˆ†ç±»


è‡ªå®šä¹‰åˆ†ç±»å¯ä»¥è®¾å®šä»»æ„åˆ†ç±»åŒºé—´æ˜ å°„åˆ°å¯¹äºè§†è§‰å˜é‡ã€‚domain ä»ç„¶æ˜¯è¿ç»­çš„ï¼Œå¹¶æ ¹æ®æä¾›çš„domain è¿›è¡Œåˆ†ç±»ã€‚range å±æ€§å¿…é¡»æœ‰ N+1 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ N æ˜¯ domain çš„ä¸ªæ•°ã€‚

threshold ä¸ºè‡ªå®šä¹‰åˆ†æ®µï¼Œåœ¨ä½¿ç”¨æ—¶å¿…é¡»ä¸º Scale è®¾ç½® domain, domainå¯ä»¥ä¾æ®éœ€æ±‚ä»»æ„è®¾ç½®ã€‚

```tsx
layer.scale('rate', {
          type: 'threshold',
          domain: [3, 6, 8, 10],
        })
        .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])

```

![ L7 Scale threshold](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*e1YyRKELsjwAAAAAAAAAAAAADmJ7AQ/original)


## diverging ç¦»æ•£åˆ†ç±» 

ç¦»æ•£åˆ†ç±»é€šå¸¸ä¸ä¸¤ç§ç›¸åçš„è‰²è°ƒä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ˜¾ç¤ºä»è´Ÿå€¼åˆ°ä¸­å¿ƒåˆ°æ­£å€¼çš„å˜åŒ–ã€‚è¿™äº›ç±»å‹çš„åœ°å›¾æ˜¾ç¤ºäº†å½¼æ­¤ç›¸å…³çš„å€¼çš„å¤§å°ã€‚

![L7 diverging](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*8anRRLJNu6YAAAAAAAAAAAAADmJ7AQ/original)


diverging å¦‚æœæ²¡æœ‰è®¾ç½® domain ä¼šè‡ªåŠ¨æ ¹æ®æ•°æ®è®¡ç®—minã€middleã€max ä¸‰ä¸ªå€¼ä½œä¸ºdomainã€‚range è‡³å°‘éœ€è¦è®¾ç½®ä¸‰ä¸ªé¢œè‰²ï¼Œå½¢æˆåŒæè‰²å¸¦ã€‚

```ts
layer.scale('rate', {
         type: 'diverging'
         domain: [3, 6, 8, 10], //  the input domain and output range of a diverging scal
       })
       .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])
```

![L7 scale diverging](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*4rcDQIRdRdEAAAAAAAAAAAAADmJ7AQ/original)---
title: 3D Extrude
order: 1
---

<embed src="@/docs/common/style.md"></embed>

In addition to the flat filled map on the map, the geometry layer can also be a geometric block with height.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*yxRiTJDOrS8AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Below we will introduce how to draw a simple`3D`Fill in the figure.

* you can`L7`Found on the official website[Online case](/examples/polygon/3d/#polygonstylemap)

```javascript
import { Scene, PolygonLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    pitch: 50,
    center: [ 118.8, 32.056 ],
    zoom: 10
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/bmw-prod/94763191-2816-4c1a-8d0d-8bcf4181056a.json')
    .then(res => res.json())
    .then(data => {
      const filllayer = new PolygonLayer({
        name: 'fill',
        zIndex: 3
      })
        .source(data)
        .shape('extrude')
        .color('unit_price', [
        '#87CEFA',
        '#00BFFF',
        '#7FFFAA',
        '#00FF7F',
        '#32CD32',
        '#F0E68C',
        '#FFD700',
        '#FF7F50',
        '#FF6347',
        '#FF0000'
      ])
        .size('unit_price', unit_price => unit_price * 50)
        .style({
          opacity:{
            field:'unit_price',
            value: [ 0, 1 ]
          }
          pickLight: true
        })
      scene.addLayer(filllayer);
    });
});
```

### source

It is recommended to use the standard geometry layer`GeoJSON`data.

### shape

3D Polygon Stretch the polygon upward along the Z axis

* extrude constants do not support data mapping

```javascript
layer.shape('extrude');
```

### size

size represents the height of the stretch and supports data mapping

```javascript
layer.size(10); // Set height to constant
layer.size('floor', [0, 2000]); // Data mapping based on floor field defaults to line
layer.size('floor', (floor) => {
  //Set size through callback function
  return floor * 2;
});
```

### style

* `pickLight`Sets whether the picking highlight color of the 3D fill map calculates lighting.

`pickLight`The default is`false`Indicates that lighting calculations will not be performed on the picked colors. When turned on, some additional calculations will be added.

```javascript
style({
  pickLight: true, //default is false
});
```

* `heightFixed`set up`3D`The height of the fill image is always fixed.

default`3D`The height of the filled image will be`zoom`The level is related, and is used to keep the pixel length of the graphics height constant, and in some cases we need to keep the actual height of the graphics unchanged rather than the pixel height.

```javascript
style({
  heightfixed: true, //default is false
});
```

ğŸŒŸ Supported starting from v2.7.6.

[Online case](/examples/react/covid#covid_extrude)

* `raisingHeight`set up`3D`The elevation of the fill pattern.

ğŸŒŸ The prerequisite for setting the lifting height is`heightfixed`for`true`ã€‚\
ğŸŒŸ Supported starting from v2.8.17.

<img width="40%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*D8GeSKNZxWIAAAAAAAAAAAAAARQnAQ">

[Online case](/examples/polygon/3d#floatmap)

* `mapTexture`set up`3D`The top texture of the fill image.
  ğŸŒŸ Setting up`mapTexture`allows the user to configure the gradient color on the side.
  ğŸŒŸ Supported starting from v2.8.17.

<img width="40%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*K18EQZoe4awAAAAAAAAAAAAAARQnAQ">

```javascript
const provincelayer = new PolygonLayer({})
  .source(data)
  .size(150000)
  .shape('extrude')
  .color('#0DCCFF')
  .style({
    heightfixed: true,
    pickLight: true,
    raisingHeight: 200000,
    mapTexture:
      'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*0tmIRJG9cQQAAAAAAAAAAAAAARQnAQ',
    sourceColor: '#333',
    targetColor: '#fff',
  });
```

* `topsurface`:`boolean`Controls the visibility of the top surface, the default is`true`ã€‚

* `sidesurface`:`boolean`Control the visibility of the sides, the default is`true`ã€‚

[Online case](/examples/polygon/3d#texture3D)
---
title: æ°´é¢å›¾å±‚
order: 2
---

<embed src="@/docs/common/style.md"></embed>

Geometry layers support a special representation, the water surface layer.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Next we will introduce how to draw water surface.

* you can`L7`Found on the official website[Online case](/examples/polygon/fill#ocean)

ğŸŒŸ Simple water surface is supported starting from v2.8.1.\
ğŸŒŸ Supports realistic water surfaces starting from version v2.8.4.

### simulated water surface

<img width="60%" style="display: block;margin: 0 auto;" alt="æ‹ŸçœŸæ°´é¢" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ">

### source

It is recommended to use the standard geometry layer`GeoJSON`data.

### shape

we need to set`shape`for`ocean`ã€‚

### animate

The settings we need to display`animate`for`true`ã€‚

```javascript
layer.animate(true);
```

### style

* `watercolor`The color of shallow water areas defaults to '#6D99A8'.

* `watercolor2`The color of deep water areas defaults to '#0F121C'.

[Online case](/examples/polygon/fill#ocean)

### simple water surface

<img width="60%" style="display: block;margin: 0 auto;" alt="ç®€å•æ°´é¢" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1kqvSYvWP3MAAAAAAAAAAAAAARQnAQ">

### source

It is recommended to use the standard geometry layer`GeoJSON`data.

### shape

we need to set`shape`for`water`ã€‚

### animate

The settings we need to display`animate`for`true`ã€‚

```javascript
layer.animate(true);
```

### style

* `speed`we can pass`speed`to control the flow speed of the water surface.

```javascript
style({
  speed: 0.5,
});
```

* `waterTexture`We can replace the texture of the water surface by setting this property.\
  The default value is '<https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ>'

[Online case](/examples/polygon/fill#water)
---
title: water fill
order: 2
---
<embed src="@/docs/common/style.md"></embed>


å‡ ä½•ä½“å›¾å±‚æ”¯æŒç‰¹æ®Šçš„è¡¨ç°å½¢å¼ï¼Œæ°´é¢å›¾å±‚ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶æ°´é¢ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/fill#ocean)

ğŸŒŸ ä» v2.8.1 ç‰ˆæœ¬å¼€å§‹æ”¯æŒç®€å•æ°´é¢ã€‚  
ğŸŒŸ ä» v2.8.4 ç‰ˆæœ¬å¼€å§‹æ”¯æŒæ‹ŸçœŸæ°´é¢ã€‚

### æ‹ŸçœŸæ°´é¢

<img width="60%" style="display: block;margin: 0 auto;" alt="æ‹ŸçœŸæ°´é¢" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ">

### source

å‡ ä½•ä½“å›¾å±‚æ¨èä½¿ç”¨æ ‡å‡†çš„ `GeoJSON` æ•°æ®ã€‚

### shape

æˆ‘ä»¬éœ€è¦è®¾ç½® `shape` ä¸º `ocean`ã€‚

### animate

æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„è®¾ç½® `animate` ä¸º `true`ã€‚

```javascript
layer.aniamte(true);
```

### style

- `watercolor` æµ…æ°´åŒºåŸŸçš„é¢œè‰² é»˜è®¤ä¸º '#6D99A8'ã€‚

- `watercolor2` æ·±æ°´åŒºåŸŸçš„é¢œè‰² é»˜è®¤ä¸º '#0F121C'ã€‚

[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/fill#ocean)

### ç®€å•æ°´é¢

<img width="60%" style="display: block;margin: 0 auto;" alt="ç®€å•æ°´é¢" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1kqvSYvWP3MAAAAAAAAAAAAAARQnAQ">

### source

å‡ ä½•ä½“å›¾å±‚æ¨èä½¿ç”¨æ ‡å‡†çš„ `GeoJSON` æ•°æ®ã€‚
### shape

æˆ‘ä»¬éœ€è¦è®¾ç½® `shape` ä¸º `water`ã€‚

### animate

æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„è®¾ç½® `animate` ä¸º `true`ã€‚

```javascript
layer.aniamte(true);
```

### style

- `speed` æˆ‘ä»¬å¯ä»¥é€šè¿‡ `speed` æ¥æ§åˆ¶æ°´é¢çš„æµé€Ÿåº¦ã€‚

```javascript
style({
  speed: 0.5,
});
```

- `waterTexture` æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¯¥å±æ€§æ¥æ›¿æ¢æ°´é¢çš„çº¹ç†ã€‚   
  é»˜è®¤å€¼æ˜¯ 'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ'

[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/fill#water)
---
title: 3D å¡«å……å›¾
order: 1
---
<embed src="@/docs/common/style.md"></embed>


å‡ ä½•ä½“å›¾å±‚åœ¨åœ°å›¾ä¸Šé™¤äº†å¹³é¢çš„å¡«å……å›¾ï¼Œè¿˜å¯ä»¥æ˜¯æœ‰é«˜åº¦çš„å‡ ä½•ä½“å—ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*yxRiTJDOrS8AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„ `3D` å¡«å……å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/3d/#polygonstylemap)

```javascript
import { Scene, PolygonLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    pitch: 50,
    center: [ 118.8, 32.056 ],
    zoom: 10
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/bmw-prod/94763191-2816-4c1a-8d0d-8bcf4181056a.json')
    .then(res => res.json())
    .then(data => {
      const filllayer = new PolygonLayer({
        name: 'fill',
        zIndex: 3
      })
        .source(data)
        .shape('extrude')
        .color('unit_price', [
        '#87CEFA',
        '#00BFFF',
        '#7FFFAA',
        '#00FF7F',
        '#32CD32',
        '#F0E68C',
        '#FFD700',
        '#FF7F50',
        '#FF6347',
        '#FF0000'
      ])
        .size('unit_price', unit_price => unit_price * 50)
        .style({
          opacity:{
            field:'unit_price',
            value: [ 0, 1 ]
          }
          pickLight: true
        })
      scene.addLayer(filllayer);
    });
});

```

### source

å‡ ä½•ä½“å›¾å±‚æ¨èä½¿ç”¨æ ‡å‡†çš„ `GeoJSON` æ•°æ®ã€‚

### shape

3D Polygon å°†å¤šè¾¹å½¢æ²¿ Z è½´å‘ä¸Šæ‹‰ä¼¸

- extrude å¸¸é‡ä¸æ”¯æŒæ•°æ®æ˜ å°„

```javascript
layer.shape('extrude');
```

### size

size ä»£è¡¨æ‹‰ä¼¸çš„é«˜åº¦ï¼Œæ”¯æŒæ•°æ®æ˜ å°„

```javascript
layer.size(10); // é«˜åº¦è®¾ç½®æˆå¸¸é‡
layer.size('floor', [0, 2000]); // æ ¹æ®floorå­—æ®µè¿›è¡Œæ•°æ®æ˜ å°„é»˜è®¤ä¸ºçº¿
layer.size('floor', (floor) => {
  // é€šè¿‡å›è°ƒå‡½æ•°è®¾ç½®size
  return floor * 2;
});
```

### style

- `pickLight` è®¾ç½® 3D å¡«å……å›¾çš„æ‹¾å–é«˜äº®è‰²æ˜¯å¦è®¡ç®—å…‰ç…§ã€‚

`pickLight` é»˜è®¤ä¸º `false` è¡¨ç¤ºå¯¹æ‹¾å–çš„é¢œè‰²ä¸è¿›è¡Œå…‰ç…§è®¡ç®—ï¼Œå¼€å¯åä¼šå¢åŠ éƒ¨åˆ†é¢å¤–çš„è®¡ç®—ã€‚

```javascript
style({
  pickLight: true, //  é»˜è®¤ä¸º false
});
```

- `heightFixed` è®¾ç½® `3D` å¡«å……å›¾çš„é«˜åº¦æ—¶å€™å›ºå®šã€‚

é»˜è®¤ `3D` å¡«å……å›¾çš„é«˜åº¦ä¼šå’Œ `zoom` çš„å±‚çº§ç›¸å…³ï¼Œå¹¶ä»¥æ­¤æ¥ä¿æŒå›¾å½¢é«˜åº¦çš„åƒç´ é•¿åº¦ä¸å˜ï¼Œè€Œåœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ä¿æŒå›¾å½¢çš„å®é™…é«˜åº¦ä¸å˜è€Œä¸æ˜¯åƒç´ é«˜åº¦ä¸å˜ã€‚

```javascript
style({
  heightfixed: true, //  é»˜è®¤ä¸º false
});
```

ğŸŒŸ åœ¨ v2.7.6 ç‰ˆæœ¬å¼€å§‹æ”¯æŒã€‚

[åœ¨çº¿æ¡ˆä¾‹](/examples/react/covid#covid_extrude)

- `raisingHeight` è®¾ç½® `3D` å¡«å……å›¾çš„æŠ¬å‡é«˜åº¦ã€‚

ğŸŒŸ è®¾ç½®æŠ¬å‡é«˜åº¦çš„å‰ææ˜¯ `heightfixed` ä¸º `true`ã€‚  
ğŸŒŸ åœ¨ v2.8.17 ç‰ˆæœ¬å¼€å§‹æ”¯æŒã€‚

<img width="40%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*D8GeSKNZxWIAAAAAAAAAAAAAARQnAQ">

[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/3d#floatmap)

- `mapTexture` è®¾ç½® `3D` å¡«å……å›¾çš„é¡¶é¢çº¹ç†ã€‚
  ğŸŒŸ åœ¨è®¾ç½® `mapTexture` çš„æ—¶å€™å…è®¸ç”¨æˆ·é…ç½®ä¾§é¢çš„æ¸å˜è‰²ã€‚
  ğŸŒŸ åœ¨ v2.8.17 ç‰ˆæœ¬å¼€å§‹æ”¯æŒã€‚

<img width="40%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*K18EQZoe4awAAAAAAAAAAAAAARQnAQ">

```javascript
const provincelayer = new PolygonLayer({})
  .source(data)
  .size(150000)
  .shape('extrude')
  .color('#0DCCFF')
  .style({
    heightfixed: true,
    pickLight: true,
    raisingHeight: 200000,
    mapTexture:
      'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*0tmIRJG9cQQAAAAAAAAAAAAAARQnAQ',
    sourceColor: '#333',
    targetColor: '#fff',
  });
```

- `topsurface`: `boolean`
  æ§åˆ¶é¡¶é¢çš„æ˜¾éšï¼Œé»˜è®¤ä¸º `true`ã€‚

- `sidesurface`: `boolean`
  æ§åˆ¶ä¾§é¢çš„æ˜¾éšï¼Œé»˜è®¤ä¸º `true`ã€‚

[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/3d#texture3D)
---
title: fill
order: 0
---

<embed src="@/docs/common/style.md"></embed>

The simplest representation of a geometry layer on a map is a fill map, which fills a specified area with a specified color.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4Kp4Qp00kq4AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple filled diagram.

* you can`L7`Found on the official website[Online case](/examples/polygon/fill#usa)

```javascript
import { Scene, PolygonLayer, LineLayer, Popup } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ -96, 37.8 ],
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch(
    'https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json'
  )
    .then(res => res.json())
    .then(data => {
      const color = [ 'rgb(255,255,217)', 'rgb(237,248,177)', 'rgb(199,233,180)', 'rgb(127,205,187)', 'rgb(65,182,196)', 'rgb(29,145,192)', 'rgb(34,94,168)', 'rgb(12,44,132)' ];
      const layer = new PolygonLayer({})
        .source(data)
        .scale('density', {
          type: 'quantile'
        })
        .color(
          'density', color
        )
        .shape('fill')
        .active(true);
      const layer2 = new LineLayer({
        zIndex: 2
      })
        .source(data)
        .color('#fff')
        .active(true)
        .size(1)
        .style({
          lineType: 'dash',
          dashArray: [ 2, 2 ],
        });
      scene.addLayer(layer);
      scene.addLayer(layer2);
    });
});
```

### source

It is recommended to use the standard geometry layer`GeoJSON`data.

### shape

Draw a filled diagram, the shape is`fill`Constant, data mapping is not supported

```javascript
layer.shape('fill');
```

### size

Fill image does not need to be set`size`;

### style

* `opacityLinear`Sets the radial gradient of the geometric fill.

```javascript
style({ opacity Linear: { enable: true, // true - false dir: 'in', // n - out },
});
```

[radial gradient in](/examples/polygon/fill#china_linear_in)

<img width="60%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*XjT5T4cT_CYAAAAAAAAAAAAAARQnAQ">

[radial gradient out](/examples/polygon/fill#china_linear_out)

<img width="60%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Ob62Q7JDpZ4AAAAAAAAAAAAAARQnAQ">

* `raisingHeight`set up`3D`The elevation of the fill pattern.
---
title: å¡«å……å›¾
order: 0
---
<embed src="@/docs/common/style.md"></embed>

å‡ ä½•ä½“å›¾å±‚åœ¨åœ°å›¾ä¸Šæœ€ç®€å•çš„è¡¨ç°å°±æ˜¯å¡«å……å›¾ï¼Œå³ä½¿ç”¨æŒ‡å®šçš„é¢œè‰²å¡«å……æŒ‡å®šåŒºåŸŸã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4Kp4Qp00kq4AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„å¡«å……å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/polygon/fill#usa)

```javascript
import { Scene, PolygonLayer, LineLayer, Popup } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ -96, 37.8 ],
    zoom: 3
  })
});
scene.on('loaded', () => {
  fetch(
    'https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json'
  )
    .then(res => res.json())
    .then(data => {
      const color = [ 'rgb(255,255,217)', 'rgb(237,248,177)', 'rgb(199,233,180)', 'rgb(127,205,187)', 'rgb(65,182,196)', 'rgb(29,145,192)', 'rgb(34,94,168)', 'rgb(12,44,132)' ];
      const layer = new PolygonLayer({})
        .source(data)
        .scale('density', {
          type: 'quantile'
        })
        .color(
          'density', color
        )
        .shape('fill')
        .active(true);
      const layer2 = new LineLayer({
        zIndex: 2
      })
        .source(data)
        .color('#fff')
        .active(true)
        .size(1)
        .style({
          lineType: 'dash',
          dashArray: [ 2, 2 ],
        });
      scene.addLayer(layer);
      scene.addLayer(layer2);
    });
});

```

### source

å‡ ä½•ä½“å›¾å±‚æ¨èä½¿ç”¨æ ‡å‡†çš„ `GeoJSON` æ•°æ®ã€‚

### shape

ç»˜åˆ¶å¡«å……å›¾ï¼Œshape ä¸º `fill` å¸¸é‡ï¼Œä¸æ”¯æŒæ•°æ®æ˜ å°„

```javascript
layer.shape('fill');
```

### size

å¡«å……å›¾ä¸éœ€è¦è®¾ç½® `size`;

### style

- `opacityLinear` è®¾ç½®å‡ ä½•å¡«å……å›¾çš„å¾„å‘æ¸å˜ã€‚

```javascript
style({
  opacityLinear: {
    enable: true, // true - false
    dir: 'in', // in - out
  },
});
```

[å¾„å‘æ¸å˜ in](/examples/polygon/fill#china_linear_in)

<img width="60%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*XjT5T4cT_CYAAAAAAAAAAAAAARQnAQ">

[å¾„å‘æ¸å˜ out](/examples/polygon/fill#china_linear_out)

<img width="60%" style="display: block;margin: 0 auto;" alt="é¢å›¾å±‚å¡«å……å›¾" src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Ob62Q7JDpZ4AAAAAAAAAAAAAARQnAQ">

- `raisingHeight` è®¾ç½® `3D` å¡«å……å›¾çš„æŠ¬å‡é«˜åº¦ã€‚
---
title: Scale
order: 2
---

<embed src="@/docs/common/style.md"></embed>

## Introduction to Scale

Scale measures are used to convert map data values â€‹â€‹(numbers, dates, categories, etc.) into visual variables (color, size, shape). Scales are fundamental elements of data visualization because they determine how data is visually encoded. L7 currently supports common Scales such as continuous, discrete, and enumerated types.

![L7 Scale](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*AOIvTpmPOmgAAAAAAAAAAAAADmJ7AQ/original)

## Two important concepts in Scale:

Range and Domain

Domain: definition interval of map data values

Range: interval definition of visual value

The difference between different Scales lies in the different conversion methods of Domain->Range

| data class                 | Measurement type                      |
| -------------------------- | ------------------------------------- |
| continuous                 | linearã€logã€pow                        |
| continuous classification  | quantize quantile,threshold,diverging |
| Classification Enumeration | cat                                   |

## L7 Scale

When using L7, there is no need to configure Scale by default because L7 will infer scale based on the data type. The inference process is as follows:

Check whether the user has set Scale, if not:

Determine the field type of the first data of the field, if the corresponding field does not exist in the data:

Consider a constant as a fixed value

'linear' if numeric;

If it is string type 'cat';

## Cat enumeration

Cat refers to the enumeration type, which is used to display categorical data, such as the distribution of crop planting areas. Different categories such as rice, corn, and soybeans need to be mapped to different colors. In L7, if the value of a field is judged to be a string, it will be considered to be of Cat type and the unique value of the type will be automatically obtained and set to domain. In this way, the three crops will be mapped to the corresponding colors one by one.

```tsx
const data = [
   {
   type:'A',
   x: 110,
   y:30
 },
 {
   type:'B',
   x: 110,
   y:32
 },
 {
   type:'C',
   x: 110,
   y:31
 }
 ,{
   type:'D',
   x: 111,
   y:33
 }ï¼Œ
 ,{
   type:'E',
   x: 112,
   y:30
 }
 ,{
   type:'F',
   x: 110,
   y:30
 }
]
layer.color('type',['red','white','blue','yellow'])
```

As shown in the code above, the layer does not set Scale, L7 infers the enumeration type based on the type of the first data "A". At the same time, take out all the deduplicated values â€‹â€‹of the field \['A', 'B', 'C', 'D', 'E', 'F'] and set them to the domain of the scale, then the range is the corresponding color \[' red','white','blue','yellow'].

![L7 scale Catæ˜ å°„](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*rO53SYNk8hgAAAAAAAAAAAAADmJ7AQ/original)

If the domain is not set, L7 will automatically calculate the domain internally, and the domain order is related to the data order. If you want to fix the domain, you can set the domain yourself. There is a one-to-one correspondence between domain values â€‹â€‹and range values.

```
layer.scale('type', {
  type: 'cat',
  domain: ['B', 'A', 'C', 'D'],
});
layer.color('type', ['red', 'white', 'blue', 'yellow']);
```

![L7 Cat ](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kyP2RpUXdGUAAAAAAAAAAAAADmJ7AQ/original)

## Linear continuous linear

Linear is a mapping method for continuous data, where data and visual values â€‹â€‹are calculated using linear methods. For example, if the data range domain \[0,1000] is linearly mapped to the range \[red, blue] gradient color, the one-to-one conversion is completed based on the linear function.

![L7 Scale çº¿æ€§](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z_rGRr-jgI0AAAAAAAAAAAAADmJ7AQ/original')

```tsx
layer.color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])
```

For continuous
Data L7 is set to linear by default, and domain is the min and max values â€‹â€‹of the data. The color will generate a gradient color based on the range color. linear
The domain interval can not be set by default

```ts
layer.scale('value', {
  type: 'linear',
  domain: [5, 100], // The domain can be defined or not set. It can be calculated based on the data.
});
```

## quantize continuous equally spaced

Equally spaced classification is divided into several equal-sized subranges based on the attribute value range. Equal intervals work best with common data ranges, such as percentages and temperatures. This method emphasizes the amount of a certain attribute value relative to other values.

![L7 Scale è¿ç»­ç­‰é—´è·](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*YmwwQ5L-d7QAAAAAAAAAAAAADmJ7AQ/original)

Equally spaced classification is only related to the data mix and max. If domain is not set, the min and max of the data will be automatically calculated for segmentation. The number of segments is based on the number of range colors. Empty classes will appear at equal intervals, and each classification element will be unevenly distributed.

```tsx
layer.color('type', ['red', 'white', 'blue', 'yellow']);
```

You can also customize the domain

```ts
layer.scale('value', {
  type: 'quantize',
  domain: [5, 100],
});

layer.color('type', ['red', 'white', 'blue', 'yellow']);
```

![L7 scale quantize](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*N61_Q6-U7jIAAAAAAAAAAAAADmJ7AQ/original)

## quantile continuous equal quantiles

Equiquantiles require that each classification interval contains an equal number of features. Quantiles assign an equal number of data values â€‹â€‹to each category; there are no empty classes or classes with too many or too few values.

![L7 scale quantile](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2SFpSLRD3yYAAAAAAAAAAAAADmJ7AQ/original)

The decile is related to the distribution of the data and needs to be calculated in full amount of data. Therefore, the scale of the decile cannot be set separately and can only be calculated automatically.

```tsx
layer.scale('value', {
  type: 'quantile',
});

layer.color('value', ['red', 'white', 'blue', 'yellow']);
```

![L7 Scale quantile](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*EMcjSrYe1l0AAAAAAAAAAAAADmJ7AQ/original)

## threshold custom classification

Custom classification can set any classification interval to map to the visual variable. The domain is still contiguous and classified according to the provided domain. The range attribute must have N+1 elements, where N is the number of domains.

Threshold is a custom segment. When using it, you must set the domain for Scale. The domain can be set arbitrarily according to your needs.

```tsx
layer.scale('rate', {
          type: 'threshold',
          domain: [3, 6, 8, 10],
        })
        .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])
```

![ L7 Scale threshold](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*e1YyRKELsjwAAAAAAAAAAAAADmJ7AQ/original)

## diverging discrete classification

Discrete classification is often used with two opposite hues to show the change from negative values â€‹â€‹to center to positive values. These types of maps show the magnitude of values â€‹â€‹in relation to each other.

![L7 diverging](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*8anRRLJNu6YAAAAAAAAAAAAADmJ7AQ/original)

If diverging does not set the domain, it will automatically calculate the three values â€‹â€‹of min, middle, and max based on the data as the domain. Range needs to set at least three colors to form a bipolar color band.

```ts
layer.scale('rate', {
         type: 'diverging'
         domain: [3, 6, 8, 10], //  the input domain and output range of a diverging scal
       })
       .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])
```

![L7 scale diverging](https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*4rcDQIRdRdEAAAAAAAAAAAAADmJ7AQ/original)
---
title: Raster Tile
order: 1
---

<embed src="@/docs/common/style.md"></embed>

Raster tile layers include image rasters and data rasters, where image rasters are usually loaded`png/jpg`Images, data rasters are loaded`tiff/lerc`and other raster data files.

### Draw picture raster - TMS

```javascript
// Image tile layer - satellite image
const layer = new RasterLayer().source(
  'http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      updateStrategy: 'overlap',
    },
  },
);
```

### Draw image raster - WMS

```javascript
// Draw WMS format tiles
const url =
  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR =3857&DPI=90';

const layer = new RasterLayer().source(url, {
  parser: {
    type: 'rasterTile',
    tileSize: 256,
    zoomOffset: 1,
  },
});
```

### Draw picture raster - WMTS

```javascript
// Draw WMTS format tiles
const url1 =
  'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';
const layer1 = new RasterLayer().source(url1, {
  parser: {
    type: 'rasterTile',
    tileSize: 256,
    wmtsOptions: {
      layer: 'img',
      tileMatrixset: 'w',
      format: 'tiles',
    },
  },
});
```

### Draw data raster - arraybuffer

```javascript
const tileSource = new Source(
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
  {
    parser: {
      type: 'rasterTile',
      dataType: 'arraybuffer',
      tileSize: 256,
      maxZoom: 13.1,
      format: async (data) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image = await tiff.getImage();
        const width = image.getWidth();
        const height = image.getHeight();
        const values = await image.readRasters();
        return { rasterData: values[0], width, height };
      },
    },
  },
);

layer.source(tileSource).style({
  domain: [0.001, 11.001],
  clampLow: false,
  rampColors: {
    colors: colorList,
    positions,
  },
});
```

### Plot data raster - rgb

```javascript
const url = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';
const tiffdata = await getTiffData(url);
const layer = new RasterLayer({ zIndex: 10 })
  .source([
      {
        data: tiffdata,
        bands: [7, 6, 5].map((v) => v - 1),
      },
    ],
    {
      parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
          const tiff = await GeoTIFF.fromArrayBuffer(data);
          const image1 = await tiff.getImage();
          const value = await image1.readRasters();
          return bands.map((band) => {
            return {
              rasterData: value[band],
              width: value.width,
              height: value.height,
            };
          });
        },
        operation: 'rgb',
        extent: [
          130.39565357746957,
          46.905730725742366,
          130.73364094187343,
          47.10217234153133,
        ],
      },
    },
  )
```
---
title: æ …æ ¼ç“¦ç‰‡
order: 1
---
<embed src="@/docs/common/style.md"></embed>

æ …æ ¼ç“¦ç‰‡å›¾å±‚åŒ…æ‹¬å›¾ç‰‡æ …æ ¼å’Œæ•°æ®æ …æ ¼ï¼Œå…¶ä¸­å›¾ç‰‡æ …æ ¼é€šå¸¸åŠ è½½ `png/jpg` å›¾ç‰‡ï¼Œæ•°æ®æ …æ ¼åˆ™åŠ è½½ `tiff/lerc` ç­‰æ …æ ¼æ•°æ®æ–‡ä»¶.

### ç»˜åˆ¶å›¾ç‰‡æ …æ ¼ - TMS

```javascript
// å›¾ç‰‡ç“¦ç‰‡å›¾å±‚ - å«æ˜Ÿå›¾
const layer = new RasterLayer().source(
  'http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      updateStrategy: 'overlap',
    },
  },
);
```

### ç»˜åˆ¶å›¾ç‰‡æ …æ ¼ - WMS

```javascript
// ç»˜åˆ¶ WMS æ ¼å¼ç“¦ç‰‡
const url =
  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR=3857&DPI=90';

const layer = new RasterLayer().source(url, {
  parser: {
    type: 'rasterTile',
    tileSize: 256,
    zoomOffset: 1,
  },
});
```

### ç»˜åˆ¶å›¾ç‰‡æ …æ ¼ - WMTS

```javascript
// ç»˜åˆ¶ WMTS æ ¼å¼ç“¦ç‰‡
const url1 =
  'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';
const layer1 = new RasterLayer().source(url1, {
  parser: {
    type: 'rasterTile',
    tileSize: 256,
    wmtsOptions: {
      layer: 'img',
      tileMatrixset: 'w',
      format: 'tiles',
    },
  },
});
```

### ç»˜åˆ¶æ•°æ®æ …æ ¼ - arraybuffer

```javascript
const tileSource = new Source(
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
  {
    parser: {
      type: 'rasterTile',
      dataType: 'arraybuffer',
      tileSize: 256,
      maxZoom: 13.1,
      format: async (data) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image = await tiff.getImage();
        const width = image.getWidth();
        const height = image.getHeight();
        const values = await image.readRasters();
        return { rasterData: values[0], width, height };
      },
    },
  },
);

layer.source(tileSource).style({
  domain: [0.001, 11.001],
  clampLow: false,
  rampColors: {
    colors: colorList,
    positions,
  },
});
```

### ç»˜åˆ¶æ•°æ®æ …æ ¼ - rgb

```javascript
const url = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';
const tiffdata = await getTiffData(url);
const layer = new RasterLayer({ zIndex: 10 })
  .source([
      {
        data: tiffdata,
        bands: [7, 6, 5].map((v) => v - 1),
      },
    ],
    {
      parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
          const tiff = await GeoTIFF.fromArrayBuffer(data);
          const image1 = await tiff.getImage();
          const value = await image1.readRasters();
          return bands.map((band) => {
            return {
              rasterData: value[band],
              width: value.width,
              height: value.height,
            };
          });
        },
        operation: 'rgb',
        extent: [
          130.39565357746957,
          46.905730725742366,
          130.73364094187343,
          47.10217234153133,
        ],
      },
    },
  )
```---
title: ç“¦ç‰‡
order: 0
---
<embed src="@/docs/common/style.md"></embed>

ç“¦ç‰‡å›¾å±‚ç›¸æ¯”äºæ™®é€šçš„å›¾å±‚è€Œè¨€ï¼Œåœ¨ä½¿ç”¨ä¸Šæœ‰è®¸å¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚
### option

åœ¨åˆå§‹åŒ–ç“¦ç‰‡çš„æ—¶å€™ï¼Œé™¤äº†æ™®é€šå›¾å±‚æ”¯æŒçš„ `options` å‚æ•°ä¹‹å¤–ï¼Œè¿˜éœ€è¦éœ€è¦æˆ‘ä»¬æå‰è®¾ç½®çŸ¢é‡æ•°æ®ç›¸å…³çš„å‚æ•°ã€‚
- `featureId`: string
  - ç”¨äºå¯ä»¥è‡ªå®šä¹‰æŒ‡å®šã€‚ç”¨äºæŒ‡å®šç“¦ç‰‡çš„æ‹¾å–é«˜äº®ã€‚
- `sourceLayer`: string
  - ç”¨äºå¿…é¡»ä¼ å…¥ï¼Œä¸”è¦åœ¨è¿”å›çš„çŸ¢é‡æ•°æ®ä¸­å­˜åœ¨ï¼ŒæŒ‡å®šç»˜åˆ¶çŸ¢é‡æ•°æ®ä¸­é‚£ä¸€å›¾å±‚æ•°æ®ã€‚

```javascript
const layer = new RasterLayer({
  featureId: 'id',
  sourceLayer: 'water',
});
```

#### Mask

ç“¦ç‰‡å›¾å±‚çš„æ©æ¨¡ä½¿ç”¨å’Œæ™®é€šçš„å›¾å±‚ä¸€æ ·ï¼ŒåŒæ ·åœ¨ `options` ä¸­è®¾ç½® `maskã€maskfence` å‚æ•°å³å¯ï¼Œä¸è¿‡çŸ¢é‡ç“¦ç‰‡å›¾å±‚æš‚æ—¶ä¸æ”¯æŒè®¾ç½®æ©æ¨¡ã€‚

```js
 fetch('https://gw.alipayobjects.com/os/bmw-prod/fccd80c0-2611-49f9-9a9f-e2a4dd12226f.json')
  .then(res => res.json())
  .then(maskData => {
    const layer = new RasterLayer({
      mask: true,
      maskfence: maskData
    });
    
    const tileSource = new Source('https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',{
        parser: {
          type: 'rasterTile',
          dataType: 'arraybuffer',
          tileSize: 256,
          maxZoom: 13.1,
          format: async data => {
            const tiff = await GeoTIFF.fromArrayBuffer(data);
            const image = await tiff.getImage();
            const width = image.getWidth();
            const height = image.getHeight();
            const values = await image.readRasters();
            return { rasterData: values[0], width, height };
          }
        }
      });
    layer.source(tileSource)
      .style({
        domain: [ 0.001, 11.001 ],
        clampLow: false,
        rampColors: {
          colors: colorList,
          positions
        }
      });
    scene.addLayer(layer);
  });
```

### source

åœ¨æœ‰äº›åœºæ™¯ä¸‹ï¼Œå°¤å…¶æ˜¯æ˜¯çŸ¢é‡ç“¦ç‰‡åœ°å›¾çš„åœºæ™¯ï¼ŒåŒä¸€ä»½ç“¦ç‰‡æ•°æ®ä¼šåŒæ—¶åŒ…å«å¤šå›¾å±‚çš„æ•°æ®ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦è®©å¤šå›¾å±‚å¤ç”¨åŒä¸€ä¸ª `source` å¯¹è±¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨åŒä¸€ä»½æ•°æ®ç»˜åˆ¶çœå¸‚çš„é¢ã€è¾¹ç•Œå’Œåç§°ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±åº”è¯¥å¤ç”¨ `source` å¯¹è±¡ã€‚

<img width="80%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cMFMTqF7WoIAAAAAAAAAAAAAARQnAQ'>

```javascript
  const tileSource = new Source(
    'http://localhost:3000/file.mbtiles/{z}/{x}/{y}.pbf',
    {
      parser: {
        type: 'mvt',
        tileSize: 256,
        zoomOffset: 0,
        maxZoom: 9,
        extent: [-180, -85.051129, 179, 85.051129],
      },
    });
  const option = {
    featureId: 'NAME_CHN',
    sourceLayer: 'city'
  }
  const linelayer = new LineLayer(option)
    .source(tileSource)
    .color('#f00')
    .size(1)
    .style({
      opacity: 0.5,
    });
  this.scene.addLayer(linelayer);

  const polygonlayer = new PolygonLayer(option)
    .source(tileSource)
    .color('citycode', (v: string) => {
        return getRandomColor(v);
      }
    })
    .style({
      opacity: 0.4,
    })
    .select(true);
  this.scene.addLayer(polygonlayer);

  const pointlayer = new PointLayer(option)
    .source(tileSource)
    .shape('NAME_CHN', 'text')
    .color('#f00')
    .size(12)
    .style({
      stroke: '#fff',
      strokeWidth: 2,
    });

  this.scene.addLayer(pointlayer);
```
### event

åœ¨ä½¿ç”¨ä¸Šï¼Œç“¦ç‰‡å›¾å±‚ç»‘å®šäº‹ä»¶çš„æ“ä½œå’Œæ™®é€šå›¾å±‚äº‹ä»¶ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯åœ¨äº‹ä»¶çš„è¿”å›å‚æ•°ä¸­ï¼Œç“¦ç‰‡å›¾å±‚å¯¹åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œåˆå¹¶æ“ä½œï¼Œä»¥æ±‚è·å–åˆ°å½“å‰å›¾å±‚çš„å®Œæ•´æ•°æ®ã€‚

```javascript
layer.on('click', e => {...})ï¼›
```---
title: Tile
order: 0
---

<embed src="@/docs/common/style.md"></embed>

Compared with ordinary layers, tile layers have many things to pay attention to when using them.

### option

When initializing tiles, in addition to those supported by ordinary layers`options`In addition to parameters, we also need to set parameters related to vector data in advance.

* `featureId`: string
  * For customizable designation. Used to specify the pick highlight of the tile.
* `sourceLayer`: string
  * It must be passed in and must exist in the returned vector data to specify which layer data in the vector data to draw.

```javascript
const layer = new RasterLayer({
  featureId: 'id',
  sourceLayer: 'water',
});
```

#### Mask

The mask of the tile layer is the same as that of the ordinary layer.`options`Medium settings`maskã€maskfence`Parameters are enough, but the vector tile layer does not support setting masks for the time being.

```js
fetch('https://gw.alipayobjects.com/os/bmw-prod/fccd80c0-2611-49f9-9a9f-e2a4dd12226f.json')
  .then(res => res.json())
  .then(maskData => {
    const layer = new RasterLayer({
      mask: true,
      maskfence: maskData
    });
    
    const tileSource = new Source('https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',{
        parser: {
          type: 'rasterTile',
          dataType: 'arraybuffer',
          tileSize: 256,
          maxZoom: 13.1,
          format: async data => {
            const tiff = await GeoTIFF.fromArrayBuffer(data);
            const image = await tiff.getImage();
            const width = image.getWidth();
            const height = image.getHeight();
            const values = await image.readRasters();
            return { rasterData: values[0], width, height };
          }
        }
      });
    layer.source(tileSource)
      .style({
        domain: [ 0.001, 11.001 ],
        clampLow: false,
        rampColors: {
          colors: colorList,
          positions
        }
      });
    scene.addLayer(layer);
  });
```

### source

In some scenarios, especially those involving vector tile maps, the same tile data will contain data from multiple layers at the same time. In this case, we need to reuse the same tile for multiple layers.`source`object. As shown in the figure below, we use the same data to draw the areas, boundaries and names of provinces and cities. At this time we should reuse`source`object.

<img width="80%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cMFMTqF7WoIAAAAAAAAAAAAAARQnAQ'>

```javascript
const tileSource = new Source(
    'http://localhost:3000/file.mbtiles/{z}/{x}/{y}.pbf',
    {
      parser: {
        type: 'mvt',
        tileSize: 256,
        zoomOffset: 0,
        maxZoom: 9,
        extent: [-180, -85.051129, 179, 85.051129],
      },
    });
  const option = {
    featureId: 'NAME_CHN',
    sourceLayer: 'city'
  }
  const linelayer = new LineLayer(option)
    .source(tileSource)
    .color('#f00')
    .size(1)
    .style({
      opacity: 0.5,
    });
  this.scene.addLayer(linelayer);

  const polygonlayer = new PolygonLayer(option)
    .source(tileSource)
    .color('citycode', (v: string) => {
        return getRandomColor(v);
      }
    })
    .style({
      opacity: 0.4,
    })
    .select(true);
  this.scene.addLayer(polygonlayer);

  const pointlayer = new PointLayer(option)
    .source(tileSource)
    .shape('NAME_CHN', 'text')
    .color('#f00')
    .size(12)
    .style({
      stroke: '#fff',
      strokeWidth: 2,
    });

  this.scene.addLayer(pointlayer);
```

### event

In use, the operation of the tile layer binding event is consistent with that of the ordinary layer event, but in the return parameters of the event, the tile layer merges the distributed data in order to obtain the completeness of the current layer. data.

```javascript
layer.on('click', e => {...})ï¼›
```
---
title: çŸ¢é‡ç“¦ç‰‡
order: 2
---
<embed src="@/docs/common/style.md"></embed>

çŸ¢é‡ç“¦ç‰‡é€šå¸¸å¯ä»¥ç”¨äºå¤§æ•°æ®é‡åœ°ç†æ•°æ®çš„æ¸²æŸ“ï¼Œå€ŸåŠ©ç“¦ç‰‡çš„ç‰¹æ€§åˆ†å¸ƒè¯·æ±‚æ¸²æŸ“æ•°æ®ï¼Œä»è€Œè¾¾åˆ°å‡å°‘è¯·æ±‚ã€åŠ è½½æ—¶é—´çš„ç­‰å¾…ï¼Œä¼˜åŒ–ä½¿ç”¨ä½“éªŒçš„ç›®çš„ã€‚åŒæ—¶ï¼Œåœ¨ä¸éœ€è¦å…¨é‡åŠ è½½æ•°æ®çš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡çŸ¢é‡ç“¦ç‰‡çš„å½¢å¼å¯ä»¥åœ¨ä¿è¯ä½“éªŒçš„å‰æä¸‹æœ‰æ•ˆå‡å°‘æ•°æ®çš„æ¸²æŸ“é‡ï¼Œå‡å°‘æ¸²æŸ“å‹åŠ›ã€‚

### ç»˜åˆ¶çŸ¢é‡ç“¦ç‰‡ - point

```javascript
import { PointLayer } from '@antv/l7';
const point = new PointLayer({
  featureId: 'COLOR',
  sourceLayer: 'ecoregions2',
})
  .source(vectorSource)
  .shape('circle')
  .color('red')
  .size(10);
```

### ç»˜åˆ¶çŸ¢é‡ç“¦ç‰‡ - line

```javascript
import { LineLayer } from '@antv/l7';
const line = new LineLayer({
  featureId: 'COLOR',
  sourceLayer: 'ecoregions2',
})
  .source(vectorSource)
  .color('COLOR')
  .size(2);
```

### ç»˜åˆ¶çŸ¢é‡ç“¦ç‰‡ - polygon

```javascript
// çŸ¢é‡ç“¦ç‰‡å›¾å±‚
import { PolygonLayer } from '@antv/l7';
const polygon = new PolygonLayer({ 
  featureId: 'COLOR'ï¼Œ
  sourceLayer: 'ecoregions2',
})
.source(source)
.color('red');
```

### ç»˜åˆ¶çŸ¢é‡ç“¦ç‰‡ - æ©æ¨¡å›¾å±‚

çŸ¢é‡æ©æ¨¡å›¾å±‚ä¸€èˆ¬é…åˆæ …æ ¼å›¾å±‚ä½¿ç”¨ï¼Œå¯¹æ …æ ¼å›¾å±‚è¿›è¡Œæ©æ¨¡å¤„ç†ã€‚

```js
import { MaskLayer } from '@antv/l7';
const mask = new MaskLayer({sourceLayer: 'ecoregions2' })
.source( 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf' {
  parser: {
      type: 'mvt',
      maxZoom: 9,
      extent: [-180, -85.051129, 179, 85.051129],
  }});
```

### ç»˜åˆ¶çŸ¢é‡ç“¦ç‰‡ - æµ‹è¯•å›¾å±‚

```js
// æµ‹è¯•ç“¦ç‰‡å›¾å±‚
const debugerLayer = new TileDebugLayer();
```---
title: Vector Tile
order: 2
---

<embed src="@/docs/common/style.md"></embed>

Vector tiles can usually be used to render large amounts of geographical data. The characteristics of tiles are used to distribute request rendering data, thereby reducing the waiting time of requests and loading times and optimizing the user experience. At the same time, in scenarios that do not require full loading of data, vector tiles can effectively reduce the amount of data rendering and reduce rendering pressure while ensuring the experience.

### Draw vector tiles - point

```javascript
import { PointLayer } from '@antv/l7';
const point = new PointLayer({
  featureId: 'COLOR',
  sourceLayer: 'ecoregions2',
})
  .source(vectorSource)
  .shape('circle')
  .color('red')
  .size(10);
```

### Draw vector tiles - line

```javascript
import { LineLayer } from '@antv/l7';
const line = new LineLayer({
  featureId: 'COLOR',
  sourceLayer: 'ecoregions2',
})
  .source(vectorSource)
  .color('COLOR')
  .size(2);
```

### Draw vector tiles - polygon

```javascript
// Vector tile layer
import { PolygonLayer } from '@antv/l7';
const polygon = new PolygonLayer({
  featureId: 'COLOR'ï¼Œ
  sourceLayer: 'ecoregions2',
})
.source(source)
.color('red');
```

### Draw vector tiles - mask layer

Vector mask layers are generally used in conjunction with raster layers to mask raster layers.

```js
import { MaskLayer } from '@antv/l7';
const mask = new MaskLayer({sourceLayer: 'ecoregions2' })
.source( 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf' {
  parser: {
      type: 'mvt',
      maxZoom: 9,
      extent: [-180, -85.051129, 179, 85.051129],
  }});
```

### Draw vector tiles - test layer

```js
//Test tile layer
const debugerLayer = new TileDebugLayer();
```
---
title: FAQ
order: 16
---

<embed src="@/docs/common/style.md"></embed>

### é¡¹ç›®ä¸­ L7 å„ä¸ªä¾èµ–åŒ…ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´æŠ¥é”™

```js
Error: Cannot apply @injectable decorator multiple times.
```

<img height="300px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BsMyRZDuB54AAAAAAAAAAAAAARQnAQ'>

ğŸŒŸ è§£å†³æ–¹æ³•ï¼š  
åˆ é™¤ `node_modules` ä¸‹æ‰€æœ‰ä¸åŒç‰ˆæœ¬çš„ `L7` åŒ…ï¼Œé‡æ–°å®‰è£…å¯åŠ¨å³å¯ã€‚

### ç¦æ­¢åœ°å›¾äº¤äº’

1. åˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥åœ¨ `map` é…ç½®é¡¹è®¾ç½®

- é«˜å¾·åœ°å›¾å¯æŸ¥çœ‹ https://lbs.amap.com/api/javascript-api/reference/map
- mapbox https://docs.mapbox.com/mapbox-gl-js/api/#map

2. åŠ è½½å®Œæˆåè®¾ç½®
   è°ƒç”¨ `scene` çš„ [setMapStatus](/api/scene/scene/#setmapstatus) æ–¹æ³•

### webcontext lost
1. æµè§ˆå™¨å­˜åœ¨ `webgl` å®ä¾‹ä¸Šé™ï¼Œä¸€èˆ¬æµè§ˆå™¨ä¸º 16 ä¸ªï¼Œå› æ­¤æµè§ˆå™¨ä¸­å¯ä»¥å­˜åœ¨çš„åœ°å›¾å®ä¾‹æ˜¯æœ‰é™çš„ã€‚
2. åœ¨é”€æ¯åœ°å›¾åéœ€è¦è°ƒç”¨ `scene.destroy();` å¯¹ `webgl` å®ä¾‹è¿›è¡Œé”€æ¯ã€‚
---
title: FAQ
order: 16
---

<embed src="@/docs/common/style.md"></embed>

### Inconsistent versions of each dependent package of L7 in the project lead to error reporting

```js
Error: Cannot apply @injectable decorator multiple times.
```

<img height="300px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BsMyRZDuB54AAAAAAAAAAAAAARQnAQ'>

ğŸŒŸSolution:\
delete`node_modules`Download all different versions of`L7`package, reinstall and start.

### Disable map interaction

1. During initialization, you can`map`Configuration item settings

* Gaode map can be viewed<https://lbs.amap.com/api/javascript-api/reference/map>
* mapbox <https://docs.mapbox.com/mapbox-gl-js/api/#map>

2. Set after loading is complete
   transfer`scene`of[setMapStatus](/api/scene/scene/#setmapstatus)method

### webcontext lost

1. Browser exists`webgl`The upper limit of instances is 16 in general browsers, so the number of map instances that can exist in the browser is limited.
2. Need to be called after destroying the map`scene.destroy();`right`webgl`The instance is destroyed.
---
title: Introduction
order: 0
description:  L7 åœ°ç†ç©ºé—´æ•°æ®å¯è§†åˆ†æå¼•æ“
keywords: å¯è§†åŒ–æ ¸å¿ƒç‰¹æ€§
---

<embed src="@/docs/common/style.md"></embed>

# L7 geospatial data visual analysis engine

âœ¨ 2022.11.22 Version 2.11.0 officially released

âš ï¸ We will continue to follow up on user needs for version 1.x[Old version official website address](https://antv-2018.alipay.com/zh-cn/l7/1.x/index.html)

L7 is an open source large-scale geospatial data visual analysis development framework based on WebGL launched by Ant Financialâ€™s AntV data visualization team. The L in L7 stands for Location, and 7 represents the seven continents of the world, implying the ability to provide visual analysis of global location data. L7 is based on graphic semiotics, converting abstract and complex spatial data into 2D and 3D symbols, and achieving rich visual expression through visual variables such as color, size, volume, and texture.

<video id="video" style="display: block;margin: 0 auto;" width="800px" height="600px" controls="" preload="none" poster="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*rjkiQLCoZxUAAAAAAAAAAABkARQnAQ">
<source id="mp4" src="https://gw.alipayobjects.com/mdn/antv_site/afts/file/A*viKwSJl2OGIAAAAAAAAAAABkARQnAQ"; type="video/map4">
      <source id="webm" src="https://gw.alipayobjects.com/os/basement_prod/65d5dbe8-d78d-4c6b-9318-fa06b1456784.webm" type="video/webm">
      <source id="ogv" src="https://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg">
<p>Your user agent does not support the HTML5 Video element.</p>
</video>

## Core features

ğŸŒ Data-driven visual display

Data-driven, from numbers to shapes, it supports a variety of map visualization types to gain better insight into data.

ğŸŒ 2D, 3D integrated massive data high-performance rendering

Real-time, dynamic rendering of millions of spatial data.

ğŸŒ Simple and flexible data access

Supports CSV, JSON, geojson and other data format access, and can customize data formats according to needs without complex spatial data conversion.

ğŸŒ Support multiple map basemaps and support offline intranet deployment

Amap is a legal and compliant geographical base map in China, and Mapbox meets the needs of international business.

## Supports rich chart types

### point layer

* bubble chart
* Scatter plot
* symbolic map
* 3D column map
* aggregate map
* composite chart map
* Custom Marker

### line layer

* Route map
* Arc, supports 2D arc, 3D arc and great circle route
* Contour

### polygon layer

* fill chart
* 3D fill plot

### Heat layer

* Classic heat map
* Cellular heat map
* Grid heat map

### raster layer

* picture
* Raster

### Tile map

* grid tiles
* vector tiles

### Technical support service group

For more technical details and detailed progress, please pay attention[GitHub](https://github.com/antvis/L7), everyone is welcome to give a little star, so that more people can see this open source project.

We will respond promptly to L7 related technical issues and demand feedback.

We will respond promptly to L7 related technical issues and demand feedback. Geospatial Visualization L7 Support Group DingTalk Group

* Group number 1: 30460926 (Nearly full)
* Group number 2: 32292906 (full)
* Group number 3: 1935013288
* WeChat group: Add WeChat ID: think-gis to join the group Remarks L7 Invite to join the group
---
title: ç®€ä»‹
order: 0
description:  L7 åœ°ç†ç©ºé—´æ•°æ®å¯è§†åˆ†æå¼•æ“
keywords: å¯è§†åŒ–æ ¸å¿ƒç‰¹æ€§
---

<embed src="@/docs/common/style.md"></embed>

# L7 åœ°ç†ç©ºé—´æ•°æ®å¯è§†åˆ†æå¼•æ“

âœ¨ 2022.11.22 2.11.0 ç‰ˆæœ¬æ­£å¼å‘å¸ƒ

âš ï¸ 1.x ç‰ˆæœ¬çš„ç”¨æˆ·éœ€æ±‚æˆ‘ä»¬æŒç»­è·Ÿè¿› [æ—§ç‰ˆå®˜ç½‘åœ°å€](https://antv-2018.alipay.com/zh-cn/l7/1.x/index.html)

L7 æ˜¯ç”±èš‚èšé‡‘æœ AntV æ•°æ®å¯è§†åŒ–å›¢é˜Ÿæ¨å‡ºçš„åŸºäº WebGL çš„å¼€æºå¤§è§„æ¨¡åœ°ç†ç©ºé—´æ•°æ®å¯è§†åˆ†æå¼€å‘æ¡†æ¶ã€‚L7 ä¸­çš„ L ä»£è¡¨ Locationï¼Œ7 ä»£è¡¨ä¸–ç•Œä¸ƒå¤§æ´²ï¼Œå¯“æ„èƒ½ä¸ºå…¨çƒä½ç½®æ•°æ®æä¾›å¯è§†åˆ†æçš„èƒ½åŠ›ã€‚L7 ä»¥å›¾å½¢ç¬¦å·å­¦ä¸ºç†è®ºåŸºç¡€ï¼Œå°†æŠ½è±¡å¤æ‚çš„ç©ºé—´æ•°æ®è½¬åŒ–æˆ 2Dã€3D ç¬¦å·ï¼Œé€šè¿‡é¢œè‰²ã€å¤§å°ã€ä½“ç§¯ã€çº¹ç†ç­‰è§†è§‰å˜é‡å®ç°ä¸°å¯Œçš„å¯è§†åŒ–è¡¨è¾¾ã€‚

<video id="video" style="display: block;margin: 0 auto;" width="800px" height="600px" controls="" preload="none" poster="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*rjkiQLCoZxUAAAAAAAAAAABkARQnAQ">
<source id="mp4" src="https://gw.alipayobjects.com/mdn/antv_site/afts/file/A*viKwSJl2OGIAAAAAAAAAAABkARQnAQ"; type="video/map4">
      <source id="webm" src="https://gw.alipayobjects.com/os/basement_prod/65d5dbe8-d78d-4c6b-9318-fa06b1456784.webm" type="video/webm">
      <source id="ogv" src="https://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg">
<p>Your user agent does not support the HTML5 Video element.</p>
</video>

## æ ¸å¿ƒç‰¹æ€§

ğŸŒ æ•°æ®é©±åŠ¨å¯è§†åŒ–å±•ç¤º

æ•°æ®é©±åŠ¨ï¼Œä»æ•°åˆ°å½¢ï¼Œæ”¯æŒä¸°å¯Œçš„åœ°å›¾å¯è§†åŒ–ç±»å‹ï¼Œæ›´å¥½æ´å¯Ÿæ•°æ®ã€‚

ğŸŒ 2Dï¼Œ3D ä¸€ä½“åŒ–çš„æµ·é‡æ•°æ®é«˜æ€§èƒ½æ¸²æŸ“

ç™¾ä¸‡çº§ç©ºé—´æ•°æ®å®æ—¶ï¼ŒåŠ¨æ€æ¸²æŸ“ã€‚

ğŸŒ ç®€å•çµæ´»çš„æ•°æ®æ¥å…¥

æ”¯æŒ CSVï¼ŒJSONï¼Œgeojson ç­‰æ•°æ®æ ¼å¼æ¥å…¥ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼Œæ— éœ€å¤æ‚çš„ç©ºé—´æ•°æ®è½¬æ¢ã€‚

ğŸŒ å¤šåœ°å›¾åº•å›¾æ”¯æŒï¼Œæ”¯æŒç¦»çº¿å†…ç½‘éƒ¨ç½²

é«˜å¾·åœ°å›¾å›½å†…åˆæ³•åˆè§„çš„åœ°ç†åº•å›¾ï¼ŒMapbox æ»¡è¶³å›½é™…åŒ–ä¸šåŠ¡éœ€æ±‚ã€‚

## æ”¯æŒä¸°å¯Œçš„å›¾è¡¨ç±»å‹

### ç‚¹å›¾å±‚

- æ°”æ³¡å›¾
- æ•£ç‚¹å›¾
- ç¬¦å·åœ°å›¾
- 3D æŸ±çŠ¶åœ°å›¾
- èšåˆåœ°å›¾
- å¤åˆå›¾è¡¨åœ°å›¾
- è‡ªå®šä¹‰ Marker

### çº¿å›¾å±‚

- è·¯å¾„åœ°å›¾
- å¼§çº¿ï¼Œæ”¯æŒ 2D å¼§çº¿ã€3D å¼§çº¿ä»¥åŠå¤§åœ†èˆªçº¿
- ç­‰å€¼çº¿

### é¢å›¾å±‚

- å¡«å……å›¾
- 3D å¡«å……å›¾

### çƒ­åŠ›å›¾å±‚

- ç»å…¸çƒ­åŠ›å›¾
- èœ‚çªçƒ­åŠ›å›¾
- ç½‘æ ¼çƒ­åŠ›å›¾

### æ …æ ¼å›¾å±‚

- å›¾ç‰‡
- Raster

### ç“¦ç‰‡åœ°å›¾

- æ …æ ¼ç“¦ç‰‡
- çŸ¢é‡ç“¦ç‰‡

### æŠ€æœ¯æ”¯æŒæœåŠ¡ç¾¤

æ›´å¤šæŠ€æœ¯ç»†èŠ‚ï¼Œè¯¦ç»†è¿›å±•ï¼Œè¯·å…³æ³¨ [GitHub](https://github.com/antvis/L7)ï¼Œæ¬¢è¿å¤§å®¶æ¥ç»™ç‚¹ç‚¹ Starï¼Œè®©æ›´å¤šäººçœ‹åˆ°è¿™ä¸ªå¼€æºçš„é¡¹ç›®ã€‚

L7 ç›¸å…³æŠ€æœ¯é—®é¢˜ï¼Œéœ€æ±‚åé¦ˆï¼Œå¯åœ¨ [GitHub Issue åŒºåé¦ˆ]ï¼ˆhttps://github.com/antvis/L7/issuesï¼‰ï¼Œæˆ‘ä»¬ä¼šåŠæ—¶å“åº”ã€‚ 

åŒæ—¶æˆ‘ä»¬è¿˜æä¾›ç”¨æˆ·äº¤æµç¾¤

- ç¾¤å· 3ï¼š1935013288
- å¾®ä¿¡ç¾¤ï¼šåŠ å¾®ä¿¡å·ï¼šantv2030 å…¥ç¾¤ å¤‡æ³¨ L7 é‚€è¯·è¿›ç¾¤


---
title: Leaflet åœ°å›¾
order: 2
---
<embed src="@/docs/common/style.md"></embed>

`L7` é€šè¿‡æä¾›æ’ä»¶çš„å½¢å¼å®ç°äº†å¯¹ `Leaflet` çš„æ”¯æŒï¼Œå®ç° `Leaflet` åœ°å›¾å’Œ `L7` å¯è§†åŒ–å›¾å±‚çš„èåˆã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*lkWkTpJjPlYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### L7-Leaflet

- `L7-Leaflet` æ˜¯å¯¹å¤–å¼€æºçš„æ’ä»¶ [github åœ°å€](https://github.com/antvis/L7-Leaflet)

### å®‰è£…

#### npm
```bash
 npm install  @antv/l7-leaflet
```

#### cdn
```javascript
<script src="https://unpkg.com/@antv/l7-leaflet"></script>
```

### ä½¿ç”¨

#### L7 plugin for Lealfet use in Leaflet

```js
import * as L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import { LineLayer } from '@antv/l7';
import { L7Layer } from '@antv/l7-leaflet';

import React, { useEffect } from 'react';

export default () => {
  useEffect(() => {
    const map = L.map('map', {
      minZoom: 1,
    }).setView([30, 112], 3);
    const mapType = 'vec';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
        attribution:
          '&copy; <a href="http://lbs.tianditu.gov.cn/home.html">å¤©åœ°å›¾ GS(2022)3124å· - ç”²æµ‹èµ„å­—1100471</a>',
      },
    ).addTo(map);
    const mapLabelType = 'cva';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapLabelType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapLabelType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
      },
    ).addTo(map);

    L.marker([30, 112])
      .addTo(map)
      .setIcon(
        new L.Icon({
          iconUrl:
            'https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*6ONoRKNECC0AAAAAAAAAAAAAARQnAQ',
          iconSize: [16, 16],
        }),
      )
      .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
      .openPopup();

    const l7layer = new L7Layer().addTo(map);
    const scene = l7layer.getScene();
    fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')
      .then((res) => res.text())
      .then((data) => {
        const layer = new LineLayer({})
          .source(data, {
            parser: {
              type: 'csv',
              x: 'lng1',
              y: 'lat1',
              x1: 'lng2',
              y1: 'lat2',
            },
          })
          .size(1)
          .shape('arc')
          .color('#8C1EB2')
          .style({
            opacity: 0.8,
            blur: 0.99,
          });
        scene.addLayer(layer);
      });
  }, []);

  return (
    <div
      id="map"
      style={{
        height: '500px',
        position: 'relative',
      }}
    />
  );
};
```

#### Leafet BaseMap for L7 use in L7

```js
import * as L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import { LineLayer } from '@antv/l7';
import { L7Layer } from '@antv/l7-leaflet';
import React, { useEffect } from 'react';

export default () => {
  useEffect(() => {
    const map = L.map('map', {
      minZoom: 1,
    }).setView([30, 112], 3);
    const mapType = 'vec';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
        attribution:
          '&copy; <a href="http://lbs.tianditu.gov.cn/home.html">å¤©åœ°å›¾ GS(2022)3124å· - ç”²æµ‹èµ„å­—1100471</a>',
      },
    ).addTo(map);
    const mapLabelType = 'cva';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapLabelType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapLabelType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
      },
    ).addTo(map);

    L.marker([30, 112])
      .addTo(map)
      .setIcon(
        new L.Icon({
          iconUrl:
            'https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*6ONoRKNECC0AAAAAAAAAAAAAARQnAQ',
          iconSize: [16, 16],
        }),
      )
      .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
      .openPopup();

    const l7layer = new L7Layer().addTo(map);
    const scene = l7layer.getScene();
    fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')
      .then((res) => res.text())
      .then((data) => {
        const layer = new LineLayer({})
          .source(data, {
            parser: {
              type: 'csv',
              x: 'lng1',
              y: 'lat1',
              x1: 'lng2',
              y1: 'lat2',
            },
          })
          .size(1)
          .shape('arc')
          .color('#8C1EB2')
          .style({
            opacity: 0.8,
            blur: 0.99,
          });
        scene.addLayer(layer);
      });
  }, []);

  return (
    <div
      id="map"
      style={{
        height: '500px',
        position: 'relative',
      }}
    />
  );
};
```
---
title: Use Offline
order: 0
---

<embed src="@/docs/common/style.md"></embed>

at present`L7`Support Gao Dehe`Mapbox`Two base maps, the Amap map is used online`API`Offline deployment is not possible. If you have offline deployment requirements, you can use it.`MapBox`Make a base map.`L7`The interface layer unifies the direct differences between different basemaps, and a set of visualization codes can be run on`L7`On any supported basemap. This article mainly introduces how to use it offline and accelerate its use in China.`MapBox`, and also provides online font services, which you can also download for local use.

### How to introduce Mapbox in L7

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { Mapbox } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'dark',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313,
    token:'xxxx'
  })
});
```

### Why go offline

* Offline deployment
* Domestic acceleration
* Do not use`mapbox token`

### How to use MapBox offline

As long as you don't use`MapBox`The data base map service can be used offline.`mapbox`All data service resources are in`style`configured inside. In addition to data services, there are also some static resources, which are mainly used for image annotation and text annotation.

`mapbox`If the data resources themselves are deployed and used separately in foreign countries, the loading speed experience is still very good.

Let's find out first`MapBox`What configuration items the style contains.

#### Mapbox style parameters

* `version`ï¼š`JS SDK`The corresponding version must be 8.
* `name`: The naming of the style.
* `sprite`: Sprite map, which contains all the sporadic icon images involved in a map into one large image.
* `glyphs`ï¼š`.pbf`Format font style, such as Microsoft Yahei and other font libraries.
* `sources`: The resource file of the layer, which can support vector slices, raster,`dem`raster, picture,`geojson`, video and other formats.
* `layers`: It is a description of each layer style. This is the key to rendering the map style. You can customize the map style.

Specific parameters and their`api`Can refer to`mapbox`official website.

If you want to achieve localization, you only need`sprite`ï¼Œ`glyphs`Localization is fine, and the map service can load other services.

If you don't need to use`MapBox`Data service, used to complete the visualization layer`L7`Rendering is even simpler.

You just need to`MapBox`Map style settings`blank`ã€‚

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'blank',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313
  })
});
```

`blank`The style is considered to be a baseless style, so there is no need to use it in this style.`mapbox`service, there is no need to use`mapbox`of`token`ã€‚

#### Localized sprite map

If you need to use`mapbox`For field image annotation, you need to localize sprite image resources<br />Just download two files<br />sprite.json mainly records the position of each chart on the big picture<br />sprite.png A big picture composed of each small icon

Online sprite service address:<br /><https://lzxue.github.io/font-glyphs/sprite/sprite>

#### localized fonts

If needed use`mapbox`The article annotation function needs to be localized. If your rendering capabilities are all using`L7`To achieve this, this process is also unnecessary.

`L7`Online font service provided<br />Currently supports 4 fonts.

* Alibaba inclusive body
* noto
* opensan
* roboto

*If you have new font requirements, you can submit a PR and we will automatically generate an online font service for you. You can use it online or download it for local use.*

Font service download:[gh-pages branch](https://github.com/lzxue/font-glyphs/tree/gh-pages) you can`clone`Come down and use it directly.

**You can also use online services**<br />github service<br /><https://lzxue.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf><br />Ant CDN:<br /><https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf>

#### Map service localization

1.Load[Third-party basemap](https://github.com/htoooth/Leaflet.ChineseTmsProviders), the raster tile layer is used as the base map, such as Sky Map, Amap,`google`Grid tiles are available<br />2.Download[opensteetmap ](https://openmaptiles.com/downloads/planet/)Vector tile map as base map<br />3. Publish base map service or vector tile service for your own business data.

**Here is a more complete solution**<br />Â <https://jingsam.github.io/foxgis-server-lite/#/>

####

All service resources have been prepared so that we can use them independently`mapbox`Service, no need to apply again`mapbox`of`token`ã€‚

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { Mapbox } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: {
      "version": 8,
        "name": "blank",
        "sprite": "https://lzxue.github.io/font-glyphs/sprite/sprite",
        "glyphs": "https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf",
          "sources": {},
          "layers": [
            {
              id: 'background',
              type: 'background',
              paint: {
                'background-color': 'white',
              },
            },
          ]
        },
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313,
    token:'xxxx'
  })
});
```

[Offline, use mapbox demo without token](https://codesandbox.io/embed/frosty-architecture-tv6uv?fontsize=14\&hidenavigation=1\&theme=dark)<br />
---
title: Leaflet Map
order: 2
---

<embed src="@/docs/common/style.md"></embed>

`L7`Implemented by providing plug-ins`Leaflet`support, implementation`Leaflet`map and`L7`Fusion of visualization layers.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*lkWkTpJjPlYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### L7-Leaflet

* `L7-Leaflet`It is an open source plug-in[github address](https://github.com/antvis/L7-Leaflet)

### Install

#### npm

```bash
npm install  @antv/l7-leaflet
```

#### cdn

```javascript
<script src="https://unpkg.com/@antv/l7-leaflet"></script>
```

### use

#### L7 plugin for Lealfet use in Leaflet

```js
import * as L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import { LineLayer } from '@antv/l7';
import { L7Layer } from '@antv/l7-leaflet';

import React, { useEffect } from 'react';

export default () => {
  useEffect(() => {
    const map = L.map('map', {
      minZoom: 1,
    }).setView([30, 112], 3);
    const mapType = 'vec';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
        attribution:
          'Â© <a href="http://lbs.tianditu.gov.cn/home.html">å¤©åœ°å›¾ GS(2022)3124å· - ç”²æµ‹èµ„å­—1100471</a>',
      },
    ).addTo(map);
    const mapLabelType = 'cva';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapLabelType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapLabelType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
      },
    ).addTo(map);

    L.marker([30, 112])
      .addTo(map)
      .setIcon(
        new L.Icon({
          iconUrl:
            'https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*6ONoRKNECC0AAAAAAAAAAAAAARQnAQ',
          iconSize: [16, 16],
        }),
      )
      .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
      .openPopup();

    const l7layer = new L7Layer().addTo(map);
    const scene = l7layer.getScene();
    fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')
      .then((res) => res.text())
      .then((data) => {
        const layer = new LineLayer({})
          .source(data, {
            parser: {
              type: 'csv',
              x: 'lng1',
              y: 'lat1',
              x1: 'lng2',
              y1: 'lat2',
            },
          })
          .size(1)
          .shape('arc')
          .color('#8C1EB2')
          .style({
            opacity: 0.8,
            blur: 0.99,
          });
        scene.addLayer(layer);
      });
  }, []);

  return (
    <div
      id="map"
      style={{
        height: '500px',
        position: 'relative',
      }}
    />
  );
};
```

#### Leafet BaseMap for L7 use in L7

```js
import * as L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import { LineLayer } from '@antv/l7';
import { L7Layer } from '@antv/l7-leaflet';
import React, { useEffect } from 'react';

export default () => {
  useEffect(() => {
    const map = L.map('map', {
      minZoom: 1,
    }).setView([30, 112], 3);
    const mapType = 'vec';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
        attribution:
          'Â© <a href="http://lbs.tianditu.gov.cn/home.html">å¤©åœ°å›¾ GS(2022)3124å· - ç”²æµ‹èµ„å­—1100471</a>',
      },
    ).addTo(map);
    const mapLabelType = 'cva';
    L.tileLayer(
      'https://t{s}.tianditu.gov.cn/' +
        mapLabelType +
        '_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=' +
        mapLabelType +
        '&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=b72aa81ac2b3cae941d1eb213499e15e',
      {
        subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
      },
    ).addTo(map);

    L.marker([30, 112])
      .addTo(map)
      .setIcon(
        new L.Icon({
          iconUrl:
            'https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*6ONoRKNECC0AAAAAAAAAAAAAARQnAQ',
          iconSize: [16, 16],
        }),
      )
      .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
      .openPopup();

    const l7layer = new L7Layer().addTo(map);
    const scene = l7layer.getScene();
    fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')
      .then((res) => res.text())
      .then((data) => {
        const layer = new LineLayer({})
          .source(data, {
            parser: {
              type: 'csv',
              x: 'lng1',
              y: 'lat1',
              x1: 'lng2',
              y1: 'lat2',
            },
          })
          .size(1)
          .shape('arc')
          .color('#8C1EB2')
          .style({
            opacity: 0.8,
            blur: 0.99,
          });
        scene.addLayer(layer);
      });
  }, []);

  return (
    <div
      id="map"
      style={{
        height: '500px',
        position: 'relative',
      }}
    />
  );
};
```
---
title: Use Offline
order: 0
---
<embed src="@/docs/common/style.md"></embed>

ç›®å‰ `L7` æ”¯æŒé«˜å¾·å’Œ `Mapbox` ä¸¤ç§åº•å›¾ï¼Œé«˜å¾·åœ°å›¾ç”±äºä½¿ç”¨åœ¨çº¿ `API` ä¸èƒ½åšç¦»çº¿éƒ¨ç½²ï¼Œå¦‚æœä½ æœ‰ç¦»çº¿éƒ¨ç½²çš„éœ€æ±‚å¯ä»¥é‡‡ç”¨ `MapBox`åšåº•å›¾ã€‚`L7` åœ¨æ¥å£å±‚ç»Ÿä¸€äº†ä¸åŒåº•å›¾ç›´æ¥çš„å·®å¼‚ï¼Œä¸€å¥—å¯è§†åŒ–ä»£ç å¯ä»¥è¿è¡Œåœ¨ `L7` æ”¯æŒçš„ä»»æ„åº•å›¾ä¸Šã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ç¦»çº¿ä½¿ç”¨ï¼Œå›½å†…åŠ é€Ÿä½¿ç”¨ `MapBox`ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†åœ¨çº¿çš„å­—ä½“æœåŠ¡ï¼Œä½ ä¹Ÿå¯ä¹Ÿä¸‹è½½åˆ°æœ¬åœ°ä½¿ç”¨ã€‚

### L7 å¦‚ä½•å¼•å…¥ Mapbox

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { Mapbox } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'dark',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313,
    token:'xxxx'
  })
});
```
### ä¸ºä»€ä¹ˆç¦»çº¿åŒ–

- ç¦»çº¿éƒ¨ç½²
- å›½å†…åŠ é€Ÿ
- ä¸ä½¿ç”¨ `mapbox token`

### å¦‚ä½•ç¦»çº¿åŒ–ä½¿ç”¨ MapBox

ä½ åªè¦ä¸ä½¿ç”¨ `MapBox` çš„æ•°æ®åº•å›¾æœåŠ¡å°±å¯ä»¥ç¦»çº¿ä½¿ç”¨ï¼Œ`mapbox` æ‰€æœ‰æ•°æ®æœåŠ¡èµ„æºéƒ½æ˜¯åœ¨ `style` é‡Œé¢é…ç½®çš„ã€‚é™¤äº†æ•°æ®æœåŠ¡ä»¥å¤–è¿˜æœ‰ä¸€äº›é™æ€èµ„æºï¼Œè¿™äº›ä¸»è¦æ˜¯å›¾ç‰‡æ ‡æ³¨ï¼Œæ–‡å­—æ ‡æ³¨çš„æ—¶å€™ä½¿ç”¨ã€‚    

`mapbox` æœ¬èº«æ•°æ®èµ„æºåœ¨å›½å¤–å¦‚æœåœ¨å›½å†…å•ç‹¬éƒ¨ç½²ä½¿ç”¨ï¼ŒåŠ è½½é€Ÿåº¦ä½“éªŒè¿˜æ˜¯å¾ˆå¥½çš„ã€‚   

æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ `MapBox` æ ·å¼åŒ…å«å“ªäº›é…ç½®é¡¹ã€‚    

#### Mapbox æ ·å¼å‚æ•°

- `version`ï¼š`JS SDK` å¯¹åº”ç‰ˆæœ¬å¿…é¡»ä¸º 8ã€‚
- `name`ï¼šæ ·å¼çš„å‘½åã€‚
- `sprite`ï¼šé›ªç¢§å›¾ï¼Œå°†ä¸€ä¸ªåœ°å›¾æ¶‰åŠåˆ°çš„æ‰€æœ‰é›¶æ˜Ÿå›¾æ ‡å›¾ç‰‡éƒ½åŒ…å«åˆ°ä¸€å¼ å¤§å›¾ä¸­ã€‚
- `glyphs`ï¼š`.pbf` æ ¼å¼çš„å­—ä½“æ ·å¼ï¼Œä¾‹å¦‚å¾®è½¯é›…é»‘ç­‰å­—ä½“åº“ã€‚
- `sources`ï¼šå›¾å±‚çš„èµ„æºæ–‡ä»¶ï¼Œå¯ä»¥æ”¯æŒçŸ¢é‡åˆ‡ç‰‡ã€æ …æ ¼ã€`dem` æ …æ ¼ã€å›¾ç‰‡ã€`geojson`ã€è§†é¢‘ç­‰æ ¼å¼ã€‚
- `layers`ï¼šæ˜¯å¯¹æ¯ä¸ªå›¾å±‚æ ·å¼çš„æè¿°ï¼Œè¿™é‡Œå°±æ˜¯å¯¹åœ°å›¾æ ·å¼æ¸²æŸ“çš„å…³é”®ï¼Œå¯ä»¥åšå®šåˆ¶åŒ–åœ°å›¾æ ·å¼ã€‚

å…·ä½“å‚æ•°åŠå…¶ `api` å¯ä»¥å‚è€ƒ `mapbox` å®˜ç½‘ã€‚   

å¦‚æœåšåˆ°æœ¬åœ°åŒ–åªéœ€è¦Â `sprite`ï¼Œ`glyphs` æœ¬åœ°åŒ–å°±å¯ä»¥äº†ï¼Œåœ°å›¾æœåŠ¡å¯ä»¥åŠ è½½å…¶ä»–æœåŠ¡ã€‚    

å¦‚æœä½ ä¸éœ€è¦ä½¿ç”¨ `MapBox` æ•°æ®æœåŠ¡ï¼Œå¯è§†åŒ–å±‚å®Œæˆç”¨ `L7` æ¸²æŸ“é‚£å°±æ›´ç®€å•äº†ã€‚

ä½ åªéœ€è¦å°† `MapBox` çš„åœ°å›¾æ ·å¼è®¾ç½® `blank`ã€‚  

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'blank',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313
  })
});
```

`blank` æ ·å¼ä»¥ä¸ºæ— åº•å›¾æ ·å¼ï¼Œè¿™ç§æ ·å¼ä¸‹å°±ä¸éœ€è¦ä½¿ç”¨ `mapbox` æœåŠ¡ï¼Œä¹Ÿä¸éœ€è¦ä½¿ç”¨ `mapbox` çš„ `token`ã€‚   

#### æœ¬åœ°åŒ–é›ªç¢§å›¾

å¦‚æœä½ éœ€è¦ä½¿ç”¨ `mapbox` å­—æ®µçš„å›¾ç‰‡æ ‡æ³¨ï¼Œä½ éœ€è¦æœ¬åœ°åŒ–é›ªç¢§å›¾èµ„æº<br />åªéœ€è¦ä¸‹è½½ä¸¤ä¸ªæ–‡ä»¶å³å¯<br />sprite.json ä¸»è¦è®°å½•æ¯ä¸ªå›¾è¡¨åœ¨å¤§å›¾ä¸Šä½ç½®<br />sprite.pngÂ  æ¯ä¸ªå°å›¾æ ‡ç»„æˆçš„å¤§å›¾

åœ¨çº¿é›ªç¢§å›¾æœåŠ¡åœ°å€:<br />[https://lzxue.github.io/font-glyphs/sprite/sprite](https://lzxue.github.io/font-glyphs/sprite/sprite)

#### æœ¬åœ°åŒ–å­—ä½“

å¦‚æœéœ€è¦ä½¿ç”¨ `mapbox` æ–‡ç« æ ‡æ³¨åŠŸèƒ½éœ€è¦æœ¬åœ°åŒ–ï¼Œå¦‚æœä½ çš„æ¸²æŸ“èƒ½åŠ›éƒ½æ˜¯ç”¨ `L7` å®ç°çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯ä¸éœ€è¦çš„ã€‚    

`L7` æä¾›äº†åœ¨çº¿å­—ä½“æœåŠ¡<br />Â ç›®å‰æ”¯æŒ4ç§å­—ä½“ã€‚

- é˜¿é‡Œå·´å·´æ™®æƒ ä½“
- noto
- opensan
- roboto

_å¦‚æœä½ æœ‰æ–°çš„å­—ä½“éœ€æ±‚å¯æPRï¼Œå¸®ä½ è‡ªåŠ¨ç”Ÿæˆåœ¨çº¿å¯ç”¨çš„å­—ä½“æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨çº¿ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°ä½¿ç”¨ã€‚_

å­—ä½“æœåŠ¡ä¸‹è½½ï¼š[gh-pagesåˆ†æ”¯](https://github.com/lzxue/font-glyphs/tree/gh-pages)Â ä½ å¯ä»¥ `clone` ä¸‹æ¥ç›´æ¥ä½¿ç”¨ã€‚

**ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨çº¿æœåŠ¡**<br />githubæœåŠ¡<br />[https://lzxue.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf](https://lzxue.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf)<br />èš‚èšCDNï¼š<br />[https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf](https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf)

#### åœ°å›¾æœåŠ¡æœ¬åœ°åŒ–

1.åŠ è½½[ç¬¬ä¸‰æ–¹åº•å›¾](https://github.com/htoooth/Leaflet.ChineseTmsProviders)ï¼Œæ …æ ¼ç“¦ç‰‡å›¾å±‚åšåº•å›¾ï¼Œå¦‚å¤©åœ°å›¾ï¼Œé«˜å¾·ï¼Œ`google` çš„æ …æ ¼ç“¦ç‰‡éƒ½å¯ä»¥<br />
2.ä¸‹è½½[opensteetmap ](https://openmaptiles.com/downloads/planet/)çŸ¢é‡ç“¦ç‰‡åœ°å›¾åšåº•å›¾<br />
3.è‡ªå·±ä¸šåŠ¡æ•°æ®å‘å¸ƒåº•å›¾æœåŠ¡ï¼Œæˆ–è€…çŸ¢é‡ç“¦ç‰‡æœåŠ¡ã€‚

**è¿™é‡Œè¿˜æœ‰ä¸ªæ›´å®Œå¤‡çš„è§£å†³æ–¹æ¡ˆ**<br />Â [https://jingsam.github.io/foxgis-server-lite/#/](https://jingsam.github.io/foxgis-server-lite/#/)

#### 

æ‰€æœ‰çš„æœåŠ¡èµ„æºå·²ç»å‡†å¤‡å¥½äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ `mapbox` æœåŠ¡ï¼Œä¸éœ€è¦å†ç”³è¯· `mapbox` çš„ `token`ã€‚

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { Mapbox } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: {
      "version": 8,
        "name": "blank",
        "sprite": "https://lzxue.github.io/font-glyphs/sprite/sprite",
        "glyphs": "https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf",
          "sources": {},
          "layers": [
            {
              id: 'background',
              type: 'background',
              paint: {
                'background-color': 'white',
              },
            },
          ]
        },
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313,
    token:'xxxx'
  })
});
```

[ç¦»çº¿ï¼Œæ— tokenä½¿ç”¨mapbox demo](https://codesandbox.io/embed/frosty-architecture-tv6uv?fontsize=14&hidenavigation=1&theme=dark)<br />
---
title: No Map
order: 2
---

<embed src="@/docs/common/style.md"></embed>

In many cases we just do simple geographical visualization without loading a map. This tutorial will tell you how to use basemapless mode in L7.

* `L7`Added a baseless map style at the map style level`blank`No basemap mode.
* Do not need to use`mapbox token`, no need to register`mapbox`account.

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'blank',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313
  })
});
```

ğŸŒŸ If you just need to make a map of China and fill the world map like this, it is recommended that you use this mode.
---
title: ä½¿ç”¨æ— åº•å›¾æ¨¡å¼
order: 2
---
<embed src="@/docs/common/style.md"></embed>

å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬åªæ˜¯åšäº›ç®€å•çš„åœ°ç†å¯è§†åŒ–ï¼Œä¸éœ€è¦åŠ è½½åœ°å›¾ï¼Œæœ¬æ•™ç¨‹å°±æ˜¯å‘Šè¯‰å¤§å®¶å¦‚æœåœ¨L7ä¸­ä½¿ç”¨æ— åº•å›¾æ¨¡å¼ã€‚

- `L7` åœ¨åœ°å›¾æ ·å¼å±‚é¢å¢åŠ äº†æ— åº•å›¾æ ·å¼ `blank` æ— åº•å›¾æ¨¡å¼ã€‚  
- ä¸éœ€è¦ä½¿ç”¨ `mapbox token` ï¼Œä¹Ÿä¸éœ€è¦æ³¨å†Œ `mapbox` è´¦æˆ·ã€‚   

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'blank',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313
  })
});
```
ğŸŒŸ å¦‚æœä½ åªæ˜¯éœ€è¦åšä¸ªä¸­å›½åœ°å›¾ï¼Œä¸–ç•Œåœ°å›¾è¿™æ ·å¡«å……å›¾ï¼Œå»ºè®®ä½ é‡‡ç”¨è¿™æ ·çš„æ¨¡å¼ã€‚
---
title: Tianditu
order: 2
---

`L7`Supports loading sky map tiles through tile layers.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2_vQT6N8Ug8AAAAAAAAAAAAADmJ7AQ/original'>
  </div>
</div>

### accomplish

Below we will introduce how to quickly create a map of the sky.

```js
import { Scene, RasterLayer } from '@antv/l7';
import { Map } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Map({
    center: [ 90.268, 40.3628 ],
    zoom: 3
  })
});
scene.on('loaded', () => {
  // åº•å›¾æœåŠ¡
  const baseLayer = new RasterLayer({ zIndex: 1 });
  .source(
    'https://t1.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=6557fd8a19b09d6e91ae6abf9d13ccbd',
    {
      parser: {
        type: 'rasterTile',
        tileSize: 256,
      }
    }
  );
  // æ³¨è®°æœåŠ¡
  const annotionLayer = new RasterLayer({ zIndex: 2 });
  .source(
    'https://t1.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=6557fd8a19b09d6e91ae6abf9d13ccbd',
    {
      parser: {
        type: 'rasterTile',
        tileSize: 256,
      }
    }
  );
  scene.addLayer(baseLayer);
  scene.addLayer(annotionLayer);
});
```
---
title: MapBox Map
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Using Mapbox Maps

1\. Register MapBox token

Registered address[Mapbox Access Tokens](https://docs.mapbox.com/help/how-mapbox-works/access-tokens/#creating-and-managing-access-tokens)

2\. Introduce mapbox.gl JS and css

To use mapbox, you need to introduce mapbox separately.

```html
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
  
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
```

### Introducing L7

```html
<script src="https://unpkg.com/@antv/l7"></script>
```

#### Add a div tag to specify the map container

At the same time, you need to set the height and width of the Div.

```html
<div id="map"></div>
```

### Initialize L7 Scene

```javascript
const scene = new L7.Scene({
    id: 'map',
    map: new L7.Mapbox({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'mapbox token',
    }),
  });
```

In this way we have completed instantiating the mapbox map through L7

### Add visualization layer

```javascript
fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ])
      .style({
        opacity: 1.0
      });
    scene.addLayer(pointLayer);
  });
```

### Complete demo code

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>åˆ›å»ºåœ°å›¾åœºæ™¯</title>
    <style> ::-webkit-scrollbar{display:none;}html,body{overflow:hidden;margin:0;}
    	#map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<div id="map"></div>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
  
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
<script src="https://unpkg.com/@antv/l7"></script>
<script>
  const scene = new L7.Scene({
    id: 'map',
    map: new L7.Mapbox({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'mapbox token',
    }),
  });

fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ])
      .style({
        opacity: 1.0
      });
    scene.addLayer(pointLayer);
  });

</script>
</body>
</html>
```
---
title: MapBox åœ°å›¾
order: 0
---
<embed src="@/docs/common/style.md"></embed>
## ä½¿ç”¨Mapbox åœ°å›¾

1ã€æ³¨å†ŒMapBox token

   æ³¨å†Œåœ°å€ [Mapbox Access Tokens](https://docs.mapbox.com/help/how-mapbox-works/access-tokens/#creating-and-managing-access-tokens)

2ã€å¼•å…¥mapbox.gl JS å’Œ css

ä½¿ç”¨mapbox éœ€è¦å•ç‹¬å¼•å…¥ mapbox

```html
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
  
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
```


### å¼•å…¥ L7 


```html
<script src="https://unpkg.com/@antv/l7"></script>
```


####  æ·»åŠ div æ ‡ç­¾æŒ‡å®šåœ°å›¾å®¹å™¨

åŒæ—¶éœ€è¦ä¸ºDivè®¾ç½® é«˜åº¦å’Œå®½åº¦

``` html
<div id="map"></div>
````

### åˆå§‹åŒ– L7 Scene


```javascript
  const scene = new L7.Scene({
    id: 'map',
    map: new L7.Mapbox({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'mapbox token',
    }),
  });


```

è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†é€šè¿‡L7 å®ä¾‹åŒ–mapboxåœ°å›¾


### æ·»åŠ å¯è§†åŒ–å›¾å±‚



```javascript

fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ])
      .style({
        opacity: 1.0
      });
    scene.addLayer(pointLayer);
  });

  ```


### å®Œæ•´demo ä»£ç 

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>åˆ›å»ºåœ°å›¾åœºæ™¯</title>
    <style> ::-webkit-scrollbar{display:none;}html,body{overflow:hidden;margin:0;}
    	#map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<div id="map"></div>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
  
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
<script src="https://unpkg.com/@antv/l7"></script>
<script>
  const scene = new L7.Scene({
    id: 'map',
    map: new L7.Mapbox({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'mapbox token',
    }),
  });

fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ])
      .style({
        opacity: 1.0
      });
    scene.addLayer(pointLayer);
  });

</script>
</body>
</html>

```



---
title: å¤©åœ°å›¾
order: 2
---

`L7` æ”¯æŒé€šè¿‡ç“¦ç‰‡å›¾å±‚çš„æ–¹å¼æ¥åŠ è½½å¤©åœ°å›¾ç“¦ç‰‡ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2_vQT6N8Ug8AAAAAAAAAAAAADmJ7AQ/original'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•å¿«é€Ÿåˆ›å»ºå¤©åœ°å›¾åœ°å›¾ã€‚

```js
import { Scene, RasterLayer } from '@antv/l7';
import { Map } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Map({
    center: [ 90.268, 40.3628 ],
    zoom: 3
  })
});
scene.on('loaded', () => {
  // åº•å›¾æœåŠ¡
  const baseLayer = new RasterLayer({ zIndex: 1 });
  .source(
    'https://t1.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=6557fd8a19b09d6e91ae6abf9d13ccbd',
    {
      parser: {
        type: 'rasterTile',
        tileSize: 256,
      }
    }
  );
  // æ³¨è®°æœåŠ¡
  const annotionLayer = new RasterLayer({ zIndex: 2 });
  .source(
    'https://t1.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=6557fd8a19b09d6e91ae6abf9d13ccbd',
    {
      parser: {
        type: 'rasterTile',
        tileSize: 256,
      }
    }
  );
  scene.addLayer(baseLayer);
  scene.addLayer(annotionLayer);
});

```---
title: Amap Plugin
order: 3
---

<embed src="@/docs/common/style.md"></embed>

When we use Gaode Map as the map base map, we can use the plug-in provided by Gaode Map to achieve our needs.

### AMap.LineSearch

* Road query

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'blank',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313
  })
});
```

[Online case](/examples/amapplugin/bus#busstop)

### MP.Tulbar

* Map toolbar

```javascript
scene.on('loaded', () => {
  window.AMap.plugin([ 'AMap.ToolBar', 'AMap.LineSearch' ], () => {
    scene.map.addControl(new AMap.ToolBar());

    const linesearch = new AMap.LineSearch({
      pageIndex: 1, //Page number, default value is 1
      pageSize: 1, //The number of results displayed on a single page, the default value is 20, the maximum value is 50
      city: 'Beijing', // Limit the query city, which can be the city name (Chinese/Chinese full spelling), city code, the default value is "National"
      extensions: 'all' // Whether to return bus route details, the default value is "base"
    });
```

[Online case](/examples/amapplugin/bus#busstop)

### AMap.TileLayer

* load using`xyz`map tiles

```javascript
scene.on('loaded', () => {
  var xyzTileLayer = new window.AMap.TileLayer({
    getTileUrl:
      'https://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&size=1&scl=1&style=8&ltype=11',
    zIndex: 100,
  });
  scene.map.add(xyzTileLayer);
});
```

[Online case](/examples/amapplugin/bus#xyztile)

### AMap.TileLayer.Satellite

* Load using default satellite tiles

```javascript
scene.on('loaded', () => {
    scene.map.add(new window.AMap.TileLayer.Satellite());
});
```

[Online case](/examples/amapplugin/bus#satellite)
---
title: ä½¿ç”¨é«˜å¾·æ’ä»¶
order: 3
---
<embed src="@/docs/common/style.md"></embed>

æˆ‘ä»¬åœ¨ä½¿ç”¨é«˜å¾·åœ°å›¾ä½œä¸ºåœ°å›¾åº•å›¾çš„æ—¶å€™ï¼Œå¯ä»¥å€ŸåŠ©é«˜å¾·åœ°å›¾æä¾›çš„æ’ä»¶å®ç°ä¹Ÿä¸­éœ€æ±‚ã€‚

### AMap.LineSearch

- é“è·¯æŸ¥è¯¢

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'blank',
    center: [ 103.83735604457024, 1.360253881403068 ],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313
  })
});
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/amapplugin/bus#busstop)

### AMap.ToolBar

- åœ°å›¾å·¥å…·æ 

```javascript
scene.on('loaded', () => {
  window.AMap.plugin([ 'AMap.ToolBar', 'AMap.LineSearch' ], () => {
    scene.map.addControl(new AMap.ToolBar());

    const linesearch = new AMap.LineSearch({
      pageIndex: 1, // é¡µç ï¼Œé»˜è®¤å€¼ä¸º1
      pageSize: 1, // å•é¡µæ˜¾ç¤ºç»“æœæ¡æ•°ï¼Œé»˜è®¤å€¼ä¸º20ï¼Œæœ€å¤§å€¼ä¸º50
      city: 'åŒ—äº¬', // é™å®šæŸ¥è¯¢åŸå¸‚ï¼Œå¯ä»¥æ˜¯åŸå¸‚åï¼ˆä¸­æ–‡/ä¸­æ–‡å…¨æ‹¼ï¼‰ã€åŸå¸‚ç¼–ç ï¼Œé»˜è®¤å€¼ä¸ºã€å…¨å›½ã€
      extensions: 'all' // æ˜¯å¦è¿”å›å…¬äº¤çº¿è·¯è¯¦ç»†ä¿¡æ¯ï¼Œé»˜è®¤å€¼ä¸ºã€baseã€
    });
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/amapplugin/bus#busstop)

### AMap.TileLayer

- åŠ è½½ä½¿ç”¨ `xyz` åœ°å›¾ç“¦ç‰‡

```javascript
scene.on('loaded', () => {
  var xyzTileLayer = new window.AMap.TileLayer({
    getTileUrl:
      'https://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&size=1&scl=1&style=8&ltype=11',
    zIndex: 100,
  });
  scene.map.add(xyzTileLayer);
});
```
[åœ¨çº¿æ¡ˆä¾‹](/examples/amapplugin/bus#xyztile)

### AMap.TileLayer.Satellite

- åŠ è½½ä½¿ç”¨é»˜è®¤çš„å«æ˜Ÿç“¦ç‰‡

```javascript
 scene.on('loaded', () => {
    scene.map.add(new window.AMap.TileLayer.Satellite());
});
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/amapplugin/bus#satellite)

---
title: GaodeMap
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Use Amap

### Register an account and apply for a Key

1. first,[Register a developer account](https://lbs.amap.com/dev/id/choose), become a developer of Amap open platform

2. After logging in, enter the "Application Management" page and "Create a New Application"

3. for application[Add Key](https://lbs.amap.com/dev/key/app), please select "Web client (JSAPI)" for "Service Platform"

### Introducing L7

Amap version 2.0 dynamically introduces the Amap map within L7`JS API`, so it is no longer necessary to introduce Gaode separately`JS API`, just set`type`for`amap`and pass in`token`ã€‚

```html
<script src="https://unpkg.com/@antv/l7"></script>
```

### Add a div tag to specify the map container

At the same time, it is necessary to`div`Set the height and width.

```html
<div id="map"></div>
```

### Initialize L7 Scene

```javascript
const scene = new L7.Scene({
    id: 'map',
    map: new L7.GaodeMap({
      style: 'dark', // Style URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'Amap token',
    }),
  });
```

In this way we have completed passing`L7`Instantiate the Gaode map.

### Add visualization layer

* First we need to get the data and get the data method. Here we get the online geographical data.
* Then we can initialize a`Layer`, and added to`Scene`The layer addition is completed.

```javascript
fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ]);
    scene.addLayer(pointLayer);
  });
```

### Complete demo code

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>åˆ›å»ºåœ°å›¾åœºæ™¯</title>
    <style>
       html,body{overflow:hidden;margin:0;}
    	#map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/@antv/l7"></script>
<script>

  const scene = new L7.Scene({
    id: 'map',
    map: new L7.GaodeMap({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'é«˜å¾·åœ°å›¾token',
    }),
  });

fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ]);
    scene.addLayer(pointLayer);
  });

</script>
</body>
</html>
```
---
title: é«˜å¾·åœ°å›¾
order: 0
---
<embed src="@/docs/common/style.md"></embed>
## ä½¿ç”¨é«˜å¾·åœ°å›¾

### æ³¨å†Œè´¦å·å¹¶ç”³è¯·Key

1. é¦–å…ˆï¼Œ[æ³¨å†Œå¼€å‘è€…è´¦å·](https://lbs.amap.com/dev/id/choose)ï¼Œæˆä¸ºé«˜å¾·å¼€æ”¾å¹³å°å¼€å‘è€…

2. ç™»é™†ä¹‹åï¼Œåœ¨è¿›å…¥ã€Œåº”ç”¨ç®¡ç†ã€ é¡µé¢ã€Œåˆ›å»ºæ–°åº”ç”¨ã€

3. ä¸ºåº”ç”¨[æ·»åŠ  Key](https://lbs.amap.com/dev/key/app)ï¼Œã€ŒæœåŠ¡å¹³å°ã€ä¸€é¡¹è¯·é€‰æ‹©ã€Œ Web ç«¯ ( JSAPI ) ã€

### å¼•å…¥ L7 

é«˜å¾· 2.0 ç‰ˆæœ¬åœ¨L7å†…éƒ¨åŠ¨æ€å¼•å…¥äº†é«˜å¾·åœ°å›¾ `JS API` ï¼Œå› æ­¤ä¸å†éœ€è¦å•ç‹¬å¼•å…¥é«˜å¾· `JS API`ï¼Œåªéœ€è®¾ç½® `type` ä¸º `amap` å¹¶ä¸”ä¼ å…¥ `token`ã€‚ 

```html
<script src="https://unpkg.com/@antv/l7"></script>
```

### æ·»åŠ  div æ ‡ç­¾æŒ‡å®šåœ°å›¾å®¹å™¨

åŒæ—¶éœ€è¦ä¸º `div`è®¾ç½® é«˜åº¦å’Œå®½åº¦ã€‚

``` html
<div id="map"></div>
```

### åˆå§‹åŒ– L7 Scene


```javascript
  const scene = new L7.Scene({
    id: 'map',
    map: new L7.GaodeMap({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'é«˜å¾·åœ°å›¾token',
    }),
  });
```

è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†é€šè¿‡ `L7` å®ä¾‹åŒ–é«˜å¾·åœ°å›¾ã€‚

### æ·»åŠ å¯è§†åŒ–å›¾å±‚

- é¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–æ•°æ®ï¼Œè·å–æ•°æ®æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬è·å–åœ¨çº¿çš„åœ°ç†æ•°æ®ã€‚
- ç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆå§‹ä¸€ä¸ª `Layer`ï¼Œå¹¶æ·»åŠ åˆ° `Scene` å°±å®Œæˆäº†å›¾å±‚çš„æ·»åŠ ã€‚

``` javascript
fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ]);
    scene.addLayer(pointLayer);
  });
  ```

### å®Œæ•´ demo ä»£ç 

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>åˆ›å»ºåœ°å›¾åœºæ™¯</title>
    <style>
       html,body{overflow:hidden;margin:0;}
    	#map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/@antv/l7"></script>
<script>

  const scene = new L7.Scene({
    id: 'map',
    map: new L7.GaodeMap({
      style: 'dark', // æ ·å¼URL
      center: [120.19382669582967, 30.258134],
      pitch: 0,
      zoom: 12,
      token: 'é«˜å¾·åœ°å›¾token',
    }),
  });

fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
  .then(res => res.json())
  .then(data => {
    const pointLayer = new L7.PointLayer({})
      .source(data.list, {
        parser: {
          type: 'json',
          x: 'j',
          y: 'w'
        }
      })
      .shape('cylinder')
      .size('t', function(level) {
        return [ 1, 2, level * 2 + 20 ];
      })
      .color('t', [
        '#094D4A',
        '#146968',
        '#1D7F7E',
        '#289899',
        '#34B6B7',
        '#4AC5AF',
        '#5FD3A6',
        '#7BE39E',
        '#A1EDB8',
        '#CEF8D6'
      ]);
    scene.addLayer(pointLayer);
  });

</script>
</body>
</html>

```---
title: è·¯å¾„å›¾
order: 0
---
<embed src="@/docs/common/style.md"></embed>

æˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨åœ°å›¾ä¸Šç»˜åˆ¶è¯¸å¦‚é“è·¯ã€è¡ŒåŠ¨è·¯çº¿ã€æ°´ç³»ç­‰å¸¸è§çš„è·¯å¾„ï¼Œå¯ä»¥å°†è¿™äº›ç»˜åˆ¶çº¿çš„ç»Ÿç§°ä¸ºè·¯å¾„å›¾ï¼Œå³ç”¨ä¸€ç»„é¦–å°¾ä¸é—­åˆçš„ç‚¹åæ ‡å¯¹æ¥å®šä½çš„çº¿å›¾å±‚ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KEupSZ_p0pYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªå¸¸è§çš„è·¯å¾„å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate#animate_path_texture)

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 120.15, 30.246 ],
    zoom: 13.5,
    style: 'dark',
    rotation: -90
  })
});
scene.addImage('arrow', 'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg');
fetch('https://gw.alipayobjects.com/os/basement_prod/40ef2173-df66-4154-a8c0-785e93a5f18e.json')
.then(res => res.json())
.then(data => {
  const layer = new LineLayer({})
    .source(data)
    .size(3)
    .shape('line')
    .texture('arrow')
    .color('rgb(22,119,255)')
    .animate({
      interval: 1, // é—´éš”
      duration: 1, // æŒç»­æ—¶é—´ï¼Œå»¶æ—¶
      trailLength: 2 // æµçº¿é•¿åº¦
    })
    .style({
      opacity: 0.6,
      lineTexture: true, // å¼€å¯çº¿çš„è´´å›¾åŠŸèƒ½
      iconStep: 10, // è®¾ç½®è´´å›¾çº¹ç†çš„é—´è·
      borderWidth: 0.4, // é»˜è®¤æ–‡ 0ï¼Œæœ€å¤§æœ‰æ•ˆå€¼ä¸º 0.5
      borderColor: '#fff' // é»˜è®¤ä¸º #ccc
    });
  scene.addLayer(layer);
});
```
### shape

æˆ‘ä»¬ä¸€èˆ¬å°†è·¯å¾„å›¾çš„ `shape` å‚æ•°è®¾ç½®æˆ `line`ã€‚

### size

å¯¹äºè·¯å¾„å›¾ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªè¦è®¾ç½®å¸¸é‡è¡¨ç¤ºè·¯å¾„çš„å®½åº¦å³å¯ã€‚

```javascript
layer.size(2); // ç»˜åˆ¶å®½åº¦ä¸º 2 çš„è·¯å¾„
```
### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/border.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>

<embed src="@/docs/common/features/animate.zh.md"></embed>---
title: Path
order: 0
---

<embed src="@/docs/common/style.md"></embed>

We often need to draw common paths such as roads, action routes, water systems, etc. on the map. These drawn lines can be collectively called a path map, that is, a line layer positioned with a set of point coordinate pairs that are not closed at the beginning and end.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KEupSZ_p0pYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a common path diagram.

* you can`L7`Found on the official website[Online case](/examples/gallery/animate#animate_path_texture)

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 120.15, 30.246 ],
    zoom: 13.5,
    style: 'dark',
    rotation: -90
  })
});
scene.addImage('arrow', 'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg');
fetch('https://gw.alipayobjects.com/os/basement_prod/40ef2173-df66-4154-a8c0-785e93a5f18e.json')
.then(res => res.json())
.then(data => {
  const layer = new LineLayer({})
    .source(data)
    .size(3)
    .shape('line')
    .texture('arrow')
    .color('rgb(22,119,255)')
    .animate({
      interval: 1, // interval
      duration: 1, // duration, delay
      trailLength: 2 // streamline length
    })
    .style({
      opacity: 0.6,
      lineTexture: true, // Enable line mapping function
      iconStep: 10, // Set the spacing of the texture
      borderWidth: 0.4, //The default value is 0, the maximum valid value is 0.5
      borderColor: '#fff' // Default is #ccc
    });
  scene.addLayer(layer);
});
```

### shape

We generally refer to the path diagram as`shape`The parameters are set to`line`ã€‚

### size

For path diagrams, we generally only need to set a constant to represent the width of the path.

```javascript
layer.size(2); // Draw a path with width 2
```

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/border.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>

<embed src="@/docs/common/features/animate.zh.md"></embed>
---
title: å¤§åœ†èˆªçº¿
order: 3
---
<embed src="@/docs/common/style.md"></embed>

æŠŠåœ°çƒçœ‹åšä¸€ä¸ªçƒä½“ï¼Œé€šè¿‡åœ°é¢ä¸Šä»»æ„ä¸¤ç‚¹å’Œåœ°å¿ƒåšä¸€å¹³é¢ï¼Œå¹³é¢ä¸åœ°çƒè¡¨é¢ç›¸äº¤çœ‹åˆ°çš„åœ†å‘¨å°±æ˜¯å¤§åœ†ã€‚ä¸¤ç‚¹ä¹‹é—´çš„å¤§åœ†åŠ£å¼§çº¿æ˜¯ä¸¤ç‚¹åœ¨åœ°é¢ä¸Šçš„æœ€çŸ­è·ç¦»ã€‚æ²¿ç€è¿™ä¸€æ®µå¤§åœ†å¼§çº¿èˆªè¡Œæ—¶çš„èˆªçº¿ç§°ä¸ºå¤§åœ†èˆªçº¿ã€‚


<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*6Qm_QY69sBMAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„å¤§åœ†å¼§çº¿ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/line/arc/#arccircle)


```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    center: [ 107.77791556935472, 35.443286920228644 ],
    zoom: 2.9142882493605033
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')
    .then(res => res.text())
    .then(data => {
      const layer = new LineLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'lng1',
            y: 'lat1',
            x1: 'lng2',
            y1: 'lat2'
          }
        })
        .size(1)
        .shape('greatcircle')
        .color('#8C1EB2')
        .style({
          opacity: 0.8
        });
      scene.addLayer(layer);
    });
});

```

### source

ç»˜åˆ¶å¼§çº¿éœ€è¦åŒæ—¶æä¾›èµ·ç‚¹å’Œæ­¢ç‚¹çš„åæ ‡ï¼ˆèµ·æ­¢ç‚¹è°ƒæ¢ä½ç½®ï¼Œå¼§çº¿çš„å½¢çŠ¶ä¼šå¯¹ç§°ç›¸åï¼Œé£çº¿åŠ¨ç”»çš„æ–¹å‘ä¹Ÿä¼šç›¸åï¼‰ã€‚

```javascript
const data = [{
  lng1: 120, lat1: 30,
  lng2: 130, lat2: 30
}]
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### shape

ä¸ºäº†ç»˜åˆ¶å¤§åœ†å¼§çº¿å›¾ï¼Œæˆ‘ä»¬éœ€è¦å°† `shape` çš„å‚æ•°è®¾ç½®æˆ `greatcircle`ã€‚


<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: Simple Line
order: 4
---

<embed src="@/docs/common/style.md"></embed>

The simple line layer provides users with a better choice for large data volumes and can easily render line segments with hundreds of thousands of nodes. However, compared with ordinary line layers, the simple line layer is also lost. some other abilities.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HulgSKEJAKMAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple line.

* you can`L7`Found on the official website[Online case](/examples/gallery/animate#grid)

```javascript
import { LineLayer } from '@antv/l7';
const layer = new LineLayer()
  .source(data)
  .shape('simple')
  .size(10) // The size method does not take effect. The line width is always 1px.
  .color('#f00')
  .style(...)
```

### shape

In order to draw a simple line we need to`shape`The parameters are set to`simple`ã€‚

<embed src="@/docs/common/features/linear.zh.md"></embed>

ğŸŒŸ Simple line layer does not support animation and textures
---
title: ç®€å•çº¿å›¾å±‚
order: 4
---
<embed src="@/docs/common/style.md"></embed>

ç®€å•çº¿å›¾å±‚ä¸ºç”¨æˆ·æä¾›äº†ä¸€ç§å¤§æ•°æ®é‡æ€§èƒ½æ›´ä¼˜çš„é€‰æ‹©ï¼Œèƒ½è½»æ¾æ¸²æŸ“æœ‰å‡ åä¸‡ä¸ªèŠ‚ç‚¹çš„çº¿æ®µï¼Œä½†ç›¸åº”çš„ï¼Œå¯¹æ¯”ä¸æ™®é€šçš„çº¿å›¾å±‚ï¼Œç®€å•çº¿å›¾å±‚ä¹Ÿä¸¢å¤±äº†ä¸€äº›å…¶ä»–èƒ½åŠ›ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HulgSKEJAKMAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ç®€å•çº¿ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate#grid)

```javascript
import { LineLayer } from '@antv/l7';
const layer = new LineLayer()
  .source(data)
  .shape('simple')
  .size(10) // size æ–¹æ³•ä¸ç”Ÿæ•ˆ çº¿å®½å§‹ç»ˆä¸º 1px
  .color('#f00')
  .style(...)
```

### shape

ä¸ºäº†ç»˜åˆ¶ç®€å•çº¿ï¼Œæˆ‘ä»¬éœ€è¦å°† `shape` çš„å‚æ•°è®¾ç½®æˆ `simple`ã€‚

<embed src="@/docs/common/features/linear.zh.md"></embed>

ğŸŒŸ ç®€å•çº¿å›¾å±‚ä¸æ”¯æŒåŠ¨ç”»å’Œçº¹ç†
---
title: Great Circle
order: 3
---

<embed src="@/docs/common/style.md"></embed>

Consider the earth as a sphere, and draw a plane through any two points on the ground and the center of the earth. The circle seen when the plane intersects the earth's surface is a great circle. The great circle arc between two points is the shortest distance between the two points on the ground. The route along this great arc is called a great circle route.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*6Qm_QY69sBMAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple large arc line.

* you can`L7`Found on the official website[Online case](/examples/line/arc/#arccircle)

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    center: [ 107.77791556935472, 35.443286920228644 ],
    zoom: 2.9142882493605033
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')
    .then(res => res.text())
    .then(data => {
      const layer = new LineLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'lng1',
            y: 'lat1',
            x1: 'lng2',
            y1: 'lat2'
          }
        })
        .size(1)
        .shape('greatcircle')
        .color('#8C1EB2')
        .style({
          opacity: 0.8
        });
      scene.addLayer(layer);
    });
});
```

### source

To draw an arc, you need to provide the coordinates of both the starting point and the ending point (if the starting and ending points are swapped, the shape of the arc will be symmetrical and opposite, and the direction of the flying line animation will be opposite).

```javascript
const data = [{
  lng1: 120, lat1: 30,
  lng2: 130, lat2: 30
}]
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### shape

In order to draw a great arc line graph, we need to`shape`The parameters are set to`greatcircle`ã€‚

<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: åœ°ç†å›´å¢™
order: 5
---
<embed src="@/docs/common/style.md"></embed>

åœ°ç†å›´å¢™åœ¨åŸæœ‰çº¿å›¾å±‚çš„åŸºç¡€ä¸Šèµ‹äºˆäº†é«˜åº¦çš„æ¦‚å¿µï¼Œå…¶ä»–çš„ä½¿ç”¨å’Œæ™®é€šçš„çº¿å›¾ä¿æŒä¸€è‡´ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mLfxTb4mI6AAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ç®€å•çš„åœ°ç†å›´å¢™ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/line/wall/#hangzhou_wall)

## ä½¿ç”¨

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 119.297868, 29.732983 ],
    zoom: 7.11,
    rotation: 1.22,
    pitch: 45.42056074766357,
    style: 'dark'
  })
});

scene.on('loaded', () => {
  fetch(
    'https://gw.alipayobjects.com/os/bmw-prod/93a55259-328e-4e8b-8dc2-35e05844ed31.json'
  )
    .then(res => res.json())
    .then(data => {
      const layer = new LineLayer({})
        .source(data)
        .size(40)
        .shape('wall')
        .style({
          opacity: 'testOpacity',
          sourceColor: '#0DCCFF',
          targetColor: 'rbga(255,255,255, 0)'
        });
      scene.addLayer(layer);
    });
});

```


### shape

ä¸ºäº†ç»˜åˆ¶åœ°ç†å›´å¢™ï¼Œæˆ‘ä»¬éœ€è¦å°† `shape` çš„å‚æ•°è®¾ç½®æˆ `wall`ã€‚

<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

ğŸŒŸ ç›®å‰æ¸å˜è‰²çš„æ–¹å‘ä¸ºå‚ç›´å‘ä¸Š

<embed src="@/docs/common/features/texture.zh.md"></embed>

ğŸŒŸ åœ°ç†å›´æ æ”¯æŒäº†æ–°çš„æ ·å¼å‚æ•° iconStepCount

- çº¹ç†é—´éš”åªæœ‰åœ¨å¼€å¯çº¹ç†çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆ
- çº¹ç†é—´éš”æ”¯æŒé…ç½®çº¹ç†ä¹‹é—´çš„é—´è·
- çº¹ç†é—´éš”éœ€è¦å’Œçº¹ç†é—´è·é…åˆä½¿ç”¨

```javascript
.style({
  lineTexture: true, // å¼€å¯çº¿çš„è´´å›¾åŠŸèƒ½
  iconStep: 40, // è®¾ç½®è´´å›¾çº¹ç†çš„é—´è·
  iconStepCount: 4
})
```

<img width="80%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*3f8ORIbjJmkAAAAAAAAAAAAAARQnAQ'>

#### heightfixed

`wall` æ”¯æŒäº†å›ºå®šé«˜åº¦é…ç½® `heightfixed`ã€‚

```javascript
 .style({
     heightfixed: true // é»˜è®¤ä¸º falseï¼Œå¼€å¯åå®é™…ä¸–ç•Œé«˜åº¦ä¸å˜ï¼ˆæ³¨æ„è°ƒæ•´å°ºå¯¸ï¼‰
 })
```
---
title: 3D Arc
order: 2
---

<embed src="@/docs/common/style.md"></embed>

In addition to 2D arcs, we also point out 3D arcs. In use, just change`shape`parameters.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*xvaaQo2c0gMAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Below we will introduce how to draw a simple`3D`Arc diagram.

* you can`L7`Found on the official website[Online case](/examples/line/arc#trip_arc)

```javascript
import { LineLayer } from '@antv/l7';
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    opacity: 0.8,
  });
```

### source

To draw an arc, you need to provide the coordinates of both the starting point and the ending point (if the starting and ending points are swapped, the shape of the arc will be symmetrical and opposite, and the direction of the flying line animation will be opposite).

```javascript
const data = [{
  lng1: 120, lat1: 30,
  lng2: 130, lat2: 30
}]
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### shape

In order to draw an arc graph, we need to`shape`The parameters are set to`arc3d`ã€‚

<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: Wall
order: 5
---

<embed src="@/docs/common/style.md"></embed>

Geographic fencing gives the concept of height based on the original line layer, and other uses are consistent with ordinary line drawings.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mLfxTb4mI6AAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple geofence.

* you can`L7`Found on the official website[Online case](/examples/line/wall/#hangzhou_wall)

## use

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [ 119.297868, 29.732983 ],
    zoom: 7.11,
    rotation: 1.22,
    pitch: 45.42056074766357,
    style: 'dark'
  })
});

scene.on('loaded', () => {
  fetch(
    'https://gw.alipayobjects.com/os/bmw-prod/93a55259-328e-4e8b-8dc2-35e05844ed31.json'
  )
    .then(res => res.json())
    .then(data => {
      const layer = new LineLayer({})
        .source(data)
        .size(40)
        .shape('wall')
        .style({
          opacity: 'testOpacity',
          sourceColor: '#0DCCFF',
          targetColor: 'rbga(255,255,255, 0)'
        });
      scene.addLayer(layer);
    });
});
```

### shape

In order to draw geofences we need to`shape`The parameters are set to`wall`ã€‚

<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

ğŸŒŸ The current gradient direction is vertically upward

<embed src="@/docs/common/features/texture.zh.md"></embed>

ğŸŒŸ Geofence supports new style parameter iconStepCount

* Texture interval will only take effect when texture is turned on
* Texture spacing supports configuring the spacing between textures
* Texture spacing needs to be used in conjunction with texture spacing

```javascript
.style({
  lineTexture: true, // Enable line mapping function
  iconStep: 40, // Set the spacing of the texture
  iconStepCount: 4
})
```

<img width="80%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*3f8ORIbjJmkAAAAAAAAAAAAAARQnAQ'>

#### heightfixed

`wall`Fixed height configuration supported`heightfixed`ã€‚

```javascript
.style({
     heightfixed: true // The default is false. The actual world height does not change after it is turned on (note the size adjustment)
 })
```
---
title: 3D å¼§çº¿å›¾
order: 2
---
<embed src="@/docs/common/style.md"></embed>

é™¤äº† 2D çš„å¼§çº¿ï¼Œæˆ‘ä»¬è¿˜æŒ‡å‡º 3D çš„å¼§çº¿ï¼Œåœ¨ä½¿ç”¨ä¸Šåªè¦æ”¹å˜ `shape` çš„å‚æ•°å³å¯ã€‚


<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*xvaaQo2c0gMAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„ `3D` å¼§çº¿å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/line/arc#trip_arc)

```javascript
import { LineLayer } from '@antv/l7';
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    opacity: 0.8,
  });
```

### source

ç»˜åˆ¶å¼§çº¿éœ€è¦åŒæ—¶æä¾›èµ·ç‚¹å’Œæ­¢ç‚¹çš„åæ ‡ï¼ˆèµ·æ­¢ç‚¹è°ƒæ¢ä½ç½®ï¼Œå¼§çº¿çš„å½¢çŠ¶ä¼šå¯¹ç§°ç›¸åï¼Œé£çº¿åŠ¨ç”»çš„æ–¹å‘ä¹Ÿä¼šç›¸åï¼‰ã€‚

```javascript
const data = [{
  lng1: 120, lat1: 30,
  lng2: 130, lat2: 30
}]
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### shape

ä¸ºäº†ç»˜åˆ¶å¼§çº¿å›¾ï¼Œæˆ‘ä»¬éœ€è¦å°† `shape` çš„å‚æ•°è®¾ç½®æˆ `arc3d`ã€‚

<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: å¼§çº¿å›¾
order: 1
---
<embed src="@/docs/common/style.md"></embed>

æœ‰æ—¶å€™ä¸ºäº†å¯è§†åŒ–æ•ˆæœï¼Œä¼šé€‰æ‹©ä½¿ç”¨å¼§çº¿è¿æ¥åœ°å›¾ä¸Šçš„ä¸¤ç‚¹ã€‚åŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨å¼§çº¿å®Œæˆä¸€äº›æœ‰è¶£çš„æ•ˆæœã€‚


<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*dUk8RbtjUDIAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨å¼§çº¿ç»˜åˆ¶ä¸€ä¸ªæ¨¡æ‹Ÿçš„é£åœºã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/line/animate/#wind)

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 60, 40.7128 ],
    zoom: 2
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/bmw-prod/7455fead-1dc0-458d-b91a-fb4cf99e701e.txt')
    .then(res => res.text())
    .then(data => {
      const layer = new LineLayer({ blend: 'normal' })
        .source(data,
          {
            parser: {
              type: 'csv',
              x: 'lng1',
              y: 'lat1',
              x1: 'lng2',
              y1: 'lat2'
            }
          })
        .size(1)
        .shape('arc')
        .color('#6495ED')
        .animate({
          duration: 4,
          interval: 0.2,
          trailLength: 0.6
        });
      scene.addLayer(layer);
    });
});
```

### source

ç»˜åˆ¶å¼§çº¿éœ€è¦åŒæ—¶æä¾›èµ·ç‚¹å’Œæ­¢ç‚¹çš„åæ ‡ï¼ˆèµ·æ­¢ç‚¹è°ƒæ¢ä½ç½®ï¼Œå¼§çº¿çš„å½¢çŠ¶ä¼šå¯¹ç§°ç›¸åï¼Œé£çº¿åŠ¨ç”»çš„æ–¹å‘ä¹Ÿä¼šç›¸åï¼‰ã€‚

```javascript
const data = [{
  lng1: 120, lat1: 30,
  lng2: 130, lat2: 30
}]
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```
### shape

ä¸ºäº†ç»˜åˆ¶å¼§çº¿å›¾ï¼Œæˆ‘ä»¬éœ€è¦å°† `shape` çš„å‚æ•°è®¾ç½®æˆ `arc`ã€‚


<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/segment_number.zh.md"></embed>

<embed src="@/docs/common/features/theta_offset.zh.md"></embed>

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: Arc
order: 1
---

<embed src="@/docs/common/style.md"></embed>

Sometimes for the sake of visualization, you will choose to use arcs to connect two points on the map. At the same time, you can also use arcs to achieve some interesting effects.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*dUk8RbtjUDIAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### accomplish

Next we will introduce how to use arcs to draw a simulated wind field.

* you can`L7`Found on the official website[Online case](/examples/line/animate/#wind)

```javascript
import { Scene, LineLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 60, 40.7128 ],
    zoom: 2
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/bmw-prod/7455fead-1dc0-458d-b91a-fb4cf99e701e.txt')
    .then(res => res.text())
    .then(data => {
      const layer = new LineLayer({ blend: 'normal' })
        .source(data,
          {
            parser: {
              type: 'csv',
              x: 'lng1',
              y: 'lat1',
              x1: 'lng2',
              y1: 'lat2'
            }
          })
        .size(1)
        .shape('arc')
        .color('#6495ED')
        .animate({
          duration: 4,
          interval: 0.2,
          trailLength: 0.6
        });
      scene.addLayer(layer);
    });
});
```

### source

To draw an arc, you need to provide the coordinates of both the starting point and the ending point (if the starting and ending points are swapped, the shape of the arc will be symmetrical and opposite, and the direction of the flying line animation will be opposite).

```javascript
const data = [{
  lng1: 120, lat1: 30,
  lng2: 130, lat2: 30
}]
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### shape

In order to draw an arc graph, we need to`shape`The parameters are set to`arc`ã€‚

<embed src="@/docs/common/features/animate.zh.md"></embed>

### style

<embed src="@/docs/common/features/segment_number.zh.md"></embed>

<embed src="@/docs/common/features/theta_offset.zh.md"></embed>

<embed src="@/docs/common/features/linear.zh.md"></embed>

<embed src="@/docs/common/features/dash.zh.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: å¿«é€Ÿ issue
order: 5
---
<embed src="@/docs/common/style.md"></embed>

### ä¸ºä»€ä¹ˆæ Issue

- Issue æ˜¯å¼€æ”¾çš„ï¼Œçœ‹åˆ°çš„åŒå­¦å¯ä»¥è§£ç­”ï¼Œæå‡ºæƒ³æ³•ï¼Œæå‡ Issue çš„è§£å†³æ•ˆç‡
- Issue èƒ½å¤Ÿåšåˆ°å¾ˆå¥½çš„ä»»åŠ¡ç®¡ç†
- å¦‚æœè¯¥é—®é¢˜å¾—åˆ°è§£å†³ï¼Œé‡åˆ°åŒæ ·é—®é¢˜æ˜¯äººï¼Œå¯ä»¥å‚è€ƒè§£å†³ã€‚

### å¦‚ä½•æ issue 

1. æäº¤é—®é¢˜å‰ï¼Œè¯·å…ˆé˜…è¯» https://l7.antv.antgroup.com/tutorial/quickstart ä¸Šçš„æ–‡æ¡£ã€‚
2. æˆ‘ä»¬æ¨èå¦‚æœæ˜¯å°é—®é¢˜ï¼ˆé”™åˆ«å­—ä¿®æ”¹ï¼Œå°çš„ bug fixï¼‰ç›´æ¥æäº¤ PRã€‚
3. å¦‚æœæ˜¯ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œè¯·æä¾›ï¼šè¯¦ç»†éœ€æ±‚æè¿°ï¼Œæœ€å¥½æ˜¯æœ‰ä¼ªä»£ç å®ç°ã€‚
4. å¦‚æœæ˜¯ä¸€ä¸ª BUGï¼Œè¯·æä¾›ï¼šå¤ç°æ­¥éª¤ï¼Œé”™è¯¯æ—¥å¿—ä»¥åŠç›¸å…³é…ç½®ï¼Œå¹¶å°½é‡å¡«å†™ä¸‹é¢çš„æ¨¡æ¿ä¸­çš„æ¡ç›®ã€‚
5. å¦‚æœå¯ä»¥ï¼Œè¯·æä¾›å°½å¯èƒ½ç²¾ç®€çš„ codesandbox é“¾æ¥ï¼Œå¯ä½¿ç”¨ codesandbox æ¨¡æ¿Â https://codesandbox.io/s/45smpbï¼Œæ–¹ä¾¿æˆ‘ä»¬æ’æŸ¥é—®é¢˜ã€‚
6. æ‰©å±•é˜…è¯»ï¼š[å¦‚ä½•å‘å¼€æºé¡¹ç›®æäº¤æ— æ³•è§£ç­”çš„é—®é¢˜](https://zhuanlan.zhihu.com/p/25795393)

### å¦‚æœæä¾›å¤ç° demo

å¤ç°demo æ˜¯æŒ‡å¯è¿è¡Œçš„ä»£ç ç¯å¢ƒï¼Œä¸æ˜¯å¤åˆ¶ä»£ç ï¼Œæ¨èä½¿ç”¨ https://codesandbox.io/s/45smpb ï¼ŒåŒæ—¶å®˜ç½‘æä¾›äº†è‡ªåŠ¨è·³è½¬åˆ°codebox çš„èƒ½åŠ›ã€‚

- L7 demo é¡µé¢æ‰¾åˆ°ï¼Œéœ€è¦å¤ç°çš„å›¾å±‚æˆ–è€…ç›¸ä¼¼çš„demo
- åœ¨ sandbox æ‰“å¼€ å½“å‰demo

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*bKT5TrlYlGEAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

ä½ å¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°ï¼Œä»£ç åŒºçš„ä¸Šæ–¹æœ‰ä¸€æ’å·¥å…·æŒ‰é’®ã€‚


ç‚¹å‡»å·¦ä¾§ç¬¬ä¸‰ä¸ªæŒ‰é’®ï¼Œä½ å°±è¿›å…¥äº† `codesandbox`ã€‚

![L7 åœ°ç†å¯è§†åŒ–](https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*TrpMSJrrSDMAAAAAAAAAAABkARQnAQ)

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*coZsTLbX2FQAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

ä½ å‘ç°ä½ è¿›å…¥äº†ä¸€ä¸ªåœ¨çº¿çš„ä»£ç ç¼–è¾‘å™¨ï¼Œåœ¨è¿™é‡Œé¢ä½ å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œå¤ç°ä½ å‘ç°çš„é—®é¢˜ï¼Œç„¶åä¿å­˜ï¼Œå¹¶åœ¨é“¾æ¥å¤åˆ¶åˆ° Issue å†…å®¹ä¸­ã€‚


### ç°åœ¨ä½ å¯ä»¥å» L7 ä»“åº“æ issue

https://github.com/antvis/L7/issues/new

å¦‚æœè¿˜æ²¡æœ‰ star L7,å¯é¡ºæ‰‹ç‚¹ä¸ª starã€‚
---
title: Data
order: 2
---

<embed src="@/docs/common/style.md"></embed>

## data

Currently, the data formats supported by L7 are:`GeoJSON`ï¼Œ`CSV`ï¼Œ`JSON`ï¼Œ`Image`ã€‚

* `GeoJSON`Supports all standard spatial data formats such as points, lines, and areas.

* `CSV`Supports data types such as points, line segments, and arcs.

* `JSON`Supports simple point, line, and area data types, but does not support multi-point, multi-line, and multi-area data formats.

### GeoJSON

`GeoJSON`Is a format for encoding various geographic data structures. GeoJSON objects can represent geometries, features, or feature collections. GeoJSON supports the following geometry types: point, line, polygon, multipoint, multiline, polygon, and geometry collection. Features in GeoJSON include a geometric object and other attributes, and feature collections represent a series of features.

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              110.478515625,
              32.76880048488168
            ],
            [
              117.68554687499999,
              32.76880048488168
            ],
            [
              117.68554687499999,
              37.64903402157866
            ],
          ]
        ]
      }
    }
  ]
}
```

## Geostatistical analysis tools

[turfjs](http://turfjs.org/): Javascript library for geographic data calculation, processing, statistics, and analysis

## Online tools

<http://geojson.io/>You can view, draw and modify GeoJSON data online

<https://mapshaper.org/>Can view larger geojson and simplify GeoJSON data

## Data resources

#### National administrative division GeoJSON supports province, city and county latitude

[geojson, svg download](http://datav.aliyun.com/tools/atlas/#\&lat=33.50475906922609\&lng=104.32617187499999\&zoom=4)

#### HighCharts Global Administrative Division Dataset

<https://img.hcharts.cn/mapdata/>
---
title: æ•°æ®
order: 2
---

<embed src="@/docs/common/style.md"></embed>

## æ•°æ®

ç›®å‰L7æ”¯æŒçš„æ•°æ®æ ¼å¼æœ‰ `GeoJSON`ï¼Œ`CSV`ï¼Œ`JSON`ï¼Œ`Image`ã€‚

- `GeoJSON` æ”¯æŒç‚¹ã€çº¿ã€é¢ç­‰æ‰€æœ‰çš„æ ‡å‡†ç©ºé—´æ•°æ®æ ¼å¼ã€‚

- `CSV` æ”¯æŒç‚¹ã€çº¿æ®µã€å¼§çº¿ç­‰æ•°æ®ç±»å‹ã€‚

- `JSON` æ”¯æŒç®€å•çš„ç‚¹ã€çº¿ï¼Œé¢æ•°æ®ç±»å‹ï¼Œä¸æ”¯æŒå¤šç‚¹ï¼Œå¤šçº¿çš„ï¼Œå¤šé¢æ•°æ®æ ¼å¼ã€‚


### GeoJSON

`GeoJSON` æ˜¯ä¸€ç§å¯¹å„ç§åœ°ç†æ•°æ®ç»“æ„è¿›è¡Œç¼–ç çš„æ ¼å¼ã€‚GeoJSONå¯¹è±¡å¯ä»¥è¡¨ç¤ºå‡ ä½•ã€ç‰¹å¾æˆ–è€…ç‰¹å¾é›†åˆã€‚GeoJSONæ”¯æŒä¸‹é¢å‡ ä½•ç±»å‹ï¼šç‚¹ã€çº¿ã€é¢ã€å¤šç‚¹ã€å¤šçº¿ã€å¤šé¢å’Œå‡ ä½•é›†åˆã€‚GeoJSONé‡Œçš„ç‰¹å¾åŒ…å«ä¸€ä¸ªå‡ ä½•å¯¹è±¡å’Œå…¶ä»–å±æ€§ï¼Œç‰¹å¾é›†åˆè¡¨ç¤ºä¸€ç³»åˆ—ç‰¹å¾ã€‚

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              110.478515625,
              32.76880048488168
            ],
            [
              117.68554687499999,
              32.76880048488168
            ],
            [
              117.68554687499999,
              37.64903402157866
            ],
          ]
        ]
      }
    }
  ]
}
```

## åœ°ç†ç»Ÿè®¡åˆ†æå·¥å…·
[turfjs](http://turfjs.org/): Â åœ°ç†æ•°æ®è®¡ç®—ï¼Œå¤„ç†ï¼Œç»Ÿè®¡ï¼Œåˆ†æçš„Javascript åº“

## åœ¨çº¿å·¥å…·

[http://geojson.io/](http://geojson.io/) Â  Â å¯ä»¥åœ¨çº¿æŸ¥çœ‹ï¼Œç»˜åˆ¶ï¼Œä¿®æ”¹GeoJSONæ•°æ®

[https://mapshaper.org/](https://mapshaper.org/) Â å¯ä»¥æŸ¥çœ‹è¾ƒå¤§çš„geojsonï¼Œè¿˜èƒ½å¤Ÿç®€åŒ–GeoJSONæ•°æ®

## æ•°æ®èµ„æº

#### å…¨å›½è¡Œæ”¿åŒºåˆ’GeoJON æ”¯æŒçœå¸‚å¿ç»´åº¦Â 
[geojson, svgä¸‹è½½](http://datav.aliyun.com/tools/atlas/#&lat=33.50475906922609&lng=104.32617187499999&zoom=4)

#### HighCharts å…¨çƒè¡Œæ”¿åŒºåˆ’æ•°æ®é›†

[https://img.hcharts.cn/mapdata/](https://img.hcharts.cn/mapdata/)

---
title: Quick Issue
order: 5
---

<embed src="@/docs/common/style.md"></embed>

### Why issue

* Issues are open, and students who see them can answer them, put forward ideas, and improve the efficiency of solving Issues.
* Issue can achieve good task management
* If this problem is solved, people who encounter the same problem can refer to the solution.

### How to raise an issue

1. Before submitting a question, please read<https://l7.antv.antgroup.com/tutorial/quickstart>documentation on.
2. We recommend that if it is a minor issue (typos correction, minor bug fix), submit a PR directly.
3. If it is a new requirement, please provide: a detailed description of the requirement, preferably with pseudocode implementation.
4. If it is a BUG, â€‹â€‹please provide: reproduction steps, error logs and related configurations, and try to fill in the entries in the template below.
5. If possible, please provide a link to codesandbox that is as concise as possible, using codesandbox templates<https://codesandbox.io/s/45smpbï¼Œæ–¹ä¾¿æˆ‘ä»¬æ’æŸ¥é—®é¢˜ã€‚>
6. Further reading:[How to submit unanswered questions to open source projects](https://zhuanlan.zhihu.com/p/25795393)

### If you provide a reproduction demo

Reproducing demo refers to a runnable code environment, not copying code, and is recommended.<https://codesandbox.io/s/45smpb>, and the official website provides the ability to automatically jump to the codebox.

* Found on the L7 demo page, the layer or similar demo that needs to be reproduced
* Open the current demo in the sandbox

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*bKT5TrlYlGEAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

You may not have noticed that there is a row of tool buttons above the code area.

Click the third button on the left and you will enter`codesandbox`ã€‚

![L7 åœ°ç†å¯è§†åŒ–](https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*TrpMSJrrSDMAAAAAAAAAAABkARQnAQ)

<img src="https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*coZsTLbX2FQAAAAAAAAAAABkARQnAQ" alt="L7 åœ°ç†å¯è§†åŒ–" width = "50%" height = "100%">

You find that you have entered an online code editor, where you can modify the code to reproduce the problems you discovered, then save it and copy the link to the Issue content.

### Now you can go to the L7 warehouse to file an issue

<https://github.com/antvis/L7/issues/new>

If you donâ€™t have star L7 yet, you can click star now.
---
title: å›¾å±‚é«˜äº®
order: 0
---
<embed src="@/docs/common/style.md"></embed>

åœ°ç†å¯è§†åŒ–é™¤äº†æ•°æ®å±•ç¤ºï¼Œè¿˜éœ€è¦ç”¨æˆ·äº¤äº’ï¼Œç”¨æˆ·äº¤äº’ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ã€‚

- å›¾å±‚äº¤äº’
- æ•°æ®äº¤äº’

### å›¾å±‚äº¤äº’

é¼ æ ‡åœ¨å¯è§†åŒ–å›¾å±‚ä¸Šè¿›è¡Œç›¸å…³æ“ä½œï¼Œç„¶åå›¾å±‚ä¼šæœ‰ç›¸åº”çš„å“åº”ã€‚`L7` çš„ `Layer` å›¾å±‚ç›®å‰åŸç”Ÿæ”¯æŒä¸¤ç§äº¤äº’èƒ½åŠ›ã€‚

- `active` é¼ æ ‡æ»‘è¿‡é«˜äº®
- `select` é¼ æ ‡é€‰ä¸­é«˜äº®

#### active(activeOption | boolean): void

- å¼€å¯æˆ–è€…å…³é—­ `mousehover` å…ƒç´ é«˜äº®æ•ˆæœã€‚
- `activeOption`
  - `color`: é«˜äº®é¢œè‰²
  - `mix`: å¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸º 0ï¼Œè¡¨ç¤ºé«˜äº®é¢œè‰²æ˜¯æŒ‡å®šçº¯è‰²ï¼Œæœ€å¤§æœ‰æ•ˆå€¼æ˜¯1ï¼Œè¡¨ç¤ºé«˜äº®è‰²å…¨éƒ¨æ˜¯åº•è‰²

```javascript
// å¼€å¯ Active  ä½¿ç”¨é»˜è®¤é«˜äº®é¢œè‰²
layer.active(true)

//  å¼€å¯ Active  è‡ªå®šä¹‰é«˜äº®é¢œè‰²

layer.active({
  color: 'red',
  mix: .6,
})

// å…³é—­é«˜äº®æ•ˆæœ
layer.active(false)
```

#### select(selectOption | boolean): void

- å¼€å¯æˆ–è€…å…³é—­ `mouseclick` å…ƒç´ é€‰ä¸­é«˜äº®æ•ˆæœã€‚
- `selectOption`
  - `color`: é€‰ä¸­é«˜äº®é¢œè‰²
  - `mix`: å¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸º 0ï¼Œè¡¨ç¤ºé€‰ä¸­é«˜äº®é¢œè‰²æ˜¯æŒ‡å®šçº¯è‰²ï¼Œæœ€å¤§æœ‰æ•ˆå€¼æ˜¯1ï¼Œè¡¨ç¤ºé€‰ä¸­é«˜äº®è‰²å…¨éƒ¨æ˜¯åº•è‰²

```javascript
// å¼€å¯ Active  ä½¿ç”¨é»˜è®¤é«˜äº®é¢œè‰²
layer.select(true)

//  å¼€å¯ Active  è‡ªå®šä¹‰é«˜äº®é¢œè‰²

layer.select({
  color: 'red',
  mix: .6,
})

// å…³é—­é«˜äº®æ•ˆæœ
layer.select(false)
```

### æ•°æ®äº¤äº’

æœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦ç›´æ¥æŒ‡å®šæŸä¸ªæ•°æ®é«˜äº®ï¼Œæ¯”å¦‚é¼ æ ‡ç‚¹å‡»æ•°æ®é¢æ¿çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é«˜äº®åœ°å›¾å¯¹åº”çš„å…ƒç´ ã€‚

#### setActive(id: number): void

```javascript
layer.setActive(id);
```

#### setSelect(id: number): void

```javascript
layer.setSelect(id);
```


---
title: HightLight
order: 0
---

<embed src="@/docs/common/style.md"></embed>

In addition to data display, geographical visualization also requires user interaction. User interaction is generally divided into two types.

* Layer interaction
* Data interaction

### Layer interaction

The mouse performs related operations on the visualization layer, and the layer will respond accordingly.`L7`of`Layer`Layers currently natively support two interaction capabilities.

* `active`Mouse over highlight
* `select`Mouse selection highlight

#### active(activeOption | boolean): void

* Turn on or off`mousehover`Element highlighting effect.
* `activeOption`
  * `color`: Highlight color
  * `mix`: Optional parameter, the default is 0, which means the highlight color is the specified solid color. The maximum valid value is 1, which means the highlight color is all the background color.

```javascript
// Turn on Active and use the default highlight color
layer.active(true)

// Turn on Active custom highlight color

layer.active({
  color: 'red',
  mix: .6,
})

//Turn off the highlight effect
layer.active(false)
```

#### select(selectOption | boolean): void

* Turn on or off`mouseclick`Element selection highlight effect.
* `selectOption`
  * `color`: Select highlight color
  * `mix`: Optional parameter, the default is 0, which means that the selected highlight color is the specified solid color. The maximum effective value is 1, which means that all the selected highlight colors are background colors.

```javascript
// Turn on Active and use the default highlight color
layer.select(true)

// Turn on Active custom highlight color

layer.select({
  color: 'red',
  mix: .6,
})

//Turn off the highlight effect
layer.select(false)
```

### Data interaction

Sometimes we may need to directly specify a certain data highlight. For example, when the mouse clicks on the data in the data panel, we need to highlight the corresponding element of the map.

#### setActive(id: number): void

```javascript
layer.setActive(id);
```

#### setSelect(id: number): void

```javascript
layer.setSelect(id);
```
---
title: Quick Start
order: 1
---

<embed src="@/docs/common/style.md"></embed>

`L7`Available online`CDN`as well as`NPM`Quick access in the form of packages. pass`L7`With the capabilities provided, we can quickly complete map visualization.

## Installation introduction

### Introduced via npm

```javascript
//Install L7 dependencies
npm install --save @antv/l7
//Install third-party basemap dependencies
npm install --save @antv/l7-maps
```

### Imported via CDN

```html
<head>
<! --Introducing the latest version of L7-->
<script src = 'https://unpkg.com/@antv/l7'></script>
<! --Specify the version number to introduce L7-->
<script src = 'https://unpkg.com/@antv/l7@2.0.11'></script>
</head>
```

CDN reference obtains and initializes all objects through the L7 namespace when used, such as L7.scene, L7.GaodeMap

```javascript
import { Scene } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new L7.Scene({
  id: 'map',
  map: new L7.GaodeMap({
    style: 'dark',
    center: [110.770672, 34.159869],
    pitch: 45,
  }),
});
```

## Basic tutorial

### Map component usage

1. To initialize the map, you first need to add a Dom to the page for map initialization.

```html
<div style="min-height: 500px; justify-content: center;position: relative" id="map"/>
```

2. Initialize Gaode map

```javascript
import { GaodeMap } from '@antv/l7-maps';
//Similarly you can also initialize a Mapbox map
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 35.210526315789465,
    style: 'dark',
    center: [ 104.288144, 31.239692 ],
    zoom: 4.4
  })
})
```

ğŸŒŸ At this point, interactive map content will appear on the page.

### Draw fill plot

After the map initialization is completed, we can add visual data to the map. Here we take China's administrative district data as an example of how to visualize surface data.
Data source: Chinese provinces[GeoJSON](https://gw.alipayobjects.com/os/bmw-prod/d6da7ac1-8b4f-4a55-93ea-e81aa08f0cf3.json)data.

1. We use polygon layers to draw administrative division data and obtain geometric planes covering the map surface.

```javascript
import {  PolygonLayer } from '@antv/l7';
 const chinaPolygonLayer = new PolygonLayer({})
  .source(data)
  .color('name', [
    'rgb(239,243,255)',
    'rgb(189,215,231)',
    'rgb(107,174,214)',
    'rgb(49,130,189)',
    'rgb(8,81,156)'
  ]);
```

2. After the layer is created, we need to add it to`Scene`displayed in .

```javascript
scene.addLayer(chinaPolygonLayer)
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*iUZVSYBtKnMAAAAAAAAAAAAAARQnAQ)

3. Simple filling visualization is still not intuitive enough, we can use`LineLayer`and`PointLayer`Add administrative division strokes and administrative division text labels.

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*Tf95Qp43Z6IAAAAAAAAAAAAAARQnAQ)

4. The visualization becomes clearer after adding borders and text annotations.

[View full code](https://codesandbox.io/s/l7-tianchongtujiaocheng-275ix?file=/index.js)

### Interactive fill plot

Simply displaying the data does not meet my needs. We may need to view the relevant information of each block or add some highlighting effects.

#### Highlight by default

`L7`Add a default highlight effect to the layer, and the default highlight effect can change the color.

```javascript
chinaPolygonLayer.active(true) // Turn on the default highlighting effect

chinaPolygonLayer.active({color: red}) // Turn on and set the highlight color to red
```

| **![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*vik-Q7frCMMAAAAAAAAAAAAAARQnAQ)** | **![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*RJiaS498G4wAAAAAAAAAAAAAARQnAQ)** |
| ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| Default blue highlight effect                                                                           | Change highlight color                                                                                  |

#### Custom highlight effect

The default highlight effect can only change the color, which may not meet my needs. We may need a white stroke. Can this be achieved? The answer is definitely yes.

1. Add a new layer as the highlight layer, set the data to empty data and the shape to`line`

```javascript
const hightLayer = new LineLayer({
  zIndex: 4, //Set the display level
  name: 'highlight'
}) .source({
    type: 'FeatureCollection',
    features: [ ]
  })
  .shape('line')
  .size(2)
  .color('red');
scene.addLayer(hightLayer);
```

2. In this way, we can listen to the mouse events of the layer that needs to be highlighted, obtain the currently selected data, and then update`hightLayer`It can also achieve stroke highlighting effect.

```javascript
chinaPolygonLayer.on('click', feature => {
    hightLayer.setData({
      type: 'FeatureCollection',
      features: [ feature.feature ]
    });
  });
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*fr9DTY54rhUAAAAAAAAAAAAAARQnAQ)

3. Add a click highlight red stroke effect to the layer

At this point we have learned how to customize the highlight effect. Here is a small question: "How to achieve the double stroke highlight effect?"

[View example](https://codesandbox.io/s/zidingyigaoliang-7vkso?file=/index.js)

#### Add information Popup information window

During mouse interaction, in addition to highlighting the crossed area, we also need information related to the information area, here`L7`provided`Popup`Components are used to display relevant information on the map.

Introduce objects

```javascript
import { Popup } from "@antv/l7";
```

We can decide when to display Popup by listening to mouse events on Layer.

```javascript
layer.on('mousemove', e => {
   const popup = new Popup({
     offsets: [ 0, 0 ],
     closeButton: false
   })
   .setLnglat(e.lngLat)
   .setHTML(`<span>åœ°åŒº: ${e.feature.properties.name}</span><br><span>ç¡®è¯Šæ•°: ${e.feature.properties.case}</span>`);
   scene.addPopup(popup);
   });
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*2isvTq-s0OMAAAAAAAAAAAAAARQnAQ)

[View example](https://codesandbox.io/s/popup-x3j00?file=/index.js)

### Add legend

Above we have learned how to visualize data. On the map we can treat different areas as different colors, but how to understand what different colors mean, we need to add a legend.

`L7`There is currently no default legend component. You need to create the legend yourself. Here we introduce how to`L7 Control`The base class creates a legend component. Of course, you can also implement an independent legend.`Dom`components.

`L7`Provides a default`Zoom`ï¼Œ`Scale`ï¼Œ`Logo`These components are all based on the same base class`Control`Components, today we are based on`Control`Implement a custom legend component.

1. introduce`Control`base class

```javascript
import { Control } from "@antv/l7";
```

2. Initialize base class

```javascript
const legend = new Control({
  position: "bottomright"
});
```

3. set up`Control`Show content

by extension`Control`of`onAdd`We can freely customize the method`Control`Need to display content and interaction.

```javascript
legend.onAdd = function () {
  var el = document.createElement("div");
  el.className = "infolegend legend";
  var grades = [0, 10, 20, 50, 100, 200, 500];
  for (var i = 0; i < grades.length; i++) {
    el.innerHTML +=
      '<i style="background:' + color[i] + '"></i> ' + grades[i] +
      (grades[i + 1] ? "â€“" + grades[i + 1] + "<br>" : "+");
  }
  return el;
};
```

4. Add to map

```javascript
scene.addControl(legend)
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*7VNfRodZ_8AAAAAAAAAAAAAAARQnAQ)

[View example](https://codesandbox.io/s/tuli-keov0?file=/index.js)

Here we introduce how to define it by yourself`Control`way to implement the legend, by customizing`Control`Many of our map components, such as full-screen components, positioning components, and many other components needed for business, lucky students can try them out.

### Timing change diagram

What we visualized above is static data, but many times our data changes with time. How to visualize time series data? Here we introduce two time series data visualization methods.

#### Prepare data

Geographical data:[U.S. state administrative division data](https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json)Attribute data:[0908-1008 COVID-19 diagnosis data by state in the United States in the past 30 days](https://gw.alipayobjects.com/os/bmw-prod/bed5e504-04d5-4d96-a335-163e038dc65a.csv)ã€‚

#### update data

As time changes, the data will definitely change, so the simplest way is to update the data every time.

```javascript
otherPolygonLayer.setData(newData);
```

[Complete example](https://codesandbox.io/s/shujugengxin-kgwy0?file=/index.js)

#### update color

A large part of the scenarios for updating time series data are updating attribute data, such as data from different years in each province.`GDP`Data, spatial data itself has not changed (no increase or decrease and no boundary update). In this case, the surface layer may only need to be updated according to the new data. Pass of course`setData`It can also be achieved.`L7`Looking at the internal implementation mechanism Update`color`is more efficient than`setData`Much more efficient.

Update the data display by updating the color mapping field.

```javascript
const setColor = (d) => {
      return d > 100000
        ? color[7]
        : d > 80000
        ? color[6]
        : d > 40000
        ? color[5]
        : d > 20000
        ? color[4]
        : d > 10000
        ? color[3]
        : d > 5000
        ? color[2]
        : d > 1000
        ? color[1]
        : color[0];
    }

chinaPolygonLayer.color('2020-09-01', setColor)
chinaPolygonLayer.color('2020-09-02', setColor)
```

Note that the updated color takes effect and needs to be called`Scene.render();`ã€‚

[View example](https://codesandbox.io/s/shujugengxin-forked-0zul8?file=/index.js)

### Add map label

`L7`Base`WebGL`It is relatively simple to draw simple points, lines, and surfaces. It is more difficult to implement more complex map annotations. In order to solve this problem`L7`Added`Marker`Components you can base on`DOM`Achieve various complex annotations.

```javascript
import { Marker } from '@antv/l7';
 const el = document.createElement('label');
 el.className = 'labelclass';
el.textContent = nodes[i].v + 'â„ƒ';
el.style.background = 'red';
el.style.borderColor = '#fff;
const marker = new Marker({ element: el})
  .setLnglat({ lng: 112, lat: 30});
scene.addMarker(marker);
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*8X9uRZPI3-oAAAAAAAAAAAAAARQnAQ)

[View full code](https://codesandbox.io/s/nifty-yonath-k6zor?file=/index.html)

### Add map component

In addition to the map visualization layer, we may need to add auxiliary map tools such as zoom in and out, scale bar, layer list and other components.

```javascript
import { Scale, Zoom } from '@antv/l7';
const zoomControl = new Zoom({ position: 'topright' });
const scaleControl = new Scale({ position: 'bottomright'});
//Add to map scene
scene.addControl(zoomControl);
scene.addControl(scaleControl);
```

#### Custom component

The legend introduced above is a custom component. We can also add any component content or add map interaction to the component.
For more usage methods, please refer to`L7`Provides default components[Source code](https://github.com/antvis/L7/tree/master/packages/component/src/control)

## Use templates for different projects

Different project templates in`CodeSandbox`You can preview it or download it locally.

### React

[address](https://codesandbox.io/s/l720react-jfwyz)

### Vue

[address](https://codesandbox.io/s/l720vue-uef1x)

### Angular

[address](https://codesandbox.io/s/angulartest-chpff)

### HTML CDN

[address](https://codesandbox.io/s/l7cdndemo-gfg9m)
---
title: ç½‘æ ¼çƒ­åŠ›å›¾
order: 1
---
<embed src="@/docs/common/style.md"></embed>

å°†ä¸€ç»„ç‚¹æ•°æ®æŒ‰ç…§ç­‰å¤§å°çš„æ­£æ–¹å½¢ç½‘æ ¼è¿›è¡Œèšåˆï¼Œä¸€ä¸ªæ­£æ–¹å½¢ç½‘æ ¼ä»£è¡¨ç½‘æ ¼å†…æ‰€æœ‰ç‚¹çš„ç»Ÿè®¡å€¼ã€‚æ–¹æ ¼çƒ­åŠ›å›¾ç‰¹ç‚¹ä»¥æ–¹æ ¼ç½‘å¸ƒå±€ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*XPBuSIPPgsgAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„ç½‘æ ¼çƒ­åŠ›å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/heatmap/grid#china)

```javascript
import { Scene, HeatmapLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 107.054293, 35.246265 ],
    zoom: 4.056
  })
});
scene.on('loaded', () => {
  fetch(
    'https://gw.alipayobjects.com/os/basement_prod/7359a5e9-3c5e-453f-b207-bc892fb23b84.csv'
  )
    .then(res => res.text())
    .then(data => {
      const layer = new HeatmapLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'lng',
            y: 'lat'
          },
          transforms: [
            {
              type: 'grid',
              size: 20000,
              field: 'v',
              method: 'sum'
            }
          ]
        })
        .shape('square')
        .style({
          coverage: 1,
          angle: 0
        })
        .color(
          'count',
          [
            '#0B0030',
            '#100243',
            '#100243',
            '#1B048B',
            '#051FB7',
            '#0350C1',
            '#0350C1',
            '#0072C4',
            '#0796D3',
            '#2BA9DF',
            '#30C7C4',
            '#6BD5A0',
            '#A7ECB2',
            '#D0F4CA'
          ].reverse()
        );

      scene.addLayer(layer);
    });
});

```

### source

ç½‘æ ¼æ•°æ®åªæ”¯æŒç‚¹æ•°æ®ä½œä¸ºæ•°æ®æºï¼Œæ•°æ®æ ¼å¼æ”¯æŒ `csv`ã€`json`ã€`geojson`ã€‚

#### è®¾ç½®ç½‘æ ¼èšåˆå‚æ•°

å¸ƒå±€æ–¹æ³• é€šè¿‡ `source` çš„ `tansforms` å±æ€§é…ç½®ã€‚

- typeÂ  æ•°æ®èšåˆç±»å‹ `hexagon`ã€‚
- sizeÂ  ç½‘æ ¼åŠå¾„ å•ä½ ç±³ã€‚
- fieldÂ  èšåˆå­—æ®µã€‚
- method èšåˆæ–¹æ³• `count`ï¼Œ`max`ï¼Œ`min`ï¼Œ`sum`ï¼Œ`mean` 5 ä¸ªç»Ÿè®¡ç»´åº¦ã€‚

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
  transforms: [
    {
      type: 'grid',
      size: 15000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

### shape

ç½‘æ ¼çƒ­åŠ›å›¾è™½ç„¶æ˜¯ä»¥æ ‡å‡†å››è¾¹å½¢ç½‘æ ¼è¿›è¡Œæ•°æ®èšåˆï¼Œä½†æ˜¯å±•ç¤ºæ•ˆæœä¸Šå¯ä»¥è®¾ç½®ä¸ºå„ç§å½¢çŠ¶ï¼Œå½¢çŠ¶åªæ”¯æŒå¸¸é‡ã€‚

#### 2d

- circle,
- triangle
- square
- heaxgon

```javascript
layer.shape('circle');
```

#### 3d

- cylinder
- triangleColumn
- hexagonColumn
- squareColumn,

```javascript
layer.shape('cylinder');
```

### size

### 2D shape

ä¸éœ€è¦è®¾ç½® size æ–¹æ³•

### 3D å›¾å½¢

size è¡¨ç¤ºé«˜åº¦, æ”¯æŒå¸¸é‡å’Œæ•°æ®æ˜ å°„

```javascript
layer.size(10); // å¸¸é‡
layer.size('value', [10, 50]); // æ ¹æ®value å­—æ®µæ˜ å°„å¤§å°
layer.size('value', (value) => {}); // å›è°ƒå‡½æ•°è®¾ç½®é«˜åº¦
```

### color

åŒ layer color æ–¹æ³•

### style

- coverage ç½‘æ ¼è¦†ç›–åº¦ 0 - 1
- angle ç½‘æ ¼æ—‹è½¬è§’åº¦ 0 - 360
- opacity é€æ˜åº¦ 0 - 1.0

```javascript
layer.style({
  coverage: 0.9,
  angle: 0,
  opacity: 1.0,
});
```---
title: Grid Heatmap
order: 1
---

<embed src="@/docs/common/style.md"></embed>

Aggregate a set of point data into square grids of equal size. A square grid represents the statistical values â€‹â€‹of all points in the grid. The grid heat map features a grid layout.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*XPBuSIPPgsgAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a simple grid heat map.

* you can`L7`Found on the official website[Online case](/examples/heatmap/grid#china)

```javascript
import { Scene, HeatmapLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'light',
    center: [ 107.054293, 35.246265 ],
    zoom: 4.056
  })
});
scene.on('loaded', () => {
  fetch(
    'https://gw.alipayobjects.com/os/basement_prod/7359a5e9-3c5e-453f-b207-bc892fb23b84.csv'
  )
    .then(res => res.text())
    .then(data => {
      const layer = new HeatmapLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'lng',
            y: 'lat'
          },
          transforms: [
            {
              type: 'grid',
              size: 20000,
              field: 'v',
              method: 'sum'
            }
          ]
        })
        .shape('square')
        .style({
          coverage: 1,
          angle: 0
        })
        .color(
          'count',
          [
            '#0B0030',
            '#100243',
            '#100243',
            '#1B048B',
            '#051FB7',
            '#0350C1',
            '#0350C1',
            '#0072C4',
            '#0796D3',
            '#2BA9DF',
            '#30C7C4',
            '#6BD5A0',
            '#A7ECB2',
            '#D0F4CA'
          ].reverse()
        );

      scene.addLayer(layer);
    });
});
```

### source

Grid data only supports point data as the data source, and the data format supports`csv`ã€`json`ã€`geojson`ã€‚

#### Set grid aggregation parameters

layout method pass`source`of`tansforms`Property configuration.

* type data aggregation type`hexagon`ã€‚
* size grid radius in meters.
* field Aggregation field.
* method aggregation method`count`ï¼Œ`max`ï¼Œ`min`ï¼Œ`sum`ï¼Œ`mean`5 statistical dimensions.

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
  transforms: [
    {
      type: 'grid',
      size: 15000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

### shape

Although the grid heat map uses a standard quadrilateral grid for data aggregation, the display effect can be set to various shapes, and the shape only supports constants.

#### 2d

* circle,
* triangle
* square
* heaxgon

```javascript
layer.shape('circle');
```

#### 3d

* cylinder
* triangleColumn
* hexagonColumn
* squareColumn,

```javascript
layer.shape('cylinder');
```

### size

### 2D shape

No need to set size method

### 3D graphics

size represents height, supports constants and data mapping

```javascript
layer.size(10); // constant
layer.size('value', [10, 50]); // Map size based on value field
layer.size('value', (value) => {}); // Callback function to set height
```

### color

Same as layer color method

### style

* coverage Grid coverage 0 - 1
* angle Grid rotation angle 0 - 360
* opacity transparency 0 - 1.0

```javascript
layer.style({
  coverage: 0.9,
  angle: 0,
  opacity: 1.0,
});
```
---
title: hexagon heatmap
order: 2
---

<embed src="@/docs/common/style.md"></embed>

Aggregate a set of point data into hexagonal grids of equal size. One hexagonal grid represents the statistical values â€‹â€‹of all points in the grid. The Honeycomb Heatmap feature is laid out in a hexagonal heatmap grid.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*SLcGSbvZoEwAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Letâ€™s introduce how to draw a simple cellular heat map.

* you can`L7`Found on the official website[Online case](/examples/heatmap/hexagon/#china)

```javascript
import { Scene, HeatmapLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    pitch: 43,
    center: [ 120.13383079335335, 29.651873105004427 ],
    zoom: 7.068989519212174
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/a1a8158d-6fe3-424b-8e50-694ccf61c4d7.csv')
    .then(res => res.text())
    .then(data => {
      const layer = new HeatmapLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'lng',
            y: 'lat'
          },
          transforms: [
            {
              type: 'hexagon',
              size: 2500,
              field: 'v',
              method: 'sum'
            }
          ]
        })
        .size('sum', sum => {
          return sum * 200;
        })
        .shape('hexagonColumn')
        .style({
          coverage: 0.8,
          angle: 0,
        })
        .color('sum', [
          '#094D4A',
          '#146968',
          '#1D7F7E',
          '#289899',
          '#34B6B7',
          '#4AC5AF',
          '#5FD3A6',
          '#7BE39E',
          '#A1EDB8',
          '#C3F9CC',
          '#DEFAC0',
          '#ECFFB1'
        ]);
      scene.addLayer(layer);
    });
});
```

### source

Grid data only supports point data as the data source, and the data format supports`csv`ã€`json`ã€`geojson`ã€‚

#### Set grid aggregation parameters

layout method pass`source`of`tansforms`Property configuration.

* type data aggregation type`hexagon`ã€‚
* size grid radius in meters.
* field Aggregation field.
* method aggregation method`count`ï¼Œ`max`ï¼Œ`min`ï¼Œ`sum`ï¼Œ`mean`5 statistical dimensions.

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
  transforms: [
    {
      type: 'hexagon',
      size: 15000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

### shape

Although the grid heat map uses a standard quadrilateral grid for data aggregation, the display effect can be set to its shape. The shape only supports constants.

#### 2d

* circle,
* triangle
* square
* heaxgon

```javascript
layer.shape('circle');
```

#### 3d

* cylinder
* triangleColumn
* hexagonColumn
* squareColumn,

```javascript
layer.shape('cylinder');
```

### size

### 2D shape

No need to set size method

### 3D graphics

size represents height, supports constants and data mapping

```javascript
layer.size(10); // constant
layer.size('value', [10, 50]); // Map size based on value field
layer.size('value', (value) => {}); // Callback function to set height
```

### style

* coverage Grid coverage 0 - 1
* angle Grid rotation angle 0 - 360
* opacity transparency 0 - 1.0

```javascript
layer.style({
  coverage: 0.9,
  angle: 0,
  opacity: 1.0,
});
```
---
title: èœ‚çªçƒ­åŠ›å›¾
order: 2
---
<embed src="@/docs/common/style.md"></embed>

å°†ä¸€ç»„ç‚¹æ•°æ®æŒ‰ç…§ç­‰å¤§å°çš„å…­è¾¹å½¢ç½‘æ ¼è¿›è¡Œèšåˆï¼Œä¸€ä¸ªå…­è¾¹å½¢ç½‘æ ¼ä»£è¡¨ç½‘æ ¼å†…æ‰€æœ‰ç‚¹çš„ç»Ÿè®¡å€¼ã€‚èœ‚çªçƒ­åŠ›å›¾ç‰¹ç‚¹ä»¥å…­è¾¹å½¢çƒ­åŠ›å›¾ç½‘æ ¼å¸ƒå±€ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*SLcGSbvZoEwAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„èœ‚çªçƒ­åŠ›å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/heatmap/hexagon/#china)

```javascript
import { Scene, HeatmapLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    pitch: 43,
    center: [ 120.13383079335335, 29.651873105004427 ],
    zoom: 7.068989519212174
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/a1a8158d-6fe3-424b-8e50-694ccf61c4d7.csv')
    .then(res => res.text())
    .then(data => {
      const layer = new HeatmapLayer({})
        .source(data, {
          parser: {
            type: 'csv',
            x: 'lng',
            y: 'lat'
          },
          transforms: [
            {
              type: 'hexagon',
              size: 2500,
              field: 'v',
              method: 'sum'
            }
          ]
        })
        .size('sum', sum => {
          return sum * 200;
        })
        .shape('hexagonColumn')
        .style({
          coverage: 0.8,
          angle: 0,
        })
        .color('sum', [
          '#094D4A',
          '#146968',
          '#1D7F7E',
          '#289899',
          '#34B6B7',
          '#4AC5AF',
          '#5FD3A6',
          '#7BE39E',
          '#A1EDB8',
          '#C3F9CC',
          '#DEFAC0',
          '#ECFFB1'
        ]);
      scene.addLayer(layer);
    });
});

```

### source

ç½‘æ ¼æ•°æ®åªæ”¯æŒç‚¹æ•°æ®ä½œä¸ºæ•°æ®æºï¼Œæ•°æ®æ ¼å¼æ”¯æŒ `csv`ã€`json`ã€`geojson`ã€‚

#### è®¾ç½®ç½‘æ ¼èšåˆå‚æ•°

å¸ƒå±€æ–¹æ³• é€šè¿‡ `source` çš„ `tansforms` å±æ€§é…ç½®ã€‚

- typeÂ  æ•°æ®èšåˆç±»å‹ `hexagon`ã€‚
- sizeÂ  ç½‘æ ¼åŠå¾„ å•ä½ ç±³ã€‚
- fieldÂ  èšåˆå­—æ®µã€‚
- method èšåˆæ–¹æ³• `count`ï¼Œ`max`ï¼Œ`min`ï¼Œ`sum`ï¼Œ`mean` 5 ä¸ªç»Ÿè®¡ç»´åº¦ã€‚

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
  transforms: [
    {
      type: 'hexagon',
      size: 15000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

### shape

ç½‘æ ¼çƒ­åŠ›å›¾è™½ç„¶æ˜¯ä»¥æ ‡å‡†å››è¾¹å½¢ç½‘æ ¼è¿›è¡Œæ•°æ®èšåˆï¼Œä½†æ˜¯å±•ç¤ºæ•ˆæœä¸Šå¯ä»¥è®¾ç½®ä¸ºå…¶å½¢çŠ¶ï¼Œå½¢çŠ¶åªæ”¯æŒå¸¸é‡

#### 2d

- circle,
- triangle
- square
- heaxgon

```javascript
layer.shape('circle');
```

#### 3d

- cylinder
- triangleColumn
- hexagonColumn
- squareColumn,

```javascript
layer.shape('cylinder');
```

### size

### 2D shape

ä¸éœ€è¦è®¾ç½® size æ–¹æ³•

### 3D å›¾å½¢

size è¡¨ç¤ºé«˜åº¦, æ”¯æŒå¸¸é‡å’Œæ•°æ®æ˜ å°„

```javascript
layer.size(10); // å¸¸é‡
layer.size('value', [10, 50]); // æ ¹æ®value å­—æ®µæ˜ å°„å¤§å°
layer.size('value', (value) => {}); // å›è°ƒå‡½æ•°è®¾ç½®é«˜åº¦
```

### style

- coverage ç½‘æ ¼è¦†ç›–åº¦ 0 - 1
- angle ç½‘æ ¼æ—‹è½¬è§’åº¦ 0 - 360
- opacity é€æ˜åº¦ 0 - 1.0

```javascript
layer.style({
  coverage: 0.9,
  angle: 0,
  opacity: 1.0,
});
```---
title: ç»å…¸çƒ­åŠ›å›¾
order: 0
---
<embed src="@/docs/common/style.md"></embed>


çƒ­åŠ›å›¾æ˜¯åœ°å›¾å¯è§†åŒ–åœºæ™¯ä¸­ååˆ†å¸¸è§çš„éœ€æ±‚ã€‚åœ¨åŒºåŸŸèŒƒå›´å†…æ•°æ®å…·æœ‰çš„ä¸€å®šçƒ­åº¦åˆ†çº§åˆ†å¸ƒæƒ…å†µçš„èšåˆé¢çŠ¶ç°è±¡ï¼Œå¸¸ç”¨äºæè¿°äººç¾¤åˆ†å¸ƒã€å¯†åº¦å’Œå˜åŒ–è¶‹åŠ¿ç­‰ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*QstiQq4JBOIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### å®ç°

ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªç»å…¸çƒ­åŠ›å›¾ã€‚

- ä½ å¯ä»¥åœ¨ `L7` å®˜ç½‘ä¸Šæ‰¾åˆ°[åœ¨çº¿æ¡ˆä¾‹](/examples/heatmap/heatmap/#heatmap)

```javascript
import { Scene, HeatmapLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    center: [ 127.5671666579043, 7.445038892195569 ],
    zoom: 2.632456779444394
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const layer = new HeatmapLayer({})
        .source(data)
        .shape('heatmap')
        .size('mag', [ 0, 1.0 ]) // weightæ˜ å°„é€šé“
        .style({
          intensity: 2,
          radius: 20,
          rampColors: {
            colors: [
              '#FF4818',
              '#F7B74A',
              '#FFF598',
              '#91EABC',
              '#2EA9A1',
              '#206C7C'
            ].reverse(),
            positions: [ 0, 0.2, 0.4, 0.6, 0.8, 1.0 ]
          }
        });
      scene.addLayer(layer);
    });
});
```
### source

ç»å…¸çƒ­åŠ›å›¾åªæ”¯æŒç‚¹æ•°æ®ä½œä¸ºæ•°æ®æºï¼Œæ•°æ®æ ¼å¼æ”¯æŒ `csv`ã€`json`ã€`geojson`ã€‚

```js
const source = new Source([{
  lng: 120, lat: 30
},...], {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat'
  }
})
```
### shape

ç»å…¸çƒ­åŠ›å›¾çš„ `shape` ä¸ºå¸¸é‡ `heatmap`ã€‚

### size

æˆ‘ä»¬éœ€è¦å°†å€¼æ˜ å°„åˆ° `[0, 1]` çš„å€¼åŸŸç©ºé—´ã€‚

- `field`: çƒ­åŠ›å›¾æƒé‡å­—æ®µ
- `values`: æ•°æ®æ˜ å°„åŒºé—´ çƒ­åŠ›å›¾æ˜¾ç¤º `[0, 1]` æ•ˆæœæœ€ä½³

```javascript
layer.size('weight', [0, 1]);
```

### color

çƒ­åŠ›å›¾é€šè¿‡ `style` çš„æŒ‡å®šå‚æ•°é…ç½®é¢œè‰²ã€‚

### style

- `intensity`   å…¨å±€çƒ­åŠ›æƒé‡ï¼Œæ¨èæƒé‡èŒƒå›´ `1 - 5`ã€‚
- `radius`Â Â     çƒ­åŠ›åŠå¾„ï¼Œå•ä½åƒç´ ã€‚
- `rampColors`  è‰²å¸¦å‚æ•°ã€‚

#### rampColors

- `colors`Â  é¢œè‰²æ•°ç»„
- `positions` æ•°æ®åŒºé—´

é…ç½®å€¼åŸŸæ˜ å°„é¢œè‰²çš„è‰²å¸¦ï¼Œå€¼åŸŸçš„èŒƒå›´ä¸º `[0 - 1]`, å¯¹åº”çš„æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ª `position` ä½ç½®è®¾ç½®ä¸€ä¸ªé¢œè‰²å€¼ã€‚

âš ï¸ colors, positions çš„é•¿åº¦è¦ç›¸åŒ

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```
---
title: heatmap
order: 0
---

<embed src="@/docs/common/style.md"></embed>

Heat maps are a very common requirement in map visualization scenarios. The aggregate surface phenomenon of a certain degree of heat distribution within a region is often used to describe crowd distribution, density, and changing trends.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*QstiQq4JBOIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

### accomplish

Let's introduce how to draw a classic heat map.

* you can`L7`Found on the official website[Online case](/examples/heatmap/heatmap/#heatmap)

```javascript
import { Scene, HeatmapLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    center: [ 127.5671666579043, 7.445038892195569 ],
    zoom: 2.632456779444394
  })
});
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')
    .then(res => res.json())
    .then(data => {
      const layer = new HeatmapLayer({})
        .source(data)
        .shape('heatmap')
        .size('mag', [ 0, 1.0 ]) // weightæ˜ å°„é€šé“
        .style({
          intensity: 2,
          radius: 20,
          rampColors: {
            colors: [
              '#FF4818',
              '#F7B74A',
              '#FFF598',
              '#91EABC',
              '#2EA9A1',
              '#206C7C'
            ].reverse(),
            positions: [ 0, 0.2, 0.4, 0.6, 0.8, 1.0 ]
          }
        });
      scene.addLayer(layer);
    });
});
```

### source

Classic heat maps only support point data as the data source, and the data format supports`csv`ã€`json`ã€`geojson`ã€‚

```js
const source = new Source([{
  lng: 120, lat: 30
},...], {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat'
  }
})
```

### shape

Classic heat map`shape`is a constant`heatmap`ã€‚

### size

We need to map the value to`[0, 1]`value range space.

* `field`:Heat map weight field
* `values`: Data mapping interval heat map display`[0, 1]`best effect

```javascript
layer.size('weight', [0, 1]);
```

### color

Heatmap passed`style`The specified parameters configure the color.

### style

* `intensity`Global thermal weight, recommended weight range`1 - 5`ã€‚
* `radius`Thermal radius, unit pixel.
* `rampColors`Ribbon parameters.

#### rampColors

* `colors`Color array
* `positions`data interval

Configure the color band of the value range mapping color. The range of the value range is`[0 - 1]`, correspondingly we need to provide each`position`Position sets a color value.

âš ï¸ colors, positions must be the same length

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```
---
title: å¿«é€Ÿä¸Šæ‰‹
order: 1
---
<embed src="@/docs/common/style.md"></embed>

`L7` å¯ä»¥é€šè¿‡åœ¨çº¿ `CDN` ä»¥åŠ `NPM` åŒ…ç­‰å½¢å¼å¿«é€Ÿæ¥å…¥ã€‚é€šè¿‡ `L7` æä¾›çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå®Œæˆåœ°å›¾å¯è§†åŒ–çš„ç»˜åˆ¶ã€‚

## å®‰è£…å¼•å…¥
### é€šè¿‡ npm å¼•å…¥

```javascript
// å®‰è£…L7 ä¾èµ–
npm install --save @antv/l7
// å®‰è£…ç¬¬ä¸‰æ–¹åº•å›¾ä¾èµ–
npm install --save @antv/l7-maps
```

### é€šè¿‡ CDN å¼•å…¥

```html
<head>
<! --å¼•å…¥æœ€æ–°ç‰ˆçš„L7--> 
<script src = 'https://unpkg.com/@antv/l7'></script>
<! --æŒ‡å®šç‰ˆæœ¬å·å¼•å…¥L7--> 
<script src = 'https://unpkg.com/@antv/l7@2.0.11'></script>
</head>
```
CDN å¼•ç”¨ åœ¨ä½¿ç”¨æ—¶é€šè¿‡ L7 å‘½åç©ºé—´è·å–æ‰€æœ‰å¯¹è±¡å¹¶åˆå§‹åŒ–ï¼Œå¦‚ L7.sceneã€L7.GaodeMap

```javascript
import { Scene } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new L7.Scene({
  id: 'map',
  map: new L7.GaodeMap({
    style: 'dark',
    center: [110.770672, 34.159869],
    pitch: 45,
  }),
});
```

## åŸºç¡€æ•™ç¨‹
### åœ°å›¾ç»„ä»¶ä½¿ç”¨

1. åˆå§‹åŒ–åœ°å›¾é¦–å…ˆéœ€è¦åœ¨é¡µé¢ä¸­æ–°å¢ä¸€ä¸ªDom ç”¨äºåœ°å›¾åˆå§‹åŒ–ã€‚

```html
<div style="min-height: 500px; justify-content: center;position: relative" id="map"/>
```

2. åˆå§‹åŒ–é«˜å¾·åœ°å›¾

```javascript
import { GaodeMap } from '@antv/l7-maps';
// åŒæ ·ä½ ä¹Ÿå¯ä»¥åˆå§‹åŒ–ä¸€ä¸ª Mapbox åœ°å›¾
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 35.210526315789465,
    style: 'dark',
    center: [ 104.288144, 31.239692 ],
    zoom: 4.4
  })
})
```
ğŸŒŸ æ­¤æ—¶åœ¨é¡µé¢ä¸Šå°±ä¼šå‡ºç°å¯äº¤äº’çš„åœ°å›¾å†…å®¹ã€‚

### ç»˜åˆ¶å¡«å……å›¾

åœ°å›¾åˆå§‹åŒ–å®Œæˆä¹‹åæˆ‘ä»¬ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥å¾€åœ°å›¾æ·»åŠ å¯è§†åŒ–æ•°æ®äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ä¸­å›½è¡Œæ”¿åŒºåŒºæ•°æ®ä¸ºä¾‹ï¼Œå¦‚ä½•å¯è§†åŒ–é¢æ•°æ®ã€‚
æ•°æ®æºï¼š ä¸­å›½å„çœ [GeoJSON](https://gw.alipayobjects.com/os/bmw-prod/d6da7ac1-8b4f-4a55-93ea-e81aa08f0cf3.json) æ•°æ®ã€‚

1. æˆ‘ä»¬ä½¿ç”¨é¢å›¾å±‚æ¥ç»˜åˆ¶è¡Œæ”¿åŒºåˆ’æ•°æ®ï¼Œå¾—åˆ°è¦†ç›–åœ¨åœ°å›¾è¡¨é¢çš„å‡ ä½•å¹³é¢ã€‚

```javascript
import {  PolygonLayer } from '@antv/l7';
 const chinaPolygonLayer = new PolygonLayer({})
  .source(data)
  .color('name', [
    'rgb(239,243,255)',
    'rgb(189,215,231)',
    'rgb(107,174,214)',
    'rgb(49,130,189)',
    'rgb(8,81,156)'
  ]);
```

2. å›¾å±‚åˆ›å»ºå®Œæˆä¹‹åæˆ‘ä»¬éœ€è¦å°†å®ƒæ·»åŠ åˆ° `Scene` ä¸­è¿›è¡Œæ˜¾ç¤ºã€‚

```javascript
scene.addLayer(chinaPolygonLayer)
```
![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*iUZVSYBtKnMAAAAAAAAAAAAAARQnAQ)

3. ç®€å•çš„å¡«å……å¯è§†åŒ–è¿˜æ˜¯ä¸å¤Ÿç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `LineLayer` å’Œ `PointLayer` å¢åŠ è¡Œæ”¿åŒºåˆ’æè¾¹å’Œè¡Œæ”¿åŒºåˆ’æ–‡å­—æ ‡æ³¨ã€‚

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*Tf95Qp43Z6IAAAAAAAAAAAAAARQnAQ)

4. æ·»è¾¹ç•Œå’Œæ–‡æœ¬æ ‡æ³¨ä¹‹åå¯è§†åŒ–æ•ˆæœæ›´åŠ æ¸…æ™°ã€‚

[æŸ¥çœ‹å®Œæ•´ä»£ç ](https://codesandbox.io/s/l7-tianchongtujiaocheng-275ix?file=/index.js)

### äº¤äº’å¼å¡«å……å›¾

å•çº¯çš„æ•°æ®å±•ç°å‡ºæ¥ï¼Œå¹¶ä¸èƒ½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æŸ¥çœ‹æ¯ä¸ªåŒºå—çš„ç›¸å…³ä¿¡æ¯ï¼Œæˆ–è€…æ·»åŠ ä¸€äº›é«˜äº®æ•ˆæœã€‚
#### é»˜è®¤é«˜äº®

`L7` å›¾å±‚æ·»åŠ é»˜è®¤çš„é«˜äº®æ•ˆæœï¼Œé»˜è®¤çš„é«˜äº®æ•ˆæœå¯ä»¥æ”¹å˜é¢œè‰²ã€‚

```javascript
chinaPolygonLayer.active(true) //  å¼€å¯é»˜è®¤é«˜äº®æ•ˆæœ

chinaPolygonLayer.active({color: red}) // å¼€å¯å¹¶è®¾ç½®é«˜äº®é¢œè‰²ä¸ºçº¢è‰²
```


| **![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*vik-Q7frCMMAAAAAAAAAAAAAARQnAQ)** | **![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*RJiaS498G4wAAAAAAAAAAAAAARQnAQ)** |
| --- | --- |
| é»˜è®¤è“è‰²é«˜äº®æ•ˆæœ | æ›´æ”¹é«˜äº®é¢œè‰² |


#### è‡ªå®šä¹‰é«˜äº®æ•ˆæœ

é»˜è®¤çš„é«˜äº®æ•ˆæœåªèƒ½æ”¹å˜é¢œè‰²ï¼Œå¯èƒ½å¹¶ä¸èƒ½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç™½è‰²çš„æè¾¹ï¼Œè¿™èƒ½å¤Ÿå®ç°å—ï¼Œç­”æ¡ˆè‚¯å®šæ˜¯å¯ä»¥çš„ã€‚

1. æ·»åŠ ä¸€ä¸ªæ–°çš„å›¾å±‚çš„ä½œä¸ºé«˜äº®å›¾å±‚, æ•°æ®æˆ‘ä»¬è®¾ç½®æˆç©ºæ•°æ®ï¼Œå½¢çŠ¶è®¾ç½®æˆ `line`

```javascript
const hightLayer = new LineLayer({
  zIndex: 4, // è®¾ç½®æ˜¾ç¤ºå±‚çº§
  name: 'hightlight'
}) .source({
    type: 'FeatureCollection',
    features: [ ]
  })
  .shape('line')
  .size(2)
  .color('red');
scene.addLayer(hightLayer);
```

2. è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›‘å¬éœ€è¦é«˜äº®å›¾å±‚çš„é¼ æ ‡äº‹ä»¶ï¼Œè·å–å½“å‰é€‰ä¸­çš„æ•°æ®ï¼Œç„¶åæ›´æ–° `hightLayer`Â æ—¢å¯å®ç°æè¾¹é«˜äº®æ•ˆæœã€‚

```javascript
chinaPolygonLayer.on('click', feature => {
    hightLayer.setData({
      type: 'FeatureCollection',
      features: [ feature.feature ]
    });
  });
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*fr9DTY54rhUAAAAAAAAAAAAAARQnAQ)

3. ä¸ºå›¾å±‚æ·»åŠ ç‚¹å‡»é«˜äº®çº¢è‰²æè¾¹æ•ˆæœ

åˆ°è¿™é‡Œæˆ‘ä»¬å°±å­¦ä¼šäº†å¦‚ä½•è‡ªå®šä¹‰é«˜äº®æ•ˆæœï¼Œè¿™é‡Œæä¸ªå°é—®é¢˜â€œå¦‚ä½•å®ç°åŒæè¾¹çš„é«˜äº®æ•ˆæœï¼Ÿâ€

[æŸ¥çœ‹ç¤ºä¾‹](https://codesandbox.io/s/zidingyigaoliang-7vkso?file=/index.js)

#### æ·»åŠ ä¿¡æ¯ Popup ä¿¡æ¯çª—

é¼ æ ‡äº¤äº’æ—¶ï¼Œæˆ‘ä»¬é™¤äº†é«˜äº®æ˜¾ç¤ºåˆ’è¿‡çš„åŒºåŸŸæˆ‘ä»¬è¿˜éœ€è¦ä¿¡æ¯åŒºåŸŸç›¸å…³çš„ä¿¡æ¯ï¼Œè¿™é‡Œ `L7` æä¾›äº† `Popup` ç»„ä»¶ç”¨äºåœ¨åœ°å›¾æ˜¾ç¤ºç›¸å…³ä¿¡æ¯ã€‚

å¼•å…¥å¯¹è±¡
```javascript
import { Popup } from "@antv/l7";
```
æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹ Layer ç›‘å¬é¼ æ ‡äº‹ä»¶ï¼Œå†³å®šä½•æ—¶æ˜¾ç¤ºPopup,
```javascript
 layer.on('mousemove', e => {
   const popup = new Popup({
     offsets: [ 0, 0 ],
     closeButton: false
   })
   .setLnglat(e.lngLat)
   .setHTML(`<span>åœ°åŒº: ${e.feature.properties.name}</span><br><span>ç¡®è¯Šæ•°: ${e.feature.properties.case}</span>`);
   scene.addPopup(popup);
   });
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*2isvTq-s0OMAAAAAAAAAAAAAARQnAQ)

[æŸ¥çœ‹ç¤ºä¾‹](https://codesandbox.io/s/popup-x3j00?file=/index.js)
### æ·»åŠ å›¾ä¾‹

ä¸Šé¢æˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•å¯è§†åŒ–æ•°æ®ï¼Œåœ¨åœ°å›¾æˆ‘ä»¬å°†ä¸åŒçš„åŒºåŸŸå¯è§†ä¸ºä¸åŒé¢œè‰²ï¼Œä½†æ˜¯å¦‚ä½•è¯»æ‡‚ä¸åŒçš„é¢œè‰²è¡¨è¾¾çš„ä»€ä¹ˆå«ä¹‰ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªå›¾ä¾‹ã€‚

`L7` ç›®å‰æ²¡æœ‰é»˜è®¤çš„å›¾ä¾‹ç»„ä»¶ï¼Œéœ€è¦è‡ªå·±åˆ›å»ºå›¾ä¾‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»é€šè¿‡ `L7 Control` åŸºç±»åˆ›å»ºå›¾ä¾‹ç»„ä»¶ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å®ç°ä¸€ä¸ªç‹¬ç«‹çš„å›¾ä¾‹ `Dom` ç»„ä»¶ã€‚

`L7` æä¾›äº†é»˜è®¤çš„ `Zoom`ï¼Œ`Scale`ï¼Œ`Logo` ç­‰ç»„ä»¶è¿™äº›ç»„ä»¶éƒ½åŸºäºåŒä¸€ä¸ªåŸºç±» `Control` ç»„ä»¶ï¼Œä»Šå¤©æˆ‘ä»¬åŸºäº `Control` å®ç°è‡ªå®šä¹‰å›¾ä¾‹ç»„ä»¶ã€‚

1. å¼•å…¥ `Control` åŸºç±»

```javascript
import { Control } from "@antv/l7";
```

2. åˆå§‹åŒ–åŸºç±»

```javascript
const legend = new Control({
  position: "bottomright"
});
```

3. è®¾ç½® `Control` å±•ç¤ºå†…å®¹

é€šè¿‡æ‰©å±• `Control` çš„ `onAdd` æ–¹æ³•æˆ‘ä»¬è‡ªç”±å®šåˆ¶ `Control` éœ€è¦å±•ç¤ºå†…å®¹å’Œäº¤äº’ã€‚

```javascript
legend.onAdd = function () {
  var el = document.createElement("div");
  el.className = "infolegend legend";
  var grades = [0, 10, 20, 50, 100, 200, 500];
  for (var i = 0; i < grades.length; i++) {
    el.innerHTML +=
      '<i style="background:' + color[i] + '"></i> ' + grades[i] +
      (grades[i + 1] ? "â€“" + grades[i + 1] + "<br>" : "+");
  }
  return el;
};
```

4. æ·»åŠ åˆ°åœ°å›¾

```javascript
scene.addControl(legend)
```
![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*7VNfRodZ_8AAAAAAAAAAAAAAARQnAQ)

[æŸ¥çœ‹ç¤ºä¾‹](https://codesandbox.io/s/tuli-keov0?file=/index.js)

è¿™é‡Œæˆ‘ä»¬ä»‹ç»äº†ï¼Œå¦‚ä½•é€šè¿‡è‡ªå·±å®šä¹‰ `Control` çš„æ–¹å¼å®ç°å›¾ä¾‹ï¼Œé€šè¿‡è‡ªå®šä¹‰ `Control` æˆ‘ä»¬å¾ˆå¤šåœ°å›¾ç»„ä»¶ï¼Œå¦‚å…¨å±ç»„ä»¶ï¼Œå®šä½ç»„ä»¶ï¼Œå¾ˆå¤šä¸šåŠ¡ä¸Šéœ€è¦çš„ç»„ä»¶ï¼Œæœ‰å¹¸è¿çš„åŒå­¦ä»¬å¯ä»¥åŠ¨æ‰‹å°è¯•ä¸€ä¸‹äº†ã€‚
### æ—¶åºå˜åŒ–å›¾

ä¸Šé¢æˆ‘ä»¬å¯è§†åŒ–çš„æ˜¯ä¸€ä¸ªé™æ€æ•°æ®ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„æ•°æ®æ˜¯éšæ—¶é—´å˜åŒ–çš„ï¼Œå¦‚ä½•è¿›è¡Œæ—¶åºæ•°æ®çš„å¯è§†åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸¤ç§æ—¶åºæ•°æ®å¯è§†åŒ–æ–¹æ³•ã€‚

#### å‡†å¤‡æ•°æ®

åœ°ç†æ•°æ®ï¼š[ç¾å›½å„å·è¡Œæ”¿åŒºåˆ’æ•°æ®](https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json)
å±æ€§æ•°æ®ï¼š[0908-1008è¿‘30å¤©çš„ç¾å›½å„å·æ–°å† ç¡®è¯Šæ•°æ®](https://gw.alipayobjects.com/os/bmw-prod/bed5e504-04d5-4d96-a335-163e038dc65a.csv)ã€‚

#### æ›´æ–°æ•°æ®

éšç€æ—¶é—´çš„å˜åŒ–ï¼Œæ•°æ®è‚¯å®šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤æœ€ç®€å•çš„æ–¹å¼æˆ‘æ¯ä¸ªæ—¶é—´æ›´æ–°ä¸€ä¸‹æ•°æ®å³å¯.

```javascript
chinaPolygonLayer.setData(newData);
```
[å®Œæ•´ç¤ºä¾‹](https://codesandbox.io/s/shujugengxin-kgwy0?file=/index.js)

#### æ›´æ–°é¢œè‰²

æ—¶åºæ•°æ®çš„æ›´æ–°å¾ˆå¤§ä¸€éƒ¨åˆ†åœºæ™¯æ˜¯å±æ€§æ•°æ®çš„æ›´æ–°ï¼Œæ¯”å¦‚å„çœä¸åŒå¹´ä»½çš„ `GDP` æ•°æ®ï¼Œç©ºé—´æ•°æ®æœ¬èº«æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ˆæ²¡æœ‰å¢åŠ æˆ–è€…å‡å°‘ä¹Ÿæ²¡æœ‰æ›´æ–°è¾¹ç•Œï¼‰è¿™ç§æƒ…å†µå¯¹é¢å›¾å±‚æ¥è¯´å¯èƒ½åªéœ€è¦æ ¹æ®æ–°çš„æ•°æ®æ›´æ–°ä¸€ä¸‹å°±å¯ä»¥å®ç°ã€‚å½“ç„¶é€šè¿‡ `setData` ä¹Ÿå¯ä»¥å®ç°ã€‚`L7` å†…éƒ¨å®ç°æœºåˆ¶æ¥çœ‹ æ›´æ–° `color` çš„æ•ˆç‡è¦æ¯” `setData` æ•ˆç‡é«˜çš„å¤šã€‚

é€šè¿‡æ›´æ–°é¢œè‰²æ˜ å°„å­—æ®µï¼Œå®ç°æ•°æ®æ˜¾ç¤ºçš„æ›´æ–°ã€‚

```javascript
const setColor = (d) => {
      return d > 100000
        ? color[7]
        : d > 80000
        ? color[6]
        : d > 40000
        ? color[5]
        : d > 20000
        ? color[4]
        : d > 10000
        ? color[3]
        : d > 5000
        ? color[2]
        : d > 1000
        ? color[1]
        : color[0];
    }

chinaPolygonLayer.color('2020-09-01', setColor)
chinaPolygonLayer.color('2020-09-02', setColor)
```
æ³¨æ„æ›´æ–°é¢œè‰²ç”Ÿæ•ˆï¼Œéœ€è¦è°ƒç”¨ `Scene.render();`ã€‚

[æŸ¥çœ‹ç¤ºä¾‹](https://codesandbox.io/s/shujugengxin-forked-0zul8?file=/index.js)

### æ·»åŠ åœ°å›¾æ ‡æ³¨

`L7`  åŸºç¡€ `WebGL` å®ç°ç»˜åˆ¶ç®€å•çš„ç‚¹ã€çº¿ã€é¢ï¼Œæ¯”è¾ƒç®€å•ï¼Œå¦‚æœè¦å®ç°æ¯”è¾ƒå¤æ‚çš„åœ°å›¾æ ‡æ³¨å°±æ¯”è¾ƒå›°éš¾ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ `L7` æ·»åŠ äº† `Marker` ç»„ä»¶ï¼Œä½ å¯ä»¥åŸºäº `DOM` å®ç°å„ç§å¤æ‚çš„æ ‡æ³¨ã€‚

```javascript
import { Marker } from '@antv/l7';
 const el = document.createElement('label');
 el.className = 'labelclass';
el.textContent = nodes[i].v + 'â„ƒ';
el.style.background = 'red';
el.style.borderColor = '#fff;
const marker = new Marker({ element: el})
  .setLnglat({ lng: 112, lat: 30});
scene.addMarker(marker);
```

![image.png](https://gw.alipayobjects.com/mdn/rms_5e897d/afts/img/A*8X9uRZPI3-oAAAAAAAAAAAAAARQnAQ)

[æŸ¥çœ‹å®Œæ•´ä»£ç ](https://codesandbox.io/s/nifty-yonath-k6zor?file=/index.html)

### æ·»åŠ åœ°å›¾ç»„ä»¶

é™¤äº†åœ°å›¾å¯è§†åŒ–å±‚ä¹‹å¤–æˆ‘ä»¬å¯èƒ½éœ€è¦æ·»åŠ è¾…åŠ©æ€§çš„åœ°å›¾å·¥å…· æ¯”å¦‚æ”¾å¤§ç¼©å°ï¼Œæ¯”ä¾‹å°ºï¼Œå›¾å±‚åˆ—è¡¨ç­‰ç»„ä»¶ã€‚

```javascript
import {  Scale,  Zoom } from '@antv/l7';
const zoomControl = new Zoom({ position: 'topright' });
const scaleControl = new Scale({ position: 'bottomright'});
// æ·»åŠ åˆ°åœ°å›¾åœºæ™¯
scene.addControl(zoomControl);
scene.addControl(scaleControl);
```

#### è‡ªå®šä¹‰ç»„ä»¶

ä¸Šé¢ä»‹ç»çš„å›¾ä¾‹å°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼ŒåŒæ ·æˆ‘ä»¬å¯ä»¥ä»»æ„ç»„ä»¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥ä¸ºç»„ä»¶æ·»åŠ åœ°å›¾äº¤äº’ã€‚
æ›´å¤šä½¿ç”¨æ–¹å¼æˆ‘ä»¬å‚è€ƒ `L7` æä¾›é»˜è®¤ç»„ä»¶çš„[æºç ](https://github.com/antvis/L7/tree/master/packages/component/src/control)


## ä¸åŒé¡¹ç›®ä½¿ç”¨æ¨¡æ¿

ä¸åŒé¡¹ç›®æ¨¡æ¿åœ¨ `CodeSandbox` ä½ å¯ä»¥é¢„è§ˆï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°ã€‚

### React

[åœ°å€](https://codesandbox.io/s/l720react-jfwyz)

### Vue

[åœ°å€](https://codesandbox.io/s/l720vue-uef1x)

### Angular

[åœ°å€](https://codesandbox.io/s/angulartest-chpff)

### HTML CDN
[åœ°å€](https://codesandbox.io/s/l7cdndemo-gfg9m)
---
title: Develop
order: 5
---

<embed src="@/docs/common/style.md"></embed>

The developers here refer to developers who develop L7 and have the ability to fix bugs, improve documentation, upgrade functions, and develop new functions for L7.

### Fork warehouse

Fork the L7 repository into its own space.

### Download the code after Fork

```bash
git clone https://github.com/antvis/L7  --depth=1
```

### Install dependencies

node version recommended v16.20.2

```bash
yarn install
```

### Start Demo

If you need function debugging

```bash
yarn run dev
```

Open`http://localhost:6006/`ï¼š

### Start official website

If you need to update the API or write documentation or demo, use this command

```bash
yarn start
```

Open`http://localhost:8000/`ï¼š

### Run a single test

Run unit tests:

```bash
yarn test // run in full

yarn test ../tes.spec.ts // single file
```

## Submit code

Commits can be templated using yarn commit:

```bash
yarn commit
```

## Development tasks

L7 Issues and Features are operated and managed through open source communities, allowing for completely open exploration and exchange of technical solutions. development tasks,[Claim View](https://github.com/orgs/antvis/projects/16)

For L7 developers, we have formulated a growth plan to help everyone move from junior to advanced visualization engine developers in the GIS field. If you are interested, you can add WeChat "antv2030" and indicate "Participate in L7 R\&D". We look forward to your joining and learning together.
---
title: å¼€å‘è€…æ•™ç¨‹
order: 5
---

<embed src="@/docs/common/style.md"></embed>

è¿™é‡Œçš„å¼€å‘è€…ï¼Œæ˜¯æŒ‡å¼€å‘ L7 çš„å¼€å‘è€…ï¼Œä¸º L7 ä¿®å¤ bugã€å®Œå–„æ–‡æ¡£ã€å‡çº§åŠŸèƒ½ã€æ–°åŠŸèƒ½å¼€å‘ç­‰èƒ½åŠ›ã€‚

### Fork ä»“åº“

Fork L7 ä»“åº“ åˆ°è‡ªå·±çš„ç©ºé—´ã€‚


### ä¸‹è½½ Fork åçš„ä»£ç 

```bash

git clone https://github.com/antvis/L7  --depth=1

```

### å®‰è£…ä¾èµ–

node ç‰ˆæœ¬æ¨è  v16.20.2

```bash
yarn install 

```

### å¯åŠ¨ Demo

å¦‚éœ€åŠŸèƒ½è°ƒè¯•

```bash

yarn run dev

```
æ‰“å¼€ `http://localhost:6006/`ï¼š

### å¯åŠ¨ å®˜ç½‘

å¦‚éœ€æ›´æ–° API æˆ–è€… å†™æ–‡æ¡£ã€demo,ä½¿ç”¨è¯¥å‘½ä»¤

```bash

yarn start 

```

æ‰“å¼€ `http://localhost:8000/`ï¼š

### è¿è¡Œå•æµ‹


è¿è¡Œå•å…ƒæµ‹è¯•ï¼š

```bash
yarn test // å…¨é‡è·‘

yarn test ../tes.spec.ts // å•ä¸ªæ–‡ä»¶

```

## æäº¤ä»£ç 

å¯ä»¥ä½¿ç”¨ yarn commit æ¨¡æ¿åŒ–æäº¤ï¼š

```bash
yarn commit

```

## å¼€å‘ä»»åŠ¡

L7 Issue å’Œ Feature é€šè¿‡å¼€æºç¤¾åŒºçš„æ–¹å¼è¿ä½œç®¡ç†ï¼Œå¯ä»¥å®Œå…¨çš„å¼€æ”¾çš„æ¢ç´¢ã€äº¤æµæŠ€æœ¯æ–¹æ¡ˆã€‚å¼€å‘ä»»åŠ¡ï¼Œ[è®¤é¢†æŸ¥çœ‹](https://github.com/orgs/antvis/projects/16)

é’ˆå¯¹ L7 å¼€å‘è€… æˆ‘ä»¬åˆ¶å®šäº†æˆé•¿è®¡åˆ’ï¼Œå¸®åŠ©å¤§å®¶ä»åˆçº§èµ°å‘é«˜çº§ GIS é¢†åŸŸ å¯è§†åŒ–å¼•æ“å¼€å‘è€…ã€‚å¦‚æœ‰å…´è¶£å¯ä»¥åŠ  å¾®ä¿¡ "antv2030",æ³¨æ˜  â€œå‚ä¸L7ç ”å‘â€ï¼ŒæœŸå¾…ä½ åŠ å…¥ï¼Œä¸€èµ·å­¦ä¹ ã€‚


### Tile source attribute

#### tileSet

Tile data set, which can obtain tile information and tile status within the current field of view

```ts
const source = layer1.getSource();
const tileSet = source.tileset;
```

##### Attributes

###### isLoaded

Whether the tiles are loaded

###### currentTiles

Current tile object

###### currentZoom

The current tile level; where once is not equal to the zoom level of the map

##### event

###### tiles-load-start

Map dragging, triggered when new tiles need to be loaded

```ts
tileSet.on('tiles-load-start',()=>{
            console.log('tile start');
        })
```

###### tiles-load-finished

Triggered after all tile resources that need to be loaded are loaded.

```ts
tileSet.on('tiles-load-finished',()=>{
            console.log('tile finished');
        })
```

### Tile source method

#### reloadAllTile

Reloading the tile will re-request the data, which is suitable for dynamic tile scenarios, such as the tile data is updated, or the data of the tile Join is updated.

```ts pure
source.reloadAllTile();
```

#### reloadTilebyId

Reload a specific tile

parameter

* z zoom level
* x tile x coordinate
* y tile has coordinates

```ts pure
source.reloadTileById(z,x,y);
```

#### reloadTileByExtent

Update tiles based on latitude and longitude range

parameter

* extent: latitude and longitude range \[minLng,minLat,maxLng,maxLat]
* zoom: zoom level

#### reloadTileByLnglat

Update tiles based on longitude and latitude, convert longitude and latitude coordinates into tile coordinates and update

* lng longitude
* latitude
* zoom zoom level

```tsx pure
source.reloadTileByLnglat(112,30,10);
```
### ç“¦ç‰‡source å±æ€§

#### tileSet 
 ç“¦ç‰‡æ•°æ®é›†ï¼Œå¯ä»¥è·å–å½“å‰è§†é‡å†…çš„ç“¦ç‰‡ä¿¡æ¯, ç“¦ç‰‡çŠ¶æ€

 ```ts
 const source = layer1.getSource();
 const tileSet = source.tileset;
 ```
 ##### å±æ€§
 
###### isLoaded 

ç“¦ç‰‡æ˜¯å¦åŠ è½½å®Œæˆ

###### currentTiles
å½“å‰ç“¦ç‰‡å¯¹è±¡

###### currentZoom

å½“å‰ç“¦ç‰‡å±‚çº§ï¼›è¿™é‡Œçš„æ›¾ç»å’Œmap çš„ç¼©æ”¾å±‚çº§ä¸ç›¸ç­‰

 ##### äº‹ä»¶

 ###### tiles-load-start

åœ°å›¾æ‹–åŠ¨ï¼Œéœ€è¦åŠ è½½æ–°çš„ç“¦ç‰‡æ—¶è§¦å‘

```ts
     
        tileSet.on('tiles-load-start',()=>{
            console.log('tile start');
        })
      
 ```
  

###### tiles-load-finished

æ‰€æœ‰éœ€è¦åŠ è½½çš„ç“¦ç‰‡èµ„æºåŠ è½½å®Œæˆåè§¦å‘

```ts
      tileSet.on('tiles-load-finished',()=>{
            console.log('tile finished');
        })
```

### ç“¦ç‰‡source æ–¹æ³•

#### reloadAllTile

é‡æ–°åŠ è½½ç“¦ç‰‡ï¼Œä¼šé‡æ–°è¯·æ±‚æ•°æ®ï¼Œé€‚ç”¨ä¸åŠ¨æ€ç“¦ç‰‡åœºæ™¯ï¼Œå¦‚ç“¦ç‰‡æ•°æ®å‘ç”Ÿäº†æ›´æ–°ï¼Œæˆ–è€…ç“¦ç‰‡Join çš„æ•°æ®å‘ç”Ÿäº†æ›´æ–°

``` ts pure
source.reloadAllTile();
```

#### reloadTilebyId

é‡æ–°åŠ è½½ç‰¹å®šç“¦ç‰‡çš„ 

å‚æ•°
- z  ç¼©æ”¾ç­‰çº§
- x  ç“¦ç‰‡ x åæ ‡
- y  ç“¦ç‰‡æœ‰åæ ‡

```ts  pure
source.reloadTileById(z,x,y);
```

#### reloadTileByExtent

æ ¹æ®ç»çº¬åº¦èŒƒå›´æ›´æ–°ç“¦ç‰‡

å‚æ•°

- extent: ç»çº¬èŒƒå›´ [minLng,minLat,maxLng,maxLat]
- zoom: ç¼©æ”¾ç­‰çº§

#### reloadTileByLnglat

æ ¹æ®ç»çº¬åº¦æ›´æ–°ç“¦ç‰‡ï¼Œç»çº¬åº¦åæ ‡è½¬æ¢æˆç“¦ç‰‡åæ ‡æ›´æ–°

- lng ç»åº¦
- lat  çº¬åº¦
- zoom ç¼©æ”¾ç­‰çº§


```tsx pure

source.reloadTileByLnglat(112,30,10);
```### data

Multi-band supports two data methods. The raster data coordinate system only supports 3857 projected rasters.

* Single file multiple bands
* Multiple single-band files form multi-band

#### Single file multiple bands

data is unparsed tiff arraybuffer data, which is standardized by format in parser

```ts
const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';
  async function getTiffData(url: string) {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  return arrayBuffer;
  }
}
layer.source(
    [
    {
        data: tiffdata,
        bands: [6, 5, 2].map((v) => v - 1),
    },
    ],
    {
    parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image1 = await tiff.getImage();
        const value = await image1.readRasters();
        return bands.map((band) => {
            return {
            rasterData: value[band],
            width: value.width,
            height: value.height,
            };
        });
        },
        operation: {
        type: 'rgb',
        },
        extent: [
        130.39565357746957, 46.905730725742366, 130.73364094187343,
        47.10217234153133,
        ],
    },
    },
)
```

### parser

* type: raster
* extent: the latitude and longitude range of the raster \[minlng, minlat,maxLng, maxLat]

Add raster data to the map based on its latitude and longitude range.

```javascript
layer.source(rasterData, {
  parser: {
    type: 'raster',
    extent: [121.168, 30.2828, 121.384, 30.4219],
  },
});
```

Users can directly pass in the binary data of the raster file.

* Supports transferring data from multiple files.
* Supports specifying the bands to be extracted from a raster file.

```js
interface IBandsData {
  data: ArrayBuffer; // Request the binary data of the loaded raster file
  bands?: number[]; // Specify the bands to load the raster file
}
//Load the data of band 0 by default
const source = new Source({ data: tiffData });
//Specify to load the data of tiffData 0 band
//Specify to load the data of band 0 and 1 of tiffData2
const source2 = new Source([
  { data: tiffData, bands: [0] },
  { data: tiffData2, bands: [0, 1] },
]);
```

#### parser

<description> *IParser* **required** </description>

Provides the necessary parameters and methods for working with raster data.

```js
interface IParser {
  type: string;
  format: IRasterFormat;
  operation: IOperation;
  extent: number[];
}
```

##### type

<description> *string* **required** </description>

* When the output result is single-channel data, the value is raster
* When the output result is multi-channel color, the value is rasterRgb.

##### format: IRasterFormat

<description> *IFormat* **required** </description>

`format`Method used to extract band data from the incoming raster file binary data.

* The first parameter is the raster file binary data.
* The second parameter is the band that should be extracted from the raster file specified by the first parameter. The method parameter is what we pass`source`parameters passed`data`numerical value.
* `format`Is a`async`method.

```js
interface IRasterData {
  rasterData: HTMLImageElement | Uint8Array | ImageBitmap | null | undefined;
  width: number;
  height: number;
}
type IRasterFormat = (
  data: ArrayBuffer,
  bands: number[],
) => Promise<IRasterData | IRasterData[]>;

const source = new Source(data, {
  parser: {
    format: async (data, bands) => {
      ...
      return {
        rasterData: bandData,
        width: 256;
        height: 256;
      }
    }
  }
})
```

1. `format`The return value of the method is raster data (`rasterData`) and the size`width`ã€`height`parameter.
2. `format`The method can return multiple copies of data, indicating that multiple band data are extracted from the current raster file.

##### operation: IOperation

<description> *IOperation* **Optional** </description>

When loading multi-band data we can pass`operation`Configure the operation of band data.

ğŸŒŸ We donâ€™t need to configure it`operation`, the first band data extracted from the first raster file is used by default.

1. `operation`can be a function,`allbands`is the collection of all band data we extracted from all raster files.

```js
const parser = {
  operation: (allBands) => {
    // operation can be a function, allbands is the collection of all band data we extract from all raster files,
    // When setting up allbands, it is [band0]
    //The return value of the function is pure band data. Here we directly return the first band data.
    return allBands[0].rasterData;
  },
};
```

2. `operation`Can be a calculation expression in the form of an array.

```js
//The following expression can be paraphrased as band1 * 0.5, which means multiplying the values â€‹â€‹of band 1 by 0.5 and returning
const parser = {
  operation: ['*', ['band', 1], 0.5],
};
```

3. `operation`Can be used nested:`['+', ['*', ['band', 0], 0.2], ['band', 1]]]`, the return result is:`band0 * 0.2 + band1`ã€‚

4. `operation`The result can be specified directly:`['band', 0]`ã€‚

5. `operation`The following mathematical operations are supported.

```js
/** Mathematical operations Perform mathematical operations based on calculation expressions
 * * * Math operators:
 * `['*', value1, value2]` returns `value1 * value2`
 * `['/', value1, value2]` returns `value1 / value2`
 * `['+', value1, value2]` returns `value1 + value2`
 * `['-', value1, value2]` returns `value2 - value1`
 * `['%', value1, value2]` returns `value1 % value2`
 * `['^', value1, value2]` returns `value1 ^ value2`
 * `['abs', value1]` returns `Math.abs(value1)`
 * `['floor', value1]` returns `Math.floor(value1)`
 * `['round', value1]` returns `Math.round(value1)`
 * `['ceil', value1]` returns `Math.ceil(value1)`
 * `['sin', value1]` returns `Math.sin(value1)`
 * `['cos', value1]` returns `Math.cos(value1)`
 * `['atan', value1, value2]` returns `n1===-1?Math.atan(n1): Math.atan2(n1, n2)`
 */
```

##### extent

<description> *number\[]* **required** </description>

`extent`It describes the geographical interval covered by the raster data, and the numerical value specifies the longitude and latitude interval (lower left corner and upper right corner) of the area.

### Loading multi-channel (color) images

When using multi-band data, we support drawing color remote sensing images based on multi-band data, such as the false color image below.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*jO7kTpuDiOQAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

#### data: IBandsData\[] | IBandsData

When drawing multi-channel images, multi-band data needs to be loaded

#### parser

Provides necessary parameters and methods for using raster data, specific uses and multi-band rasters.`parser`be consistent.

##### type

<description> *string* **required** </description>

* When the output result is multi-channel color, the value is`rasterRgb`ã€‚

##### format: IRasterFormat

<description> *IFormat* **required** </description>

When drawing multi-channel images, use the general`format`function.

##### operation: IOperation

<description> *IOperation* **required** </description>

In order to draw multi-channel images, we must provide`operation`Configure specified multi-channel data.

1. When rendering a color multi-channel raster, you need to use an additional parser. At the same time, the color raster layer no longer supports parameters such as domain and rampColor. The rendering result is directly controlled by the numerical results of the r, g, and b channels calculated by the band.

2. Colored rasters are no longer compatible with the old data value transfer method (pass in the parsed raster data directly.

```js
const source = new Source(data, { // Colored rasters and single-channel rasters use the same rules
  parser: {
    type: 'rasterRgb', // use independent type type
    format: async (data, bands) {...}, // Colored rasters and single-channel rasters use the same format
    // operation is an object, specifying calculation expressions for the three rgb channels respectively.
    // operation must be configured
    operation: {
      r: ['*', ['band', 1], 0.5],
      g: ['band', 1],
      b: undefined // The channel of the default configuration expression will take the value of band 0 by default
    }
  }
```
### data

å¤šæ³¢æ®µæ”¯æŒä¸¤ç§æ•°æ®æ–¹å¼ï¼Œæ …æ ¼æ•°æ®åæ ‡ç³»åªæ”¯æŒ 3857 æŠ•å½±çš„æ …æ ¼

- å•æ–‡ä»¶å¤šæ³¢æ®µ
- å¤šä¸ªå•æ³¢æ®µæ–‡ä»¶ç»„æˆå¤šæ³¢æ®µ

#### å•æ–‡ä»¶å¤šæ³¢æ®µ

data ä¸ºæœªè§£æè¿‡ tiff arraybuffer æ•°æ®ï¼Œåœ¨ parser ä¸­ é€šè¿‡ format è¿›è¡Œæ•°æ®æ ‡å‡†åŒ–

```ts
  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';
  async function getTiffData(url: string) {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  return arrayBuffer;
  }
}
layer.source(
    [
    {
        data: tiffdata,
        bands: [6, 5, 2].map((v) => v - 1),
    },
    ],
    {
    parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image1 = await tiff.getImage();
        const value = await image1.readRasters();
        return bands.map((band) => {
            return {
            rasterData: value[band],
            width: value.width,
            height: value.height,
            };
        });
        },
        operation: {
        type: 'rgb',
        },
        extent: [
        130.39565357746957, 46.905730725742366, 130.73364094187343,
        47.10217234153133,
        ],
    },
    },
)

```

### parser

- type: raster
- extent: æ …æ ¼çš„ç»çº¬åº¦èŒƒå›´ [minlng, minlat,maxLng, maxLat]


æ ¹æ®æ …æ ¼æ•°æ®çš„ç»çº¬åº¦èŒƒå›´ï¼Œå°†å…¶æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚

```javascript
layer.source(rasterData, {
  parser: {
    type: 'raster',
    extent: [121.168, 30.2828, 121.384, 30.4219],
  },
});
```

ç”¨æˆ·å¯ä»¥ç›´æ¥ä¼ å…¥æ …æ ¼æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®ã€‚

- æ”¯æŒä¼ å…¥å¤šæ–‡ä»¶çš„æ•°æ®ã€‚
- æ”¯æŒæŒ‡å®šæŸä¸ªæ …æ ¼æ–‡ä»¶è¦æå–çš„æ³¢æ®µã€‚

```js
interface IBandsData {
  data: ArrayBuffer; // è¯·æ±‚åŠ è½½çš„æ …æ ¼æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®
  bands?: number[]; // æŒ‡å®šåŠ è½½è¯¥æ …æ ¼æ–‡ä»¶çš„æ³¢æ®µ
}
// é»˜è®¤åŠ è½½ 0 æ³¢æ®µçš„æ•°æ®
const source = new Source({ data: tiffData });
// æŒ‡å®šåŠ è½½ tiffData 0 æ³¢æ®µçš„æ•°æ®
// æŒ‡å®šåŠ è½½ tiffData2 0ã€1 æ³¢æ®µçš„æ•°æ®
const source2 = new Source([
  { data: tiffData, bands: [0] },
  { data: tiffData2, bands: [0, 1] },
]);
```

#### parser

<description> _IParser_ **å¿…é€‰** </description>

ä¸ºä½¿ç”¨æ …æ ¼æ•°æ®çš„ä½¿ç”¨æä¾›å¿…è¦çš„å‚æ•°å’Œæ–¹æ³•ã€‚

```js
interface IParser {
  type: string;
  format: IRasterFormat;
  operation: IOperation;
  extent: number[];
}
```

##### type

<description> _string_ **å¿…é€‰** </description>

- è¾“å‡ºç»“æœä¸ºå•é€šé“æ•°æ®çš„æ—¶å€™å€¼ä¸º raster
- è¾“å‡ºç»“æœä¸ºå¤šé€šé“å½©è‰²çš„æ—¶å€™å€¼ä¸º rasterRgb

##### format: IRasterFormat

<description> _IFormat_ **å¿…é€‰** </description>

`format` æ–¹æ³•ç”¨äºä»ä¼ å…¥çš„æ …æ ¼æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®ä¸­æå–æ³¢æ®µæ•°æ®ã€‚

- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ …æ ¼æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®ã€‚
- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„æ …æ ¼æ–‡ä»¶ä¸­åº”è¯¥æå–çš„æ³¢æ®µï¼Œæ–¹æ³•å‚æ•°æ˜¯æˆ‘ä»¬é€šè¿‡ `source` å‚æ•°ä¼ é€’çš„ `data` æ•°å€¼ã€‚
- `format` æ˜¯ä¸€ä¸ª `async` æ–¹æ³•ã€‚

```js
interface IRasterData {
  rasterData: HTMLImageElement | Uint8Array | ImageBitmap | null | undefined;
  width: number;
  height: number;
}
type IRasterFormat = (
  data: ArrayBuffer,
  bands: number[],
) => Promise<IRasterData | IRasterData[]>;

const source = new Source(data, {
  parser: {
    format: async (data, bands) => {
      ...
      return {
        rasterData: bandData,
        width: 256;
        height: 256;
      }
    }
  }
})
```

1. `format` æ–¹æ³•çš„è¿”å›å€¼ä¸ºæ …æ ¼æ•°æ®ï¼ˆ`rasterData`ï¼‰ä»¥åŠè¡¨ç¤ºå¤§å°çš„ `width`ã€`height` å‚æ•°ã€‚
2. `format` æ–¹æ³•å¯ä»¥è¿”å›å¤šä»½æ•°æ®ï¼Œè¡¨ç¤ºä»å½“å‰æ …æ ¼æ–‡ä»¶ä¸­æå–å¤šä»½æ³¢æ®µçš„æ•°æ®ã€‚

##### operation: IOperation

<description> _IOperation_ **å¯é€‰** </description>

åœ¨åŠ è½½å¤šæ³¢æ®µæ•°æ®çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡ `operation` é…ç½®æ³¢æ®µæ•°æ®çš„è¿ç®—ã€‚

ğŸŒŸ æˆ‘ä»¬å¯ä»¥ä¸é…ç½® `operation`ï¼Œæ­¤æ—¶é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªæ …æ ¼æ–‡ä»¶æå–çš„ç¬¬ä¸€ä¸ªæ³¢æ®µæ•°æ®

1. `operation` å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ`allbands` æ˜¯æˆ‘ä»¬ä»æ‰€æœ‰æ …æ ¼æ–‡ä»¶ä¸­æå–çš„æ‰€æœ‰æ³¢æ®µæ•°æ®çš„é›†åˆã€‚

```js
const parser = {
  operation: (allBands) => {
    // operation å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œallbands æ˜¯æˆ‘ä»¬ä»æ‰€æœ‰æ …æ ¼æ–‡ä»¶ä¸­æå–çš„æ‰€æœ‰æ³¢æ®µæ•°æ®çš„é›†åˆï¼Œ
    // åœ¨è®¾ç«‹ allbands å°±æ˜¯ [band0]
    // å‡½æ•°çš„è¿”å›å€¼æ˜¯å•çº¯çš„æ³¢æ®µæ•°æ®ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥è¿”å›ç¬¬ä¸€ä¸ªæ³¢æ®µçš„æ•°æ®
    return allBands[0].rasterData;
  },
};
```

2. `operation` å¯ä»¥æ˜¯ä»¥æ•°ç»„å½¢å¼å­˜åœ¨çš„è®¡ç®—è¡¨è¾¾å¼.

```js
// ä¸‹é¢è¡¨è¾¾å¼å¯ä»¥è½¬è¿°ä¸º band1 * 0.5ï¼Œè¡¨ç¤ºå°†æ³¢æ®µ1 çš„å€¼éƒ½ä¹˜ä¸Š 0.5 å¹¶è¿”å›
const parser = {
  operation: ['*', ['band', 1], 0.5],
};
```

3. `operation` å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼š`['+', ['*', ['band', 0], 0.2], ['band', 1]]]`ï¼Œè¿”å›ç»“æœä¸ºï¼š`band0 * 0.2 + band1`ã€‚

4. `operation` å¯ä»¥ç›´æ¥æŒ‡å®šç»“æœï¼š`['band', 0]`ã€‚

5. `operation` æ”¯æŒä»¥ä¸‹çš„æ•°å­¦è¿ç®—ã€‚

```js
/** æ•°å­¦è¿ç®— æ ¹æ®è®¡ç®—è¡¨è¾¾å¼è¿›è¡Œæ•°å­¦è¿ç®—
 * * * Math operators:
 * `['*', value1, value2]` è¿”å›  `value1 * value2`
 * `['/', value1, value2]` è¿”å› `value1 / value2`
 * `['+', value1, value2]` è¿”å› `value1 + value2`
 * `['-', value1, value2]` è¿”å› `value2 - value1`
 * `['%', value1, value2]` è¿”å› `value1 % value2`
 * `['^', value1, value2]` è¿”å›  `value1 ^ value2`
 * `['abs', value1]`       è¿”å›  `Math.abs(value1)`
 * `['floor', value1]`     è¿”å›  `Math.floor(value1)`
 * `['round', value1]`     è¿”å›  `Math.round(value1)`
 * `['ceil', value1]`      è¿”å›  `Math.ceil(value1)`
 * `['sin', value1]`       è¿”å›  `Math.sin(value1)`
 * `['cos', value1]`       è¿”å›  `Math.cos(value1)`
 * `['atan', value1, value2]` è¿”å›  `n1===-1?Math.atan(n1): Math.atan2(n1, n2)`
 */
```

##### extent

<description> _number[]_ **å¿…é€‰** </description>

`extent` æè¿°çš„æ˜¯æ …æ ¼æ•°æ®è¦†ç›–çš„åœ°ç†åŒºé—´ï¼Œæ•°å€¼æŒ‡å®šçš„æ˜¯åŒºåŸŸçš„ç»çº¬åº¦åŒºé—´ï¼ˆå·¦ä¸‹è§’å’Œå³ä¸Šè§’ï¼‰ã€‚

### åŠ è½½å¤šé€šé“ï¼ˆå½©è‰²ï¼‰å½±åƒ

æˆ‘ä»¬åœ¨ä½¿ç”¨å¤šæ³¢æ®µæ•°æ®çš„æ—¶å€™æ”¯æŒæ ¹æ®å¤šæ³¢æ®µæ•°æ®ç»˜åˆ¶å½©è‰²é¥æ„Ÿå½±åƒï¼Œå¦‚ä¸‹å›¾çš„å‡å½©è‰²å½±åƒã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*jO7kTpuDiOQAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

#### data: IBandsData[] | IBandsData

ç»˜åˆ¶å¤šé€šé“å½±åƒçš„æ—¶å€™ï¼Œéœ€è¦åŠ è½½å¤šæ³¢æ®µæ•°æ®

#### parser

ä½¿ç”¨æ …æ ¼æ•°æ®çš„ä½¿ç”¨æä¾›å¿…è¦çš„å‚æ•°å’Œæ–¹æ³•ï¼Œ å…·ä½“ä½¿ç”¨å’Œå¤šæ³¢æ®µæ …æ ¼çš„ `parser` ä¿æŒä¸€è‡´ã€‚

##### type

<description> _string_ **å¿…é€‰** </description>

- è¾“å‡ºç»“æœä¸ºå¤šé€šé“å½©è‰²çš„æ—¶å€™å€¼ä¸º `rasterRgb`ã€‚

##### format: IRasterFormat

<description> _IFormat_ **å¿…é€‰** </description>

ç»˜åˆ¶å¤šé€šé“å½±åƒçš„æ—¶å€™ï¼Œä½¿ç”¨é€šç”¨çš„ `format`å‡½æ•°ã€‚

##### operation: IOperation

<description> _IOperation_ **å¿…é€‰** </description>

ä¸ºäº†ç»˜åˆ¶å¤šé€šé“å½±åƒï¼Œæˆ‘ä»¬å¿…é¡»è¦æä¾› `operation` é…ç½®æŒ‡å®šå¤šé€šé“æ•°æ®ã€‚

1. åœ¨æ¸²æŸ“å½©è‰²å¤šé€šé“æ …æ ¼çš„æ—¶å€™éœ€è¦é¢å¤–ä½¿ç”¨ parserï¼ŒåŒæ—¶å½©è‰²æ …æ ¼å›¾å±‚ä¸å†æ”¯æŒ domainã€rampColor ç­‰å‚æ•°ï¼Œæ¸²æŸ“çš„ç»“æœç›´æ¥ç”±æ³¢æ®µè®¡ç®—å‡ºçš„ rã€gã€b é€šé“çš„æ•°å€¼ç»“æœæ§åˆ¶ã€‚

2. å½©è‰²æ …æ ¼ä¸å†å…¼å®¹æ—§çš„æ•°æ®ä¼ å€¼æ–¹å¼ï¼ˆç›´æ¥ä¼ å…¥è§£æå®Œçš„æ …æ ¼æ•°æ®ã€‚

```js
const source = new Source(data, { // å½©è‰²æ …æ ¼å’Œå•é€šé“æ …æ ¼ä½¿ç”¨ç›¸åŒçš„è§„åˆ™
  parser: {
    type: 'rasterRgb', // ä½¿ç”¨ç‹¬ç«‹çš„ type ç±»å‹
    format: async (data, bands) {...}, // å½©è‰²æ …æ ¼å’Œå•é€šé“æ …æ ¼ format ä½¿ç”¨ç›¸åŒ
    // operation ä¸ºå¯¹è±¡ï¼Œåˆ†åˆ«ä¸º rgb ä¸‰é€šé“æŒ‡å®šè®¡ç®—è¡¨è¾¾å¼
    // operation å¿…é¡»è¦é…ç½®
    operation: {
      r: ['*', ['band', 1], 0.5],
      g: ['band', 1],
      b: undefined // ç¼ºçœé…ç½®è¡¨è¾¾å¼çš„é€šé“ä¼šé»˜è®¤å– 0 å·æ³¢æ®µçš„å€¼
    }
  }
```
### data

å¤šæ³¢æ®µæ”¯æŒä¸¤ç§æ•°æ®æ–¹å¼ï¼Œæ …æ ¼æ•°æ®åæ ‡ç³»åªæ”¯æŒ 3857 æŠ•å½±çš„æ …æ ¼ï¼Œå¤šæ³¢æ®µæƒ…å†µ data ä¸ºæ•°ç»„ç±»å‹

- å•æ–‡ä»¶å¤šæ³¢æ®µ
- å¤šä¸ªå•æ³¢æ®µæ–‡ä»¶ç»„æˆå¤šæ³¢æ®µ

```ts
[
    {
        data: tiffdata, // arraybuffer ç±»å‹æ …æ ¼æºæ•°æ®
        bands: [6, 5, 2].map((v) => v - 1),// å•æ–‡ä»¶å¤šæ³¢æ®µå¯ä»¥ä¸ä¼ ï¼Œformat å‡½æ•°ä½¿ç”¨
    },
    ],

```

#### å•æ–‡ä»¶å¤šæ³¢æ®µ

data ä¸ºæœªè§£æè¿‡ tiff arraybuffer æ•°æ®ï¼Œåœ¨ parser ä¸­ é€šè¿‡ format è¿›è¡Œæ•°æ®æ ‡å‡†åŒ–ï¼Œ

```ts
  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';
  async function getTiffData(url: string) {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  return arrayBuffer;
  }
}
layer.source(
    [
    {
        data: tiffdata,
        bands: [6, 5, 2].map((v) => v - 1),
    },
    ],
    {
    parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image1 = await tiff.getImage();
        const value = await image1.readRasters();
        return bands.map((band) => {
            return {
            rasterData: value[band],
            width: value.width,
            height: value.height,
            };
        });
        },
        operation: {
        type: 'rgb',
        },
        extent: [
        130.39565357746957, 46.905730725742366, 130.73364094187343,
        47.10217234153133,
        ],
    },
    },
)

```
#### å¤šæ–‡ä»¶å¤šæ³¢æ®µ

```ts

const urls = [
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
    bands: [0]
  },
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff'
  },
  ...
]
const tileSource = new Source(urls, {...});
```

### parser

#### type: `rasterRgb`
  å¤šæ³¢æ®µæ•°æ®å½±åƒåˆæˆ
####  extent: æ …æ ¼çš„ç»çº¬åº¦èŒƒå›´ [minlng, minlat,maxLng, maxLat]

####  operation åˆæˆæ–¹å¼
 rgb ä¼šè‡ªåŠ¨æ ¹æ®æœ€å¤§å€¼æœ€å°å€¼è¿›è¡Œæ‹‰ä¼¸å¤„ç†

  - type `rgb`

#### format æ•°æ®å¤„ç†æ–¹æ³•ï¼Œæ …æ ¼æ•°æ®è§£ææ–¹å¼
  
  - å…¥å‚æ•°ï¼š
  - data: source ä¼ å…¥å‚æ•°
  - bands æ³¢æ®µåºå·

-  è¿”å›å‚æ•°ï¼š
    è¿”å›æ•°æ®ä¸ºæ•°ç»„ç±»å‹
  ```ts
      [{
          rasterData: value[band],// è§£æåçš„æ•°æ®
          width: value.width, // æ …æ ¼å®½åº¦
          height: value.height, // æ …æ ¼é«˜åº¦
          };
        ]
  ```


#### ç¤ºä¾‹
```ts
layer.source(
    [
    {
        data: tiffdata,
        bands: [6, 5, 2].map((v) => v - 1),
    },
    ],
    {
    parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image1 = await tiff.getImage();
        const value = await image1.readRasters();
        return bands.map((band) => {
            return {
            rasterData: value[band],
            width: value.width,
            height: value.height,
            };
        });
        },
        operation: {
        type: 'rgb',
        },
        extent: [
        130.39565357746957, 46.905730725742366, 130.73364094187343,
        47.10217234153133,
        ],
    },
    },
)
```### data

Multi-band supports two data methods. The raster data coordinate system only supports 3857 projected raster. In the case of multi-band, data is an array type.

* Single file multiple bands
* Multiple single-band files form multi-band

```ts
[
    {
        data: tiffdata, // arraybuffer type raster source data
        bands: [6, 5, 2].map((v) => v - 1),//Single file with multiple bands does not need to be transmitted, the format function is used
    },
    ],
```

#### Single file multiple bands

data is unparsed tiff arraybuffer data, which is standardized by format in parser.

```ts
const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';
  async function getTiffData(url: string) {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  return arrayBuffer;
  }
}
layer.source(
    [
    {
        data: tiffdata,
        bands: [6, 5, 2].map((v) => v - 1),
    },
    ],
    {
    parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image1 = await tiff.getImage();
        const value = await image1.readRasters();
        return bands.map((band) => {
            return {
            rasterData: value[band],
            width: value.width,
            height: value.height,
            };
        });
        },
        operation: {
        type: 'rgb',
        },
        extent: [
        130.39565357746957, 46.905730725742366, 130.73364094187343,
        47.10217234153133,
        ],
    },
    },
)
```

#### Multiple files and multiple bands

```ts
const urls = [
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
    bands: [0]
  },
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff'
  },
  ...
]
const tileSource = new Source(urls, {...});
```

### parser

#### type:`rasterRgb`

Multi-band data image synthesis

#### extent: the latitude and longitude range of the raster \[minlng, minlat,maxLng, maxLat]

#### operation synthesis method

rgb will automatically stretch based on the maximum and minimum values

* type `rgb`

#### format data processing method, raster data parsing method

* Input parameters:

* data: source passed in parameters

* bands band number

* Return parameters:
  Return data is array type

```ts
[{
        rasterData: value[band],//parsed data
        width: value.width, // Grid width
        height: value.height, // grid height
        };
      ]
```

#### Example

```ts
layer.source(
    [
    {
        data: tiffdata,
        bands: [6, 5, 2].map((v) => v - 1),
    },
    ],
    {
    parser: {
        type: 'rasterRgb',
        format: async (data, bands) => {
        const tiff = await GeoTIFF.fromArrayBuffer(data);
        const image1 = await tiff.getImage();
        const value = await image1.readRasters();
        return bands.map((band) => {
            return {
            rasterData: value[band],
            width: value.width,
            height: value.height,
            };
        });
        },
        operation: {
        type: 'rgb',
        },
        extent: [
        130.39565357746957, 46.905730725742366, 130.73364094187343,
        47.10217234153133,
        ],
    },
    },
)
```
### data

data è§£æåçš„æ•°æ®ï¼Œä¸ºæ•°ç»„

ä»¥ geotiff ä¸ºä¾‹éœ€è¦å…ˆå°†æ•°æ®è§£æå‡ºæ¥ï¼Œä½œä¸º data è¾“å…¥ç»™ source

```tsx
import * as GeoTIFF from 'geotiff';

async function getTiffData() {
  async function getTiffData() {
    const response = await fetch(
      'https://gw.alipayobjects.com/zos/antvdemo/assets/light_clip/lightF182013.tiff',
    );
    const arrayBuffer = await response.arrayBuffer();
    const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);
    const image = await tiff.getImage();
    const width = image.getWidth();
    const height = image.getHeight();
    const values = await image.readRasters();
    return {
      data: values[0],
      width,
      height,
    };
  }
}
const tiffdata = await getTiffData();
layer.source(tiffdata.data, {
  parser: {
    type: 'raster',
    width: tiffdata.width,
    height: tiffdata.height,
    extent: [
      73.4821902409999979, 3.8150178409999995, 135.1066187319999869,
      57.6300459959999998,
    ],
  },
});
```

### parser

- type: raster
- extent: æ …æ ¼çš„ç»çº¬åº¦èŒƒå›´ [minlng, minlat,maxLng, maxLat]
- width æ•°æ®å®½åº¦
- height æ•°æ®é«˜åº¦

æ ¹æ®æ …æ ¼æ•°æ®çš„ç»çº¬åº¦èŒƒå›´ï¼Œå°†å…¶æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚

```javascript
layer.source(rasterData, {
  parser: {
    type: 'raster',
    extent: [121.168, 30.2828, 121.384, 30.4219],
  },
});
```
### data


### parser

#### format

`format` æ–¹æ³•ç”¨äºä»ä¼ å…¥çš„æ …æ ¼æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®ä¸­æå–æ³¢æ®µæ•°æ®ã€‚

- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ …æ ¼æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®

- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„æ …æ ¼æ–‡ä»¶ä¸­åº”è¯¥æå–çš„æ³¢æ®µ

- `format` æ˜¯ä¸€ä¸ª `async` æ–¹æ³•ã€‚

#### operation å¿«æ·è®¡ç®—
 å½’ä¸€åŒ–æŒ‡æ•°

 ```ts
 {
    type:'nd'
 }
 ```

#### operation è¡¨è¾¾å¼

- ç¤ºä¾‹ä¸€ 

```ts
// band1 * 0.5
{
  operation: ['*', ['band', 1], 0.5],
};
```

- ç¤ºä¾‹äºŒ åµŒå¥—ä½¿ç”¨

```ts
// band0 * 0.2 + band1
{
  operation:['+', ['*', ['band', 0], 0.2], ['band', 1]]]
};
```

- ç¤ºä¾‹ä¸‰ å½’ä¸€åŒ–æŒ‡æ•°

```ts
// æ¤è¢«æŒ‡æ•°è®¡ç®—
{
  operation:['/',
    ['-', ['band', 1], ['band', 0]], // R > NIR
    ['+', ['band', 1], ['band', 0]]
  ]
};
```

- operation è¡¨è¾¾å¼ç±»å‹

    - *`['*', value1, value2]` è¿”å›  `value1 * value2`
    - / `['/', value1, value2]` è¿”å› `value1 / value2`
    - +`['+', value1, value2]` è¿”å› `value1 + value2`
    - -`['-', value1, value2]` è¿”å› `value2 - value1`
    - % `['%', value1, value2]` è¿”å› `value1 % value2`
    - ^ `['^', value1, value2]` è¿”å›  `value1 ^ value2`
    - abs`['abs', value1]`       è¿”å›  `Math.abs(value1)`
    - floor `['floor', value1]`     è¿”å›  `Math.floor(value1)`
    - round `['round', value1]`     è¿”å›  `Math.round(value1)`
    - ceil `['ceil', value1]`      è¿”å›  `Math.ceil(value1)`
    - sin `['sin', value1]`       è¿”å›  `Math.sin(value1)`
    - cos `['cos', value1]`       è¿”å›  `Math.cos(value1)`
    - atan `['atan', value1, value2]` è¿”å›  `n1===-1?Math.atan(n1): 

  

### data

### parser

#### format

`format`Method used to extract band data from the incoming raster file binary data.

* The first parameter is the raster file binary data

* The second parameter is the band that should be extracted from the raster file specified by the first parameter.

* `format`Is a`async`method.

#### operation quick calculation

normalized index

```ts
{
   type:'nd'
}
```

#### operation expression

* Example 1

```ts
// band1 * 0.5
{
  operation: ['*', ['band', 1], 0.5],
};
```

* Example 2 Nested use

```ts
// band0 * 0.2 + band1
{
  operation:['+', ['*', ['band', 0], 0.2], ['band', 1]]]
};
```

* Example 3 Normalized Index

```ts
// Vegetation index calculation
{
  operation:['/',
    ['-', ['band', 1], ['band', 0]], // R > NIR
    ['+', ['band', 1], ['band', 0]]
  ]
};
```

* operation expression type

  * \*`['*', value1, value2]`return`value1 * value2`

  * /`['/', value1, value2]`return`value1 / value2`

  * +`['+', value1, value2]`return`value1 + value2`

  * -`['-', value1, value2]`return`value2 - value1`

  * %`['%', value1, value2]`return`value1 % value2`

  * ^`['^', value1, value2]`return`value1 ^ value2`

  * abs`['abs', value1]`return`Math.abs(value1)`

  * floor `['floor', value1]`return`Math.floor(value1)`

  * round `['round', value1]`return`Math.round(value1)`

  * ceil `['ceil', value1]`return`Math.ceil(value1)`

  * sin `['sin', value1]`return`Math.sin(value1)`

  * cos `['cos', value1]`return`Math.cos(value1)`

  * atan `['atan', value1, value2]`Return \`n1===-1?Math.atan(n1):
### data

data The parsed data, which is an array

Taking geotiff as an example, the data needs to be parsed first and input to the source as data.

```tsx
import * as GeoTIFF from 'geotiff';

async function getTiffData() {
  async function getTiffData() {
    const response = await fetch(
      'https://gw.alipayobjects.com/zos/antvdemo/assets/light_clip/lightF182013.tiff',
    );
    const arrayBuffer = await response.arrayBuffer();
    const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);
    const image = await tiff.getImage();
    const width = image.getWidth();
    const height = image.getHeight();
    const values = await image.readRasters();
    return {
      data: values[0],
      width,
      height,
    };
  }
}
const tiffdata = await getTiffData();
layer.source(tiffdata.data, {
  parser: {
    type: 'raster',
    width: tiffdata.width,
    height: tiffdata.height,
    extent: [
      73.4821902409999979, 3.8150178409999995, 135.1066187319999869,
      57.6300459959999998,
    ],
  },
});
```

### parser

* type: raster
* extent: the latitude and longitude range of the raster \[minlng, minlat,maxLng, maxLat]
* width data width
* height data height

Add raster data to the map based on its latitude and longitude range.

```javascript
layer.source(rasterData, {
  parser: {
    type: 'raster',
    extent: [121.168, 30.2828, 121.384, 30.4219],
  },
});
```
### animate

#### Turn on and off animation

```javascript
layer.animate(true);
layer.animate(false);
```

#### Set animation parameters

* duration animation time unit (s) seconds
* interval trajectory interval, value range 0 - 1
* trailLength trail length value range 0 - 1

```javascript
layer.animate({
  duration: 4,
  interval: 0.2,
  trailLength: 0.1,
});
```

##### Introduction to parameter animation

L7 The current animation parameters are relative units, and our default length of a line segment is 1![L7 åŠ¨ç”»å‚æ•°](https://gw.alipayobjects.com/mdn/rms_855bab/afts/img/A*IBBfSIkb51cAAAAAAAAAAABkARQnAQ)

If interval = 0.2, a trajectory will be divided into 5 segments, if interval = 0.5, it will be two segments.

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mo_7Q6sTqOIAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/gallery/animate#plane_animate2)
### animate

#### å¼€å¯å…³é—­åŠ¨ç”»

```javascript
layer.animate(true);
layer.animate(false);
```

#### è®¾ç½®åŠ¨ç”»å‚æ•°

- duration åŠ¨ç”»æ—¶é—´ å•ä½(s)ç§’
- interval è½¨è¿¹é—´éš”, å–å€¼åŒºé—´ 0 - 1
- trailLength è½¨è¿¹é•¿åº¦ å–å€¼åŒºé—´ 0 - 1

```javascript
layer.animate({
  duration: 4,
  interval: 0.2,
  trailLength: 0.1,
});
```

##### å‚æ•°åŠ¨ç”»ä»‹ç»

L7 ç›®å‰åŠ¨ç”»å‚æ•°ä¸ºç›¸å¯¹å•ä½ï¼Œæˆ‘ä»¬é»˜è®¤ä¸€æ¡çº¿æ®µçš„é•¿åº¦ä¸º 1
![L7 åŠ¨ç”»å‚æ•°](https://gw.alipayobjects.com/mdn/rms_855bab/afts/img/A*IBBfSIkb51cAAAAAAAAAAABkARQnAQ)

å¦‚æœ interval = 0.2,åˆ™ä¸€æ¡è½¨è¿¹å°†ä¼šåˆ†æˆ 5 æ®µï¼Œå¦‚æœ interval = 0.5 åˆ™ä¸ºä¸¤æ®µã€‚


<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mo_7Q6sTqOIAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate#plane_animate2)

#### border

çº¿å›¾å±‚æ”¯æŒåœ¨ style ä¸­è®¾ç½®è¾¹æ¡†çš„å®½åº¦å’Œé¢œè‰²

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    borderWidth: 0.35,   // é»˜è®¤æ–‡ 0ï¼Œæœ€å¤§æœ‰æ•ˆå€¼ä¸º 0.5
    borderColor: '#888', // é»˜è®¤ä¸º #ccc
  });
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PsbNRpboEKEAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate#animate_path_texture)
#### linearColor

çº¿å›¾å±‚é€šè¿‡åœ¨ style ä¸­è®¾ç½®èµ·å§‹é¢œè‰²å’Œç»ˆç‚¹é¢œè‰²æ¥è®¾ç½®é¢œè‰²æ¸å˜ï¼Œæ¸å˜è‰²çš„ä¼˜å…ˆçº§æ¯” color æ–¹æ³•è®¾ç½®çš„é¢œè‰²æ›´é«˜

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    sourceColor: '#f00', // èµ·ç‚¹é¢œè‰²
    targetColor: '#0f0', // ç»ˆç‚¹é¢œè‰²
  });
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8DYQTZeQyZ4AAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/line/arc#trip_arc_dark_linear)
#### linearColor

The line layer sets the color gradient by setting the start color and end color in style. The gradient color has a higher priority than the color set by the color method.

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    sourceColor: '#f00', // starting point color
    targetColor: '#0f0', //End color
  });
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8DYQTZeQyZ4AAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/line/arc#trip_arc_dark_linear)
#### border

The line layer supports setting the width and color of the border in style

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    borderWidth: 0.35, //The default value is 0, the maximum valid value is 0.5
    borderColor: '#888', // Default is #ccc
  });
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PsbNRpboEKEAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/gallery/animate#animate_path_texture)
The line layer supports texture mapping and various expression forms, through`scene.addImage`Methods are added to global resources using`texture`Method specifies the texture.

```javascript
scene.addImage('02', 'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg');
const layer = new LineLayer()
    .source(data)
    .size(4)
    .shape('line')
    .texture('02')
    .color('#25d8b7')
    .animate({
        interval: 1, // interval
        duration: 1, // duration, delay
        trailLength: 2 // streamline length
    }).style({
        lineTexture: true, // Enable line mapping function
        iconStep: 20 //Set the spacing of the texture
    });
```

<div>
  <div style="width:40%;float:right; margin-left: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KEupSZ_p0pYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

* lineTexture specifies whether to enable texture mapping capabilities
* iconStep specifies the interval at which the texture is arranged on the line layer

[Online case](/examples/gallery/animate/#animate_path_texture)

#### texture advance

âœ¨ animate\
Current line layer (`shape`for`arc`/`arc3d`) When animation mode is turned on, the distribution of textures on the line layer will also be consistent with`animate`parameters related.

The number of textures arranged on a line layer is roughly duration/interval

```javascript
.animate({
    duration: 1,
    interval: 0.2,
    trailLength: 0.1
});

// At this time, the number of texture maps is duration / interval = 5
```

âœ¨ textureBlend parameters\
By controlling the textureBlend parameter in the style method, we can control the blending of texture layers and line layers.

* normal
* replace

```javascript
.style({
    lineTexture: true, // Enable line mapping function
    iconStep: 30, // Set the spacing of the texture
    textureBlend: 'replace', //Set the texture blending method. The default value is normal. The optional values â€‹â€‹are normal/replace.
  });
```

[Online case](zh/examples/line/animate#plane_animate2)
çº¿å›¾å±‚æ”¯æŒçº¹ç†è´´å›¾å’Œå¤šç§è¡¨ç°å½¢å¼ï¼Œé€šè¿‡ `scene.addImage` æ–¹æ³•æ·»åŠ åˆ°å…¨å±€çš„èµ„æºï¼Œä½¿ç”¨ `texture` æ–¹æ³•æŒ‡å®šè´´å›¾ã€‚

```javascript
scene.addImage('02', 'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg');
const layer = new LineLayer()
    .source(data)
    .size(4)
    .shape('line')
    .texture('02')
    .color('#25d8b7')
    .animate({
        interval: 1, // é—´éš”
        duration: 1, // æŒç»­æ—¶é—´ï¼Œå»¶æ—¶
        trailLength: 2 // æµçº¿é•¿åº¦
    }).style({
        lineTexture: true, // å¼€å¯çº¿çš„è´´å›¾åŠŸèƒ½
        iconStep: 20 // è®¾ç½®è´´å›¾çº¹ç†çš„é—´è·
    });
```

<div>
  <div style="width:40%;float:right; margin-left: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KEupSZ_p0pYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

- lineTexture   æŒ‡å®šæ˜¯å¦å¼€å¯çº¹ç†è´´å›¾èƒ½åŠ›
- iconStep      æŒ‡å®šè´´å›¾åœ¨çº¿å›¾å±‚ä¸Šé¢æ’å¸ƒçš„é—´éš”

[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate/#animate_path_texture)

#### texture advance

âœ¨ animate  
å½“çº¿å›¾å±‚ (`shape` ä¸º `arc`/`arc3d`) å¼€å¯åŠ¨ç”»æ¨¡å¼çš„æ—¶å€™ï¼Œçº¹ç†åœ¨çº¿å›¾å±‚ä¸Šçš„åˆ†å¸ƒè¿˜ä¼šå’Œ `animate` çš„å‚æ•°ç›¸å…³.        

çº¿å›¾å±‚ä¸Šæ’åˆ—çš„çº¹ç†çš„æ•°é‡å¤§è‡´ä¸º duration/interval

```javascript
.animate({
    duration: 1,
    interval: 0.2,
    trailLength: 0.1
});

// æ­¤æ—¶ çº¹ç†è´´å›¾æ•°é‡ä¸º  duration / interval = 5
```

âœ¨ textureBlend å‚æ•°    
é€šè¿‡æ§åˆ¶ style æ–¹æ³•ä¸­çš„ textureBlend å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶çº¹ç†å›¾å±‚å’Œçº¿å›¾å±‚çš„æ··åˆæƒ…å†µ  

- normal
- replace

```javascript
.style({
    lineTexture: true, // å¼€å¯çº¿çš„è´´å›¾åŠŸèƒ½
    iconStep: 30, // è®¾ç½®è´´å›¾çº¹ç†çš„é—´è·
    textureBlend: 'replace', // è®¾ç½®çº¹ç†æ··åˆæ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º normalï¼Œå¯é€‰å€¼æœ‰ normal/replace ä¸¤ç§
  });

```

[åœ¨çº¿æ¡ˆä¾‹](zh/examples/line/animate#plane_animate2)

#### segmentNumber

The default arc segment number of the arc layer is 30. However, sometimes users do not need so many segments. Appropriately reducing the number of segments can improve performance while ensuring the effect.

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    segmentNumber: 15,
  });
```
#### segmentNumber

arc å›¾å±‚çš„å¼§çº¿é»˜è®¤åˆ†æ®µæ•°æ˜¯ 30ï¼Œç„¶è€Œæœ‰æœ‰äº›æ—¶å€™ç”¨æˆ·å¹¶ä¸éœ€è¦è¿™ä¹ˆå¤šçš„åˆ†æ®µæ•°ï¼Œé€‚å½“é™ä½åˆ†æ®µæ•°é‡å¯ä»¥åœ¨ä¿è¯æ•ˆæœçš„æƒ…å†µä¸‹æé«˜æ€§èƒ½ã€‚

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    segmentNumber: 15,
  });
```

#### vertex height

The line layer supports assigning a height value to each vertex and allows users to set the height scale through the vertexHeightScale property in the style method.

```javascript
const layer = new LineLayer({})
  .source(data)
  .size(1)
  .shape('line')
  .style({
    vertexHeightScale: 30,
  })
  .color('#ccc');

scene.addLayer(layer);
```

Data with height values

```javascript
{
"type": "FeatureCollection",
"name": "tw",
"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
"features": [
  {
    "type": "Feature",
    "properties": { },
    "geometry": {
      "type": "LineString", "coordinates":
      [
        [ 121.519153647, 25.288692533, 41.0 ],
        [ 121.529153646999987, 25.288692533, 35.0 ],
        [ 121.539153647, 25.288692533, 27.0 ],
        [ 121.549153647, 25.288692533, 66.0 ],
        [ 121.559153646999988, 25.288692533, 83.0 ],
        [ 121.569153647, 25.288692533, 88.0 ]
      ]
    }
  },
...
}
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8TXwR7XbeLIAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/line/isoline#height)
#### vertex height

çº¿å›¾å±‚æ”¯æŒç»™æ¯ä¸ªé¡¶ç‚¹èµ‹äºˆé«˜åº¦å€¼ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·åœ¨ style æ–¹æ³•ä¸­é€šè¿‡ vertexHeightScale å±æ€§è®¾ç½®é«˜åº¦æ¯”ä¾‹ã€‚

```javascript
const layer = new LineLayer({})
  .source(data)
  .size(1)
  .shape('line')
  .style({
    vertexHeightScale: 30,
  })
  .color('#ccc');

scene.addLayer(layer);
```

å¸¦æœ‰é«˜åº¦å€¼çš„æ•°æ®

```javascript
{
"type": "FeatureCollection",
"name": "tw",
"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
"features": [
  {
    "type": "Feature",
    "properties": { },
    "geometry": {
      "type": "LineString", "coordinates":
      [
        [ 121.519153647, 25.288692533, 41.0 ],
        [ 121.529153646999987, 25.288692533, 35.0 ],
        [ 121.539153647, 25.288692533, 27.0 ],
        [ 121.549153647, 25.288692533, 66.0 ],
        [ 121.559153646999988, 25.288692533, 83.0 ],
        [ 121.569153647, 25.288692533, 88.0 ]
      ]
    }
  },
...
}

```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8TXwR7XbeLIAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/line/isoline#height)
#### thetaOffset

thetaOffset parameter represents the arc arc arc, the default value is 0.314

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    thetaOffset: 0.35,
  });
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*qRFaR7Ko274AAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/gallery/animate#route_line)
#### thetaOffset

thetaOffset å‚æ•° è¡¨ç¤º arc å¼§çº¿çš„å¼§åº¦ï¼Œé»˜è®¤å€¼æ˜¯ 0.314

```javascript
const layer = new LineLayer({})
  .source(data, {
    parser: {
      type: 'csv',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(1)
  .shape('arc')
  .color('#8C1EB2')
  .style({
    thetaOffset: 0.35,
  });
```
<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*qRFaR7Ko274AAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate#route_line)
#### dash

The line layer sets the line type in style and specifies the dotted line part and the solid line part at the same time.

```javascript
const layer = new LineLayer({})
.source(data)
.size(1.5)
.shape('line')
.color('æ ‡å‡†åç§°', ['#5B8FF9', '#5CCEA1', '#F6BD16'])
.active(true)
.style({
  lineType: 'dash',
  dashArray: [5, 5],
});
scene.addLayer(layer);
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*pb3FRZnaa0AAAAAAAAAAAAAAARQnAQ'>

* lineType
  The default is solid, which represents a solid line, and dash represents a dotted line.
* dashArray\[len1: number, len2: number]
  len1 solid line length
  len2 interval length

[Online case](/examples/line/arc#trip_arc_dark_linear)
#### dash

çº¿å›¾å±‚é€šè¿‡åœ¨ style ä¸­è®¾ç½®çº¿çš„ç±»å‹ï¼ŒåŒæ—¶æŒ‡å®šè™šçº¿éƒ¨åˆ†å’Œå®çº¿éƒ¨åˆ†

```javascript
const layer = new LineLayer({})
.source(data)
.size(1.5)
.shape('line')
.color('æ ‡å‡†åç§°', ['#5B8FF9', '#5CCEA1', '#F6BD16'])
.active(true)
.style({
  lineType: 'dash',
  dashArray: [5, 5],
});
scene.addLayer(layer);
```

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*pb3FRZnaa0AAAAAAAAAAAAAAARQnAQ'>

- lineType
é»˜è®¤ä¸º solidï¼Œè¡¨ç¤ºå®çº¿ï¼Œdash è¡¨ç¤ºè™šçº¿
- dashArray[len1: number, len2: number]
len1 å®çº¿é•¿åº¦
len2 é—´éš”é•¿åº¦

[åœ¨çº¿æ¡ˆä¾‹](/examples/line/arc#trip_arc_dark_linear)
âš ï¸ The use of mask and maskfence is not recommended. After configuring 2.14.x, the version will take effect.

Template layer: a layer used as a template. PointLayer, LineLayer, and PolygonLayer can all be used as templates.
Mask layer: the layer cut by the template

### maskLayers

Mask layer takes effect

<description> *array Layer* **optional** *default:*\[]</description>

### enableMask

Mask layer takes effect

Whether to enable the mask. It is enabled by default. It will take effect when maskLayers is not empty.

<description> *bool* **optional** *default:* true</description>

### maskInside

```
Mask layer takes effect
```

<description> *boolean* **optional** *default:* true</description>

Used to describe the content of the current layer and mask boundary display.

* `true`Show inside the mask
* `false`Show outside mask

### maskOpetation mask method

Template layer takes effect<description> *enumerate* **optional** *default:* and</description>It is invalid when there are multiple maskLayers and needs to be set on the template layer.

* or intersection
* and union

Usage example

```ts
const polygonLayer = new Polygon();
 const rasterLayer = new Raster({ // Raster layer uses polygon mask
    maskLayers:[polygonLayer],
    enableMask:true,
    maskInside: true,
 
 });
```
#### style data mapping

The default style configuration is a constant value. Some configurations also support data mapping. The mapping definition is the same as the color and size parameters.

* field: mapping field
* value: mapping interval or custom callback function

like:

```ts
layer.style({
    opacity:{
        field:'name'
        value:[0.1,0.5,1],

    }
})
```



âš ï¸ maskã€maskfence ä¸æ¨èä½¿ç”¨ï¼Œä¸€ä¸‹é…ç½® 2.14.x ä¹‹åç‰ˆæœ¬ç”Ÿæ•ˆ

æ¨¡æ¿å›¾å±‚ï¼šç”¨åšæ¨¡æ¿çš„å›¾å±‚ï¼ŒPointLayerã€LineLayerã€PolygonLayer éƒ½å¯ä»¥ä½œä¸ºæ¨¡æ¿
æ©è†œå›¾å±‚ï¼šè¢«æ¨¡æ¿åˆ‡å‰²çš„å›¾å±‚

### maskLayers

   æ©è†œå›¾å±‚ç”Ÿæ•ˆ

  <description> _array Layer_ **optional** _default:_ []</description>



 ### enableMask
    
æ©è†œå›¾å±‚ç”Ÿæ•ˆ

 æ˜¯å¦å¼€å¯æ©è†œï¼Œé»˜è®¤å¼€å¯ maskLayers ä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ

 <description> _bool_ **optional** _default:_ true</description>

 ### maskInside
    æ©è†œå›¾å±‚ç”Ÿæ•ˆ

<description> _boolean_ **optional** _default:_ true</description>

ç”¨æ¥æè¿°å½“å‰å›¾å±‚çš„å†…å®¹ä¸æ©æ¨¡è¾¹ç•Œæ˜¾ç¤ºã€‚

- `true` åœ¨æ©æ¨¡å†…éƒ¨æ˜¾ç¤º
- `false` åœ¨æ©æ¨¡å¤–éƒ¨æ˜¾ç¤º

### maskOpetation æ©è†œæ–¹å¼

æ¨¡æ¿å›¾å±‚ç”Ÿæ•ˆ
<description> _æšä¸¾_ **optional** _default:_ and</description>
 maskLayers ä¸ºå¤šä¸ªæ—¶å¤±æ•ˆï¼Œéœ€è¦åœ¨æ¨¡æ¿å›¾å±‚è®¾ç½®

- or äº¤é›†
- and å¹¶é›†

ä½¿ç”¨ç¤ºä¾‹

```ts

 const polygonLayer = new Polygon();
 const rasterLayer = new Raster({ // æ …æ ¼å›¾å±‚ä½¿ç”¨polygon æ©è†œ
    maskLayers:[polygonLayer],
    enableMask:true,
    maskInside: true,
 
 });#### æ ·å¼æ•°æ®æ˜ å°„
é»˜è®¤æ ·å¼é…ç½®ä¸ºå¸¸é‡å€¼ï¼ŒæŸäº›é…ç½®ä¹Ÿæ”¯æŒæ•°æ®æ˜ å°„ï¼Œæ˜ å°„å®šä¹‰åŒ colorã€sizeå‚æ•°ä¸€è‡´ã€‚

- field: æ˜ å°„å­—æ®µ
- valueï¼š æ˜ å°„åŒºé—´æˆ–è€…è‡ªå®šä¹‰å›è°ƒå‡½æ•°

å¦‚ï¼š

```ts
layer.style({
    opacity:{
        field:'name'
        value:[0.1,0.5,1],

    }
})
```
## options

<embed src="@/docs/common/layer/options.zh.md"></embed>

## æ•°æ®æ–¹æ³•

<embed src="@/docs/common/layer/layer_encode.zh.md"></embed>

<embed src="@/docs/common/layer/layer_style.zh.md"></embed>

<embed src="@/docs/common/layer/layer_texture.zh.md"></embed>

<embed src="@/docs/common/layer/layer_update.zh.md"></embed>

<embed src="@/docs/common/layer/layer_ctr.zh.md"></embed>

<embed src="@/docs/common/layer/layer_interaction.zh.md"></embed>

<embed src="@/docs/common/layer/mask_method.zh.md"></embed>

<embed src="@/docs/common/layer/mouse_event.zh.md"></embed>

<embed src="@/docs/common/layer/layer_event.zh.md"></embed>
## options

<embed src="@/docs/common/layer/options.en.md"></embed>

## data method

<embed src="@/docs/common/layer/layer_encode.en.md"></embed>

<embed src="@/docs/common/layer/layer_style.en.md"></embed>

<embed src="@/docs/common/layer/layer_texture.en.md"></embed>

<embed src="@/docs/common/layer/layer_update.en.md"></embed>

<embed src="@/docs/common/layer/layer_ctr.en.md"></embed>

<embed src="@/docs/common/layer/layer_interaction.en.md"></embed>

<embed src="@/docs/common/layer/mask_method.en.md"></embed>

<embed src="@/docs/common/layer/mouse_event.en.md"></embed>

<embed src="@/docs/common/layer/layer_event.en.md"></embed>
## å›¾å±‚äº‹ä»¶

### inited

å‚æ•° option

- target å½“å‰ layer
- type äº‹ä»¶ç±»å‹

å›¾å±‚åˆå§‹åŒ–å®Œæˆåè§¦å‘

```javascript
layer.on('inited', (option) => {});
```

### add

å›¾å±‚æ·»åŠ åˆ° scene

å‚æ•° option

- target å½“å‰ layer
- type äº‹ä»¶ç±»å‹

```javascript
layer.on('add', (type) => console.log(type));
```

### remove

å›¾å±‚ç§»é™¤æ—¶è§¦å‘

å‚æ•° option

- target å½“å‰ layer
- type äº‹ä»¶ç±»å‹

```javascript
layer.on('remove', (type) => console.log(type));
```

### legend
æ•°æ®æ˜ å°„æ›´æ–°ï¼Œå›¾ä¾‹å‘ç”Ÿå˜åŒ–,ä¸»è¦colorã€size

å‚æ•° option

- type æ˜ å°„é€šé“ã€å›¾ä¾‹ç±»å‹
- attr æ˜ å°„å®ä¾‹


```js
layer.on('legend', (ev) => console.log(ev));

```

### legend:color

æ•°æ®æ˜ å°„æ›´æ–°ï¼Œå›¾ä¾‹å‘ç”Ÿå˜åŒ–,color é¢œè‰²æ”¹å˜
å‚æ•° option
- type æ˜ å°„é€šé“ã€å›¾ä¾‹ç±»å‹
- attr æ˜ å°„å®ä¾‹

```js
layer.on('legend:color', (ev) => console.log(ev));

```

### legend:size

æ•°æ®æ˜ å°„æ›´æ–°ï¼Œå›¾ä¾‹å‘ç”Ÿå˜åŒ–,size å¤§å°æ”¹å˜
å‚æ•° option
- type æ˜ å°„é€šé“ã€å›¾ä¾‹ç±»å‹
- attr æ˜ å°„å®ä¾‹

```js
layer.on('legend:size', (ev) => console.log(ev));

```

## å›¾å±‚æ¡†é€‰

### boxSelect

å‚æ•° option

- box [x1: number, y1: number, x2: number, y2: number] ç›¸è¾ƒäº
- cb (...args: any[]) => void ä¼ å…¥çš„å›è°ƒæ–¹æ³•ï¼Œè¿”å›æ¡†é€‰å†…éƒ¨çš„ feature

```javascript
layer.boxSelect(box, cb);
// (x1, y1), (x2, y2) æ¡†é€‰çš„æ–¹æ¡†å·¦ä¸Šè§’å’Œå³ä¸‹è§’ç›¸å¯¹äºåœ°å›¾å·¦ä¸Šè§’çš„åƒç´ åæ ‡
// cb æ˜¯ä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°è¿”å›çš„å‚æ•°æ˜¯é€‰ä¸­çš„ feature å¯¹è±¡æ•°ç»„ï¼Œå¯¹è±¡çš„å­—æ®µå’Œç”¨æˆ·ä¼ å…¥çš„æ•°æ®ç›¸å…³
```## layer mask method

### addMask

```
Add Mask layer
```

```ts
const polygonLayer = new Polygon();
 layer.addMask(polygonLayer);
 scene.render()
```

### removeMask

```ts
const polygonLayer = new Polygon();
 layer.removeMask(polygonLayer);
 scene.render()
```

### disableMask

```ts
layer.disableMask();
 scene.render()
```

### enableMask

```ts
layer.disableMask();
 scene.render()
```
## layer events

### inited

Parameter option

* target current layer
* type event type

Triggered after layer initialization is completed

```javascript
layer.on('inited', (option) => {});
```

### add

Add layer to scene

Parameter option

* target current layer
* type event type

```javascript
layer.on('add', (type) => console.log(type));
```

### remove

Fires when a layer is removed

Parameter option

* target current layer
* type event type

```javascript
layer.on('remove', (type) => console.log(type));
```

### legend

Data mapping is updated, the legend changes, mainly color and size

Parameter option

* type mapping channel, legend type
* attr mapping example

```js
layer.on('legend', (ev) => console.log(ev));
```

### legend:color

The data mapping is updated, the legend changes, and the color changes
Parameter option

* type mapping channel, legend type
* attr mapping example

```js
layer.on('legend:color', (ev) => console.log(ev));
```

### legend:size

The data mapping is updated, the legend changes, and the size changes
Parameter option

* type mapping channel, legend type
* attr mapping example

```js
layer.on('legend:size', (ev) => console.log(ev));
```

## Layer selection

### boxSelect

Parameter option

* box \[x1: number, y1: number, x2: number, y2: number] compared to
* cb (...args: any\[]) => void callback method passed in, returns the feature inside the box selection

```javascript
layer.boxSelect(box, cb);
// (x1, y1), (x2, y2) The pixel coordinates of the upper left corner and lower right corner of the selected box relative to the upper left corner of the map
//cb is the callback function passed in. The parameter returned by the callback function is the selected feature object array. The fields of the object are related to the data passed in by the user.
```
## å›¾å±‚æ©è†œæ–¹æ³•

### addMask
    æ·»åŠ  Mask å›¾å±‚
```ts
 const polygonLayer = new Polygon();
 layer.addMask(polygonLayer);
 scene.render()
```
### removeMask

```ts
 const polygonLayer = new Polygon();
 layer.removeMask(polygonLayer);
 scene.render()

```
### disableMask
```ts

 layer.disableMask();
 scene.render()

```
### enableMask

```ts
 layer.disableMask();
 scene.render()
```


## Layer interaction methods

### active(activeOption | boolean)

* Turn on or off mousehover element highlighting effect
* `activeOption`
  * `color`: Highlight color
  * `mix`: Optional parameter, the default is 0, which means the highlight color is the specified solid color. The maximum valid value is 1, which means the highlight color is all the background color.

```javascript
activeOption: {
  color: '#f00';
  mix: 0.6
}
```

```javascript
// Turn on Active and use the default highlight color
layer.active(true);

// Turn on Active custom highlight color

layer.active({
  color: 'red',
  mix: .6
});

//Turn off the highlight effect
layer.active(false);
```

### setActive(featured: in)

Set hover highlight of specified element based on element ID

ğŸŒŸ Specifying element highlighting is not equal to layer highlighting. A layer contains multiple elements. Generally, a layer has as many elements as there are single pieces of data in the data array passed to source.

```javascript
layer.setActive(featureId);
```

### select(selectOption | boolean)

* Turn on or off mouseclick element selection highlighting effect
* selectOption
  * `color`: Select highlight color
  * `mix`: Optional parameter, the default is 0, which means that the selected highlight color is the specified solid color. The maximum effective value is 1, which means that all the selected highlight colors are background colors.

```javascript
selectOption: {
  color: '#f00';
  mix: .6
}
```

```javascript
// Turn on Active and use the default highlight color
layer.select(true);

// Turn on Active custom highlight color

layer.select({
  color: 'red',
  mix: .6
});

//Turn off the highlight effect
layer.select(false);
```

### setSelect(featureId: int)

Set the specified element according to the element ID click to select and highlight

ğŸŒŸ Specifying element highlighting is not equal to layer highlighting. A layer contains multiple elements. Generally, a layer has as many elements as there are single pieces of data in the data array passed to source.

```javascript
layer.setSelect(featureId);
```

### setAutoFit(autoFit: boolean)

Allows users to actively set the autoFit parameters of layers\
ğŸŒŸ After setting this method, it will take effect when the layer is updated, such as triggered after setData

```javascript
// Instructions
layer.setAutoFit(true);
// Internal implementation
public setAutoFit(autoFit: boolean): ILayer {
    this.updateLayerConfig({
      autoFit,
    });
    return this;
  }
```

### getScale(attr: string)

Supports separately obtaining the value of a graphic after scale calculation to meet the user's need to obtain certain feature values â€‹â€‹of the layer.

* attribute value of attr scale

```javascript
const data = [
  {lng: 120, lat: 30, name: 'n1'},
  {lng: 120, lat: 30, name: 'n2'}
]
const layer = new PointLayer()
.source(data, {
parser: {
    x: 'lng',
      y: 'lat',
      type: 'json'
    }
  })
.shape('circle')
.color('name', ['#f00', '#ff0'])
.size('name', [20, 40])

scene.addLayer(layer)


// Draw two points on the scene at this time
// A point with a color of yellow and a size of 40, corresponding to name n1
// A point with a color of red and a size of 20, corresponding to name n2

const colorScale = layer.getScale('color'); // Get the scale generated by the color method
const color1 = colorScale('n1'); // '#ff0'
const color1 = colorScale('n2'); // '#f00'

const sizeScale = layer.getScale('size'); // Get the scale generated by the size method
const size1 = sizeScale('n1'); // 40
const size2 = sizeScale('n2'); // 20
```

### getLegendItems(type: string)

Get legend configuration

* type legend type
* index optional default

```javascript
layer.getLegendItems('color');

layer.getLegendItems('size');
```

### getLegend(type: string)

Get the legend getLegendItems enhanced version returns more information

return value

* type legend type
* field mapping field
* items legend items

```javascript
layer.getLegend('color');

layer.getLegend('size');
```
## å›¾å±‚äº¤äº’æ–¹æ³•

### active(activeOption | boolean)

- å¼€å¯æˆ–è€…å…³é—­ mousehover å…ƒç´ é«˜äº®æ•ˆæœ
- `activeOption`
  - `color`: é«˜äº®é¢œè‰²
  - `mix`: å¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸º 0ï¼Œè¡¨ç¤ºé«˜äº®é¢œè‰²æ˜¯æŒ‡å®šçº¯è‰²ï¼Œæœ€å¤§æœ‰æ•ˆå€¼æ˜¯1ï¼Œè¡¨ç¤ºé«˜äº®è‰²å…¨éƒ¨æ˜¯åº•è‰²

```javascript
activeOption: {
  color: '#f00';
  mix: 0.6
}
```

```javascript
// å¼€å¯ Active  ä½¿ç”¨é»˜è®¤é«˜äº®é¢œè‰²
layer.active(true);

//  å¼€å¯ Active  è‡ªå®šä¹‰é«˜äº®é¢œè‰²

layer.active({
  color: 'red',
  mix: .6
});

// å…³é—­é«˜äº®æ•ˆæœ
layer.active(false);
```

### setActive(featureId: int)

æ ¹æ®å…ƒç´  ID è®¾ç½®æŒ‡å®šå…ƒç´  hover é«˜äº®

ğŸŒŸ æŒ‡å®šå…ƒç´ é«˜äº®ä¸ç­‰äºå›¾å±‚é«˜äº®ï¼Œä¸€ä¸ªå›¾å±‚åŒ…å«å¤šä¸ªå…ƒç´ ï¼Œä¸€èˆ¬ä¼ å…¥ source çš„æ•°æ®æ•°ç»„ä¸­æœ‰å¤šå°‘å•æ¡æ•°æ®ï¼Œä¸€ä¸ªå›¾å±‚å°±æœ‰å¤šå°‘å…ƒç´ 

```javascript
layer.setActive(featureId);
```

### select(selectOption | boolean)

- å¼€å¯æˆ–è€…å…³é—­ mouseclick å…ƒç´ é€‰ä¸­é«˜äº®æ•ˆæœ
- selectOption
  - `color`: é€‰ä¸­é«˜äº®é¢œè‰²
  - `mix`: å¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸º 0ï¼Œè¡¨ç¤ºé€‰ä¸­é«˜äº®é¢œè‰²æ˜¯æŒ‡å®šçº¯è‰²ï¼Œæœ€å¤§æœ‰æ•ˆå€¼æ˜¯1ï¼Œè¡¨ç¤ºé€‰ä¸­é«˜äº®è‰²å…¨éƒ¨æ˜¯åº•è‰²

```javascript
selectOption: {
  color: '#f00';
  mix: .6
}
```

```javascript
// å¼€å¯ Active  ä½¿ç”¨é»˜è®¤é«˜äº®é¢œè‰²
layer.select(true);

//  å¼€å¯ Active  è‡ªå®šä¹‰é«˜äº®é¢œè‰²

layer.select({
  color: 'red',
  mix: .6
});

// å…³é—­é«˜äº®æ•ˆæœ
layer.select(false);
```

### setSelect(featureId: int)

æ ¹æ®å…ƒç´  ID è®¾ç½®æŒ‡å®šå…ƒç´  click é€‰ä¸­ é«˜äº®

ğŸŒŸ æŒ‡å®šå…ƒç´ é«˜äº®ä¸ç­‰äºå›¾å±‚é«˜äº®ï¼Œä¸€ä¸ªå›¾å±‚åŒ…å«å¤šä¸ªå…ƒç´ ï¼Œä¸€èˆ¬ä¼ å…¥ source çš„æ•°æ®æ•°ç»„ä¸­æœ‰å¤šå°‘å•æ¡æ•°æ®ï¼Œä¸€ä¸ªå›¾å±‚å°±æœ‰å¤šå°‘å…ƒç´ 

```javascript
layer.setSelect(featureId);
```

### setAutoFit(autoFit: boolean)
è®©ç”¨æˆ·å¯ä»¥ä¸»åŠ¨è®¾ç½®å›¾å±‚çš„ autoFit å‚æ•°   
ğŸŒŸ è®¾ç½®å®Œè¯¥æ–¹æ³•åä¼šåœ¨å›¾å±‚å‘ç”Ÿæ›´æ–°çš„æ—¶å€™ç”Ÿæ•ˆï¼Œå¦‚åœ¨ setData ä¹‹åè§¦å‘    

```javascript
// ä½¿ç”¨æ–¹æ³•
layer.setAutoFit(true);
// å†…éƒ¨å®ç°
public setAutoFit(autoFit: boolean): ILayer {
    this.updateLayerConfig({
      autoFit,
    });
    return this;
  }
```

### getScale(attr: string)
æ”¯æŒå•ç‹¬è·å–æŸä¸ªå›¾å½¢ç»è¿‡ scale è®¡ç®—åçš„å€¼ï¼Œ  æ»¡è¶³ç”¨æˆ·è·å–å›¾å±‚æŸäº› feature å€¼çš„éœ€æ±‚ã€‚
- attr scale çš„å±æ€§å€¼   

```javascript
const data = [
  {lng: 120, lat: 30, name: 'n1'},
  {lng: 120, lat: 30, name: 'n2'}
]
const layer = new PointLayer()
	.source(data, {
		parser: {
    	x: 'lng',
      y: 'lat',
      type: 'json'
    }
  })
	.shape('circle')
	.color('name', ['#f00', '#ff0'])
	.size('name', [20, 40])

scene.addLayer(layer)


// æ­¤æ—¶åœ¨ scene ä¸Šç»˜åˆ¶ä¸¤ä¸ªç‚¹
// ä¸€ä¸ªé¢œè‰²ä¸ºé»„è‰²ï¼Œå¤§å°ä¸º 40 çš„ç‚¹ï¼Œå¯¹åº” name ä¸º n1
// ä¸€ä¸ªé¢œè‰²ä¸ºçº¢è‰²ï¼Œå¤§å°ä¸º 20 çš„ç‚¹ï¼Œå¯¹åº” name ä¸º n2

const colorScale = layer.getScale('color'); // è·å– color æ–¹æ³•äº§ç”Ÿçš„ scale
const color1 = colorScale('n1'); // '#ff0'
const color1 = colorScale('n2'); // '#f00'

const sizeScale = layer.getScale('size'); // è·å– size æ–¹æ³•äº§ç”Ÿçš„ scale
const size1 = sizeScale('n1'); // 40
const size2 = sizeScale('n2'); // 20
```
### getLegendItems(type: string)

è·å–å›¾ä¾‹é…ç½®

- type å›¾ä¾‹ç±»å‹
- index å¯é€‰ é»˜è®¤

```javascript
layer.getLegendItems('color');

layer.getLegendItems('size');
```

### getLegend(type: string)
è·å–å›¾ä¾‹ getLegendItems åŠ å¼ºç‰ˆè¿”å›æ›´å¤šä¿¡æ¯

è¿”å›å€¼
- type å›¾ä¾‹ç±»å‹
- field æ˜ å°„å­—æ®µ
- items å›¾ä¾‹é¡¹


```javascript
layer.getLegend('color');

layer.getLegend('size');
```


`scale` æ–¹æ³•è®¾ç½®æ•°æ®å­—æ®µæ˜ å°„æ–¹æ³•ï¼Œç”¨äºè®¾å°†åœ°å›¾æ•°æ®å€¼ï¼ˆæ•°å­—ã€æ—¥æœŸã€ç±»åˆ«ç­‰æ•°æ®ï¼‰è½¬æˆè§†è§‰å€¼ï¼ˆé¢œè‰²ã€å¤§å°ã€å½¢çŠ¶ï¼‰ã€‚å°ºåº¦ Scale æ˜¯æ•°æ®å¯è§†åŒ–çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºå®ƒä»¬å†³å®šäº†è§†è§‰ç¼–ç çš„æ€§è´¨ã€‚   


### scale(field: string, scaleConfig: IScaleConfig)

- `field` æŒ‡å®š source ä¸­ä¼ å…¥çš„æ•°æ®ä¸­ç”¨äºæ˜ å°„çš„å­—æ®µå
- `scaleConfig` åˆ—å®šä¹‰é…ç½®ï¼Œå¯¹è±¡ç±»å‹

```javascript
interface IScaleConfig {
  type: ScaleTypeName;
  domain?: any[];
  ...
}

layer.color('id', ['#f00', '#ff0'])
.size('mag', [1, 80])
.scale('mag', {
  type: 'linear',
  domain: [ 1, 50]
})ï¼›
```

### ScaleTypeName
`scale` çš„ç±»å‹å¯ä»¥åˆ†ä¸º `3` ç±» `11` ç§ï¼Œä¸åŒ `Scale` çš„å·®å¼‚åœ¨äº `domain->range` çš„è½¬æ¢æ–¹æ³•çš„ä¸åŒã€‚    
`range` å’Œ `domain` æ˜¯ `Scale` ä¸­éå¸¸é‡è¦çš„ä¸¤ä¸ªå‚æ•°ã€‚

- domain: åœ°å›¾æ•°æ®å€¼çš„å®šä¹‰åŒºé—´
- rangeï¼šè§†è§‰å€¼çš„åŒºé—´å®šä¹‰

|  æ•°æ®ç±»å‹   | åº¦é‡ç±»å‹  |
|  --------  | ------- |
| è¿ç»­        | linearã€logã€powã€timeã€sequentialã€quantizeã€quantileã€threshold |
| åˆ†ç±»        | catã€time |
| å¸¸é‡        | identity  |


#### Cat

Cat æŒ‡æšä¸¾ç±»å‹ï¼Œç”¨äºå±•ç¤ºåˆ†ç±»æ•°æ®ï¼Œæ¯”å¦‚å†œä½œç‰©ç§æ¤åŒºåˆ†å¸ƒå›¾ï¼Œæ°´ç¨»ã€ç‰ç±³ã€å¤§è±†ç­‰ä¸åŒç±»åˆ«éœ€è¦æ˜ å°„ä¸ºä¸åŒçš„é¢œè‰²ã€‚

```js
// ä¸‰ç§ä½œç‰©ä¼šåˆ†åˆ«è½¬æˆå¯¹åº”çš„é¢œè‰²
// domain = ['corn','rice', 'soybean'];
// range = ['red','white','blue'];
const data = [
  { lng: 120, lat: 30, t: 'corn' },
  { lng: 121, lat: 30, t: 'rice' },
  { lng: 122, lat: 30, t: 'soybean' },
];
layer.source(data, {
  parser: {
    type: 'type',
    x: 'lng',
    y: 'lat'
  }
});
layer.scale('t', { type: 'cat' });
layer.color('t', ['red', 'white', 'blue']);

```


#### identify

å¸¸é‡åº¦é‡ æŸä¸ªå­—æ®µæ˜¯ä¸å˜çš„å¸¸é‡ã€‚

#### linear

çº¿æ€§æ˜¯è¿ç»­æ•°æ®çš„æ˜ å°„æ–¹æ³•ï¼Œæ•°æ®å’Œè§†è§‰å€¼æ˜¯é€šè¿‡çº¿æ€§æ–¹æ³•æ¢ç®—çš„ã€‚å¦‚æ•°æ®å€¼ 1-100 çº¿æ€§æ˜ å°„åˆ°çº¢åˆ°è“çš„çº¿ä¸‹æ¸å˜è‰²æ¯ä¸ªæ•°å­—å¯¹åº”ä¸€ä¸ªé¢œè‰²

#### quantize 

ç›¸ç­‰é—´éš”ä¼šå°†å±æ€§å€¼çš„èŒƒå›´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„å­èŒƒå›´ã€‚ç›¸ç­‰é—´éš”æœ€é€‚ç”¨äºå¸¸è§çš„æ•°æ®èŒƒå›´ï¼Œå¦‚ç™¾åˆ†æ¯”å’Œæ¸©åº¦ã€‚è¿™ç§æ–¹æ³•å¼ºè°ƒçš„æ˜¯æŸä¸ªå±æ€§å€¼ç›¸å¯¹äºå…¶ä»–å€¼çš„é‡

#### quantile

æ¯ä¸ªç±»éƒ½å«æœ‰ç›¸ç­‰æ•°é‡çš„è¦ç´ ã€‚åˆ†ä½æ•°åˆ†ç±»éå¸¸é€‚ç”¨äºå‘ˆçº¿æ€§åˆ†å¸ƒçš„æ•°æ®ã€‚åˆ†ä½æ•°ä¸ºæ¯ä¸ªç±»åˆ†é…æ•°é‡ç›¸ç­‰çš„æ•°æ®å€¼ã€‚ä¸å­˜åœ¨ç©ºç±»ï¼Œä¹Ÿä¸å­˜åœ¨å€¼è¿‡å¤šæˆ–è¿‡å°‘çš„ç±»ã€‚
ç”±äºä½¿ç”¨â€œåˆ†ä½æ•°â€åˆ†ç±»å°†è¦ç´ ä»¥åŒç­‰æ•°é‡åˆ†ç»„åˆ°æ¯ä¸ªç±»ä¸­ï¼Œå› æ­¤å¾—åˆ°çš„åœ°å›¾å¾€å¾€å…·æœ‰è¯¯å¯¼æ€§ã€‚å¯èƒ½ä¼šå°†ç›¸ä¼¼çš„è¦ç´ ç½®äºç›¸é‚»çš„ç±»ä¸­ï¼Œæˆ–å°†å€¼å·®å¼‚è¾ƒå¤§çš„è¦ç´ ç½®äºç›¸åŒç±»ä¸­ã€‚å¯é€šè¿‡å¢åŠ ç±»çš„æ•°é‡å°†è¿™ç§å¤±çœŸé™è‡³æœ€ä½ã€‚

#### threshold 

ä»–å…è®¸å°†åŸŸçš„ä»»æ„å­é›†ï¼ˆéç»Ÿä¸€æ®µï¼‰æ˜ å°„åˆ°èŒƒå›´å†…çš„ç¦»æ•£å€¼ã€‚è¾“å…¥åŸŸä»ç„¶æ˜¯è¿ç»­çš„ï¼Œå¹¶æ ¹æ®æä¾›ç»™åŸŸå±æ€§çš„ä¸€ç»„é˜ˆå€¼åˆ’åˆ†ä¸ºå¤šä¸ªåˆ‡ç‰‡ã€‚ range å±æ€§å¿…é¡»æœ‰ N+1 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ N æ˜¯åŸŸä¸­æä¾›çš„é˜ˆå€¼è¾¹ç•Œæ•°

æ‰‹åŠ¨è®¾ç½®é—´éš” Manual interval æ‰‹åŠ¨è®¾ç½®åˆ†çº§åˆ†ç±»åŒºé—´ï¼ŒæŸäº›æ•°æ®ä¼šæœ‰ç›¸åº”çš„ä¸šç•Œæ ‡å‡†ï¼Œæˆ–è€…éœ€è¦è¿›è¡ŒæŸç§ç‰¹æ®Šçš„æ˜¾ç¤ºã€‚å¦‚ç©ºæ°”è´¨é‡æ•°æ®æœ‰ä¸¥æ ¼æ•°æ®åˆ†æ®µæ ‡å‡†

```
-1   => "red"
0    => "white"
0.5  => "white"
1.0  => "blue"
1000 => "blue

```
#### diverging || Sequential
ç”¨äºè¿”å›ç»™å®šçš„é¢œè‰²æ•°ç»„çš„ç»Ÿä¸€éæœ‰ç† B-spline æ’å€¼å™¨å‡½æ•°ï¼Œè¯¥æ•°ç»„å°†è½¬æ¢ä¸ºRGBé¢œè‰²ã€‚

```js
const scaleColors = d3interpolate.interpolateRgbBasis(colors);
```

### IScaleConfig

```js
interface IScaleConfig {
  type: ScaleTypeName;
  domain?: any[];
  range?: any[];
  neutral?: number;
  field?: string;
  unknown?: string;
  ticks?: any[];
  nice?: boolean;
  clamp?: boolean;
  format?: () => any;
}
```

------

`scale`Method sets the data field mapping method, which is used to convert map data values â€‹â€‹(numbers, dates, categories, etc.) into visual values â€‹â€‹(color, size, shape). Scales Scales are a fundamental component of data visualization because they determine the nature of the visual encoding.

### scale(field: string, scaleConfig: IScaleConfig)

* `field`Specify the field name used for mapping in the data passed in source
* `scaleConfig`Column definition configuration, object type

```javascript
interface IScaleConfig {
  type: ScaleTypeName;
  domain?: any[];
  ...
}

layer.color('id', ['#f00', '#ff0'])
.size('mag', [1, 80])
.scale('mag', {
  type: 'linear',
  domain: [ 1, 50]
})ï¼›
```

### ScaleTypeName

`scale`The types can be divided into`3`kind`11`species, different`Scale`The difference is that`domain->range`The conversion method is different.\
`range`and`domain`yes`Scale`two very important parameters.

* domain: definition interval of map data values
* range: interval definition of visual value

| type of data   | Measurement type                                           |
| -------------- | ---------------------------------------------------------- |
| continuous     | linearã€logã€powã€timeã€sequentialã€quantizeã€quantileã€threshold |
| Classification | catã€time                                                   |
| constant       | identity                                                   |

#### Cat

Cat refers to the enumeration type, which is used to display categorical data, such as the distribution of crop planting areas. Different categories such as rice, corn, and soybeans need to be mapped to different colors.

```js
// The three crops will be converted into corresponding colors respectively.
// domain = ['corn','rice', 'soybean'];
// range = ['red','white','blue'];
const data = [
  { lng: 120, lat: 30, t: 'corn' },
  { lng: 121, lat: 30, t: 'rice' },
  { lng: 122, lat: 30, t: 'soybean' },
];
layer.source(data, {
  parser: {
    type: 'type',
    x: 'lng',
    y: 'lat'
  }
});
layer.scale('t', { type: 'cat' });
layer.color('t', ['red', 'white', 'blue']);
```

#### identify

Constant measure A field is a constant that does not change.

#### linear

Linear is a mapping method for continuous data. Data and visual values â€‹â€‹are converted using linear methods. For example, the data value 1-100 is linearly mapped to an offline gradient color from red to blue. Each number corresponds to a color.

#### quantize

Equal intervals divide the range of attribute values â€‹â€‹into several equally sized subranges. Equal intervals work best with common data ranges, such as percentages and temperatures. This method emphasizes the amount of a certain attribute value relative to other values.

#### quantile

Each class contains an equal number of features. Quantile classification is well suited for linearly distributed data. Quantiles assign an equal number of data values â€‹â€‹to each class. There is no empty class, nor a class with too many or too few values.
Because "quantile" classification is used to group features into each class in equal numbers, the resulting map is often misleading. You might place similar features into adjacent classes, or place features with widely different values â€‹â€‹into the same class. This distortion can be minimized by increasing the number of classes.

#### threshold

It allows mapping any subset (non-uniform segment) of the domain to a range of discrete values. The input domain remains continuous and divided into slices based on a set of thresholds provided to the domain attributes. The range attribute must have N+1 elements, where N is the number of threshold boundaries provided in the domain

Manual interval Manual interval Manually set the classification interval. Some data will have corresponding industry standards or require some special display. For example, air quality data has strict data segmentation standards

```
-1   => "red"
0    => "white"
0.5  => "white"
1.0  => "blue"
1000 => "blue
```

#### diverging || Sequential

A uniform non-rational B-spline interpolator function that returns the given array of colors to be converted to RGB colors.

```js
const scaleColors = d3interpolate.interpolateRgbBasis(colors);
```

### IScaleConfig

```js
interface IScaleConfig {
  type: ScaleTypeName;
  domain?: any[];
  range?: any[];
  neutral?: number;
  field?: string;
  unknown?: string;
  ticks?: any[];
  nice?: boolean;
  clamp?: boolean;
  format?: () => any;
}
```

`color` æ–¹æ³•ç”¨äºè®¾ç½®å›¾å½¢çš„é¢œè‰²ã€‚

### IColor: string

`color` ç±»å‹çš„å­—ç¬¦ä¸²ã€‚

- color ç±»å‹å¯ä»¥ä¸º rgb çš„å†™æ³• `rgb(200, 100, 100)`ã€`rgba(255, 0, 0, 1)`
- color ç±»å‹å¯ä»¥ä¸ºåå…­è¿›åˆ¶çš„å†™æ³• `#ffffff`ã€`#000`
- color ç±»å‹å¯ä»¥æ˜¯é¢œè‰²åç§°çš„å†™æ³• `red`ã€`yellow`


### color(color: IColor)

å›¾å±‚å¯ä»¥ç›´æ¥è®¾ç½®é¢œè‰²å€¼ã€‚

```js
layer.color('#f00');
```

### color(field: string)

å›¾å±‚çš„é¢œè‰²å¯ä»¥æ ¹æ®å›¾å±‚æ¥å—çš„æ•°æ®å€¼è¿›è¡Œæ˜ å°„ï¼Œæ¥å—ä¼ å…¥æ•°æ®çš„å­—æ®µä½œä¸ºå‚æ•°ã€‚

```js
layer.source([
  {
    lng: 120,
    lat: 30,
    c: '#f00',
  },
]);
layer.color('c');
```

### color(field: string, domain: IColor[])

`color` æ–¹æ³•æ”¯æŒç®€å•çš„å€¼æ˜ å°„ï¼Œå°†æ ¹æ® `field` ä»ä¼ å…¥å›¾å±‚çš„æ•°æ®ä¸­æå–çš„å€¼æ˜ å°„åˆ° `domain` å€¼åŸŸä¸­ã€‚

```js
layer.color('type', ['#f00', '#0f0', '#00f']);
```

### color(field: string, callback: () => IColor )

`color` æ–¹æ³•æ”¯æŒå›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œå°†æ ¹æ® `field` ä½œä¸º `callback` æ–¹æ³•çš„å‚æ•°ï¼Œ`callback` æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå›¾å±‚å®é™…çš„é¢œè‰²ã€‚

```js
layer.color('type', (value) => {
  switch (value) {
    case 'water':
      return '#f00';
    case 'wood':
      return '#0f0';
  }
});
```
`color`Method used to set the color of the graphic.

### IColor: string

`color`type string.

* The color type can be written in rgb`rgb(200, 100, 100)`ã€`rgba(255, 0, 0, 1)`
* The color type can be written in hexadecimal`#ffffff`ã€`#000`
* The color type can be the writing method of color name`red`ã€`yellow`

### color(color: IColor)

Layers can set color values â€‹â€‹directly.

```js
layer.color('#f00');
```

### color(field: string)

The colors of a layer can be mapped based on the data values â€‹â€‹accepted by the layer, accepting fields of incoming data as parameters.

```js
layer.source([
  {
    lng: 120,
    lat: 30,
    c: '#f00',
  },
]);
layer.color('c');
```

### color(field: string, domain: IColor\[])

`color`Method supports simple value mapping and will be based on`field`The values â€‹â€‹extracted from the data passed into the layer are mapped to`domain`in the value range.

```js
layer.color('type', ['#f00', '#0f0', '#00f']);
```

### color(field: string, callback: () => IColor )

`color`The method supports the writing method of callback function, which will be based on`field`as`callback`method parameters,`callback`The return value of the method is the actual color of the layer.

```js
layer.color('type', (value) => {
  switch (value) {
    case 'water':
      return '#f00';
    case 'wood':
      return '#0f0';
  }
});
```

### name

<description> _string_ **optional** _default:_ è‡ªåŠ¨æ•°å­—ç¼–å·</description>

è®¾ç½®å›¾å±‚åç§°,å¯æ ¹æ® name è·å– layer

```javascript
scene.getLayerByName(name);
```

### visible

<description> _bool_ **optional** _default:_ true</description>

å›¾å±‚æ˜¯å¦å¯è§

### zIndex

<description> _int_ **optional** _default:_ 0</description>

å›¾å±‚ç»˜åˆ¶é¡ºåºï¼Œæ•°å€¼å¤§ç»˜åˆ¶åœ¨ä¸Šå±‚ï¼Œå¯ä»¥æ§åˆ¶å›¾å±‚ç»˜åˆ¶çš„ä¸Šä¸‹å±‚çº§

L7 é‡‡ç”¨é˜Ÿåˆ—æ¸²æŸ“çš„æœºåˆ¶ï¼Œæ‰€æœ‰çš„å›¾å±‚åœ¨å†…éƒ¨ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ¯ä¸€å¸§çš„æ¸²æŸ“ä¼šå°†å›¾å±‚æ•°ç»„æŒ‰ç…§ zIndex çš„å€¼è¿›è¡Œæ’åºï¼Œç„¶åéå†æ•°ç»„ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„å›¾å±‚æ¸²æŸ“åˆ°åœºæ™¯ä¸­

### minZoom

<description> _number_ **optional** _default:_ Mapbox ï¼ˆ0-24ï¼‰ é«˜å¾· ï¼ˆ2-19)</description>

å›¾å±‚æ˜¾ç¤ºæœ€å°ç¼©æ”¾ç­‰çº§

### maxZoom

<description> _number_ **optional** _default:_ Mapbox ï¼ˆ0-24ï¼‰ é«˜å¾· ï¼ˆ2-19)</description>

å›¾å±‚æ˜¾ç¤ºæœ€å¤§ç¼©æ”¾ç­‰çº§

### autoFit

<description> _bool_ **optional** _default:_ false</description>

layer åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œåœ°å›¾æ˜¯å¦è‡ªåŠ¨ç¼©æ”¾åˆ°å›¾å±‚èŒƒå›´

### pickingBuffer

<description> _bool_ **optional** _default:_ 0</description>

å›¾å±‚æ‹¾å–ç¼“å­˜æœºåˆ¶ï¼Œå¦‚ 1px å®½åº¦çš„çº¿é¼ æ ‡å¾ˆéš¾æ‹¾å–(ç‚¹å‡»)åˆ°, é€šè¿‡è®¾ç½®è¯¥å‚æ•°å¯æ‰©å¤§æ‹¾å–çš„èŒƒå›´ï¼ˆæ”¾å¤§å›¾å±‚å¯¹è±¡çš„å°ºå¯¸ï¼‰

### blend

<description> _string_ **optional** _default:_ 'normal'</description>

å›¾å±‚å…ƒç´ æ··åˆæ•ˆæœ

- normal æ­£å¸¸æ•ˆæœ é»˜è®¤ å‘ç”Ÿé®æŒ¡çš„æ—¶å€™ï¼Œåªä¼šæ˜¾ç¤ºå‰é¢çš„å›¾å±‚çš„é¢œè‰²
- additive å åŠ æ¨¡å¼ å‘ç”Ÿé®æŒ¡çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå‰åå›¾å±‚é¢œè‰²çš„å åŠ 
- subtractive ç›¸å‡æ¨¡å¼ å‘ç”Ÿé®æŒ¡çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå‰åå›¾å±‚é¢œè‰²çš„ç›¸å‡
- max æœ€å¤§å€¼ å‘ç”Ÿé®æŒ¡çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå›¾å±‚é¢œè‰² rgb çš„æœ€å¤§å€¼

### enablePropagation

<description> _boolean_ **optional** _default:_ 'false'</description>
å›¾å±‚äº‹ä»¶ï¼Œé»˜è®¤åªå“åº”æœ€ä¸Šå±‚å›¾å±‚ï¼Œè®¾ç½®ä¸ºtrue å°†å…è®¸äº‹ä»¶é€ä¼ 


<embed src="@/docs/common/layer/mask_options.zh.md"></embed>









å›¾å±‚æ•°æ®ä½¿ç”¨ç»çº¬åº¦æ ¼å¼ï¼Œæ•°æ®æºæ”¯æŒ JSONã€GeoJSONã€CSV ä¸‰ç§æ•°æ®æ ¼å¼ã€‚

- [GeoJSON](/api/source/geojson/#point)
- [CSV](/api/source/csv/#parser)
- [JSON](/api/source/json/#ç‚¹æ•°æ®)

ğŸŒŸ é€šå¸¸æ¯ç§æ•°æ®éƒ½éœ€è¦ç›¸åº”çš„ parser è§£ææ•°æ®

## Layer update method

If a layer has been added and you need to modify the layer display style, you can call the graphics mapping method again, and then call`scene.render()`Just update the rendering

### scale update

Recall the scale method

```tsx
layer.scale('value',{
    type:'quantile'
})
scene.render();
```

### data mapping

Recall color/size/filter/shape and other methods

```javascript
layer.color('blue');
layer.size(10);

scene.render();
```

### layer.style

```javascript
layer.style({
    opacity:1
    
});

scene.render();
```

### setData(data, option?: {})

Update Source data

parameter:

* data data
* option defaults to the same as the initial configuration item. If the data format is the same, it does not need to be set.

Calling the setData method will automatically update the layer rendering

```javascript
layer.setData(data);
```

### setBlend(type: string)

Set layer overlay method
parameter:

* type blend ç±»å‹ normal ï½œ additive ï½œ subtractive ï½œ max
The layer data uses the latitude and longitude format, and the data source supports three data formats: JSON, GeoJSON, and CSV.

* [GeoJSON](/api/source/geojson/#point)
* [CSV](/api/source/csv/#parser)
* [JSON](</api/source/json/#Point data>)

ğŸŒŸ Usually each type of data requires a corresponding parser to parse the data
## å›¾å±‚æ›´æ–°æ–¹æ³•

å¦‚æœå·²ç»æ·»åŠ äº†å›¾å±‚ï¼Œéœ€è¦ä¿®æ”¹å›¾å±‚æ˜¾ç¤ºæ ·å¼å¯ä»¥å†æ¬¡è°ƒç”¨å›¾å½¢æ˜ å°„æ–¹æ³•ï¼Œç„¶åè°ƒç”¨ `scene.render()`æ›´æ–°æ¸²æŸ“å³å¯

### scale æ›´æ–°

é‡æ–°è°ƒç”¨scale æ–¹æ³•

```tsx
layer.scale('value',{
    type:'quantile'
})
scene.render();
```

### æ•°æ®æ˜ å°„

é‡æ–°è°ƒç”¨ color/size/filter/shapeç­‰æ–¹æ³•

```javascript
layer.color('blue');
layer.size(10);

scene.render();
```


### layer.style

```javascript
layer.style({
    opacity:1
    
});

scene.render();
```

### setData(data, option?: {})

æ›´æ–° Source æ•°æ®

å‚æ•°:

- data æ•°æ®
- option é»˜è®¤å’Œåˆå§‹é…ç½®é¡¹ä¸€è‡´ï¼Œå¦‚æœæ•°æ®æ ¼å¼ç›¸åŒå¯ä¸è®¾ç½®

è°ƒç”¨ setData æ–¹æ³•ä¼šè‡ªåŠ¨æ›´æ–°å›¾å±‚æ¸²æŸ“

```javascript
layer.setData(data);
```

### setBlend(type: string)

è®¾ç½®å›¾å±‚å åŠ æ–¹æ³•
å‚æ•°ï¼š

- type blend ç±»å‹ normal ï½œ additive ï½œ subtractive ï½œ max### name

<description> *string* **optional** *default:*automatic numbering</description>

Set the layer name, you can get the layer based on name

```javascript
scene.getLayerByName(name);
```

### visible

<description> *bool* **optional** *default:* true</description>

Is the layer visible?

### zIndex

<description> *int* **optional** *default:*0</description>

Layer drawing order, larger values â€‹â€‹are drawn on the upper layer, and you can control the upper and lower levels of layer drawing.

L7 uses a queue rendering mechanism. All layers are stored in an array internally. The rendering of each frame will sort the layer array according to the zIndex value, and then traverse the array to render the qualified layers to the scene. middle

### minZoom

<description> *number* **optional** *default:*Mapbox (0-24) Gaode (2-19)</description>

Layer shows minimum zoom level

### maxZoom

<description> *number* **optional** *default:*Mapbox (0-24) Gaode (2-19)</description>

Layer shows maximum zoom level

### autoFit

<description> *bool* **optional** *default:* false</description>

After layer initialization is completed, whether the map will automatically zoom to the layer range.

### pickingBuffer

<description> *bool* **optional** *default:*0</description>

The layer picking cache mechanism, for example, a 1px width line is difficult to pick up (click) with the mouse. By setting this parameter, you can expand the picking range (enlarge the size of the layer object)

### blend

<description> *string* **optional** *default:*'normal'</description>

Layer element blending effects

* normal Normal effect Default When occlusion occurs, only the color of the previous layer will be displayed.
* Additive overlay mode displays the superposition of the colors of the front and rear layers when occlusion occurs.
* subtractive subtraction mode: when occlusion occurs, the subtraction of the colors of the front and rear layers is displayed.
* max maximum value When occlusion occurs, the maximum value of the layer color rgb is displayed.

### enablePropagation

<description> *boolean* **optional** *default:*'false'</description>Layer events, by default only respond to the top layer, setting to true will allow events to be transmitted transparently

<embed src="@/docs/common/layer/mask_options.en.md"></embed>
## mouse events

Mouse event callback parameter target

```javascript
layer.on(eventName, (target) => console.log(target));
```

* x: number x coordinate of the mouse at the map location
* y: number The y coordinate of the mouse's position on the map
* type: string mouse event type
* lngLat: longitude object {lng:number, lat: number}; the latitude and longitude of the mouse location
* feature: any; geographical feature information selected by the data
* featureId: number | null; ID of the geographical feature selected in the data

### click

click event

```javascript
layer.on('click', (e) => console.log(e));
```

### dblclick

double click

```javascript
layer.on('dblclick', (e) => console.log(e));
```

### mousemove

mouse move event

```javascript
layer.on('mousemove', (e) => console.log(e));
```

### mouseout

mouse removal

```javascript
layer.on('mouseout', (e) => console.log(e));
```

### mouseup

mouse raised

```javascript
layer.on('mouseup', (e) => console.log(e));
```

### mousedown

mouse pressed

```javascript
layer.on('mousedown', (e) => console.log(e));
```

### contextmenu

right click

```javascript
layer.on('contextmenu', (e) => console.log(e));
```

### dblclick

Double click to pick element

```javascript
layer.on('dblclick', (e) => console.log(e));
```

### unclick

No element was picked up by clicking

```javascript
layer.on('unclick', (e) => console.log(e));
```

### unmousemove

Element not picked up by mouse movement

```javascript
layer.on('unmousemove', (e) => console.log(e));
```

### unmouseup

The element is not picked up when the mouse is raised

```javascript
layer.on('unmouseup', (e) => console.log(e));
```

### unmousedown

The element is not picked up when the mouse is pressed

```javascript
layer.on('unmousedown', (e) => console.log(e));
```

### uncontextmenu

Select the element with the right mouse button

```javascript
layer.on('uncontextmenu', (e) => console.log(e));
```

### unpick

All mouse events are not picked up

```javascript
layer.on('unpick', (e) => console.log(e));
```

Usage example

```javascript
layer.on('click', (ev) => {}); // Left mouse button click event on layer
layer.on('mouseenter', (ev) => {}); // The mouse enters the layer element
layer.on('mousemove', (ev) => {}); // Triggered when the mouse moves on the layer
layer.on('mouseout', (ev) => {}); // Triggered when the mouse moves out of the layer element
layer.on('mouseup', (ev) => {}); // Triggered when the mouse is clicked and raised on the layer
layer.on('mousedown', (ev) => {}); // Triggered when the mouse is clicked on the layer
layer.on('contextmenu', (ev) => {}); // Right-click menu of layer elements

//Events when the mouse is outside the layer
layer.on('unclick', (ev) => {}); // Click outside the layer
layer.on('unmousemove', (ev) => {}); // Move outside the layer
layer.on('unmouseup', (ev) => {}); // Mouse up outside the layer
layer.on('unmousedown', (ev) => {}); // Triggered when clicked outside the layer
layer.on('uncontextmenu', (ev) => {}); // Right-click outside the layer
layer.on('unpick', (ev) => {}); // All events for operations outside the layer
```
## é¼ æ ‡äº‹ä»¶

é¼ æ ‡äº‹ä»¶å›è°ƒå‚æ•° target

```javascript
layer.on(eventName, (target) => console.log(target));
```

- x: number é¼ æ ‡  åœ¨åœ°å›¾ä½ç½® x åæ ‡
- y: number é¼ æ ‡  åœ¨åœ°å›¾ä½ç½® y åæ ‡
- type: string é¼ æ ‡äº‹ä»¶ç±»å‹
- lngLat: ç»åº¦åº¦å¯¹è±¡ {lng:number, lat: number }; é¼ æ ‡æ‰€åœ¨ä½ç½®ç»çº¬åº¦
- feature: any; æ•°æ®é€‰ä¸­çš„åœ°ç†è¦ç´ ä¿¡æ¯
- featureId: number | null; æ•°æ®é€‰ä¸­çš„åœ°ç†è¦ç´ çš„ ID

### click

ç‚¹å‡»äº‹ä»¶

```javascript
layer.on('click', (e) => console.log(e));
```
### dblclick

åŒå‡»

```javascript
layer.on('dblclick', (e) => console.log(e));
```

### mousemove

é¼ æ ‡ç§»åŠ¨äº‹ä»¶

```javascript
layer.on('mousemove', (e) => console.log(e));
```

### mouseout

é¼ æ ‡ç§»é™¤

```javascript
layer.on('mouseout', (e) => console.log(e));
```

### mouseup

é¼ æ ‡æŠ¬èµ·

```javascript
layer.on('mouseup', (e) => console.log(e));
```

### mousedown

é¼ æ ‡æŒ‰ä¸‹

```javascript
layer.on('mousedown', (e) => console.log(e));
```

### contextmenu

é¼ æ ‡å³é”®

```javascript
layer.on('contextmenu', (e) => console.log(e));
```

### dblclick

åŒå‡»æ‹¾å–å…ƒç´ 

```javascript
layer.on('dblclick', (e) => console.log(e));
```

### unclick

ç‚¹å‡»æœªæ‹¾å–åˆ°å…ƒç´ 

```javascript
layer.on('unclick', (e) => console.log(e));
```

### unmousemove

é¼ æ ‡ç§»åŠ¨æœªæ‹¾å–åˆ°å…ƒç´ 

```javascript
layer.on('unmousemove', (e) => console.log(e));
```

### unmouseup

é¼ æ ‡æŠ¬èµ·æœªæ‹¾å–åˆ°å…ƒç´ 

```javascript
layer.on('unmouseup', (e) => console.log(e));
```

### unmousedown

é¼ æ ‡æŒ‰ä¸‹æœªæ‹¾å–åˆ°å…ƒç´ 

```javascript
layer.on('unmousedown', (e) => console.log(e));
```

### uncontextmenu

é¼ æ ‡å³é”®ä½æ‹¾å–åˆ°å…ƒç´ 

```javascript
layer.on('uncontextmenu', (e) => console.log(e));
```

### unpick

æ‰€æœ‰é¼ æ ‡äº‹ä»¶æœªæ‹¾å–åˆ°

```javascript
layer.on('unpick', (e) => console.log(e));
```

ä½¿ç”¨ç¤ºä¾‹

```javascript
layer.on('click', (ev) => {}); // é¼ æ ‡å·¦é”®ç‚¹å‡»å›¾å±‚äº‹ä»¶
layer.on('mouseenter', (ev) => {}); // é¼ æ ‡è¿›å…¥å›¾å±‚è¦ç´ 
layer.on('mousemove', (ev) => {}); // é¼ æ ‡åœ¨å›¾å±‚ä¸Šç§»åŠ¨æ—¶è§¦å‘
layer.on('mouseout', (ev) => {}); // é¼ æ ‡ç§»å‡ºå›¾å±‚è¦ç´ æ—¶è§¦å‘
layer.on('mouseup', (ev) => {}); // é¼ æ ‡åœ¨å›¾å±‚ä¸Šå•å‡»æŠ¬èµ·æ—¶è§¦å‘
layer.on('mousedown', (ev) => {}); // é¼ æ ‡åœ¨å›¾å±‚ä¸Šå•å‡»æŒ‰ä¸‹æ—¶è§¦å‘
layer.on('contextmenu', (ev) => {}); // å›¾å±‚è¦ç´ ç‚¹å‡»å³é”®èœå•

// é¼ æ ‡åœ¨å›¾å±‚å¤–çš„äº‹ä»¶
layer.on('unclick', (ev) => {}); // å›¾å±‚å¤–ç‚¹å‡»
layer.on('unmousemove', (ev) => {}); // å›¾å±‚å¤–ç§»åŠ¨
layer.on('unmouseup', (ev) => {}); // å›¾å±‚å¤–é¼ æ ‡æŠ¬èµ·
layer.on('unmousedown', (ev) => {}); // å›¾å±‚å¤–å•å‡»æŒ‰ä¸‹æ—¶è§¦å‘
layer.on('uncontextmenu', (ev) => {}); // å›¾å±‚å¤–ç‚¹å‡»å³é”®
layer.on('unpick', (ev) => {}); // å›¾å±‚å¤–çš„æ“ä½œçš„æ‰€æœ‰äº‹ä»¶
```------

### style

The style method is usually used to describe the specific style of a layer. Most layers will support some more general properties, such as the opacity property. At the same time, each layer will also have properties that are only supported by this layer, such as only
The windowColor attribute supported by CityBuildingLayer. Please check the detailed documentation of each layer for how to configure the attribute for each layer.

* opacity sets transparency, supported by most layers

* stroke line fill color only supported by point layer

* strokeWidth The width of the line. Only supported by point layers.

```javascript
layer.style({
  opacity: 0.8,
  stroke: 'white',
});
```

* Style data mappingğŸŒŸ\
  Under normal circumstances, the style parameters will apply to all graphics on a layer. For example, if there are ten points in a PointLayer, we set opacity = 0.5, so that the transparency of the ten points is 0.5.\
  In special cases, we may need to set a transparency for each point. In this case, directly setting the opacity value of the style method in the original way cannot meet the needs. For this reason, we need to provide a special assignment method.\
  Usually we will set separate values â€‹â€‹for each graphic of the layer based on the data passed into the layer, so we call it "style data mapping".\
  We support several ways of setting parameters in style to dynamically obtain values â€‹â€‹from source data.

```javascript
//Set the transparency of each point of the point layer based on the value of the v field in the data
const data = [
  {
    lng: 120,
    lat: 30,
    v: 0.5
  },
  ...
]
const layer = new PointLayer()
  .source(data, {
    parser: {
      x: 'lng',
      y: 'lat'
    }
  })
  .shape('circle')
  .color('#f00')
  .size({
    // The first way to write is to get the value directly from data based on the field.
    opacity: 'v'// opacity = 0.5
  });
scene.addLayer(layer);
```

[Online case](/examples/point/text#stylemap)

from`L7 2.5`Starting from the beginning, each layer style will gradually support style data mapping. Currently, all layer styles support style data mapping.`style`The parameters are as follows:

| layer type/shape        | Supported style fields                           | Remark                                             |
| ----------------------- | ------------------------------------------------ | -------------------------------------------------- |
| pointLayer/fill         | opacityã€strokeOpacityã€strokeWidthã€strokeã€offsets | shape circleã€triangle...                           |
| pointLayer/image        | opacityã€offsets                                  | offsets latitude and longitude offsets             |
| pointLayer/normal       | opacityã€offsets                                  |                                                    |
| pointLayer/text         | opacityã€strokeWidthã€strokeã€textOffset            | textOffset offset relative to text canvas position |
| pointLayer/extrude      | opacity                                          |                                                    |
| polygonLayer/fill       | opacity                                          |                                                    |
| polygonLayer/extrude    | opacity                                          |                                                    |
| lineLayer/line          | opacity                                          |                                                    |
| lineLayer/arc           | opacityã€thetaOffset                              | thetaOffset the curvature of the arc               |
| lineLayer/arc3d         | opacity                                          |                                                    |
| lineLayer/great\_circle | opacity                                          |                                                    |

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*iz3ERZdg2SkAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/point/scatter#scatterstylemap)
### style

style æ–¹æ³•é€šå¸¸ç”¨äºæè¿°å›¾å±‚å…·ä½“çš„æ ·å¼ï¼Œå¤§å¤šæ•°å›¾å±‚ä¼šæ”¯æŒä¸€äº›æ¯”è¾ƒé€šç”¨çš„å±æ€§ï¼Œ å¦‚ opacity å±æ€§ï¼ŒåŒæ—¶æ¯ä¸ªå›¾å±‚ä¹Ÿä¼šæœ‰ä»…é™æœ¬å›¾å±‚æ”¯æŒçš„å±æ€§ï¼Œå¦‚åªæœ‰
CityBuildingLayer æ”¯æŒçš„ windowColor å±æ€§ï¼Œæ¯ä¸ªå›¾å±‚å…·ä½“è¦å¦‚ä½•é…ç½®å±æ€§è¯·æŸ¥çœ‹æ¯ä¸ªå›¾å±‚çš„è¯¦ç»†æ–‡æ¡£ã€‚

- opacity è®¾ç½®é€æ˜åº¦ å¤§éƒ¨åˆ†å›¾å±‚éƒ½æ”¯æŒ

- stroke çº¿å¡«å……é¢œè‰² ä»…ç‚¹å›¾å±‚æ”¯æŒ

- strokeWidth çº¿çš„å®½åº¦ ä»…ç‚¹å›¾å±‚æ”¯æŒ

```javascript
layer.style({
  opacity: 0.8,
  stroke: 'white',
});
```

- æ ·å¼æ•°æ®æ˜ å°„ğŸŒŸ  
  åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œstyle çš„å‚æ•°ä¼šä½œç”¨åˆ°ä¸€ä¸ªå›¾å±‚ä¸Šçš„æ‰€æœ‰å›¾å½¢ï¼Œå¦‚ä¸€ä¸ª PointLayer ä¸­æœ‰åä¸ªç‚¹ï¼Œæˆ‘ä»¬è®¾ç½® opacity = 0.5ï¼Œ è¿™æ ·åä¸ªç‚¹çš„é€æ˜åº¦éƒ½æ˜¯ 0.5ã€‚   
  è€Œåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸ºæ¯ä¸ªç‚¹åˆ†åˆ«è®¾ç½®ä¸€ä¸ªé€æ˜åº¦ï¼Œè¿™æ—¶å€™æŒ‰ç…§åŸæ¥çš„æ–¹å¼ç›´æ¥è®¾ç½® style æ–¹æ³•çš„ opacity çš„å€¼å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦æä¾›ç‰¹æ®Šçš„èµ‹å€¼æ–¹å¼ã€‚    
  é€šå¸¸æˆ‘ä»¬ä¼šæ ¹æ®ä¼ å…¥å›¾å±‚çš„æ•°æ®ä¸ºå›¾å±‚çš„æ¯ä¸ªå›¾å½¢è®¾ç½®å•ç‹¬çš„å€¼ï¼Œå› æ­¤æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ ·å¼æ•°æ®æ˜ å°„â€ã€‚      
  æˆ‘ä»¬æ”¯æŒå‡ ç§è®¾ç½® style ä¸­çš„å‚æ•°ä» source æ•°æ®ä¸­åŠ¨æ€å–å€¼çš„å†™æ³•ã€‚   

```javascript
// æ ¹æ®æ•°æ®ä¸­çš„ v å­—æ®µçš„å€¼è®¾ç½®ç‚¹å›¾å±‚å„ä¸ªç‚¹çš„é€æ˜åº¦
const data = [
  {
    lng: 120,
    lat: 30,
    v: 0.5
  },
  ...
]
const layer = new PointLayer()
  .source(data, {
    parser: {
      x: 'lng',
      y: 'lat'
    }
  })
  .shape('circle')
  .color('#f00')
  .size({
    // ç¬¬ä¸€ç§å†™æ³• æ ¹æ®å­—æ®µä» data ä¸­ç›´æ¥å–å€¼
    opacity: 'v'// opacity = 0.5
  }); 
scene.addLayer(layer);
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/text#stylemap)

ä» `L7 2.5` å¼€å§‹ï¼Œå„å›¾å±‚æ ·å¼å°†é€æ­¥æ”¯æŒæ ·å¼æ•°æ®æ˜ å°„ï¼Œç›®å‰æ”¯æŒæ ·å¼æ•°æ®æ˜ å°„çš„ `style` å‚æ•°å¦‚ä¸‹ï¼š

| layer ç±»å‹/shape       | æ”¯æŒçš„æ ·å¼å­—æ®µ                                       | å¤‡æ³¨                              |
| ---------------------- | ---------------------------------------------------- | --------------------------------- |
| pointLayer/fill        | opacityã€strokeOpacityã€strokeWidthã€strokeã€offsets | shape circleã€triangle...         |
| pointLayer/image       | opacityã€offsets                                     | offsets ç»çº¬åº¦åç§»                |
| pointLayer/normal      | opacityã€offsets                                     |                                   |
| pointLayer/text        | opacityã€strokeWidthã€strokeã€textOffset             | textOffset ç›¸å¯¹æ–‡å­—ç”»å¸ƒä½ç½®çš„åç§» |
| pointLayer/extrude     | opacity                                              |                                   |
| polygonLayer/fill      | opacity                                              |                                   |
| polygonLayer/extrude   | opacity                                              |                                   |
| lineLayer/line         | opacity                                              |                                   |
| lineLayer/arc          | opacityã€thetaOffset                                 | thetaOffset å¼§çº¿çš„å¼¯æ›²å¼§åº¦        |
| lineLayer/arc3d        | opacity                                              |                                   |
| lineLayer/great_circle | opacity                                              |                                   |

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*iz3ERZdg2SkAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/scatter#scatterstylemap)
### source æ•°æ®

è®¾ç½®å›¾å±‚æ•°æ®ä»¥åŠè§£æé…ç½® `source(data, config)`ã€‚

- data { geojson | json | csv }
- config Â  å¯é€‰ Â  æ•°æ®æºé…ç½®é¡¹
  - parser æ•°æ®è§£æï¼Œé»˜è®¤æ˜¯è§£æå±‚ geojson
  - transforms [transformï¼ŒtransformÂ ]Â  æ•°æ®å¤„ç†è½¬æ¢å¯è®¾ç½®å¤šä¸ª

`parser` å’Œ Â `transforms` [è§ source æ–‡æ¡£](/api/source/source)ã€‚

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
  transforms: [
    {
      type: 'map',
      callback: function(item) {
        const [x, y] = item.coordinates;
        item.lat = item.lat * 1;
        item.lng = item.lng * 1;
        item.v = item.v * 1;
        item.coordinates = [x * 1, y * 1];
        return item;
      },
    },
    {
      type: 'hexagon',
      size: 6000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```
### cluster

æˆ‘ä»¬åœ¨ä½¿ç”¨ `cluster` é…ç½®èšåˆå›¾ä¹‹åå°±å¯ä»¥ä½¿ç”¨ä¸€äº›èšåˆæ–¹æ³•æ¥è·å–å¯¹åº”å‚æ•°ã€‚
#### getClusters(zoom: number): IFeatureCollection

è·å–æŒ‡å®šç¼©æ”¾ç­‰çº§çš„èšåˆæ•°æ®

- `zoom` ç¼©æ”¾ç­‰çº§

#### getClustersLeaves(id: string): IFeatureCollection

æ ¹æ® `id` è·å–èšåˆèŠ‚ç‚¹çš„æ•°æ®ï¼Œæ¯ä¸ªèšåˆèŠ‚ç‚¹ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€ `ID`ã€‚

- `id` èšåˆèŠ‚ç‚¹çš„ `id`


```ts
const source = layer.getSource();
source.getClustersLeaves(id);
layer.on('click', (e) => {
  console.log(source.getClustersLeaves(e.feature.cluster_id));
});

```


## scale æ•°æ®åº¦é‡

Scale åº¦é‡æ˜¯å°†åœ°å›¾æ•°æ®å€¼ï¼ˆæ•°å­—ã€æ—¥æœŸã€ç±»åˆ«ç­‰æ•°æ®ï¼‰è½¬æˆè§†è§‰å€¼ï¼ˆé¢œè‰²ã€å¤§å°ã€å½¢çŠ¶ï¼‰ã€‚å°ºåº¦ Scale æ˜¯æ•°æ®å¯è§†åŒ–çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºå®ƒä»¬å†³å®šäº†è§†è§‰ç¼–ç çš„æ€§è´¨ã€‚ L7 ç›®å‰æ”¯æŒè¿ç»­ã€ç¦»æ•£ã€æšä¸¾ç±»å‹æ•°æ®çš„Scaleï¼Œå¹¶æ”¯æŒä½ç½®ã€å½¢çŠ¶ã€å¤§å°å’Œé¢œè‰²ç¼–ç çš„æ˜ å°„ã€‚

åœ¨ä½¿ç”¨ L7 è¿‡ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸éœ€è¦è¿›è¡Œ Scale çš„é…ç½®ï¼Œå› ä¸º L7 ä¼šæ ¹æ®æ•°æ®ç±»å‹å¯¹ scale æ¨æ–­ï¼Œæ¨æ–­è¿‡ç¨‹å¦‚ä¸‹ï¼š

æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦è®¾ç½®äº† Scaleï¼Œå¦‚æœæ²¡æœ‰:

åˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€æ¡æ•°æ®çš„å­—æ®µç±»å‹ï¼Œå¦‚æœæ•°æ®ä¸­ä¸å­˜åœ¨å¯¹åº”çš„å­—æ®µï¼š

è®¤ä¸ºæ˜¯å¸¸é‡ä¸ºå›ºå®šå€¼

å¦‚æœæ˜¯æ•°å­—åˆ™ä¸º 'linear';

å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹ 'cat';


### scale

[Scale è¯¦ç»†ä»‹ç»](https://mp.weixin.qq.com/s/QyD1_ypu0PDwMxEz45v6Jg)

å‚æ•°ï¼š (field: string, scaleOptions: IscaleOptions)
- `field` æŒ‡å®š source ä¸­ä¼ å…¥çš„æ•°æ®ä¸­ç”¨äºæ˜ å°„çš„å­—æ®µå
- `scaleOptions` åˆ—å®šä¹‰é…ç½®ï¼Œå¯¹è±¡ç±»å‹
  - type scale ç±»å‹
  - unknown æœªåŒ¹é…é¢œè‰² å¯é€‰  é»˜è®¤é€æ˜
  - domain å€¼åŸŸ å¯é€‰


```javascript
interface IscaleOptions {
  type: ScaleTypeName;
  domain?: any[];
  ...
}

layer.color('id', ['#f00', '#ff0'])
.size('mag', [1, 80])
.scale('mag', {
  type: 'linear',
  domain: [ 1, 50]
})ï¼›
```

#### ç±»å‹


Range å’Œ domain æ˜¯ Scale ä¸­éå¸¸é‡è¦çš„ä¸¤ä¸ªå‚æ•°

domain: åœ°å›¾æ•°æ®å€¼çš„å®šä¹‰åŒºé—´
rangeï¼šè§†è§‰å€¼çš„åŒºé—´
ä¸åŒScale çš„å·®å¼‚åœ¨äº domain->range çš„è½¬æ¢æ–¹æ³•çš„ä¸åŒ

- domain: åœ°å›¾æ•°æ®å€¼çš„å®šä¹‰åŒºé—´
- rangeï¼šè§†è§‰å€¼çš„åŒºé—´å®šä¹‰

|æ•°æ®ç±»|åº¦é‡ç±»å‹|
|-----|------|
| è¿ç»­ | linearã€logã€pow |
| è¿ç»­åˆ†ç±» | quantize quantile,threshold,diverging |
| åˆ†ç±» æšä¸¾ | cat |


#### Cat

Cat æŒ‡æšä¸¾ç±»å‹ï¼Œç”¨äºå±•ç¤ºåˆ†ç±»æ•°æ®ï¼Œæ¯”å¦‚å†œä½œç‰©ç§æ¤åŒºåˆ†å¸ƒå›¾ï¼Œæ°´ç¨»ã€ç‰ç±³ã€å¤§è±†ç­‰ä¸åŒç±»åˆ«éœ€è¦æ˜ å°„ä¸ºä¸åŒçš„é¢œè‰²ã€‚

```js
// ä¸‰ç§ä½œç‰©ä¼šåˆ†åˆ«è½¬æˆå¯¹åº”çš„é¢œè‰²
// domain = ['corn','rice', 'soybean'];
// range = ['red','white','blue'];
const data = [
  { lng: 120, lat: 30, t: 'corn' },
  { lng: 121, lat: 30, t: 'rice' },
  { lng: 122, lat: 30, t: 'soybean' },
];
layer.source(data, {
  parser: {
    type: 'type',
    x: 'lng',
    y: 'lat'
  }
});
layer.scale('t', { type: 'cat' });
layer.color('t', ['red', 'white', 'blue']);

```


#### identify

æ•°æ®å€¼å’Œæ˜ å°„å€¼ç›¸åŒ
æ¯”å¦‚æ•°æ®ä¸­value å­—æ®µè®°å½•äº†æ¯ä¸ªè¦ç´ çš„é¢œè‰²ï¼Œæ•°å€¼æ—¢ä¸ºè¦æ˜ å°„çš„ç»“æœå€¼s

```
// è®¾ç½®ä¸º identify
layer.scale('value', { type: 'identify' });

// æˆ–è€… 

layer.scale('value'); // L7  èƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­ä¸º  identify

```

#### linear

çº¿æ€§æ˜¯è¿ç»­æ•°æ®çš„æ˜ å°„æ–¹æ³•ï¼Œæ•°æ®å’Œè§†è§‰å€¼æ˜¯é€šè¿‡çº¿æ€§æ–¹æ³•æ¢ç®—çš„ã€‚å¦‚æ•°æ®å€¼ 1-100 çº¿æ€§æ˜ å°„åˆ°çº¢åˆ°è“çš„çº¿ä¸‹æ¸å˜è‰²æ¯ä¸ªæ•°å­—å¯¹åº”ä¸€ä¸ªé¢œè‰²

#### quantize 

ç›¸ç­‰é—´éš”ä¼šå°†å±æ€§å€¼çš„èŒƒå›´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„å­èŒƒå›´ã€‚ç›¸ç­‰é—´éš”æœ€é€‚ç”¨äºå¸¸è§çš„æ•°æ®èŒƒå›´ï¼Œå¦‚ç™¾åˆ†æ¯”å’Œæ¸©åº¦ã€‚è¿™ç§æ–¹æ³•å¼ºè°ƒçš„æ˜¯æŸä¸ªå±æ€§å€¼ç›¸å¯¹äºå…¶ä»–å€¼çš„é‡

#### quantile

æ¯ä¸ªç±»éƒ½å«æœ‰ç›¸ç­‰æ•°é‡çš„è¦ç´ ã€‚åˆ†ä½æ•°åˆ†ç±»éå¸¸é€‚ç”¨äºå‘ˆçº¿æ€§åˆ†å¸ƒçš„æ•°æ®ã€‚åˆ†ä½æ•°ä¸ºæ¯ä¸ªç±»åˆ†é…æ•°é‡ç›¸ç­‰çš„æ•°æ®å€¼ã€‚ä¸å­˜åœ¨ç©ºç±»ï¼Œä¹Ÿä¸å­˜åœ¨å€¼è¿‡å¤šæˆ–è¿‡å°‘çš„ç±»ã€‚
ç”±äºä½¿ç”¨â€œåˆ†ä½æ•°â€åˆ†ç±»å°†è¦ç´ ä»¥åŒç­‰æ•°é‡åˆ†ç»„åˆ°æ¯ä¸ªç±»ä¸­ï¼Œå› æ­¤å¾—åˆ°çš„åœ°å›¾å¾€å¾€å…·æœ‰è¯¯å¯¼æ€§ã€‚å¯èƒ½ä¼šå°†ç›¸ä¼¼çš„è¦ç´ ç½®äºç›¸é‚»çš„ç±»ä¸­ï¼Œæˆ–å°†å€¼å·®å¼‚è¾ƒå¤§çš„è¦ç´ ç½®äºç›¸åŒç±»ä¸­ã€‚å¯é€šè¿‡å¢åŠ ç±»çš„æ•°é‡å°†è¿™ç§å¤±çœŸé™è‡³æœ€ä½ã€‚

#### threshold 

ä»–å…è®¸å°†åŸŸçš„ä»»æ„å­é›†ï¼ˆéç»Ÿä¸€æ®µï¼‰æ˜ å°„åˆ°èŒƒå›´å†…çš„ç¦»æ•£å€¼ã€‚è¾“å…¥åŸŸä»ç„¶æ˜¯è¿ç»­çš„ï¼Œå¹¶æ ¹æ®æä¾›ç»™åŸŸå±æ€§çš„ä¸€ç»„é˜ˆå€¼åˆ’åˆ†ä¸ºå¤šä¸ªåˆ‡ç‰‡ã€‚ range å±æ€§å¿…é¡»æœ‰ N+1 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ N æ˜¯åŸŸä¸­æä¾›çš„é˜ˆå€¼è¾¹ç•Œæ•°

æ‰‹åŠ¨è®¾ç½®é—´éš” Manual interval æ‰‹åŠ¨è®¾ç½®åˆ†çº§åˆ†ç±»åŒºé—´ï¼ŒæŸäº›æ•°æ®ä¼šæœ‰ç›¸åº”çš„ä¸šç•Œæ ‡å‡†ï¼Œæˆ–è€…éœ€è¦è¿›è¡ŒæŸç§ç‰¹æ®Šçš„æ˜¾ç¤ºã€‚å¦‚ç©ºæ°”è´¨é‡æ•°æ®æœ‰ä¸¥æ ¼æ•°æ®åˆ†æ®µæ ‡å‡†

```
-1   => "red"
0    => "white"
0.5  => "white"
1.0  => "blue"
1000 => "blue

```
#### diverging

ç¦»æ•£åˆ†ç±»é€šå¸¸ä¸ä¸¤ç§ç›¸åçš„è‰²è°ƒä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ˜¾ç¤ºä»è´Ÿå€¼åˆ°ä¸­å¿ƒåˆ°æ­£å€¼çš„å˜åŒ–ã€‚è¿™äº›ç±»å‹çš„åœ°å›¾æ˜¾ç¤ºäº†å½¼æ­¤ç›¸å…³çš„å€¼çš„å¤§å°ã€‚



### getScale(scaleName:string)

æ ¹æ®è§†è§‰é€šé“åç§°è·å– scale å®ä¾‹,è°ƒç”¨ä¹‹å‰ç¡®ä¿ layer å·²ç»åˆå§‹åŒ–å®Œæˆ


```ts
const scale = layer.getScale('color')
const color = scale(1)// å°†æ•°å€¼è½¬æ¢æˆé¢œè‰²
```
æ›´å¤šæ˜¯æ–¹æ³• 
<a  target="_blank" href='https://github.com/antvis/L7/blob/master/packages/layers/src/core/BaseLayer.ts#L1176'>scale ç¤ºä¾‹ä½¿ç”¨</a>

## è§†è§‰ç¼–ç æ–¹æ³•

å¯è§†åŒ–ç¼–ç æ˜¯å°†æ•°æ®è½¬æ¢ä¸ºå¯è§†å½¢å¼çš„è¿‡ç¨‹ï¼ŒL7 ç›®å‰æ”¯æŒå½¢çŠ¶ï¼Œå¤§å°ï¼Œé¢œè‰² 3 ç§è§†è§‰é€šé“ï¼Œä½ å¯ä»¥æŒ‡å®šæ•°æ®å­—æ®µï¼Œä¸ºä¸åŒè¦ç´ è®¾ç½®ä¸åŒçš„å›¾å½¢å±æ€§ã€‚

<img width="100%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PzoTRJnY-fIAAAAAAAAAAAAAARQnAQ'>

### filter

æ•°æ®è¿‡æ»¤æ–¹æ³•,æ”¯æŒå›è°ƒå‡½æ•°ï¼Œå°†æ•°æ®æ˜ å°„ä¸ºtrue | false, ç»“æœä¸ºtrue æ—¶å¯è§

```ts 

pointLayer.filter('type', (type) => {
  // å›è°ƒå‡½æ•°
  if (type === 'a') {
    return false;
  }
  return true ;
});
```


### size

å°†æ•°æ®å€¼æ˜ å°„åˆ°å›¾å½¢çš„å¤§å°ä¸Šçš„æ–¹æ³•ï¼Œsize æ–¹æ³•å…·ä½“çš„å‚æ•°ä½¿ç”¨å¯ä»¥æŸ¥çœ‹å¯¹åº”å›¾å±‚çš„è¯¦ç»†æ–‡æ¡£

```javascript
pointLayer.size(10); // å¸¸é‡
pointLayer.size('type'); // ä½¿ç”¨å­—æ®µæ˜ å°„åˆ°å¤§å°
pointLayer.size('type', [0, 10]); // ä½¿ç”¨å­—æ®µæ˜ å°„åˆ°å¤§å°ï¼Œå¹¶æŒ‡å®šæœ€å¤§å€¼å’Œæœ€å°å€¼
pointLayer.size('type', (type) => {
  // å›è°ƒå‡½æ•°
  if (type === 'a') {
    return 10;
  }
  return 5;
});
```

#### size(valueï¼‰

ä¼ å…¥æ•°å­—å¸¸é‡ï¼Œå¦‚ Â `pointLayer.size(20)`

#### size(field)

æ ¹æ® field å­—æ®µçš„å€¼æ˜ å°„å¤§å°ï¼Œä½¿ç”¨é»˜è®¤çš„`æœ€å¤§å€¼ max:10`Â  å’Œ`æœ€å°å€¼ min: 1`ã€‚

#### size(field, callback)

ä½¿ç”¨å›è°ƒå‡½æ•°æ§åˆ¶å›¾å½¢å¤§å°ã€‚

- `callback`: function å›è°ƒå‡½æ•°ã€‚

```javascript
pointLayer.size('age', (value) => {
  if (value === 1) {
    return 5;
  }
  return 10;
});
```

### color

å°†æ•°æ®å€¼æ˜ å°„åˆ°å›¾å½¢çš„é¢œè‰²ä¸Šçš„æ–¹æ³•ã€‚

```javascript
layer.color('red'); // å¸¸é‡é¢œè‰²
layer.color('type'); // å¯¹ type å­—æ®µè¿›è¡Œæ˜ å°„ï¼Œä½¿ç”¨å†…ç½®çš„é¢œè‰²
layer.color('type', ['red', 'blue']); // æŒ‡å®šé¢œè‰²
layer.color('type', (type) => {
  // é€šè¿‡å›è°ƒå‡½æ•°
  if (type === 'a') {
    return 'red';
  }
  return 'blue';
});
layer.color('type*value', (type, value) => {
  //å¤šä¸ªå‚æ•°ï¼Œé€šè¿‡å›è°ƒå‡½æ•°
  if (type === 'a' && value > 100) {
    return 'red';
  }
  return 'blue';
});
```

#### color(value)

å‚æ•°ï¼š`value` ï¼šstring

åªæ”¯æŒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œvalue å¯ä»¥æ˜¯ï¼š

- æ˜ å°„è‡³é¢œè‰²å±æ€§çš„æ•°æ®æºå­—æ®µåï¼Œå¦‚æœæ•°æ®æºä¸­ä¸å­˜åœ¨è¿™ä¸ªå­—æ®µåçš„è¯ï¼Œåˆ™æŒ‰ç…§å¸¸é‡è¿›è¡Œè§£æï¼Œè¿™ä¸ªæ—¶å€™ä¼šä½¿ç”¨ L7 é»˜è®¤æä¾›çš„é¢œè‰²ã€‚

- ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šæŸä¸€ä¸ªå…·ä½“çš„é¢œè‰²å€¼ colorï¼Œå¦‚ '#fff', 'white','rgba(255,0,0,0.5)' ,rgb(255,0,1) ç­‰ã€‚

å¦‚æœæ•°æ®ä¸ºæ˜ å°„åˆ°é¢œè‰²ï¼Œé»˜è®¤ä¸ºé€æ˜è‰²ä¸æ˜¾ç¤ºï¼Œå¦‚æœéœ€è¦è®¾ç½®è¯¥é¢œè‰²ï¼Œéœ€è¦åœ¨scale ä¸­è®¾ç½®


ç¤ºä¾‹

```javascript
layer.color('name'); // æ˜ å°„æ•°æ®å­—æ®µ
layer.color('white'); // æŒ‡å®šé¢œè‰²
```

#### color(field, colors)

å‚æ•°ï¼š

- `field`: stringfield ä¸ºæ˜ å°„è‡³é¢œè‰²å±æ€§çš„æ•°æ®æºå­—æ®µåï¼Œä¹Ÿæ”¯æŒæŒ‡å®šå¤šä¸ªå‚æ•°ã€‚

- `colors`: string | array | function

colors çš„å‚æ•°æœ‰ä»¥ä¸‹æƒ…å†µï¼šÂ  å¦‚æœä¸ºç©ºï¼Œå³æœªæŒ‡å®šé¢œè‰²çš„æ•°ç»„ï¼Œé‚£ä¹ˆä½¿ç”¨å†…ç½®çš„å…¨å±€çš„é¢œè‰²ï¼›å¦‚æœéœ€è¦æŒ‡å®šé¢œè‰²ï¼Œåˆ™éœ€è¦ä»¥æ•°ç»„æ ¼å¼ä¼ å…¥ï¼Œé‚£ä¹ˆåˆ†ç±»çš„é¢œè‰²æŒ‰ç…§æ•°ç»„ä¸­çš„é¢œè‰²ç¡®å®šã€‚

```javascript
layer.scale('name',{
  type:'quantile'
  unknown:'#ccc' // è®¾ç½®æ— æ•ˆé¢œè‰²
})
layer.color('name'); // ä½¿ç”¨identity 
layer.color('name', ['red', 'blue']); // ä½¿ç”¨ä¼ å…¥çš„æŒ‡å®šé¢œè‰²
```

- colors å¦‚æœæ˜¯å›è°ƒå‡½æ•°ï¼Œåˆ™è¯¥å›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºå¯¹åº”å­—æ®µçš„æ•°å€¼ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼Œå½“ color æ˜ å°„ä¸ºå¤šä¸ªå­—æ®µæ—¶ï¼Œå‚æ•°æŒ‰ç…§å­—æ®µå£°æ˜çš„é¡ºåºä¼ å…¥ï¼š

```javascript
layer.color('gender', (value) => {
  if (value === 1) {
    return 'red';
  }
  return 'blue';
});
layer.color('gender*age', (gender, age) => {
  if (age === 20 && gender == ' ç”·') {
    return 'red';
  }
  return 'blue';
});
```

### shape

é€šå¸¸ä¸€ç§å›¾å±‚å¯ä»¥æœ‰å¤šç§è¡¨ç°å½¢å¼ï¼Œshape æ–¹æ³•ç”¨äºæŒ‡å®šå›¾å±‚å…·ä½“çš„è¡¨ç°å½¢å¼ï¼Œä»¥ PointLayer çš„ shape ä¸ºä¾‹ï¼š

```javascript
shape('circle'); // åœ†å½¢
shape('triangle'); // ä¸‰è§’å½¢
shape('cylinder'); // åœ†æŸ±
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*iN0nTYRDd3AAAAAAAAAAAABkARQnAQ'>

**shape(shape)**

å‚æ•° `shape` string

- åªæ”¯æŒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å®šå‡ ä½•å›¾åƒå¯¹è±¡ç»˜åˆ¶çš„å½¢çŠ¶ã€‚ä¸‹è¡¨åˆ—å‡ºäº†ä¸åŒçš„ å›¾å±‚ å‡ ä½•å›¾å½¢å¯¹è±¡æ”¯æŒçš„ shape å½¢çŠ¶

| layer ç±»å‹ | shape ç±»å‹                                                                             | å¤‡æ³¨ |
| ---------- | -------------------------------------------------------------------------------------- | ---- |
| point      | 2d:point,circle, square, triangle,hexagon,image,text 3d:circle,triangle,hexagon,square |      |
| line       | line,arc, arc3d, greatcircle                                                           |      |
| polygon    | fill,line, extrude                                                                     |      |

**shape(field, shapes)**

- shape æ ¹æ®å­—æ®µæŒ‡å®šè¡Œå½¢çŠ¶ï¼Œæ¯”å¦‚æ ¹æ®å­—æ®µæŒ‡å®š PointLayer/imageLayer çš„ icon ç±»å‹

```javascript
scene.addImage(
  '00',
  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',
);
scene.addImage(
  '01',
  'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg',
);
scene.addImage(
  '02',
  'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',
);
const imageLayer = new PointLayer()
  .source(data, {
    parser: {
      type: 'json',
      x: 'longitude',
      y: 'latitude',
    },
  })
  .shape('name', ['00', '01', '02'])
  .size(20);
scene.addLayer(imageLayer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*oVyHT5S3sv0AAAAAAAAAAABkARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/image#image)

**shape(field, callback)**

- shape ä¹Ÿæ”¯æŒå›è°ƒå‡½æ•°çš„å†™æ³•

```javascript
.shape('key', value => {
  if(value > 10) {
    return 'circle';
  } else {
    return 'triangle';
  }
}
```

`style` æ–¹æ³•ç”¨äºé…åˆ¶å›¾å±‚çš„æ ·å¼ï¼Œ
- å•é€šé“ ç»˜åˆ¶ç»“æœç”±æ˜¯å•ä¸€çš„æ•°å€¼æ§åˆ¶ï¼Œå¦‚ç°åº¦å›¾ï¼Œæ•°å€¼å¯¹åº”çš„é¢œè‰²å¯ä»¥é€šè¿‡è¡¨ç¤ºé…ç½® `rampColors` è‰²å¸¦æ§åˆ¶ã€‚

```js
layer.style({
  opacity: 0.5,
});
```

### é…ç½®

| style       | ç±»å‹               | æè¿°                                        | é»˜è®¤å€¼        |
| ----------- | ------------------ | ------------------------------------------- | ------------- |
| opacity     | `number`           | å›¾å½¢çš„é€æ˜åº¦                                | `1`           |
| clampLow    | `boolean`          | è®¾ç½®ä¸º `true`ï¼Œä½äº `domain` çš„æ•°æ®å°†ä¸æ˜¾ç¤º | `false`       |
| clampHigh   | `boolean`          | è®¾ç½®ä¸º `true`ï¼Œé«˜äº `domain` çš„æ•°æ®å°†ä¸æ˜¾ç¤º | `false`       |
| domain      | `[number, number]` | æ•°æ®æ˜ å°„åŒºé—´                                | `[ 0, 8000 ]` |
| noDataValue | `number`           | ä¸ä¼šæ˜¾ç¤ºçš„å€¼                                | `-9999999`    |
| rampColors  | `IRampColors`      | å€¼åŸŸæ˜ å°„é¢œè‰²çš„è‰²å¸¦                          | `/`           |


<embed src="@/docs/common/layer/raster/rampcolors.zh.md"></embed>------

`style`Method is used to configure the style of the layer,

* The single-channel drawing result is controlled by a single numerical value, such as a grayscale image. The color corresponding to the numerical value can be configured by expressing`rampColors`Ribbon control.

```js
layer.style({
  opacity: 0.5,
});
```

### Configuration

| style       | type               | describe                                                    | default value |
| ----------- | ------------------ | ----------------------------------------------------------- | ------------- |
| opacity     | `number`           | Graphic transparency                                        | `1`           |
| clampLow    | `boolean`          | Set as`true`, lower than`domain`data will not be displayed  | `false`       |
| clampHigh   | `boolean`          | Set as`true`, higher than`domain`data will not be displayed | `false`       |
| domain      | `[number, number]` | Data mapping interval                                       | `[ 0, 8000 ]` |
| noDataValue | `number`           | Values â€‹â€‹that will not be displayed                         | `-9999999`    |
| rampColors  | `IRampColors`      | The color ramp for the range mapping color                  | `/`           |

<embed src="@/docs/common/layer/raster/rampcolors.en.md"></embed>
- å•é€šé“ ç»˜åˆ¶ç»“æœç”±æ˜¯å•ä¸€çš„æ•°å€¼æ§åˆ¶ï¼Œå¦‚ç°åº¦å›¾ï¼Œæ•°å€¼å¯¹åº”çš„é¢œè‰²å¯ä»¥é€šè¿‡è¡¨ç¤ºé…ç½® `rampColors` è‰²å¸¦æ§åˆ¶ã€‚

```js
layer.style({
  opacity: 0.5,
});
```

### options

| style       | ç±»å‹               | æè¿°                                        | é»˜è®¤å€¼        |
| ----------- | ------------------ | ------------------------------------------- | ------------- |
| opacity     | `number`           | å›¾å½¢çš„é€æ˜åº¦                                | `1`           |
| clampLow    | `boolean`          | è®¾ç½®ä¸º `true`ï¼Œä½äº `domain` çš„æ•°æ®å°†ä¸æ˜¾ç¤º | `false`       |
| clampHigh   | `boolean`          | è®¾ç½®ä¸º `true`ï¼Œé«˜äº `domain` çš„æ•°æ®å°†ä¸æ˜¾ç¤º | `false`       |
| domain      | `[number, number]` | æ•°æ®æ˜ å°„åŒºé—´                                | `[ 0, 8000 ]` |
| noDataValue | `number`           | ä¸ä¼šæ˜¾ç¤ºçš„å€¼                                | `-9999999`    |
| rampColors  | `IRampColors`      | å€¼åŸŸæ˜ å°„é¢œè‰²çš„è‰²å¸¦                          | `/`           |

<embed src="@/docs/common/layer/raster/rampcolors.zh.md"></embed>
------

* The single-channel drawing result is controlled by a single numerical value, such as a grayscale image. The color corresponding to the numerical value can be configured by expressing`rampColors`Ribbon control.

```js
layer.style({
  opacity: 0.5,
});
```

### options

| style       | type               | describe                                                    | default value |
| ----------- | ------------------ | ----------------------------------------------------------- | ------------- |
| opacity     | `number`           | Graphic transparency                                        | `1`           |
| clampLow    | `boolean`          | Set as`true`, lower than`domain`data will not be displayed  | `false`       |
| clampHigh   | `boolean`          | Set as`true`, higher than`domain`data will not be displayed | `false`       |
| domain      | `[number, number]` | Data mapping interval                                       | `[ 0, 8000 ]` |
| noDataValue | `number`           | Values â€‹â€‹that will not be displayed                         | `-9999999`    |
| rampColors  | `IRampColors`      | The color ramp for the range mapping color                  | `/`           |

<embed src="@/docs/common/layer/raster/rampcolors.en.md"></embed>
### rampColors color ramps

- type type supports \`linear','quantize','custom','cat'
- colors color array
- positions data segmentation interval, optional, quantize does not need to set position, position is the original data value

âš ï¸ 2.13 new features

#### cat enumeration type ribbon

The enumeration type ribbon only supports integer types from 0 to 255, and positions are used to set the enumeration.

```tsx
{
  type:'cat',
  colors:['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00'],
  positions:[1,20,101,102,200],
}
```

#### quantize equally spaced classification ribbons

Equally spaced segments are evenly divided only according to the interval domain of the data, such as domain \[0,10000]. If it is divided into 5 segments, the distance between each segment is 2000.
There is no need to set positions for equal spacing. You only need to set colors. Set the number of segments according to the length of colors.

```tsx
rampColors: {
  type:'quantize',
  colors: ['#f0f9e8','#bae4bc','#7bccc4','#43a2ca','#0868ac']
}
```

#### linear linear continuous ribbon

linear is an enhanced version of the existing continuous type. Positions supports setting source data without converting it to 0-1.

```tsx
rampColors: {
  type:'linear',
  colors: ['#f0f9e8','#bae4bc','#7bccc4','#43a2ca','#0868ac'],
  positions [0,200,1000,4000,8000]
}

âš ï¸ Compatible with versions before 2.13.0. When type is not set, the position value range is 0-1.
```

#### custom custom segmented ribbon

Customized segmented ribbons distinguish equal-spaced ribbons, and user-defined segment intervals.
The length of custom positions needs to be 1 more than the length of colors, and positions

```tsx
rampColors: {
  type:'custom',
  colors: ['#f0f9e8','#bae4bc','#7bccc4','#43a2ca','#0868ac'],
  positions [0,200,1000,4000,8000,10000]
}
```
### rampColors é¢œè‰²è‰²å¸¦
- type ç±»å‹ æ”¯æŒ `linear','quantize','custom','cat'
- colorsÂ  é¢œè‰²æ•°ç»„
- positions æ•°æ®åˆ†æ®µåŒºé—´ï¼Œå¯é€‰ï¼Œquantize ä¸éœ€è¦è®¾ç½® positionï¼Œposition ä¸ºåŸå§‹æ•°æ®å€¼

âš ï¸ 2.13 æ–°å¢ç‰¹æ€§

#### cat æšä¸¾ç±»å‹è‰²å¸¦

æšä¸¾ç±»å‹è‰²å¸¦åªæ”¯æŒ 0 -255 çš„æ•´æ•°ç±»å‹ï¼Œpositions ç”¨æ¥è®¾ç½®æšä¸¾
```tsx
{
  type:'cat',
  colors:['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00'],
  positions:[1,20,101,102,200],
}
```

#### quantize ç­‰é—´è·åˆ†ç±»è‰²å¸¦

ç­‰é—´è·åªæ ¹æ®æ•°æ®çš„åŒºé—´ domain è¿›è¡Œå‡åŒ€åˆ†æ®µï¼Œå¦‚ domain [0,10000]ï¼Œå¦‚æœåˆ† 5 æ®µï¼Œæ¯æ®µé—´è· 2000ã€‚
ç­‰é—´è·ä¸éœ€è¦è®¾ç½® positionsï¼Œåªéœ€è¦è®¾ç½®colorsï¼Œæ ¹æ®colors çš„é•¿åº¦è®¾ç½®åˆ†æ®µæ•°

```tsx
rampColors: {
  type:'quantize',
  colors: ['#f0f9e8','#bae4bc','#7bccc4','#43a2ca','#0868ac']
}
```
#### linear çº¿æ€§è¿ç»­è‰²å¸¦

linear ä¸ºç°æœ‰è¿ç»­ç±»å‹çš„åŠ å¼ºç‰ˆï¼Œpositions æ”¯æŒè®¾ç½®æºæ•°æ®ï¼Œä¸éœ€è¦è½¬æ¢æˆ 0-1

```tsx
rampColors: {
  type:'linear',
  colors: ['#f0f9e8','#bae4bc','#7bccc4','#43a2ca','#0868ac'],
  positions [0,200,1000,4000,8000]
}

âš ï¸ å…¼å®¹ 2.13.0 ä¹‹å‰ç‰ˆæœ¬ï¼Œæœªè®¾ç½®type æ—¶ï¼Œposition å€¼åŸŸä¸º 0-1ã€‚



```

#### custom è‡ªå®šä¹‰åˆ†æ®µè‰²å¸¦

è‡ªå®šä¹‰åˆ†æ®µè‰²å¸¦åŒºåˆ«ç­‰é—´è·è‰²å¸¦ï¼Œç”¨æˆ·è‡ªå®šä¹‰åˆ†æ®µé—´éš”ã€‚
è‡ªå®šä¹‰ positions çš„é•¿åº¦éœ€è¦æ¯” colors çš„é•¿åº¦å¤š1ä¸ªï¼ŒåŒæ—¶poisitions 

```tsx
rampColors: {
  type:'custom',
  colors: ['#f0f9e8','#bae4bc','#7bccc4','#43a2ca','#0868ac'],
  positions [0,200,1000,4000,8000,10000]
}
```

### texture

Currently, texture methods are only supported on line layers.

* The texture method supports passing in global icon texture resources added by the scene.addImage method.

```javascript
// First load image resources globally
scene.addImage(
  'plane',
  'https://gw.alipayobjects.com/zos/bmw-prod/0ca1668e-38c2-4010-8568-b57cb33839b9.svg',
);

const layer = new LineLayer({
  blend: 'normal',
})
  .source(data, {
    parser: {
      type: 'json',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(25)
  .shape('arc')
  .texture('plane') // Bind texture to layer
  .color('#8C1EB2')
  .style({
    lineTexture: true, // Enable line mapping function
    iconStep: 30, // Set the spacing of the texture
    textureBlend: 'replace', //Set the texture blending method. The default value is normal. The optional values â€‹â€‹are normal/replace.
  });
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KEupSZ_p0pYAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/line/animate#plane_animate2)
-----|---

### source data

Set layer data and parsing configuration`source(data, config)`ã€‚

* data { geojson | json | csv }
* config optional data source configuration items
  * parser data analysis, the default is the parsing layer geojson
  * transforms \[transform, transform ] Multiple data processing transformations can be set

`parser`and  `transforms` [See source documentation](/api/source/source)ã€‚

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
  transforms: [
    {
      type: 'map',
      callback: function(item) {
        const [x, y] = item.coordinates;
        item.lat = item.lat * 1;
        item.lng = item.lng * 1;
        item.v = item.v * 1;
        item.coordinates = [x * 1, y * 1];
        return item;
      },
    },
    {
      type: 'hexagon',
      size: 6000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

### cluster

we are using`cluster`After configuring the aggregation graph, you can use some aggregation methods to obtain the corresponding parameters.

#### getClusters(zoom: number): IFeatureCollection

Get aggregated data for a specified zoom level

* `zoom`Zoom level

#### getClustersLeaves(id: string): IFeatureCollection

according to`id`Get the data of the aggregation node. Each aggregation node will have a unique`ID`ã€‚

* `id`aggregation node`id`

```ts
const source = layer.getSource();
source.getClustersLeaves(id);
layer.on('click', (e) => {
  console.log(source.getClustersLeaves(e.feature.cluster_id));
});
```

## scale data measure

Scale measures convert map data values â€‹â€‹(numbers, dates, categories, etc.) into visual values â€‹â€‹(color, size, shape). Scales Scales are a fundamental component of data visualization because they determine the nature of the visual encoding. L7 currently supports Scale for continuous, discrete, and enumerated type data, and supports mapping of position, shape, size, and color coding.

When using L7, there is no need to configure Scale by default because L7 will infer scale based on the data type. The inference process is as follows:

Check whether the user has set Scale, if not:

Determine the field type of the first data of the field, if the corresponding field does not exist in the data:

Consider a constant as a fixed value

'linear' if numeric;

If it is string type 'cat';

### scale

[Scale details](https://mp.weixin.qq.com/s/QyD1_ypu0PDwMxEz45v6Jg)

å‚æ•°ï¼š (field: string, scaleOptions: IscaleOptions)

* `field`Specify the field name used for mapping in the data passed in source
* `scaleOptions`Column definition configuration, object type
  * type scale type
  * unknown unmatched color optional default transparent
  * domain value range optional

```javascript
interface IscaleOptions {
  type: ScaleTypeName;
  domain?: any[];
  ...
}

layer.color('id', ['#f00', '#ff0'])
.size('mag', [1, 80])
.scale('mag', {
  type: 'linear',
  domain: [ 1, 50]
})ï¼›
```

#### type

Range and domain are two very important parameters in Scale

domain: definition interval of map data values
range: range of visual values
The difference between different Scales lies in the different conversion methods of domain->range

* domain: definition interval of map data values
* range: interval definition of visual value

|Data Class|Measurement Type|
\|---|
\| Continuous | linear, log, pow |
\| Continuous classification | quantize quantile,threshold,diverging |
\| Classification Enumeration | cat |

#### Cat

Cat refers to the enumeration type, which is used to display categorical data, such as the distribution of crop planting areas. Different categories such as rice, corn, and soybeans need to be mapped to different colors.

```js
// The three crops will be converted into corresponding colors respectively.
// domain = ['corn','rice', 'soybean'];
// range = ['red','white','blue'];
const data = [
  { lng: 120, lat: 30, t: 'corn' },
  { lng: 121, lat: 30, t: 'rice' },
  { lng: 122, lat: 30, t: 'soybean' },
];
layer.source(data, {
  parser: {
    type: 'type',
    x: 'lng',
    y: 'lat'
  }
});
layer.scale('t', { type: 'cat' });
layer.color('t', ['red', 'white', 'blue']);
```

#### identify

The data value and the mapped value are the same
For example, the value field in the data records the color of each element, and the value is the result value s to be mapped.

```
// Set to identify
layer.scale('value', { type: 'identify' });

// or 

layer.scale('value'); // L7 can be automatically inferred as identify
```

#### linear

Linear is a mapping method for continuous data. Data and visual values â€‹â€‹are converted using linear methods. For example, the data value 1-100 is linearly mapped to an offline gradient color from red to blue. Each number corresponds to a color.

#### quantize

Equal intervals divide the range of attribute values â€‹â€‹into several equally sized subranges. Equal intervals work best with common data ranges, such as percentages and temperatures. This method emphasizes the amount of a certain attribute value relative to other values.

#### quantile

Each class contains an equal number of features. Quantile classification is well suited for linearly distributed data. Quantiles assign an equal number of data values â€‹â€‹to each class. There is no empty class, nor a class with too many or too few values.
Because "quantile" classification is used to group features into each class in equal numbers, the resulting map is often misleading. You might place similar features into adjacent classes, or place features with widely different values â€‹â€‹into the same class. This distortion can be minimized by increasing the number of classes.

#### threshold

It allows mapping any subset (non-uniform segment) of the domain to a range of discrete values. The input domain remains continuous and divided into slices based on a set of thresholds provided to the domain attributes. The range attribute must have N+1 elements, where N is the number of threshold boundaries provided in the domain

Manual interval Manual interval Manually set the classification interval. Some data will have corresponding industry standards or require some special display. For example, air quality data has strict data segmentation standards

```
-1   => "red"
0    => "white"
0.5  => "white"
1.0  => "blue"
1000 => "blue
```

#### diverging

Discrete classification is often used with two opposite hues to show the change from negative values â€‹â€‹to center to positive values. These types of maps show the magnitude of values â€‹â€‹in relation to each other.

### getScale(scaleName:string)

Get the scale instance based on the visual channel name. Make sure the layer has been initialized before calling.

```ts
const scale = layer.getScale('color')
const color = scale(1)//Convert numerical value to color
```

More of a method<a  target="_blank" href='https://github.com/antvis/L7/blob/master/packages/layers/src/core/BaseLayer.ts#L1176'>scale example usage</a>

## visual coding methods

Visual coding is the process of converting data into visual form. L7 currently supports three visual channels: shape, size, and color. You can specify data fields and set different graphic attributes for different elements.

<img width="100%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PzoTRJnY-fIAAAAAAAAAAAAAARQnAQ'>

### filter

Data filtering method, supports callback function, maps data to true | false, visible when the result is true

```ts
pointLayer.filter('type', (type) => {
  // Callback
  if (type === 'a') {
    return false;
  }
  return true ;
});
```

### size

A method for mapping data values â€‹â€‹to the size of graphics. For specific parameters of the size method, you can view the detailed documentation of the corresponding layer.

```javascript
pointLayer.size(10); // constant
pointLayer.size('type'); // Use fields to map to sizes
pointLayer.size('type', [0, 10]); // Use fields to map to sizes and specify maximum and minimum values
pointLayer.size('type', (type) => {
  // Callback
  if (type === 'a') {
    return 10;
  }
  return 5;
});
```

#### size(valueï¼‰

Pass in a numeric constant, such as`pointLayer.size(20)`

#### size(field)

Map the size according to the value of the field field, using the default`æœ€å¤§å€¼ max:10`  and`æœ€å°å€¼ min: 1`ã€‚

#### size(field, callback)

Use callback functions to control graph size.

* `callback`: function callback function.

```javascript
pointLayer.size('age', (value) => {
  if (value === 1) {
    return 5;
  }
  return 10;
});
```

### color

A method for mapping data values â€‹â€‹to the colors of a graph.

```javascript
layer.color('red'); // constant color
layer.color('type'); //Map the type field and use the built-in color
layer.color('type', ['red', 'blue']); // Specify color
layer.color('type', (type) => {
  // through callback function
  if (type === 'a') {
    return 'red';
  }
  return 'blue';
});
layer.color('type*value', (type, value) => {
  //Multiple parameters, through callback function
  if (type === 'a' && value > 100) {
    return 'red';
  }
  return 'blue';
});
```

#### color(value)

parameter:`value`ï¼šstring

Only supports receiving one parameter, value can be:

* The data source field name mapped to the color attribute. If this field name does not exist in the data source, it will be parsed according to constants. In this case, the color provided by L7 by default will be used.

* You can also directly specify a specific color value, such as '#fff', 'white', 'rgba(255,0,0,0.5)', rgb(255,0,1), etc.

If the data is mapped to color, the transparent color will not be displayed by default. If you need to set the color, you need to set it in scale.

Example

```javascript
layer.color('name'); // Mapping data fields
layer.color('white'); //Specify color
```

#### color(field, colors)

parameter:

* `field`: stringfield is the name of the data source field mapped to the color attribute. It also supports specifying multiple parameters.

* `colors`: string | array | function

The parameters of colors have the following conditions: If it is empty, that is, an array of colors is not specified, then the built-in global color is used; if a color needs to be specified, it needs to be passed in in array format, then the color of the classification is determined according to the color in the array.

```javascript
layer.scale('name',{
  type: 'quantile'
  unknown:'#ccc' // Set invalid color
})
layer.color('name'); // use identity
layer.color('name', ['red', 'blue']); // Use the specified color passed in
```

* If colors is a callback function, the parameters of the callback function are the values â€‹â€‹of the corresponding fields. The specific usage is as follows. When color is mapped to multiple fields, the parameters are passed in in the order in which the fields are declared:

```javascript
layer.color('gender', (value) => {
  if (value === 1) {
    return 'red';
  }
  return 'blue';
});
layer.color('gender*age', (gender, age) => {
  if (age === 20 && gender == ' ç”·') {
    return 'red';
  }
  return 'blue';
});
```

### shape

Usually a layer can have multiple representations. The shape method is used to specify the specific representation of the layer. Take the shape of PointLayer as an example:

```javascript
shape('circle'); // circle
shape('triangle'); // triangle
shape('cylinder'); // cylinder
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*iN0nTYRDd3AAAAAAAAAAAABkARQnAQ'>

**shape(shape)**

parameter`shape` string

* Only supports receiving one parameter, specifying the shape drawn by the geometric image object. The following table lists the shapes supported by the different layer geometry objects.

| layer type | shape type                                                                             | Remark |
| ---------- | -------------------------------------------------------------------------------------- | ------ |
| point      | 2d:point,circle, square, triangle,hexagon,image,text 3d:circle,triangle,hexagon,square |        |
| line       | line,arc, arc3d, greatcircle                                                           |        |
| polygon    | fill,line, extrude                                                                     |        |

**shape(field, shapes)**

* shape specifies the row shape based on the field, such as specifying the icon type of PointLayer/imageLayer based on the field.

```javascript
scene.addImage(
  '00',
  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',
);
scene.addImage(
  '01',
  'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg',
);
scene.addImage(
  '02',
  'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',
);
const imageLayer = new PointLayer()
  .source(data, {
    parser: {
      type: 'json',
      x: 'longitude',
      y: 'latitude',
    },
  })
  .shape('name', ['00', '01', '02'])
  .size(20);
scene.addLayer(imageLayer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*oVyHT5S3sv0AAAAAAAAAAABkARQnAQ'>

[Online case](/examples/point/image#image)

**shape(field, callback)**

* Shape also supports writing callback functions

```javascript
.shape('key', value => {
  if(value > 10) {
    return 'circle';
  } else {
    return 'triangle';
  }
}
```
### texture

ç›®å‰åªåœ¨çº¿å›¾å±‚ä¸Šæ”¯æŒäº†çº¹ç†æ–¹æ³•

- texture æ–¹æ³•æ”¯æŒä¼ å…¥ç”± scene.addImage æ–¹æ³•æ·»åŠ çš„å…¨å±€ icon è´´å›¾èµ„æº

```javascript
// é¦–å…ˆåœ¨å…¨å±€åŠ è½½å›¾ç‰‡èµ„æº
scene.addImage(
  'plane',
  'https://gw.alipayobjects.com/zos/bmw-prod/0ca1668e-38c2-4010-8568-b57cb33839b9.svg',
);

const layer = new LineLayer({
  blend: 'normal',
})
  .source(data, {
    parser: {
      type: 'json',
      x: 'lng1',
      y: 'lat1',
      x1: 'lng2',
      y1: 'lat2',
    },
  })
  .size(25)
  .shape('arc')
  .texture('plane') // ä¸ºå›¾å±‚ç»‘å®šçº¹ç†
  .color('#8C1EB2')
  .style({
    lineTexture: true, // å¼€å¯çº¿çš„è´´å›¾åŠŸèƒ½
    iconStep: 30, // è®¾ç½®è´´å›¾çº¹ç†çš„é—´è·
    textureBlend: 'replace', // è®¾ç½®çº¹ç†æ··åˆæ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º normalï¼Œå¯é€‰å€¼æœ‰ normal/replace ä¸¤ç§
  });
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KEupSZ_p0pYAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/line/animate#plane_animate2)## Layer control methods

### show()

Layer display

```javascript
layer.show();
```

### hide()

Layer hidden

```javascript
layer.hide();
```

### isVisible(): boolean

Is the layer visible?

```javascript
layer.isVisible();
```

### setIndex(zIndex: int)

Set layer drawing order

```javascript
layer.setIndex(1);
```

### fitBounds()

Zoom to layer extents

```javascript
layer.fitBounds();
```

### setMinZoom(zoom: number)

Set the minimum zoom level of the layer

```javascript
layer.setMinZoom(zoom);
```

### setMaxZoom(zoom: number)

Set the maximum zoom level of the layer

```javascript
layer.setMinZoom(zoom);
```

Set the maximum zoom level of the layer

parameter

* zoom {number}

```javascript
layer.setMinZoom(zoom);
```
## å›¾å±‚æ§åˆ¶æ–¹æ³•

### show()

å›¾å±‚æ˜¾ç¤º

```javascript
layer.show();
```

### hide()

å›¾å±‚éšè—

```javascript
layer.hide();
```

### isVisible(): boolean

å›¾å±‚æ˜¯å¦å¯è§

```javascript
layer.isVisible();
```

### setIndex(zIndex: int)

è®¾ç½®å›¾å±‚ç»˜åˆ¶é¡ºåº

```javascript
layer.setIndex(1);
```

### fitBounds()

ç¼©æ”¾åˆ°å›¾å±‚èŒƒå›´

```javascript
layer.fitBounds();
```

### setMinZoom(zoom: number)

è®¾ç½®å›¾å±‚æœ€å°ç¼©æ”¾ç­‰çº§

```javascript
layer.setMinZoom(zoom);
```

### setMaxZoom(zoom: number)

è®¾ç½®å›¾å±‚æœ€å¤§ç¼©æ”¾ç­‰çº§

```javascript
layer.setMinZoom(zoom);
```

è®¾ç½®å›¾å±‚æœ€å¤§ç¼©æ”¾ç­‰çº§

å‚æ•°

- zoom {number}

```javascript
layer.setMinZoom(zoom);
```<style>
 h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } </style>
------

| name       | illustrate                        | type             |
| ---------- | --------------------------------- | ---------------- |
| popperShow | Callback when bubble is displayed | `(this) => void` |
| popperHide | Callback when bubble is hidden    | `(this) => void` |
------

| name         | illustrate                                                                                                  | type                                   |
| ------------ | ----------------------------------------------------------------------------------------------------------- | -------------------------------------- |
| setOptions   | Update configuration, parameters need to refer to the corresponding component[Configuration](Configuration) | `(newOption: Partial<Option>) => void` |
| getOptions   | Get current[Configuration](Configuration)                                                                   | `() => Option`                         |
| show         | display component                                                                                           | `() => void`                           |
| hide         | Hidden component                                                                                            | `() => void`                           |
| getContainer | Get the information corresponding to the current control`DOM`container                                      | `() => HTMLElement`                    |
| åç§°         | è¯´æ˜                                          | ç±»å‹                                   |
| ------------ | --------------------------------------------- | -------------------------------------- |
| setOptions   | æ›´æ–°é…ç½®ï¼Œå‚æ•°éœ€è¦å‚è€ƒå¯¹åº”ç»„ä»¶çš„[é…ç½®](#é…ç½®) | `(newOption: Partial<Option>) => void` |
| getOptions   | è·å–å½“å‰[é…ç½®](#é…ç½®)                         | `() => Option`                         |
| show         | æ˜¾ç¤ºç»„ä»¶                                      | `() => void`                           |
| hide         | éšè—ç»„ä»¶                                      | `() => void`                           |
| getContainer | è·å–å½“å‰æ§ä»¶å¯¹åº”çš„ `DOM` å®¹å™¨                 | `() => HTMLElement`                    |
| åç§°       | è¯´æ˜             | ç±»å‹             |
| ---------- | ---------------- | ---------------- |
| popperShow | æ°”æ³¡æ˜¾ç¤ºæ—¶çš„å›è°ƒ | `(this) => void` |
| popperHide | æ°”æ³¡éšè—æ—¶çš„å›è°ƒ | `(this) => void` |
------

| name      | illustrate                                                                                                                              | type                  |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| position  | The location and arrangement of controls when they are added to the map, see details[control slot](/api/component/control/control#slot) | [Position](#position) |
| className | Custom style name                                                                                                                       | `string`              |
| style     | Custom style                                                                                                                            | `string`              |

### Position

```ts
export type Position =
  | 'topleft' // â†– upper left corner, vertical arrangement
  | 'lefttop' // â†– Upper left corner, arranged horizontally
  | 'topright' // â†— Upper right corner, vertical arrangement
  | 'righttop' // â†— Upper right corner, arranged horizontally
  | 'bottomleft' // â†™ lower left corner, arranged vertically
  | 'leftbottom' // â†™ lower left corner, arranged horizontally
  | 'bottomright' // â†˜ Lower right corner, arranged vertically
  | 'rightbottom' // â†˜ Lower right corner, arranged horizontally
  | 'topcenter' // â†‘ top center, arranged horizontally
  | 'bottomcenter' // â†“ bottom center, arranged horizontally
  | 'leftcenter' // â† left center, arranged vertically
  | 'rightcenter' // â†’ middle right, arranged vertically
  | Element; // Pass in DOM as the container of the current control
```
| åç§°      | è¯´æ˜                                                                                           | ç±»å‹                  |
| --------- | ---------------------------------------------------------------------------------------------- | --------------------- |
| position  | æ§ä»¶è¢«æ·»åŠ åˆ°åœ°å›¾ä¸­çš„ä½ç½®ä»¥åŠæ’åˆ—æ–¹å¼ï¼Œè¯¦æƒ…å¯è§ [æ§ä»¶æ’æ§½](/api/component/control/control#æ’æ§½) | [Position](#position) |
| className | è‡ªå®šä¹‰æ ·å¼å                                                                                   | `string`              |
| style     | è‡ªå®šä¹‰æ ·å¼                                                                                     | `string`              |

### Position

```ts
export type Position =
  | 'topleft'       // â†– å·¦ä¸Šè§’ï¼Œçºµå‘æ’åˆ—
  | 'lefttop'       // â†– å·¦ä¸Šè§’ï¼Œæ¨ªå‘æ’åˆ—
  | 'topright'      // â†— å³ä¸Šè§’ï¼Œçºµå‘æ’åˆ—
  | 'righttop'      // â†— å³ä¸Šè§’ï¼Œæ¨ªå‘æ’åˆ—
  | 'bottomleft'    // â†™ å·¦ä¸‹è§’ï¼Œçºµå‘æ’åˆ—
  | 'leftbottom'    // â†™ å·¦ä¸‹è§’ï¼Œæ¨ªå‘æ’åˆ—
  | 'bottomright'   // â†˜ å³ä¸‹è§’ï¼Œçºµå‘æ’åˆ—
  | 'rightbottom'   // â†˜ å³ä¸‹è§’ï¼Œæ¨ªå‘æ’åˆ—
  | 'topcenter'     // â†‘ ä¸Šæ–¹ä¸­å¤®ï¼Œæ¨ªå‘æ’åˆ—
  | 'bottomcenter'  // â†“ ä¸‹æ–¹ä¸­é—´ï¼Œæ¨ªå‘æ’åˆ—
  | 'leftcenter'    // â† å·¦è¾¹ä¸­é—´ï¼Œçºµå‘æ’åˆ—
  | 'rightcenter'   // â†’ å³è¾¹ä¸­é—´ï¼Œçºµå‘æ’åˆ—
  | Element;        // ä¼ å…¥ DOM ä½œä¸ºå½“å‰æ§ä»¶çš„å®¹å™¨
```
| åç§°     | è¯´æ˜                                                    | ç±»å‹                              |
| -------- | ------------------------------------------------------- | --------------------------------- |
| btnIcon  | æŒ‰é’®å›¾æ ‡                                                | `HTMLElement` \| `SVGElement` |
| btnText  | æŒ‰é’®å†…å®¹æ–‡æœ¬                                            | `string`                          |
| title    | æŒ‰é’®çš„ `title` å±æ€§                                     | `string`                          |
| vertical | åœ¨ btnIcon æœ‰å€¼çš„æƒ…å†µä¸‹ï¼ŒæŒ‰é’®å†…çš„å›¾æ ‡å’Œæ–‡æ¡ˆæ˜¯å¦çºµå‘æ’åˆ— | `boolean`                         |
------

| name     | illustrate                                                                                 | type                        |
| -------- | ------------------------------------------------------------------------------------------ | --------------------------- |
| btnIcon  | button icon                                                                                | `HTMLElement`\|`SVGElement` |
| btnText  | Button content text                                                                        | `string`                    |
| title    | button`title`Attributes                                                                    | `string`                    |
| vertical | When btnIcon has a value, whether the icons and text in the button are arranged vertically | `boolean`                   |
------

\| Name | Description | Type |
\| | ------------------ | ---------------- |
\| add | Event when component is added |`(this) => void`|
\| remove | Event when component is removed |`(this) => void`|
\| show | Events when the component is displayed |`(this) => void`|
\| hide | Event when component is hidden |`(this) => void`|
| åç§°   | è¯´æ˜               | ç±»å‹             |
| ------ | ------------------ | ---------------- |
| add    | ç»„ä»¶è¢«æ·»åŠ æ—¶çš„äº‹ä»¶ | `(this) => void` |
| remove | ç»„ä»¶è¢«ç§»é™¤æ—¶çš„äº‹ä»¶ | `(this) => void` |
| show   | ç»„ä»¶æ˜¾ç¤ºæ—¶çš„äº‹ä»¶   | `(this) => void` |
| hide   | ç»„ä»¶éšè—æ—¶çš„äº‹ä»¶   | `(this) => void` |
| åç§°            | è¯´æ˜                 | ç±»å‹                                |
| --------------- | -------------------- | ----------------------------------- |
| popperPlacement | æ°”æ³¡ç›¸å¯¹äºæŒ‰é’®çš„ä½ç½® | [PopperPlacement](#PopperPlacement) |
| popperTrigger   | æ°”æ³¡å¼¹å‡ºçš„è§¦å‘æ–¹å¼   | `'click'` \| `'hover'`          |
| popperClassName | æ°”æ³¡å®¹å™¨è‡ªå®šä¹‰æ ·å¼å | `string`                            |

### PopperPlacement

```ts
export type PopperPlacement =
  | 'top-start'
  | 'top'
  | 'top-end'
  | 'left-start'
  | 'left'
  | 'left-end'
  | 'bottom-start'
  | 'bottom'
  | 'bottom-end'
  | 'right-start'
  | 'right'
  | 'right-end';
```
| åç§°         | è¯´æ˜                   | ç±»å‹                          |
| ------------ | ---------------------- | ----------------------------- |
| selectChange | å½“æ‰€é€‰å€¼å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘ | `(string | string[]) => void` |
------

| name         | illustrate                            | type      |                      |
| ------------ | ------------------------------------- | --------- | -------------------- |
| selectChange | Fires when the selected value changes | \`(string | string\[]) => void\` |
------

| name            | illustrate                                        | type                                |
| --------------- | ------------------------------------------------- | ----------------------------------- |
| popperPlacement | The position of the bubble relative to the button | [PopperPlacement](#PopperPlacement) |
| popperTrigger   | How to trigger bubble pop-up                      | `'click'`\|`'hover'`                |
| popperClassName | Bubble container custom style name                | `string`                            |

### PopperPlacement

```ts
export type PopperPlacement =
  | 'top-start'
  | 'top'
  | 'top-end'
  | 'left-start'
  | 'left'
  | 'left-end'
  | 'bottom-start'
  | 'bottom'
  | 'bottom-end'
  | 'right-start'
  | 'right'
  | 'right-end';
```
### popup ä¿¡æ¯çª—å£

  - enable æ˜¯å¦å¼€å¯ `boolean`
  - triggerEvent è§¦å‘äº‹ä»¶ ä¾‹å¦‚ 'mousemove' | 'click';
  - Html popup htmlå­—ç¬¦ä¸²ï¼Œæ”¯æŒå›è°ƒå‡½æ•°  (properties: any) => string;
## Usage

1. æŒ‰å›¾è¡¨æ–¹å¼ï¼Œ[åœ¨çº¿ç¤ºä¾‹](https://l7plot.antv.antgroup.com/zh/examples/choropleth/administrative#china-map)

```js
import { Choropleth } from '@antv/l7plot';

const choropleth = new Choropleth('container', options);
```

2. æŒ‰åœºæ™¯æ–¹å¼ï¼Œ[åœ¨çº¿ç¤ºä¾‹](/examples/choropleth/administrative#china-map)

```js
import { Scene, Mapbox } from '@antv/l7';
import { Choropleth } from '@antv/l7plot';

const scene = new Scene({
  id: 'container',
  map: new Mapbox({
    style: 'light',
    center: [102.447303, 37.753574],
    zoom: 5,
  }),
});

const choropleth = new Choropleth(options);

scene.on('loaded', () => {
  choropleth.addToScene(scene);
});
```

## API

Choropleth å…·ä½“ API æ–‡æ¡£ç§»æ­¥ [L7Plot å®˜ç½‘](https://l7plot.antv.antgroup.com/zh/docs/api/plots/choropleth)ã€‚
### label æ ‡æ³¨é…ç½®é¡¹
  æ–‡æœ¬æ ‡æ³¨é…ç½®é¡¹ï¼Œç›®å‰åªæ”¯æŒå¸¸é‡é…ç½®ï¼Œä¸æ”¯æŒæ•°æ®æ˜ å°„
  - enable `boolean` æ˜¯å¦æ˜¾ç¤ºæ ‡æ³¨
      - color
         æ ‡æ³¨å­—ä½“é¢œè‰² å¸¸é‡
      - field 
        æ ‡æ³¨å­—æ®µ å¸¸é‡
      - size 
        æ ‡æ³¨å¤§å° å¸¸é‡
      - stroke 
        æ–‡å­—æè¾¹é¢œè‰²
      - strokeWidth 
        æ–‡å­—æè¾¹å®½åº¦
      - textAllowOverlap
         æ˜¯å¦å…è®¸æ–‡å­—å‹ç›–
      - opacity
         æ ‡æ³¨é€æ˜åº¦
      - spacing: 
         `number` æ–‡æœ¬é—´éš”
      - strokeOpacity 
      `number` æè¾¹é€æ˜åº¦
      - fontWeight 
      `string` å­—ä½“ç²—ç»†
      - fontFamily 
      `string` å­—å·
      - textOffset 
      `[number, number]` æ–‡æœ¬åç§»é‡
### fill  å¡«å……å›¾æ ·å¼
  - color å›¾å±‚å¡«å……é¢œè‰²ï¼Œæ”¯æŒå¸¸é‡å’Œæ•°æ®æ˜ å°„
      å¸¸é‡ï¼šç»Ÿä¸€è®¾ç½®æˆä¸€æ ·çš„é¢œè‰²
      æ•°æ®æ˜ å°„
      - field å¡«å……æ˜ å°„å­—æ®µ
      - values  æ˜ å°„å€¼ï¼ŒåŒcoloræ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°æ•°ç»„ï¼Œå›è°ƒå‡½æ•°
  - filter å›¾å±‚è¿‡æ»¤æ–¹æ³•ï¼Œæ”¯æŒå¸¸é‡å’Œæ•°æ®æ˜ å°„ åŒlayer.filteræ–¹æ³•
      æ•°æ®æ˜ å°„
          - field å¡«å……æ˜ å°„å­—æ®µ
          - values  å›è°ƒå‡½æ•° `false` è¿”å›å€¼å°†ä¼šè¢«è¿‡æ»¤æ‰
  - style åŒ polygonLayerçš„styleæ–¹æ³•
  - activeColor é¼ æ ‡æ»‘è¿‡é«˜äº®é¢œè‰²,  `string | boolean` å¦‚æœè®¾ç½®ä¸º `false`å–æ¶ˆé«˜äº®
### bubble æ°”æ³¡é…ç½®é¡¹
  - enable
   `boolean` æ˜¯å¦æ˜¾ç¤ºæ°”æ³¡ `true`
  - shape: 
   AttributeType; æ°”æ³¡å½¢çŠ¶æ”¯æŒæ•°æ®æ˜ å°„
  - size:
    AttributeType; æ°”æ³¡å¤§å°æ”¯æŒæ•°æ®æ˜ å°„
  - color: 
    AttributeType; æ°”æ³¡é¢œè‰²æ”¯æŒæ•°æ®æ˜ å°„
  - scale: { // æ•°å­—åº¦é‡
    field: string; åº¦é‡å­—æ®µ
    type: ScaleTypeName; åº¦é‡å­—æ®µ
  };
  - style: {
    opacity: number; é€æ˜åº¦
    stroke: string; å¡«å……è‰²
    strokeWidth: number; å¡«å……å®½åº¦
  };
#### layerOption å›¾ç‰‡é…ç½®

 ä¸‹é’»å„ä¸ªå±‚çº§çš„é…ç½®é¡¹ï¼Œå¯ä»¥ç‹¬ç«‹é…ç½®ï¼Œæ¯ä¸€å±‚çº§çš„æ ·å¼ï¼Œä¸è®¾ç½®å’Œä¸Šä¸€å±‚å°±ä¿æŒä¸€è‡´
  - joinBy: [string, string];
  - label: Partial<ILabelOption>;
  - bubble: Partial<IBubbleOption>;
  - fill: Partial<IFillOptions>;
   â›”ä¸­å›½åœ°å›¾è§†è§’è®¾ç½®ï¼Œçœç•Œï¼Œæµ·å²¸çº¿ï¼Œå®½åº¦é€šè¿‡ä»¥ä¸‹å±æ€§
  - chinaNationalStroke ä¸­å›½å›½ç•Œçº¿é¢œè‰² 
  - chinaNationalWidth ä¸­å›½å›½ç•Œçº¿å®½åº¦ 
  - coastlineStroke æµ·å²¸çº¿é¢œè‰² 
  - coastlineWidth æµ·å²¸çº¿å®½åº¦ 
  - nationalWidth å›½ç•Œçº¿ 
  - nationalStroke å›½ç•Œçº¿ 
  - provinceStroke çœç•Œé¢œè‰² 
  - provinceStrokeWidth çœç•Œå®½åº¦ 
### äº‹ä»¶
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape` æ–¹æ³•ç”¨äºæŒ‡å®šç‚¹å›¾å±‚ç»˜åˆ¶ä»€ä¹ˆæ ·çš„å›¾å½¢ï¼Œå¦‚ç»˜åˆ¶ä¸‰è§’å½¢æˆ–è€…æ˜¯æ­£æ–¹å½¢ï¼Œè¿˜æ˜¯æ–‡å­—ã€å›¾æ ‡ä¹‹ç±»çš„ã€‚

### shape(fillShape: IFillShape)

ç‚¹å›¾å±‚çš„è´´åœ°çš„å‡ ä½•å›¾å½¢ï¼Œå¦‚åœ†å½¢ã€æ­£æ–¹å½¢ã€ä¸‰è§’å½¢ç­‰ã€‚

ğŸŒŸ è‹¥æ˜¯ä½¿ç”¨ç®€å•çš„åœ†ç‚¹å›¾å±‚ï¼Œå»ºè®®ä½¿ç”¨ `simple` ä»£æ›¿ `circle` ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*iN0nTYRDd3AAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

```js
// shape æ”¯æŒçš„å„ç§å½¢çŠ¶
type IFillShape =
  | 'circle'
  | 'square'
  | 'hexagon'
  | 'triangle'
  | 'pentagon'
  | 'octogon'
  | 'hexagram'
  | 'rhombus'
  | 'vesica';

layer.shape('circle');
```

### shape(column: IColumn)

ç‚¹çš„ç±»å‹ä¸ºå‚ç›´åœ°å›¾çš„æŸ±å­ã€‚

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*tvpvQZLv_xYAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

```js
type IColumn = 'cylinder' | 'triangleColumn' | 'hexagonColumn' | 'squareColumn';

layer.shape('cylinder');

layer.shape('triangleColumn');

layer.shape('hexagonColumn');

layer.shape('squareColumn');
```

### shape('simple')

`simple` ç‚¹ç²¾çµæ˜¯ç‰¹æ®Šçš„ç‚¹å›¾å±‚ï¼Œå§‹ç»ˆé¢å‘ç›¸æœºï¼Œä¸”å¤§å°å—åˆ°è®¾å¤‡çš„é™åˆ¶ã€‚

```js
layer.shape('simple');
```

### shape('dot')

`dot` ç‚¹ç²¾çµæ˜¯ç‰¹æ®Šçš„ç‚¹å›¾å±‚ï¼Œå§‹ç»ˆé¢å‘ç›¸æœºï¼Œä¸”å¤§å°å—åˆ°è®¾å¤‡çš„é™åˆ¶ã€‚

```js
layer.shape('dot');
```

### shape(field: string, 'text')

ç»˜åˆ¶æ–‡å­—ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ•°å€¼ä¸­çš„å­—æ®µï¼Œç¬¬äºŒä¸ªå‚æ•°å›ºå®šä¸º `text`ã€‚

```js
const point = new PointLayer()
  .source([{ lng: 120, lat: 30, name: 'test' }], {
    parser: 'json',
    x: 'lng',
    y: 'lat',
  })
  .shape('test', 'text');
```

### shape(iconName: string)

`shape` çš„å€¼ä¸º `scene.addImage` å…¨å±€æ·»åŠ çš„å›¾ç‰‡èµ„æºçš„åç§°ã€‚

```js
scene.addImage(
  '00',
  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',
);
scene.addImage(
  '01',
  'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg',
);
scene.addImage(
  '02',
  'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',
);
const imageLayer = new PointLayer()
  .source(
    [
      {
        longitude: 120,
        latitude: 30,
        name: 'name',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'longitude',
        y: 'latitude',
      },
    },
  )
  .shape('name', ['00', '01', '02']) // shape æ”¯æŒæ˜ å°„å†™æ³•
  .size(25);
scene.addLayer(imageLayer);

const imageLayer2 = new PointLayer()
  .source(
    [
      {
        longitude: 122,
        latitude: 30,
        name: 'name',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'longitude',
        y: 'latitude',
      },
    },
  )
  .shape('00') // shape ç›´æ¥ä¼ å€¼
  .size(25);
scene.addLayer(imageLayer2);
```

### shape('radar')

```js
const layer = new PointLayer()
  .source(
    [
      {
        lng: 120,
        lat: 30,
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'lng',
        y: 'lat',
      },
    },
  )
  .size(25)
  .color('#f00')
  .shape('radar')
  .animate(true);
```

ğŸŒŸ é›·è¾¾å›¾éœ€è¦è®¾ç½® `animate` ä¸º `true`
---
title: Size
order: 5
---

<embed src="@/docs/common/style.md"></embed>

`size`Method used to set the size of point layer graphics.

### IPointSize: number ï½œ\[number, number] | \[number, number, number]

* If the size type is number, it represents the radius of point
* The size type can be \[number, number]|\[number, number, number] indicating the radius and height of the column

```javascript
pointLayer.size(1);
pointLayer.size([2, 10]); // The radius of the pillar is 2x2. The height is 10
pointLayer.size([2, 4, 10]); // The column radius is 2x4 and the height is 10
```

### size(width: IPointSize)

Point layers can set the radius directly. All points in the layer use one width.

```js
layer.size(2);
```

### size(field: string)

The width of a point layer can be mapped based on the data values â€‹â€‹accepted by the layer, accepting fields of incoming data as arguments.

```js
layer.source([
  {
    lng: 120,
    lat: 30,
    r: 2,
  },
]);
layer.size('r');
```

### size(field: string, domain: IPointSize\[])

`size`Method supports simple value mapping and will be based on`field`The values â€‹â€‹extracted from the data passed into the layer are mapped to`domain`in the value range.

```js
layer.size('type', [1, 2, 3]);
```

### size(field: string, callback: () => IPointSize )

`size`The method supports the writing method of callback function, which will be based on`field`as`callback`method parameters,`callback`The return value of the method is the actual radius of the point layer.

```js
layer.size('type', (value) => {
  switch (value) {
    case 'path':
      return 1;
    case 'road':
      return 2;
  }
});
```
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape`The method is used to specify what kind of graphics the point layer draws, such as drawing triangles or squares, text, icons, etc.

### shape(fillShape: IFillShape)

Point layer's ground-mounted geometric shapes, such as circles, squares, triangles, etc.

ğŸŒŸ If you are using a simple dot layer, it is recommended to use`simple`replace`circle`for better performance.

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*iN0nTYRDd3AAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

```js
// Various shapes supported by shape
type IFillShape =
  | 'circle'
  | 'square'
  | 'hexagon'
  | 'triangle'
  | 'pentagon'
  | 'octogon'
  | 'hexagram'
  | 'rhombus'
  | 'vesica';

layer.shape('circle');
```

### shape(column: IColumn)

The point type is a vertical map pillar.

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*tvpvQZLv_xYAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

```js
type IColumn = 'cylinder' | 'triangleColumn' | 'hexagonColumn' | 'squareColumn';

layer.shape('cylinder');

layer.shape('triangleColumn');

layer.shape('hexagonColumn');

layer.shape('squareColumn');
```

### shape('simple')

`simple`Point sprites are special point layers that always face the camera and are limited in size by the device.

```js
layer.shape('simple');
```

### shape('dot')

`dot`Point sprites are special point layers that always face the camera and are limited in size by the device.

```js
layer.shape('dot');
```

### shape(field: string, 'text')

To draw text, the first parameter is the field in the value, and the second parameter is fixed to`text`ã€‚

```js
const point = new PointLayer()
  .source([{ lng: 120, lat: 30, name: 'test' }], {
    parser: 'json',
    x: 'lng',
    y: 'lat',
  })
  .shape('test', 'text');
```

### shape(iconName: string)

`shape`The value is`scene.addImage`The name of the globally added image resource.

```js
scene.addImage(
  '00',
  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',
);
scene.addImage(
  '01',
  'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg',
);
scene.addImage(
  '02',
  'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',
);
const imageLayer = new PointLayer()
  .source(
    [
      {
        longitude: 120,
        latitude: 30,
        name: 'name',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'longitude',
        y: 'latitude',
      },
    },
  )
  .shape('name', ['00', '01', '02']) // shape æ”¯æŒæ˜ å°„å†™æ³•
  .size(25);
scene.addLayer(imageLayer);

const imageLayer2 = new PointLayer()
  .source(
    [
      {
        longitude: 122,
        latitude: 30,
        name: 'name',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'longitude',
        y: 'latitude',
      },
    },
  )
  .shape('00') // shape ç›´æ¥ä¼ å€¼
  .size(25);
scene.addLayer(imageLayer2);
```

### shape('radar')

```js
const layer = new PointLayer()
  .source(
    [
      {
        lng: 120,
        lat: 30,
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'lng',
        y: 'lat',
      },
    },
  )
  .size(25)
  .color('#f00')
  .shape('radar')
  .animate(true);
```

ğŸŒŸ Radar chart needs to be set up`animate`for`true`
---
title: Size
order: 5
---

<embed src="@/docs/common/style.md"></embed>

`size` æ–¹æ³•ç”¨äºè®¾ç½®ç‚¹å›¾å±‚å›¾å½¢çš„å¤§å°ã€‚

### IPointSize: number ï½œ[number, number] | [number, number, number]

- size ç±»å‹ä¸º number åˆ™è¡¨ç¤º point çš„åŠå¾„
- size ç±»å‹å¯ä»¥ä¸º [number, number]ï½œ[number, number, number] è¡¨ç¤ºæŸ±å­çš„åŠå¾„å’Œé«˜åº¦

```javascript
pointLayer.size(1);
pointLayer.size([2, 10]); // æŸ±å­åŠå¾„ä¸º 2x2.é«˜ä¸º 10
pointLayer.size([2, 4, 10]); // æŸ±å­åŠå¾„ä¸º 2x4ï¼Œé«˜ä¸º 10
```

### size(width: IPointSize)

ç‚¹å›¾å±‚å¯ä»¥ç›´æ¥è®¾ç½®åŠå¾„ã€‚å›¾å±‚ä¸­æ‰€æœ‰çš„ç‚¹ä½¿ç”¨ä¸€ä¸ªå®½åº¦ã€‚

```js
layer.size(2);
```

### size(field: string)

ç‚¹å›¾å±‚çš„å®½åº¦å¯ä»¥æ ¹æ®å›¾å±‚æ¥å—çš„æ•°æ®å€¼è¿›è¡Œæ˜ å°„ï¼Œæ¥å—ä¼ å…¥æ•°æ®çš„å­—æ®µä½œä¸ºå‚æ•°ã€‚

```js
layer.source([
  {
    lng: 120,
    lat: 30,
    r: 2,
  },
]);
layer.size('r');
```

### size(field: string, domain: IPointSize[])

`size` æ–¹æ³•æ”¯æŒç®€å•çš„å€¼æ˜ å°„ï¼Œå°†æ ¹æ® `field` ä»ä¼ å…¥å›¾å±‚çš„æ•°æ®ä¸­æå–çš„å€¼æ˜ å°„åˆ° `domain` å€¼åŸŸä¸­ã€‚

```js
layer.size('type', [1, 2, 3]);
```

### size(field: string, callback: () => IPointSize )

`size` æ–¹æ³•æ”¯æŒå›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œå°†æ ¹æ® `field` ä½œä¸º `callback` æ–¹æ³•çš„å‚æ•°ï¼Œ`callback` æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºç‚¹å›¾å±‚å®é™…çš„åŠå¾„ã€‚

```js
layer.size('type', (value) => {
  switch (value) {
    case 'path':
      return 1;
    case 'road':
      return 2;
  }
});
```
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`style` æ–¹æ³•ç”¨äºé…åˆ¶å›¾å±‚çš„æ ·å¼ï¼Œç›¸åŒå›¾å±‚æ‹¥æœ‰ä¸åŒçš„ `shape` å›¾å½¢ï¼Œä¸åŒ `shape` çš„å›¾å±‚ `style` æ–¹æ³•æ¥å—ä¸åŒçš„å‚æ•°ã€‚

```js
layer.style({
  opacity: 0.5,
});
```

### common

é€šç”¨ `style` å‚æ•°ï¼Œæ‰€æœ‰å›¾å½¢éƒ½æ”¯æŒçš„å‚æ•°ã€‚

| style   | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| ------- | -------- | ------------ | ------ |
| opacity | `number` | å›¾å½¢çš„é€æ˜åº¦ | `1`    |

<embed src="@/docs/common/layer/style_encode.zh.md"></embed>


### 2D shape

`shape` ä¸ºå¹³é¢å›¾å½¢ã€å¦‚ä¸‰è§’å½¢ã€æ­£æ–¹ç­‰ã€‚

- [IFillShape](/api/point_layer/shape#shapefillshape-ifillshape)

| style         | ç±»å‹              |æ˜¯å¦æ”¯æŒæ•°æ®æ˜ å°„ | æè¿°                       | é»˜è®¤å€¼   |
| ------------- | ------------------|--------------- | -------------------------- | -------- |
| stroke        | `string`           |æ˜¯ | å›¾å½¢è¾¹æ¡†é¢œè‰²               | `#fff`   |
| strokeWidth   | `number`           |å¦ | å›¾å½¢è¾¹æ¡†å®½åº¦               | `0`      |
| strokeOpacity | `number`           |å¦ | å›¾å½¢è¾¹æ¡†é€æ˜åº¦             | `1`      |
| blur          | `number`           |å¦ | å›¾å½¢æ¨¡ç³ŠåŠå¾„               | `0`      |
| offsets       | `[number, number]` |æ˜¯ | ç‚¹åç§»                     | `[0, 0]` |
|rotation|`number`   | æ—‹è½¬è§’åº¦ | æ˜¯| `0` |
| raisingHeight | `number`           |å¦ | æŠ¬å‡é«˜åº¦                   | `0`      |
| heightfixed   | `boolean`          |å¦ | ç‚¹å¤§å°å•ä½                 | `pixel`  |


#### unit

- pixel é»˜è®¤å€¼
- meter å•ä½ä¸ºç±³

```js
type IUnit = 'pixel' | 'meter';
```

ç‚¹å›¾å±‚æ”¯æŒç­‰é¢ç§¯ç‚¹ï¼Œç‚¹å¤§å°çš„å•ä½æ˜¯ç±³ï¼ŒåŒæ ·é€šè¿‡ size æ–¹æ³•è®¾ç½®å¤§å°

```javascript
import { PointLayer } from '@antv/l7';

const layer = PointLayer()
  .source(data)
  .shape('circle')
  .size(100)
  .color('#f00')
  .style({
    unit: 'meter',
  });
```

ğŸŒŸ ä» v2.7.9 ç‰ˆæœ¬å¼€å§‹æ”¯æŒé«˜å¾·åœ°å›¾ã€é«˜å¾·åœ°å›¾ 2.0ã€Mapbox åœ°å›¾

### 3D column

`shape` ä¸º 3D æŸ±å›¾ã€‚

- [IColumn](/api/point_layer/shape#shapecolumn-icolumn)

| style       | ç±»å‹      | æè¿°                 | é»˜è®¤å€¼  |
| ----------- | --------- | -------------------- | ------- |
| depth       | `boolean` | å›¾å½¢æ˜¯å¦å¼€å¯æ·±åº¦æ£€æµ‹ | `true`  |
| pickLight   | `boolean` | æ‹¾å–é«˜äº®æ˜¯å¦è®¡ç®—å…‰ç…§ | `false` |
| lightEnable | `boolean` | é¢œè‰²æ˜¯å¦å‚ä¸å…‰ç…§è®¡ç®— | `true`  |
| heightfixed | `boolean` | æ˜¯å¦æ˜¯å›ºå®šé«˜åº¦       | `false` |

### 3D column linear

æŸ±å›¾æ”¯æŒé…ç½®æ¸å˜è‰²ï¼Œåœ¨é…ç½®æ¸å˜æ•ˆæœåä¼šè¦†ç›– `layer.color` æ–¹æ³•è®¾ç½®çš„é¢œè‰²ã€‚

| style         | ç±»å‹            | æè¿°             | é»˜è®¤å€¼ |
| ------------- | --------------- | ---------------- | ------ |
| sourceColor   | `color`         | æŸ±å­åº•éƒ¨é¢œè‰²     | `/`    |
| targetColor   | `color`         | æŸ±å­é¡¶éƒ¨é¢œè‰²     | `/`    |
| opacityLinear | `IOpcityLinear` | æŸ±å­çš„é€æ˜åº¦æ¸å˜ | `/`    |

#### color

```js
const color = `rgb(200, 100, 50)`;
const color2 = '#ff0';
```

#### opacityLinear

```js
type IDir = 'up' | 'down';
interface IOpcityLinear = {
  enable: boolean;
  dir: IDir;
}
```

### text

`shape` ä¸ºæ–‡å­—ã€‚

- [text](/api/point_layer/shape#shapefield-string-text)

| style            | ç±»å‹                                            | æè¿°                       |  æ˜¯å¦æ”¯æŒæ•°æ®æ˜ å°„     | é»˜è®¤å€¼       |
| ---------------- | ----------------------------------------------- | --------------------------| --------- | ------------ |
| opacity           | `number`                                        | é€æ˜åº¦               | æ˜¯ |`#fff`       |
| stroke           | `string`                                        | å›¾å½¢è¾¹æ¡†é¢œè‰²               | æ˜¯ |`#fff`       |
| strokeWidth      | `number`                                        | å›¾å½¢è¾¹æ¡†é¢œè‰²               | å¦  |`0`          |
| textOffset       | `[number, number]`                              | æ–‡å­—çš„åç§»                 | æ˜¯ |`[0, 0]`     |
| textAnchor       | [anchorType](/api/point_layer/style#anchortype) | æ–‡å­—å¯¹é½é”šç‚¹ `text`        | æ˜¯ |`center`     |
| spacing          | `number`                                        | æ–‡å­—é—´éš”                   | å¦|`2`          |
|rotation|`number`   | æ—‹è½¬è§’åº¦ | æ˜¯| `0`|
| padding          | `number`                                        | æ–‡å­—å†…è¾¹æ¡†å®½åº¦             | å¦|`2`          |
| halo             | `number`                                        | æ–‡å­—è¾¹ç¼˜å…‰æ™•å®½åº¦           | å¦|`0.5`        |
| gamma            | `number`                                        | æ–‡å­—çš„é¢œè‰²å‚æ•°             | å¦|`2`          |
| fontWeight       | `string`                                        | æ–‡å­—çš„å¤§å°                 | å¦|`400`        |
| fontFamily       | [font](/api/point_layer/style#font)             | å­—ä½“                       |å¦ |`sans-serif` |
| textAllowOverlap | `boolean`                                       | æ–‡å­—æ˜¯å¦å…è®¸è¦†ç›–           |å¦ |`false`      |
| raisingHeight    | `number`                                        | æŠ¬å‡é«˜åº¦                   | å¦|`0`          |
| heightfixed      | `boolean`                                       | æŠ¬å‡é«˜åº¦æ˜¯å¦éš `zoom` å˜åŒ– |å¦ |`false`      |



#### anchorType

æ–‡å­—å¯¹é½é”šç‚¹

```javascript
export enum anchorType {
  'CENTER' = 'center',
  'TOP' = 'top',
  'TOP-LEFT' = 'top-left',
  'TOP-RIGHT' = 'top-right',
  'BOTTOM' = 'bottom',
  'BOTTOM-LEFT' = 'bottom-left',
  'LEFT' = 'left',
  'RIGHT' = 'right',
}
```

#### font

css fontFamilyã€‚

```js
const font = 'sans-serif';
const font2 = 'Times New Roman';
```

### simple

`shape` ä¸ºç®€å•ç‚¹å›¾å½¢ï¼ˆç²¾çµ)ã€‚

- [simple](/api/point_layer/shape#shapesimple)

| style         | ç±»å‹               | æè¿°         | é»˜è®¤å€¼   |
| ------------- | ------------------ | ------------ | -------- |
| stroke        | `string`           | å›¾å½¢è¾¹æ¡†é¢œè‰² | `#fff`   |
| strokeWidth   | `number`           | å›¾å½¢è¾¹æ¡†é¢œè‰² | `0`      |
| strokeOpacity | `number`           | å›¾å½¢è¾¹æ¡†å®½åº¦ | `1`      |
| offsets       | `[number, number]` | ç‚¹åç§»       | `[0, 0]` |

### icon

`shape` ä¸ºå›¾æ ‡ç±»å‹ã€‚

- [icon](/api/point_layer/shape#shapeiconname-string)

| style         | ç±»å‹               | æè¿°                       |æ•°æ®æ˜ å°„| é»˜è®¤å€¼   |
| ------------- | ------------------ | -------------------------- |---- | -------- |
| offsets       | `[number, number]` | ç‚¹åç§»                     |å¦| `[0, 0]` |
| raisingHeight | `number`           | æŠ¬å‡é«˜åº¦                   | å¦|`0`      |
| heightfixed   | `boolean`          | æŠ¬å‡é«˜åº¦æ˜¯å¦éš `zoom` å˜åŒ– | å¦|`false`  |
|rotation|`number`   | æ—‹è½¬è§’åº¦ | æ˜¯| `0`|

#### rotation

å›¾æ ‡çš„æ—‹è½¬è§’åº¦ã€‚

```js
const imageLayer = new PointLayer({ layerType: 'fillImage' })
  .source(data)
  .shape('wind', (wind) => {
    if (wind === 'up') {
      return 'arrBlue';
    }
    return 'arrRed';
  })
  .size(15)
  .style({
    rotation: 0,
  });
```

### radar

`shape` ä¸ºé›·è¾¾å›¾ã€‚

- [radar](/api/point_layer/shape#shaperadar)

| style | ç±»å‹     | æè¿°             | é»˜è®¤å€¼ |
| ----- | -------- | ---------------- | ------ |
| speed | `number` | é›·è¾¾å›¾æ—‹è½¬çš„é€Ÿåº¦ | `1`    |
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`style`The method is used to configure the style of the layer. The same layer has different`shape`graphics, different`shape`layer`style`Methods accept different parameters.

```js
layer.style({
  opacity: 0.5,
});
```

### common

Universal`style`Parameters, parameters supported by all graphics.

| style   | type     | describe             | default value |
| ------- | -------- | -------------------- | ------------- |
| opacity | `number` | Graphic transparency | `1`           |

<embed src="@/docs/common/layer/style_encode.en.md"></embed>

### 2D shape

`shape`For plane figures, such as triangles, squares, etc.

* [IFillShape](/api/point_layer/shape#shapefillshape-ifillshape)

| style         | type               | Whether to support data mapping | describe                    | default value |
| ------------- | ------------------ | ------------------------------- | --------------------------- | ------------- |
| stroke        | `string`           | yes                             | Graphic border color        | `#fff`        |
| strokeWidth   | `number`           | no                              | Graphic border width        | `0`           |
| strokeOpacity | `number`           | no                              | Graphic border transparency | `1`           |
| blur          | `number`           | no                              | Graphic blur radius         | `0`           |
| offsets       | `[number, number]` | yes                             | point offset                | `[0, 0]`      |
| rotation      | `number`           | Rotation angle                  | yes                         | `0`           |
| raisingHeight | `number`           | no                              | Lifting height              | `0`           |
| heightfixed   | `boolean`          | no                              | Point size unit             | `pixel`       |

#### unit

* pixel default value
* meter unit is meter

```js
type IUnit = 'pixel' | 'meter';
```

The point layer supports equal-area points. The unit of point size is meters. The size is also set through the size method.

```javascript
import { PointLayer } from '@antv/l7';

const layer = PointLayer()
  .source(data)
  .shape('circle')
  .size(100)
  .color('#f00')
  .style({
    unit: 'meter',
  });
```

ğŸŒŸ Starting from version v2.7.9, Amap, Amap 2.0, and Mapbox maps are supported

### 3D column

`shape`is a 3D column chart.

* [IColumn](/api/point_layer/shape#shapecolumn-icolumn)

| style       | type      | describe                                              | default value |
| ----------- | --------- | ----------------------------------------------------- | ------------- |
| depth       | `boolean` | Whether depth detection is enabled for graphics       | `true`        |
| pickLight   | `boolean` | Whether to calculate lighting when picking highlights | `false`       |
| lightEnable | `boolean` | Whether color participates in lighting calculations   | `true`        |
| heightfixed | `boolean` | Is it a fixed height?                                 | `false`       |

### 3D column linear

The column chart supports configuring gradient colors, which will be overwritten after configuring the gradient effect.`layer.color`Method to set the color.

| style         | type            | describe                         | default value |
| ------------- | --------------- | -------------------------------- | ------------- |
| sourceColor   | `color`         | Column bottom color              | `/`           |
| targetColor   | `color`         | Column top color                 | `/`           |
| opacityLinear | `IOpcityLinear` | Transparency gradient of pillars | `/`           |

#### color

```js
const color = `rgb(200, 100, 50)`;
const color2 = '#ff0';
```

#### opacityLinear

```js
type IDir = 'up' | 'down';
interface IOpcityLinear = {
  enable: boolean;
  dir: IDir;
}
```

### text

`shape`for text.

* [text](/api/point_layer/shape#shapefield-string-text)

| style            | type                                            | describe                                   | Whether to support data mapping | default value |
| ---------------- | ----------------------------------------------- | ------------------------------------------ | ------------------------------- | ------------- |
| opacity          | `number`                                        | transparency                               | yes                             | `#fff`        |
| stroke           | `string`                                        | Graphic border color                       | yes                             | `#fff`        |
| strokeWidth      | `number`                                        | Graphic border color                       | no                              | `0`           |
| textOffset       | `[number, number]`                              | text offset                                | yes                             | `[0, 0]`      |
| textAnchor       | [anchorType](/api/point_layer/style#anchortype) | text alignment anchor`text`                | yes                             | `center`      |
| spacing          | `number`                                        | text spacing                               | no                              | `2`           |
| rotation         | `number`                                        | Rotation angle                             | yes                             | `0`           |
| padding          | `number`                                        | Text inner border width                    | no                              | `2`           |
| halo             | `number`                                        | Text edge glow width                       | no                              | `0.5`         |
| gamma            | `number`                                        | Text color parameters                      | no                              | `2`           |
| fontWeight       | `string`                                        | text size                                  | no                              | `400`         |
| fontFamily       | [font](/api/point_layer/style#font)             | font                                       | no                              | `sans-serif`  |
| textAllowOverlap | `boolean`                                       | Whether text is allowed to be overwritten  | no                              | `false`       |
| raisingHeight    | `number`                                        | Lifting height                             | no                              | `0`           |
| heightfixed      | `boolean`                                       | Does the lifting height vary?`zoom`Variety | no                              | `false`       |

#### anchorType

text alignment anchor

```javascript
export enum anchorType {
  'CENTER' = 'center',
  'TOP' = 'top',
  'TOP-LEFT' = 'top-left',
  'TOP-RIGHT' = 'top-right',
  'BOTTOM' = 'bottom',
  'BOTTOM-LEFT' = 'bottom-left',
  'LEFT' = 'left',
  'RIGHT' = 'right',
}
```

#### font

css font Familyã€‚

```js
const font = 'sans-serif';
const font2 = 'Times New Roman';
```

### simple

`shape`For simple point graphics (elves).

* [simple](/api/point_layer/shape#shapesimple)

| style         | type               | describe             | default value |
| ------------- | ------------------ | -------------------- | ------------- |
| stroke        | `string`           | Graphic border color | `#fff`        |
| strokeWidth   | `number`           | Graphic border color | `0`           |
| strokeOpacity | `number`           | Graphic border width | `1`           |
| offsets       | `[number, number]` | point offset         | `[0, 0]`      |

### icon

`shape`is the icon type.

* [icon](/api/point_layer/shape#shapeiconname-string)

| style         | type               | describe                                   | data mapping | default value |
| ------------- | ------------------ | ------------------------------------------ | ------------ | ------------- |
| offsets       | `[number, number]` | point offset                               | no           | `[0, 0]`      |
| raisingHeight | `number`           | Lifting height                             | no           | `0`           |
| heightfixed   | `boolean`          | Does the lifting height vary?`zoom`Variety | no           | `false`       |
| rotation      | `number`           | Rotation angle                             | yes          | `0`           |

#### rotation

The rotation angle of the icon.

```js
const imageLayer = new PointLayer({ layerType: 'fillImage' })
  .source(data)
  .shape('wind', (wind) => {
    if (wind === 'up') {
      return 'arrBlue';
    }
    return 'arrRed';
  })
  .size(15)
  .style({
    rotation: 0,
  });
```

### radar

`shape`is a radar chart.

* [radar](/api/point_layer/shape#shaperadar)

| style | type     | describe                                   | default value |
| ----- | -------- | ------------------------------------------ | ------------- |
| speed | `number` | The speed at which the radar chart rotates | `1`           |
---
title: PointLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

ç‚¹å›¾å±‚ä¸€ç»„ç»çº¬åº¦æ•°æ®æ¥æè¿°ä¸€ç³»åˆ—ç‚¹åœ¨åœ°å›¾ä¸Šçš„ä½ç½®ï¼Œè¿™äº›ç‚¹å¯ä»¥æ˜¯æ™®é€šçš„åœ†ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡å­—ã€å›¾æ ‡ã€æŸ±å­ç­‰ã€‚  
ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½® `shape` å‚æ•°æ¥é€‰æ‹©ç‚¹çš„ç±»å‹ï¼ŒåŒæ—¶é€šè¿‡ `style`ã€`size`ã€`color` æ–¹æ³•è°ƒæ•´ç‚¹çš„æ ·å¼ã€‚

```javascript
import { PointLayer } from '@antv/l7';

const layer = PointLayer({
  zIndex: 2,
})
  .source(data.list, {
    type: 'array',
    x: 'j',
    y: 'w',
  })
  .shape('cylinder')
  .size('t', (level) => {
    return [4, 4, level + 40];
  })
  .color('t', [
    '#002466',
    '#105CB3',
    '#2894E0',
    '#CFF6FF',
    '#FFF5B8',
    '#FFAB5C',
    '#F27049',
    '#730D1C',
  ]);
```
---
title: Animate
order: 7
---

<embed src="@/docs/common/style.md"></embed>

Click on the layer to turn it on`animate`The basis points after the method are`2D`Point is still`3D`Points support two different animations: water wave points and growth animation.
Click on the layer to turn it on`animate`After the method, a special water wave pattern will be obtained. The layer is made up of rings that spread outward.

<div>
  <div style="width:80%;float:left; margin: 16px;">
    <img style="float:left;" width="50%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*pcp3RKnNK1oAAAAAAAAAAAAAARQnAQ'>
    <img style="float:left;" width="50%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*l-SUQ5nU6n8AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### water wave point

#### animate(boolean | IAnimateOption)

`animate`The method supports Boolean and object passing values.

```javascript
layer.animate(true);

layer.animate({
  enable: true,
});
```

#### IAnimateOption

```javascript
interface IAnimateOption {
  enable: boolean;
  speed: number;
  rings: number;
}
```

### growth animation

#### animate(boolean | IAnimateOption)

`animate`The method supports Boolean and object passing values.

```javascript
animate(true)
animate(false)

animate(animateOptions)

interface IAnimateOptions: {
  enable: boolean;
  speed?: number = 0.01;
  repeat?: number = 1;
}
```

```
#### IAnimateOptions



Parameters of `animate` method:

- `enable` Whether to enable animation, Boolean value, default is `false`.
- `speed` Growth speed, numerical value, default is `0.01`.
- `repeat` The number of times to play the growth animation, numerical value, the default is `1`.
```
---
title: Animate
order: 7
---

<embed src="@/docs/common/style.md"></embed>

ç‚¹å›¾å±‚åœ¨å¼€å¯ `animate` æ–¹æ³•åæ ¹æ®ç‚¹æ˜¯ `2D` ç‚¹è¿˜æ˜¯ `3D` ç‚¹æ”¯æŒä¸¤ç§ä¸åŒçš„åŠ¨ç”»ï¼šæ°´æ³¢ç‚¹å’Œç”Ÿé•¿åŠ¨ç”»ã€‚
ç‚¹å›¾å±‚åœ¨å¼€å¯ `animate` æ–¹æ³•åä¼šå¾—åˆ°ç‰¹æ®Šçš„æ°´æ³¢å›¾å½¢ã€‚å›¾å±‚ç”±ä¸€åœˆåœˆå‘å¤–æ‰©æ•£çš„åœ†ç¯æ„æˆã€‚

<div>
  <div style="width:80%;float:left; margin: 16px;">
    <img style="float:left;" width="50%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*pcp3RKnNK1oAAAAAAAAAAAAAARQnAQ'>
    <img style="float:left;" width="50%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*l-SUQ5nU6n8AAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### æ°´æ³¢ç‚¹

#### animate(boolean | IAnimateOption)

`animate` æ–¹æ³•æ”¯æŒå¸ƒå°”å€¼å’Œå¯¹è±¡ä¼ å€¼ã€‚

```javascript
layer.animate(true);

layer.animate({
  enable: true,
});
```

#### IAnimateOption

```javascript
interface IAnimateOption {
  enable: boolean;
  speed: number;
  rings: number;
}
```

### ç”Ÿé•¿åŠ¨ç”»

#### animate(boolean | IAnimateOption)

`animate` æ–¹æ³•æ”¯æŒå¸ƒå°”å€¼å’Œå¯¹è±¡ä¼ å€¼ã€‚

```javascript
animate(true)
animate(false)

animate(animateOptions)

interface IAnimateOptions: {
  enable: boolean;
  speed?: number = 0.01;
  repeat?: number = 1;
}
```

```
#### IAnimateOptions



`animate` æ–¹æ³•çš„å‚æ•°ï¼š

- `enable` æ˜¯å¦å¼€å¯åŠ¨ç”»ï¼Œå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸º `false`ã€‚
- `speed` ç”Ÿé•¿é€Ÿåº¦ï¼Œæ•°å€¼ï¼Œé»˜è®¤ä¸º `0.01`ã€‚
- `repeat` ç”Ÿé•¿åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°ï¼Œæ•°å€¼ï¼Œé»˜è®¤ä¸º `1`ã€‚
```
---
title: PointLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

The point layer is a set of longitude and latitude data to describe the location of a series of points on the map. These points can be ordinary dots, or text, icons, pillars, etc.\
Users can configure`shape`parameters to select the type of point, and pass`style`ã€`size`ã€`color`Method to adjust the point style.

```javascript
import { PointLayer } from '@antv/l7';

const layer = PointLayer({
  zIndex: 2,
})
  .source(data.list, {
    type: 'array',
    x: 'j',
    y: 'w',
  })
  .shape('cylinder')
  .size('t', (level) => {
    return [4, 4, level + 40];
  })
  .color('t', [
    '#002466',
    '#105CB3',
    '#2894E0',
    '#CFF6FF',
    '#FFF5B8',
    '#FFAB5C',
    '#F27049',
    '#730D1C',
  ]);
```
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.zh.md"></embed>
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.en.md"></embed>
---
title: Color
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/color.zh.md"></embed>
---
title: Color
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/color.en.md"></embed>
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.zh.md"></embed>
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/source.zh.md"></embed>

### GeoJSON

```js
// ä¼ å…¥ GeoJSON ç±»å‹æ•°æ® *** L7 é»˜è®¤æ”¯æŒï¼Œä¸éœ€è¦ parser è§£æ
var data = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {},
          geometry: {
            type: 'Polygon',
            coordinates: [
              [120, 30],
              ...
            ]
          },
        },
      ],
    };

var layer = new PointLayer()
.source(data)
```

### CSV

```js
// ä¼ å…¥ txt ç±»å‹æ•°æ®
var data = `from,to,value,type,lng1,lat1,lng2,lat2
é·å¤æƒƒ,å¨´ç–¯ã‚¿,6.91,move_out,91.111891,29.662557,97.342625,37.373799
é·å¤æƒƒ,é´æ„°å…˜,4.79,move_out,91.111891,29.662557,104.067923,30.679943
é·å¤æƒƒ,é–²å¶…ç°¡,2.41,move_out,91.111891,29.662557,106.530635,29.544606
é·å¤æƒƒ,é–æ¤¾å«,2.05,move_out,91.111891,29.662557,116.395645,39.929986
...`;

var layer = new PointLayer().source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
  },
});
```

### JSON

```js
// ä¼ å…¥ JSON ç±»å‹çš„æ•°æ®
var data = [
  {
    lng: 120,
    lat: 30
  },
  ...
]

var layer = new PointLayer()
.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  }
})
```
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/source.en.md"></embed>

### GeoJSON

```js
// Pass in GeoJSON type data *** L7 supports it by default and does not require parser analysis
var data = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {},
          geometry: {
            type: 'Polygon',
            coordinates: [
              [120, 30],
              ...
            ]
          },
        },
      ],
    };

var layer = new PointLayer()
.source(data)
```

### CSV

```js
// Pass in txt type data
var data = `from,to,value,type,lng1,lat1,lng2,lat2
é·å¤æƒƒ,ä»™é­”ã‚¿,6.91,move_out,91.111891,29.662557,97.342625,37.373799
é·åæƒƒ,é´æ„°å˜˜,4.79,move_out,91.111891,29.662557,104.067923,30.679943
é·åæƒƒ,ç·å¤æƒƒ,æœˆå……ç»,2.41,move_out,91.111891,29.662557,106.530635,29.544606
é·åæƒƒ,é–æ¤¾han,2.05,move_out,91.111891,29.662557,116.395645,39.929986
...`;

var layer = new PointLayer().source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
  },
});
```

### JSON

```js
// Pass in JSON type data
var data = [
  {
    lng: 120,
    lat: 30
  },
  ...
]

var layer = new PointLayer()
.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  }
})
```
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.en.md"></embed>
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape` æ–¹æ³•ç”¨äºæŒ‡å®šçº¿å›¾å±‚ç»˜åˆ¶ä»€ä¹ˆæ ·çš„çº¿ã€‚

### shape('line')

ç»˜åˆ¶è·¯å¾„å›¾ã€‚

`line` è·¯å¾„æ˜¯æœ€æ™®é€šçš„çº¿å›¾å±‚ï¼Œæ”¯æŒé…ç½®å®½åº¦å’Œé«˜åº¦ï¼Œæ”¯æŒé…ç½®çº¹ç†å’ŒåŠ¨ç”»ã€‚

```js
layer.shape('line');
```

### shape('arc')

`arc` å¼§çº¿é€šè¿‡è´å¡å°”æ›²çº¿ç®—æ³•è®¡ç®—å‡ºå¼§çº¿çš„çš„è·¯å¾„ï¼Œæ”¯æŒé…ç½®çº¹ç†å’ŒåŠ¨ç”»ã€‚

```js
layer.shape('arc');
```

### shape('arc3d')

`arc3d` 3d å¼§çº¿æ˜¯åœ¨å‚ç›´åœ°å›¾ä¸¤ç‚¹ä¹‹é—´çš„å¼§çº¿ï¼Œå…·æœ‰é«˜åº¦ï¼Œæ”¯æŒé…ç½®çº¹ç†å’ŒåŠ¨ç”»ã€‚

```js
layer.shape('arc3d');
```

### shape('greatcircle')

`greatcircle` å¤§åœ†èˆªçº¿æ˜¯åœ°å›¾ä¸¤ä¸ªç‚¹æœ€è¿‘è·ç¦»çš„è¿çº¿ï¼Œæ”¯æŒé…ç½®çº¹ç†å’ŒåŠ¨ç”»ã€‚

```js
layer.shape('greatcircle');
```

### shape('wall')

`wall` æ˜¯å‚ç›´åœ°å›¾çš„å›´å¢™ï¼Œæ”¯æŒé…ç½®é«˜åº¦ï¼Œçº¹ç†å’ŒåŠ¨ç”»ã€‚

```js
layer.shape('wall');
```

### shape('simple')

`simple` çº¿å›¾å±‚ï¼Œå®½åº¦å§‹ç»ˆä¸º `1px`ã€‚

```js
layer.shape('simple');
```

### shape('flowline')

`flowline` æµå‘å›¾, 2.17 ç‰ˆæœ¬æ–°å¢---
title: Size
order: 5
---

<embed src="@/docs/common/style.md"></embed>

line layer`size`Method can set the width and height of the line.

### ILineSize: number | \[number, number]

* If the size type is number, it represents the width of the line
* The size type is \[number, number] representing width and height respectively.

```javascript
lineLayer.size(1); // The width of the line is 1
lineLayer.size([1, 2]); // Width is 1, height is 2
```

### size(width: ILineSize)

The width value of the line layer can be set directly. All lines in the layer use one width.

```js
layer.size(2);
```

### size(field: string)

The width of the line layer can be mapped based on the data values â€‹â€‹accepted by the layer, accepting fields of incoming data as arguments.

```js
layer.source({
  type: 'Feature',
  properties: {
    lineSize: 2,
  },
  geometry: {
    type: 'LineString',
    coordinates: [
      [119.988511, 30.269614],
      [119.9851, 30.269323],
      [119.99271, 30.22088],
    ],
  },
});
layer.size('lineSize');
```

### size(field: string, domain: ILineSize\[])

`size`Method supports simple value mapping and will be based on`field`The values â€‹â€‹extracted from the data passed into the layer are mapped to`domain`in the value range.

```js
layer.size('type', [1, 2, 3]);
```

### size(field: string, callback: () => ILineSize )

`size`The method supports the writing method of callback function, which will be based on`field`as`callback`method parameters,`callback`The return value of the method is the actual width and height of the line layer.

```js
layer.size('type', (value) => {
  switch (value) {
    case 'path':
      return 1;
    case 'road':
      return 2;
  }
});
```
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape`Method used to specify what kind of lines the line layer draws.

### shape('line')

Draw a path map.

`line`Path is the most common line layer, supporting configuration of width and height, texture and animation.

```js
layer.shape('line');
```

### shape('arc')

`arc`The arc calculates the path of the arc through the Bezier curve algorithm and supports configuring textures and animations.

```js
layer.shape('arc');
```

### shape('arc3d')

`arc3d`A 3d arc is an arc between two vertical map points, has a height, and supports configurable textures and animations.

```js
layer.shape('arc3d');
```

### shape('greatcircle')

`greatcircle`The great circle route is the closest connection between two points on the map, and supports the configuration of textures and animations.

```js
layer.shape('greatcircle');
```

### shape('wall')

`wall`It is a vertical map wall that supports configuration of height, texture and animation.

```js
layer.shape('wall');
```

### shape('simple')

`simple`Line layer, width is always`1px`ã€‚

```js
layer.shape('simple');
```

### shape('flowline')

`flowline`Flow diagram, new in version 2.17
---
title: Size
order: 5
---

<embed src="@/docs/common/style.md"></embed>

çº¿å›¾å±‚çš„ `size` æ–¹æ³•å¯ä»¥è®¾ç½®çº¿çš„å®½åº¦å’Œé«˜åº¦ã€‚

### ILineSize: number | [number, number]

- size ç±»å‹ä¸º number åˆ™è¡¨ç¤º line çš„å®½åº¦
- size ç±»å‹ä¸º [number , number] åˆ†åˆ«è¡¨ç¤ºå®½åº¦å’Œé«˜åº¦

```javascript
lineLayer.size(1); // çº¿çš„å®½åº¦ä¸º 1
lineLayer.size([1, 2]); // å®½åº¦ä¸º1ï¼Œé«˜åº¦2
```

### size(width: ILineSize)

çº¿å›¾å±‚å¯ä»¥ç›´æ¥è®¾ç½®å®½åº¦å€¼ã€‚å›¾å±‚ä¸­æ‰€æœ‰çš„çº¿ä½¿ç”¨ä¸€ä¸ªå®½åº¦ã€‚

```js
layer.size(2);
```

### size(field: string)

çº¿å›¾å±‚çš„å®½åº¦å¯ä»¥æ ¹æ®å›¾å±‚æ¥å—çš„æ•°æ®å€¼è¿›è¡Œæ˜ å°„ï¼Œæ¥å—ä¼ å…¥æ•°æ®çš„å­—æ®µä½œä¸ºå‚æ•°ã€‚

```js
layer.source({
  type: 'Feature',
  properties: {
    lineSize: 2,
  },
  geometry: {
    type: 'LineString',
    coordinates: [
      [119.988511, 30.269614],
      [119.9851, 30.269323],
      [119.99271, 30.22088],
    ],
  },
});
layer.size('lineSize');
```

### size(field: string, domain: ILineSize[])

`size` æ–¹æ³•æ”¯æŒç®€å•çš„å€¼æ˜ å°„ï¼Œå°†æ ¹æ® `field` ä»ä¼ å…¥å›¾å±‚çš„æ•°æ®ä¸­æå–çš„å€¼æ˜ å°„åˆ° `domain` å€¼åŸŸä¸­ã€‚

```js
layer.size('type', [1, 2, 3]);
```

### size(field: string, callback: () => ILineSize )

`size` æ–¹æ³•æ”¯æŒå›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œå°†æ ¹æ® `field` ä½œä¸º `callback` æ–¹æ³•çš„å‚æ•°ï¼Œ`callback` æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºçº¿å›¾å±‚å®é™…çš„å®½é«˜ã€‚

```js
layer.size('type', (value) => {
  switch (value) {
    case 'path':
      return 1;
    case 'road':
      return 2;
  }
});
```
---
title: Style
order: 8
---

<embed src="@/docs/common/style.md"></embed>

`style` æ–¹æ³•ç”¨äºé…åˆ¶å›¾å±‚çš„æ ·å¼ï¼Œç›¸åŒå›¾å±‚æ‹¥æœ‰ä¸åŒçš„ `shape` å›¾å½¢ï¼Œä¸åŒ `shape` çš„å›¾å±‚ `style` æ–¹æ³•æ¥å—ä¸åŒçš„å‚æ•°ã€‚

```js
layer.style({
  opacity: 0.5,
});
```

### common

é€šç”¨ `style` å‚æ•°ï¼Œæ‰€æœ‰å›¾å½¢éƒ½æ”¯æŒçš„å‚æ•°ã€‚

| style   | ç±»å‹     | æè¿°      | æ•°æ®æ˜ å°„  | é»˜è®¤å€¼ |
| ------- | -------- | ---------|--- | ------ |
| opacity | `number` | å›¾å½¢çš„é€æ˜åº¦| æ”¯æŒ | `1`    |

### line

`shape` ä¸º `line` çš„æ™®é€šçº¿å›¾å±‚ã€‚

- [line](/api/line_layer/shape#shapeline)
- [æ”¯æŒæ¸å˜](/api/line_layer/style#linear)
- [æ”¯æŒçº¹ç†](/api/line_layer/style#texture)
- [æ”¯æŒè™šçº¿](/api/line_layer/style#dash)

| style         | ç±»å‹                       | æè¿°          |æ”¯æŒæ•°æ®æ˜ å°„             | é»˜è®¤å€¼      |
| ------------- | -------------------------- | ---------------|----------- | ----------- |
| stroke   | `string`                   | å›¾å½¢è¾¹æ¡†é¢œè‰²          |   æ˜¯  | `#fff`      |
| strokeWidth   | `number`                   | å›¾å½¢è¾¹æ¡†åŠå¾„      |   å¦      | `0`         |
| blur          | `[number, number, number]` | å›¾å½¢æ¨¡ç³Šåˆ†å¸ƒ        |   å¦       | `[1, 1, 1]` |
| raisingHeight | `number`                   | æŠ¬å‡é«˜åº¦            |    å¦      | `0`         |
| heightfixed   | `boolean`                  | æŠ¬å‡é«˜åº¦æ˜¯å¦éš `zoom` å˜åŒ– | å¦  | `false`     |

### arc

`shape` ä¸º `arc` å¹³é¢çš„å¼§çº¿ã€‚

- [arc](/api/line_layer/shape#shapearc)
- [æ”¯æŒæ¸å˜](/api/line_layer/style#linear)
- [æ”¯æŒçº¹ç†](/api/line_layer/style#texture)
- [æ”¯æŒè™šçº¿](/api/line_layer/style#dash)

| style         | ç±»å‹     | æè¿°             |æ”¯æŒæ•°æ®æ˜ å°„| é»˜è®¤å€¼  |
| ------------- | -------- | -----------------|----------------- | ------- |
| segmentNumber | `number` | å¼§çº¿åˆ†æ®µï¼Œåˆ†æ®µè¶Šå¤šè¶Šå¹³æ»‘ï¼Œæ¶ˆè€—è¶Šå¤§ |å¦| `30`    |
| opacity | `number` | é€æ˜åº¦ï¼Œæ”¯æŒæ•°æ®æ˜ å°„ |æ˜¯| `1`   |
| thetaOffset   | `number` | å¼§çº¿çš„å¼§åº¦å‚æ•°            |   æ˜¯   | `0.314` |

### arc3d

`shape` ä¸º `arc3d` çš„å¼§çº¿å›¾å±‚ã€‚

- [arc3d](/api/line_layer/shape#shapearc3d)
- [æ”¯æŒæ¸å˜](/api/line_layer/style#linear)
- [æ”¯æŒçº¹ç†](/api/line_layer/style#texture)
- [æ”¯æŒè™šçº¿](/api/line_layer/style#dash)

| style         | ç±»å‹     | æè¿°                  |æ”¯æŒæ•°æ®æ˜ å°„             | é»˜è®¤å€¼ |
| ------------- | -------- | ---------------------|------------- | ------ |
| opacity | `number` | é€æ˜åº¦ï¼Œæ”¯æŒæ•°æ®æ˜ å°„ |æ˜¯| `1`   |
| segmentNumber | `number` | å¼§çº¿åˆ†æ®µï¼Œåˆ†æ®µè¶Šå¤šè¶Šå¹³æ»‘ï¼Œæ¶ˆè€—è¶Šå¤§|å¦ | `30`   |
| thetaOffset   | `number` | å¼§çº¿çš„å¼§åº¦å‚æ•°            |   æ˜¯   | `1` |

### greatcircle

`shape` ä¸ºå¤§åœ†å¼§çº¿å›¾å±‚ã€‚

- [greatcircle](/api/line_layer/shape#shapegreatcircle)
- [æ”¯æŒæ¸å˜](/api/line_layer/style#linear)
- [æ”¯æŒçº¹ç†](/api/line_layer/style#texture)
- [æ”¯æŒè™šçº¿](/api/line_layer/style#dash)

| style         | ç±»å‹     | æè¿°           |      æ”¯æŒæ•°æ®æ˜ å°„              | é»˜è®¤å€¼ |
| ------------- | -------- | ---------------|------------------- | ------ |
| opacity | `number` | é€æ˜åº¦ï¼Œæ”¯æŒæ•°æ®æ˜ å°„ |æ˜¯| `1`   |
| segmentNumber | `number` | å¼§çº¿åˆ†æ®µï¼Œåˆ†æ®µè¶Šå¤šè¶Šå¹³æ»‘ï¼Œæ¶ˆè€—è¶Šå¤§|å¦ | `30`   |

### flowline

| style         | ç±»å‹     | æè¿°           |æ”¯æŒæ•°æ®æ˜ å°„                      | é»˜è®¤å€¼ |
| ------------- | -------- | -------------|--------------------- | ------ |
| opacity | `number` | é€æ˜åº¦ï¼Œæ”¯æŒæ•°æ®æ˜ å°„ |æ˜¯| `1`   |
| strokeOpacity | `number` |æè¾¹é€æ˜åº¦ |å¦| `30`   |
| stroke | `number` | å¼§çº¿åˆ†æ®µï¼Œåˆ†æ®µè¶Šå¤šè¶Šå¹³æ»‘ï¼Œæ¶ˆè€—è¶Šå¤§ |æ˜¯| `#000`   |
| strokeWidth | `number` | æè¾¹å®½åº¦ | `1` |å¦  |
| gapWidth | `number` | ä¸åŒæ–¹å‘ä¸¤æ¡çº¿é—´è· | `2` |å¦  |
| offsets | `[number,number]` | ä¸¤ç«¯åç§»é‡ï¼Œæ”¯æŒæ•°æ®æ˜ å°„ |æ˜¯| `[0,0]`   |

flowline opacity å’Œ offsets æ”¯æŒæ•°æ®æ˜ å°„ï¼Œæ•°æ®é©±åŠ¨è®¾ç½®æ•°æ®å¤§å°

#### opacity
```ts
layer.style({
  opacity: {
    field: 'count', // æ˜ å°„å­—æ®µ
    value: [0.2,0.4,0.6,0.8], // æ˜ å°„å€¼,æ”¯æŒå›è°ƒå‡½æ•°ï¼Œæ”¯æŒè®¾ç½®scale
  }

// field å’Œ value  ç­‰åŒäº layer.color('count',[0.2,0.4,0.6,0.8])
```
#### offsets

```ts
layer.style({
  offsets:{
     field: 'count',
     values:() => {
      return [10 + Math.random()*20, 10 + Math.random()*20]
     }
})

```

### wall

`shape` ä¸º `wall` åœ°ç†å›´æ å¼§çº¿å›¾å±‚ã€‚

- [wall](/api/line_layer/shape#shapewall)
- [æ”¯æŒæ¸å˜](/api/line_layer/style#linear)
- [æ”¯æŒçº¹ç†](/api/line_layer/style#texture)

### simple

`shape` ä¸º `simple` ç®€å•çº¿å›¾å±‚ã€‚

- [simple](/api/line_layer/shape#shapesimple)
- [æ”¯æŒæ¸å˜](/api/line_layer/style#linear)


### linear

- lineã€arcã€arc3dã€greatcircleã€wallã€simple

çº¿å›¾å±‚æ”¯æŒé…ç½®æ¸å˜æ•ˆæœï¼Œåœ¨é…ç½®æ¸å˜æ•ˆæœåä¼šè¦†ç›– `layer.color` æ–¹æ³•è®¾ç½®çš„é¢œè‰²ã€‚

| style       | ç±»å‹         | æè¿°       | é»˜è®¤å€¼     |
| ----------- | ------------ | ---------- | ---------- |
| sourceColor | `IColor`     | çº¿èµ·å§‹é¢œè‰² | `/`        |
| targetColor | `IColor`     | çº¿ç»“å°¾é¢œè‰² | `/`        |
| linearDir   | `ILinearDir` | çº¿æ¸å˜æ–¹å‘ | `vertical` |

#### IColor

```js
const color = `rgb(200, 100, 50)`;
const color2 = '#ff0';
```

#### ILinearDir

- vertical çºµå‘ï¼ˆæ²¿çº¿æ–¹å‘ï¼‰
- horizontal æ¨ªå‘

```js
type ILinearDir = 'vertical' | 'horizontal';
```

### texture

- lineã€arcã€arc3dã€greatcircle

çº¿å›¾å±‚æ”¯æŒçº¹ç†ä»¥åŠçº¹ç†åŠ¨ç”»ï¼Œçº¹ç†æ ·å¼æœ‰è‡ªå·±çš„å‚æ•°ã€‚

| style        | ç±»å‹            | æè¿°                           | é»˜è®¤å€¼   |
| ------------ | --------------- | ------------------------------ | -------- |
| lineTexture  | `boolean`       | æ—¶å€™å¼€å¯çº¹ç†èƒ½åŠ›               | `false`  |
| textureBlend | `ITextureBlend` | çº¹ç†æ··åˆæ–¹å¼                   | `normal` |
| iconStep     | `number`        | çº¹ç†è´´å›¾åœ¨çº¿å›¾å±‚ä¸Šé¢æ’å¸ƒçš„é—´éš” | `100`    |

#### ITextureBlend

çº¿å›¾å±‚çš„çº¹ç†åœ¨å’Œçº¿æœ¬èº«çš„é¢œè‰²è¿›è¡Œèåˆçš„æ—¶å€™æ”¯æŒä¸¤ç§ï¼Œ`normal` å’Œ `replace`ã€‚

- normal çº¹ç†å’Œçº¿é¢œè‰²æ··åˆ
- replace ä½¿ç”¨çº¹ç†æ›¿æ¢çº¿é¢œè‰²

```js
type ITextureBlend = 'normal' | 'replace';
```

#### texture advance

âœ¨ animate  
å½“çº¿å›¾å±‚ (shape ä¸º arc/arc3d) å¼€å¯åŠ¨ç”»æ¨¡å¼çš„æ—¶å€™ï¼Œçº¹ç†åœ¨çº¿å›¾å±‚ä¸Šçš„åˆ†å¸ƒè¿˜ä¼šå’Œ animate çš„å‚æ•°ç›¸å…³

çº¿å›¾å±‚ä¸Šæ’åˆ—çš„çº¹ç†çš„æ•°é‡å¤§è‡´ä¸º duration/interval

```javascript
.animate({
    duration: 1,
    interval: 0.2,
    trailLength: 0.1
});

// æ­¤æ—¶ çº¹ç†è´´å›¾æ•°é‡ä¸º  duration / interval = 5
```

âœ¨ textureBlend å‚æ•°  
é€šè¿‡æ§åˆ¶ style æ–¹æ³•ä¸­çš„ textureBlend å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶çº¹ç†å›¾å±‚å’Œçº¿å›¾å±‚çš„æ··åˆæƒ…å†µ

- normal
- replace

```javascript
.style({
    lineTexture: true, // å¼€å¯çº¿çš„è´´å›¾åŠŸèƒ½
    iconStep: 30, // è®¾ç½®è´´å›¾çº¹ç†çš„é—´è·
    textureBlend: 'replace', // è®¾ç½®çº¹ç†æ··åˆæ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º normalï¼Œå¯é€‰å€¼æœ‰ normal/replace ä¸¤ç§
  });

```

### dash

- lineã€arcã€arc3dã€greatcircle

çº¿å›¾å±‚æ”¯æŒé…ç½®è™šçº¿ï¼Œè™šçº¿æœ‰è‡ªå·±é¢å¤–çš„æ ·å¼å‚æ•°ã€‚

```js
layer.style({
    lineType: 'dash'
    dashArray: [5, 5]
})
```

| style     | ç±»å‹         | æè¿°       | é»˜è®¤å€¼  |
| --------- | ------------ | ---------- | ------- |
| lineType  | `ILineType`  | çº¿çš„ç±»åˆ«   | `solid` |
| dashArray | `IDashArray` | è™šçº¿çš„é—´éš” | `/`     |

#### ILineType

- solid å®çº¿
- dash è™šçº¿

#### IDashArray

`dashArray` åªæœ‰åœ¨ `ILineType` ä¸º `solid` çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆã€‚

```js
// len1 å®çº¿é•¿åº¦ len2 é—´éš”é•¿åº¦
type IDashArray = [len1: number, len2: number]
```
---
title: Style
order: 8
---

<embed src="@/docs/common/style.md"></embed>

`style`The method is used to configure the style of the layer. The same layer has different`shape`graphics, different`shape`layer`style`Methods accept different parameters.

```js
layer.style({
  opacity: 0.5,
});
```

### common

Universal`style`Parameters, parameters supported by all graphics.

| style   | type     | describe             | default value |
| ------- | -------- | -------------------- | ------------- |
| opacity | `number` | Graphic transparency | `1`           |

### line

`shape`for`line`normal line layer.

* [line](/api/line_layer/shape#shapeline)
* [Support gradient](/api/line_layer/style#linear)
* [Supports textures](/api/line_layer/style#texture)
* [Support dashed lines](/api/line_layer/style#dash)
* [Support arrows](/api/line_layer/style#arrow)

| style         | type                       | describe                                   | default value |
| ------------- | -------------------------- | ------------------------------------------ | ------------- |
| borderColor   | `string`                   | Graphic border color                       | `#fff`        |
| borderWidth   | `number`                   | Graphic border radius                      | `0`           |
| blur          | `[number, number, number]` | Graphic fuzzy distribution                 | `[1, 1, 1]`   |
| raisingHeight | `number`                   | Lifting height                             | `0`           |
| heightfixed   | `boolean`                  | Does the lifting height vary?`zoom`Variety | `false`       |

### arc

`shape`for`arc`Plane arc.

* [arc](/api/line_layer/shape#shapearc)
* [Support gradient](/api/line_layer/style#linear)
* [Supports textures](/api/line_layer/style#texture)
* [Support dashed lines](/api/line_layer/style#dash)

| style         | type     | describe                                                                           | default value |
| ------------- | -------- | ---------------------------------------------------------------------------------- | ------------- |
| segmentNumber | `number` | Arc segmentation, the more segments, the smoother and the greater the consumption. | `30`          |
| thetaOffset   | `number` | The radian parameter of the arc                                                    | `0.314`       |

### arc3d

`shape`for`arc3d`arc layer.

* [arc3d](/api/line_layer/shape#shapearc3d)
* [Support gradient](/api/line_layer/style#linear)
* [Supports textures](/api/line_layer/style#texture)
* [Support dashed lines](/api/line_layer/style#dash)

| style         | type     | describe                                                                           | default value |
| ------------- | -------- | ---------------------------------------------------------------------------------- | ------------- |
| segmentNumber | `number` | Arc segmentation, the more segments, the smoother and the greater the consumption. | `30`          |

### greatcircle

`shape`It is a large arc layer.

* [greatcircle](/api/line_layer/shape#shapegreatcircle)
* [Support gradient](/api/line_layer/style#linear)
* [Supports textures](/api/line_layer/style#texture)
* [Support dashed lines](/api/line_layer/style#dash)

| style         | type     | describe                                                                           | default value |
| ------------- | -------- | ---------------------------------------------------------------------------------- | ------------- |
| segmentNumber | `number` | Arc segmentation, the more segments, the smoother and the greater the consumption. | `30`          |

### flowline

| style         | type              | describe                                                                           | default value |
| ------------- | ----------------- | ---------------------------------------------------------------------------------- | ------------- |
| opacity       | `number`          | Transparency, supports data mapping                                                | `1`           |
| strokeOpacity | `number`          | stroke transparency                                                                | `30`          |
| stroke        | `number`          | Arc segmentation, the more segments, the smoother and the greater the consumption. | `#000`        |
| strokeWidth   | `number`          | stroke width                                                                       | `1`           |
| gapWidth      | `number`          | The distance between two lines in different directions                             | `2`           |
| offsets       | `[number,number]` | Offsets at both ends, supporting data mapping                                      | `[0,0]`       |

flowline opacity and offsets support data mapping, data-driven setting of data size

#### opacity

```ts
layer.style({
  opacity: {
    field: 'count', // map field
    value: [0.2,0.4,0.6,0.8], // Mapping value, supports callback function, supports setting scale
  }

// field and value are equivalent to layer.color('count',[0.2,0.4,0.6,0.8])
```

#### offsets

```ts
layer.style({
  offsets:{
     field: 'count',
     values:() => {
      return [10 + Math.random()*20, 10 + Math.random()*20]
     }
})
```

### wall

`shape`for`wall`Geofence arc layer.

* [wall](/api/line_layer/shape#shapewall)
* [Support gradient](/api/line_layer/style#linear)
* [Supports textures](/api/line_layer/style#texture)

### simple

`shape`for`simple`Simple line layer.

* [simple](/api/line_layer/shape#shapesimple)
* [Support gradient](/api/line_layer/style#linear)

### arrow

* [line](/api/line_layer/shape#shapeline)

Line layers support configuring arrows, which have additional styles.

```js
layer.style({
  arrow: {
    enable: true,
    arrowWidth: 2,
    arrowHeight: 3,
    tailWidth: 1,
  },
});
```

| style       | type           | describe         | default value |
| ----------- | -------------- | ---------------- | ------------- |
| arrow       | `IArrowOption` | Arrow style      | `/`           |
| arrowWidth  | `number`       | Arrow width      | `2`           |
| arrowHeight | `number`       | length of arrow  | `3`           |
| tailWidth   | `number`       | Arrow tail width | `1`           |

### linear

* lineã€arcã€arc3dã€greatcircleã€wallã€simple

The line layer supports configuring gradient effects, which will be overwritten after configuring the gradient effect.`layer.color`Method to set the color.

| style       | type         | describe                | default value |
| ----------- | ------------ | ----------------------- | ------------- |
| sourceColor | `IColor`     | Line start color        | `/`           |
| targetColor | `IColor`     | Line end color          | `/`           |
| linearDir   | `ILinearDir` | Line gradient direction | `vertical`    |

#### IColor

```js
const color = `rgb(200, 100, 50)`;
const color2 = '#ff0';
```

#### ILinearDir

* vertical vertical (along the direction)
* horizontal

```js
type ILinearDir = 'vertical' | 'horizontal';
```

### texture

* lineã€arcã€arc3dã€greatcircle

Line layers support textures and texture animations, and texture styles have their own parameters.

| style        | type            | describe                                                       | default value |
| ------------ | --------------- | -------------------------------------------------------------- | ------------- |
| lineTexture  | `boolean`       | When to turn on texture capabilities                           | `false`       |
| textureBlend | `ITextureBlend` | Texture blending method                                        | `normal`      |
| iconStep     | `number`        | The spacing between texture maps arranged above the line layer | `100`         |

#### ITextureBlend

The texture of the line layer supports two types when blended with the color of the line itself.`normal`and`replace`ã€‚

* normal texture and line color blending
* replace Replace line color using texture

```js
type ITextureBlend = 'normal' | 'replace';
```

#### texture advance

âœ¨ animate\
When the line layer (shape is arc/arc3d) turns on the animation mode, the distribution of the texture on the line layer will also be related to the parameters of animate

The number of textures arranged on a line layer is roughly duration/interval

```javascript
.animate({
    duration: 1,
    interval: 0.2,
    trailLength: 0.1
});

// At this time, the number of texture maps is duration / interval = 5
```

âœ¨ textureBlend parameters\
By controlling the textureBlend parameter in the style method, we can control the blending of texture layers and line layers.

* normal
* replace

```javascript
.style({
    lineTexture: true, // Enable line mapping function
    iconStep: 30, // Set the spacing of the texture
    textureBlend: 'replace', //Set the texture blending method. The default value is normal. The optional values â€‹â€‹are normal/replace.
  });
```

### dash

* lineã€arcã€arc3dã€greatcircle

The line layer supports configuring dashed lines, which have their own additional style parameters.

```js
layer.style({
    lineType: 'dash'
    dashArray: [5, 5]
})
```

| style     | type         | describe             | default value |
| --------- | ------------ | -------------------- | ------------- |
| lineType  | `ILineType`  | Line category        | `solid`       |
| dashArray | `IDashArray` | dotted line interval | `/`           |

#### ILineType

* solid solid line
* dash dashed line

#### IDashArray

`dashArray`only at`ILineType`for`solid`will take effect.

```js
// len1 solid line length len2 interval length
type IDashArray = [len1: number, len2: number]
```
---
title: Animate
order: 7
---

<embed src="@/docs/common/style.md"></embed>

The line layer is on`animate`After the method, you will get the line animation along the line direction.

<div>
  <div style="width:40%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mo_7Q6sTqOIAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### animate(boolean | IAnimateOption)

`animate`The method supports Boolean and object passing values.

```javascript
layer.animate(true);

layer.animate({
  enable: true,
});
```

### IAnimateOption

```javascript
interface IAnimateOption {
  enable: boolean;
  speed: number;
  rings: number;
}
```

<embed src="@/docs/common/features/animate.en.md"></embed>
---
title: Animate
order: 7
---

<embed src="@/docs/common/style.md"></embed>

çº¿å›¾å±‚å›¾å±‚åœ¨å¼€å¯ `animate` æ–¹æ³•åä¼šå¾—åˆ°æ²¿çº¿æ–¹å‘çš„çº¿åŠ¨ç”»ã€‚

<div>
  <div style="width:40%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mo_7Q6sTqOIAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### animate(boolean | IAnimateOption)

`animate` æ–¹æ³•æ”¯æŒå¸ƒå°”å€¼å’Œå¯¹è±¡ä¼ å€¼ã€‚

```javascript
layer.animate(true);

layer.animate({
  enable: true,
});
```

### IAnimateOption

```javascript
interface IAnimateOption {
  enable: boolean;
  speed: number;
  rings: number;
}
```

<embed src="@/docs/common/features/animate.zh.md"></embed>
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.zh.md"></embed>
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.en.md"></embed>
---
title: Texture
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/features/texture.en.md"></embed>
---
title: Color
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/color.zh.md"></embed>
---
title: Color
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/color.en.md"></embed>
---
title: Texture
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/features/texture.zh.md"></embed>
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.zh.md"></embed>---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/source.zh.md"></embed>

### GeoJSON

```js
// ä¼ å…¥ GeoJSON ç±»å‹æ•°æ® *** L7 é»˜è®¤æ”¯æŒï¼Œä¸éœ€è¦ parser è§£æ
const data = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {},
      geometry: {
        type: 'LineString',
        coordinates: [
          [106.5234375, 57.51582286553883],
          [136.40625, 61.77312286453146],
        ],
      },
    },
  ],
};

const layer = new LineLayer().source(data);
```

### CSV

```js
// ä¼ å…¥ txt ç±»å‹æ•°æ®
var data = `from,to,value,type,lng1,lat1,lng2,lat2
é·å¤æƒƒ,å¨´ç–¯ã‚¿,6.91,move_out,91.111891,29.662557,97.342625,37.373799
é·å¤æƒƒ,é´æ„°å…˜,4.79,move_out,91.111891,29.662557,104.067923,30.679943
é·å¤æƒƒ,é–²å¶…ç°¡,2.41,move_out,91.111891,29.662557,106.530635,29.544606
é·å¤æƒƒ,é–æ¤¾å«,2.05,move_out,91.111891,29.662557,116.395645,39.929986
...`;

new LineLayer().source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### JSON

```js
// ä¼ å…¥ JSON ç±»å‹çš„æ•°æ®
var data = [
  {
    lng: 120,
    lat: 30,
    lng1: 125,
    lat1: 30
  },
  ...
]

var layer = new LineLayer()
.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
    x1: 'lng1',
    y1: 'lat1'
  }
})
```
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/source.en.md"></embed>

### GeoJSON

```js
// Pass in GeoJSON type data *** L7 supports it by default and does not require parser analysis
const data = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {},
      geometry: {
        type: 'LineString',
        coordinates: [
          [106.5234375, 57.51582286553883],
          [136.40625, 61.77312286453146],
        ],
      },
    },
  ],
};

const layer = new LineLayer().source(data);
```

### CSV

```js
// Pass in txt type data
var data = `from,to,value,type,lng1,lat1,lng2,lat2
é·å¤æƒƒ,ä»™é­”ã‚¿,6.91,move_out,91.111891,29.662557,97.342625,37.373799
é·åæƒƒ,é´æ„°å˜˜,4.79,move_out,91.111891,29.662557,104.067923,30.679943
é·åæƒƒ,ç·å¤æƒƒ,æœˆå……ç»,2.41,move_out,91.111891,29.662557,106.530635,29.544606
é·åæƒƒ,é–æ¤¾han,2.05,move_out,91.111891,29.662557,116.395645,39.929986
...`;

new LineLayer().source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng2',
    y1: 'lat2',
  },
});
```

### JSON

```js
// Pass in JSON type data
var data = [
  {
    lng: 120,
    lat: 30,
    lng1: 125,
    lat1: 30
  },
  ...
]

var layer = new LineLayer()
.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
    x1: 'lng1',
    y1: 'lat1'
  }
})
```
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.en.md"></embed>
---
title: LineLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

çº¿å›¾å±‚é€šè¿‡ä¸€ç»„ç»çº¬åº¦æ•°æ®ç»„æ¥æè¿°åœ°å›¾ä¸Šçš„ä¸€æ¡æˆ–è€…å¤šæ¡è·¯å¾„ã€‚é€šè¿‡è·¯å¾„çš„ç±»å‹ï¼Œå°†å…¶åŒºåˆ†ä¸ºè·¯å¾„ã€å¼§çº¿ã€3D å¼§çº¿ä»¥åŠå…¶ä»–çš„ç±»å‹ã€‚  
ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½® `shape` å‚æ•°æ¥é€‰æ‹©ç‚¹çš„ç±»å‹ï¼ŒåŒæ—¶é€šè¿‡ `style`ã€`size`ã€`color` æ–¹æ³•è°ƒæ•´ç‚¹çš„æ ·å¼ã€‚

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MxnRTrzcawcAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

```js
const layer = new LineLayer()
  .source([{ lng: 120, lat: 30, lng1: 125, lat1: 30 }], {
    parser: {
      type: 'json',
      x: 'lng',
      y: 'lat',
      x1: 'lng1',
      y1: 'lat1',
    },
  })
  .shape('line')
  .size(2)
  .color('#f00');
```
---
title: LineLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

The line layer describes one or more paths on the map through a set of longitude and latitude data sets. By the type of path, it is divided into path, arc, 3D arc and other types.\
Users can configure`shape`parameters to select the type of point, and pass`style`ã€`size`ã€`color`Method to adjust the point style.

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MxnRTrzcawcAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

```js
const layer = new LineLayer()
  .source([{ lng: 120, lat: 30, lng1: 125, lat1: 30 }], {
    parser: {
      type: 'json',
      x: 'lng',
      y: 'lat',
      x1: 'lng1',
      y1: 'lat1',
    },
  })
  .shape('line')
  .size(2)
  .color('#f00');
```
---
title: L7Mini å°ç¨‹åºæ¨¡å—æ•™ç¨‹
order: 3
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

é€šè¿‡å¼•å…¥ L7Mini æ¨¡å—ï¼Œèƒ½è®©ç”¨æˆ·åœ¨å°ç¨‹åºç¯å¢ƒä¸­ä½¿ç”¨ L7 åœ°å›¾å¯è§†åŒ–çš„èƒ½åŠ›ï¼Œå¢å¼ºåŸç”Ÿåœ°å›¾ç»„ä»¶çš„å¯è§†åŒ–èƒ½åŠ›ã€‚

âœ¨ ç›®å‰ L7Mini å…¼å®¹æ”¯ä»˜å®å°ç¨‹åºï¼Œå°šä¸æ”¯æŒå¾®ä¿¡å°ç¨‹åºã€‚  
âœ¨ ç›®å‰ L7Mini åªæ”¯æŒæ— åº•å›¾æ¨¡å¼ï¼Œå³åªå±•ç¤ºå¯è§†åŒ–å±‚ã€‚  
âœ¨ L7Mini æ¨¡å—çš„ä½¿ç”¨ï¼Œé™¤äº†ç”»å¸ƒè·å–å’Œå’Œäº‹ä»¶æ³¨å†Œå› ä¸ºå°ç¨‹åºç¯å¢ƒçš„åŸå› éœ€è¦ç”¨æˆ·é¢å¤–å¤„ç†ï¼Œå…¶ä½™éƒ¨åˆ†å’Œæ™®é€š L7 çš„ä½¿ç”¨ä¿æŒä¸€è‡´ã€‚

ä¸‹é¢å°†ä»‹ç»å¦‚ä½•åœ¨æ”¯ä»˜å®å°ç¨‹åºä¸­ä½¿ç”¨ L7Mini æ¨¡å—ã€‚

## å®‰è£…

ç›®å‰ L7 åœ¨å°ç¨‹åºå¼€å‘ä¸­ä½¿ç”¨çš„èƒ½åŠ›å…¨éƒ¨æ¥è‡ª L7Mini æ¨¡å—ï¼Œç”¨æˆ·åªéœ€è¦æ‰§è¡Œä¸€æ¬¡å®‰è£…å³å¯ã€‚

```javascript
npm install @antv/l7-mini --save
```

## åœ°å›¾å¼•ç”¨

åœ¨å°ç¨‹åºç¯å¢ƒä¸­ï¼Œç”¨æˆ·æ— æ³•å¼•ç”¨é«˜å¾·åœ°å›¾å’Œ Mapbox åœ°å›¾ï¼Œ åªèƒ½å¼•ç”¨å°ç¨‹åºç‰ˆæœ¬çš„åœ°å›¾ç±»å‹ã€‚  
åœ¨ .ts/.js é¡µé¢è„šæœ¬æ–‡ä»¶ä¸­å¼•ç”¨

```javascript
import {
  Map, // å…¶ä»–åœ°å›¾ç±»å‹ä¸å…¼å®¹å°ç¨‹åºç¯å¢ƒ
  Scene,
  PointLayer,
  dispatchTouchStart,
  dispatchTouchMove,
  dispatchTouchEnd,
} from '@antv/l7-mini';
```

åœ°å›¾å°ç¨‹åºç¯å¢ƒçš„ä½¿ç”¨å’Œæ™®é€š H5 ç¯å¢ƒçš„ä½¿ç”¨ä¿æŒä¸€è‡´ã€‚

```javascript
const miniMap = new Map({
  center: [0, 0],
  zoom: -0.5,
  pitch: 0,
});
```

## èŠ‚ç‚¹æ³¨å†Œ

ç”±äºå°ç¨‹åºé™åˆ¶ï¼Œæˆ‘ä»¬æ— æ³•åŠ¨æ€åˆ›å»ºæ–°çš„èŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦äº‹å…ˆåœ¨ .axml æ–‡ä»¶ä¸­åˆ›å»º canvas ç”»å¸ƒèŠ‚ç‚¹

```javascript
<canvas onReady="onCanvasReady" type="webgl" id="canvas" />
```

æ³¨å†Œå®Œçš„èŠ‚ç‚¹ä¼šåœ¨è„šæœ¬æ–‡ä»¶ä¸­è·å–ä½¿ç”¨ã€‚

âœ¨ æˆ‘ä»¬éœ€è¦å®Œæˆ onCanvasReady äº‹ä»¶çš„æ³¨å†Œï¼Œä»¥ä¾¿æ˜ç¡®è·å–èŠ‚ç‚¹çš„æ—¶æœºã€‚

## äº‹ä»¶æ³¨å†Œ

ç”±äºå°ç¨‹åºç¯å¢ƒçš„é™åˆ¶ï¼Œæˆ‘ä»¬æ— æ³•åŠ¨æ€æ³¨å†Œäº‹ä»¶ï¼Œæ‰€ä»¥éœ€è¦ç”¨æˆ·è‡ªå·±å®Œæˆäº‹ä»¶ä»£ç†ï¼Œä¸‹é¢å°†ä¼šè¯´æ˜å¦‚ä½•å®Œæˆäº‹ä»¶çš„ä»£ç†ã€‚

âœ¨ å¦‚æœä¸è¿›è¡Œäº‹ä»¶çš„æ³¨å†Œå’Œè½¬å‘ï¼Œç”¨æˆ·å°†æ— æ³•å¯¹åœ°å›¾è¿›è¡Œæ“ä½œã€‚

1. åœ¨ .axml æ–‡ä»¶ä¸­ç»‘å®šåŸºç¡€äº‹ä»¶

âœ¨ äº‹ä»¶éœ€è¦ç»‘å®šåœ¨ canvas èŠ‚ç‚¹ä¸Šæˆ–æ˜¯ canvas çš„çˆ¶èŠ‚ç‚¹ä¸Š

```javascript
<view id="box" class="wrap"
  onTouchStart="onTouchStart"  // ç»‘å®šåŸºç¡€äº‹ä»¶
  onTouchMove="onTouchMove"
  onTouchEnd="onTouchEnd"
  >
  <canvas onReady="onCanvasReady" type="webgl" id="canvas" />
  <view class="populationWrap">
    <view class="populationIcons">
      äººå£/åƒä¸‡:
    </view>
    <view class="populationIcons" a:for="{{population}}">
      <view> {{item.count}}  </view>
      <view class="colorLine" style="background:{{item.color}}"></view>
    </view>
  </view>
</view>
```

2. .ts/.js æ–‡ä»¶ä¸­å®Œæˆäº‹ä»¶çš„ä»£ç†è½¬å‘

å¼•å…¥ä»£ç†æ–¹æ³•

```javascript
import {
  Map,
  Scene,
  PointLayer,
  dispatchTouchStart, // L7Mini å°è£…çš„ä»£ç†æ–¹æ³•
  dispatchTouchMove,
  dispatchTouchEnd,
} from '@antv/l7-mini';
```

åœ¨ page å¯¹è±¡ä¸­æ³¨å†Œæ–¹æ³•

```javascript
page({
  ...
  onTouchStart(e) {
    dispatchTouchStart(e);
  },
  onTouchMove(e) {
    dispatchTouchMove(e);
  },
  onTouchEnd(e) {
    dispatchTouchEnd(e);
  },
  ...
})

```

æˆ‘ä»¬åªéœ€è¦å®ŒæˆåŸºç¡€æ–¹æ³•çš„æ³¨å†Œï¼ˆtouchstart/touchmove/touchendï¼‰ï¼ŒL7Mini ä¼šå®Œæˆå¤åˆæ–¹æ³•ã€æ‰‹åŠ¿çš„åˆ¤æ–­ã€‚

## ç”»å¸ƒçš„è·å–ä¸ä½¿ç”¨

åœ¨å°ç¨‹åºä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å°ç¨‹åºæä¾›çš„æ–¹æ³•æ¥è·å–é¡µé¢èŠ‚ç‚¹ã€‚

æˆ‘ä»¬é€šè¿‡åœ¨ .axml åœ¨ canvas ç”»å¸ƒç»„ä»¶ä¸Šæ³¨å†Œçš„ onCanvasReady æ–¹æ³•æ¥åˆ¤æ–­è·å–ç”»å¸ƒçš„æ—¶æœºã€‚

```javascript
page({
  ...
  onCanvasReady() {
    handleCanvas(my, canvas => {
      ...
      // æ­£å¸¸å¼€å‘ L7 ä»£ç 
      ...
    })
  }
  ...
})
```

ä¸‹é¢æä¾›äº†è·å–ç”»å¸ƒèŠ‚ç‚¹é€šç”¨æ–¹æ³•ï¼ŒåŒæ—¶å¯¹ç”»å¸ƒè¿›è¡Œä¸€äº›å¤„ç†æ–¹ä¾¿åç»­ä½¿ç”¨ã€‚

```javascript
function handleCanvas(my, callback) {
  const selector = my.createSelectorQuery();
  const domSelector = selector.select('#canvas');
  domSelector
    .fields(
      {
        node: true,
        context: false,
        rect: true,
        computedStyle: ['height', 'width'],
      },
      function (res) {
        // å†…éƒ¨è®¡ç®—ä½¿ç”¨ ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
        res.node.left = res.left;
        res.node.top = res.top;

        // è®¾ç½®ç”»å¸ƒçš„ DPR ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
        const DPR = my.getSystemInfoSync().pixelRatio;
        res.node.width *= DPR;
        res.node.height *= DPR;

        // è¿”å› canvas ç”»å¸ƒèŠ‚ç‚¹
        callback(res.node);
      },
    )
    .exec();
}
```

æˆ‘ä»¬åœ¨è·å–åˆ°ç”»å¸ƒå¯¹è±¡åéœ€è¦ä¼ é€’ç»™ scene ä½¿ç”¨ã€‚

```javascript
const miniScene = new Scene({
  id: 'canvas',
  canvas, // canvas æ˜¯æˆ‘ä»¬ä»å°ç¨‹åºé¡µé¢ä¸Šè·å–åˆ°çš„å®é™…èŠ‚ç‚¹
  map: miniMap,
});
```

## é”€æ¯

ä¸ºäº†ä¿è¯å°ç¨‹åºçš„è‰¯å¥½ä½“éªŒï¼Œåœ¨é¡µé¢å…³é—­æ—¶è®°å¾—åŠæ—¶å°† L7 å†…å®¹è¿›è¡Œé”€æ¯ã€‚

```javascript
  page({
    ...
    onHide() {
      miniScene.destroy();
    },
    onUnload() {
      miniScene.destroy();
    },
    ...
  })
```

## é™åˆ¶

ç›®å‰ L7Mini å°šä¸æ”¯æŒ marker/popup ç­‰éœ€è¦åŠ¨æ€åˆ›å»ºé¡µé¢èŠ‚ç‚¹çš„èƒ½åŠ›ï¼Œç”¨æˆ·è‹¥æ˜¯éœ€è¦å¯ä»¥è‡ªå·±å•ç‹¬åˆ›å»ºã€‚
---
title: L7Mini
order: 3
---

<embed src="@/docs/api/mini/mini.zh.md"></embed>
---
title: L7Mini é£çº¿
order: 4
---

<embed src="@/docs/common/style.md"></embed>

## æ¡ˆä¾‹
<img width="200px" alt="é£çº¿" src='https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*GyYeRp1uOIAAAAAAAAAAAAAAARQnAQ'>

### é£çº¿

index.axml é¡µé¢ç»“æ„ä»£ç 
```javascript
<view class="isLoading" style="height: 100vh" a:if="{{isLoading}}">
  <view class="loadItem" a:for="{{10}}">
  </view>
</view>

<view id="box" class="wrap" 
  onTouchStart="onTouchStart" 
  onTouchMove="onTouchMove"
  onTouchEnd="onTouchEnd"
  >
  <canvas onReady="onCanvasReady" type="webgl" id="canvas" />
</view>
<image class="antvl7" mode="scaleToFill" src="{{antvl7}}" />

```
index.less æ ·å¼ä»£ç 
```less
.wrap {
  height: 100vh;
  #canvas {
    height: 100%;
    width: 100%;
  }
}
```

index.ts è„šæœ¬ä»£ç 
```javascript
import {
  Map,
  Scene,
  LineLayer,
  dispatchTouchStart,
  dispatchTouchMove,
  dispatchTouchEnd,
  PointLayer,
} from '@antv/l7-mini';
import { getJSON } from '../../request';
import { antvl7, flydata, pointData, worldJSON } from '../../mockData';
import { handleCanvas, LayerCounter } from '../../utils';

let miniScene;
let counter;

Page({
  data: {
    isLoading: true,
    antvl7,
  },
  onLoad() {
    counter = new LayerCounter(3, my, this);
    my.showLoading();
  },
  onTouchStart(e) {
    dispatchTouchStart(e);
  },
  onTouchMove(e) {
    dispatchTouchMove(e);
  },
  onTouchEnd(e) {
    dispatchTouchEnd(e);
  },
  onCanvasReady() {
    handleCanvas(this, my, (canvas) => {
      const miniMap = new Map({
        center: [0, 0],
        zoom: 0,
        pitch: 40,
      });
      miniScene = new Scene({
        id: 'canvas',
        canvas,
        map: miniMap,
        hasBaseMap: false,
      });

      miniScene.setBgColor('#222');

      getJSON(worldJSON, function (result, data) {
        if (result) {
          const lineLayer = new LineLayer()
            .source(data)
            .shape('line')
            .size(0.8)
            .color('#41fc9d')

            .style({
              opacity: 0.4,
            });
          miniScene.addLayer(lineLayer);
          counter.loadLayer();
        }
      });

      const flyLine = new LineLayer({ blend: 'normal', zIndex: 2 })
        .source(flydata, {
          parser: {
            type: 'json',
            coordinates: 'coord',
          },
        })
        .color('#b97feb')
        .shape('arc3d')
        .size(2)
        .active(true)
        .animate({
          interval: 2,
          trailLength: 2,
          duration: 1,
        })
        .style({
          opacity: 0.8,
          sourceColor: '#f00',
          targetColor: '#0f0',
        });

      const pointLayer = new PointLayer();
      pointLayer
        .source(pointData, {
          parser: {
            type: 'json',
            x: 'lng',
            y: 'lat',
          },
        })
        .shape('circle')
        .color('#ffed11')
        .animate(true)
        .size(40)
        .style({
          opacity: 1.0,
        });

      miniScene.on('loaded', () => {
        miniScene.addLayer(flyLine);
        counter.loadLayer();
        miniScene.addLayer(pointLayer);
        counter.loadLayer();
      });
    });
  },
  onUnload() {
    // é¡µé¢è¢«å…³é—­
    miniScene.destroy();
  },
});

```
æ–¹æ³•ä»£ç 
```javascript
function getJSON(url, callback) {
  my.request({
    url,
    method: 'GET',
    data: {
      from: 'æ”¯ä»˜å®',
      production: 'AlipayJSAPI',
    },
    headers: {
      'content-type': 'application/json', // é»˜è®¤å€¼
    },
    dataType: 'json',
    fail() {
      callback(false, null);
    },
    complete(res) {
      callback(true, res.data);
    },
  });
}

function handleCanvas(_that, my, callback) {
  const selector = my.createSelectorQuery();
  const domSelector = selector.select('#canvas');
  domSelector
    .fields(
      {
        node: true,
        context: false,
        rect: true,
        computedStyle: ['height', 'width'],
      },
      function (res) {
        res.node.left = res.left;
        res.node.top = res.top;

        const DPR = my.getSystemInfoSync().pixelRatio;
        res.node.width *= DPR;
        res.node.height *= DPR;

        callback(res.node);
      },
    )
    .exec();
}

class LayerCounter {
  private loadedLayer = 0;

  private totalLayers: number;

  private my: any;

  private context: any;

  constructor(totalLayers: number, my: any, context: any) {
    this.totalLayers = totalLayers;
    this.my = my;
    this.context = context;
  }

  loadLayer() {
    this.loadedLayer++;
    const that = this;
    if (this.loadedLayer >= this.totalLayers) {
      this.my.hideLoading({
        page: that, // é˜²æ­¢æ‰§è¡Œæ—¶å·²ç»åˆ‡æ¢åˆ°å…¶å®ƒé¡µé¢ï¼Œpage æŒ‡å‘ä¸å‡†ç¡®
      });
      this.context.setData({
        isLoading: false,
      });
    }
  }
}
```---
title: L7Mini flyline
order: 4
---

<embed src="@/docs/api/mini/demos/flyline.zh.md"></embed>
---
title: L7Mini chinaPopulation
order: 4
---

<embed src="@/docs/api/mini/demos/chinaPopulation.zh.md"></embed>
---
title: L7Mini ä¸­å›½äººå£åˆ†å¸ƒåœ°å›¾
order: 4
---

<embed src="@/docs/common/style.md"></embed>

## æ¡ˆä¾‹

<img width="200px" alt="ä¸­å›½äººå£åœ°å›¾" src='https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/
A*65N9Sbw7f1AAAAAAAAAAAAAAARQnAQ'>

### ä¸­å›½äººå£åœ°å›¾

index.axml é¡µé¢ç»“æ„ä»£ç 
```javascript

<view class="isLoading" style="height: 100vh" a:if="{{isLoading}}">
  <view class="loadItem" a:for="{{10}}">
  </view>
</view>

<view id="box" class="wrap" 
  onTouchStart="onTouchStart" 
  onTouchMove="onTouchMove"
  onTouchEnd="onTouchEnd"
  >
  <canvas onReady="onCanvasReady" type="webgl" id="canvas" />
  <view class="populationWrap">
    <view class="populationIcons">
      äººå£/åƒä¸‡:
    </view>
    <view class="populationIcons" a:for="{{population}}">
      <view> {{item.count}}  </view>
      <view class="colorLine" style="background:{{item.color}}"></view>
    </view>
  </view>
</view>
<image class="antvl7" mode="scaleToFill" src="{{antvl7}}" />

```
index.less æ ·å¼ä»£ç 
```less
.wrap {
  height: 100vh;
  #canvas {
    height: 100%;
    width: 100%;
  }
}
```

index.ts è„šæœ¬ä»£ç 
```javascript
import {
  Map,
  Scene,
  PolygonLayer,
  LineLayer,
  dispatchTouchStart,
  dispatchTouchMove,
  dispatchTouchEnd,
  PointLayer,
} from '@antv/l7-mini';
import { getJSON } from '../../request';
import { antvl7, chinaJSON, chinaBorderLine, population, provinceCenter } from '../../mockData';
import { handleCanvas, LayerCounter } from '../../utils';

let miniScene;
let counter;

Page({
  data: {
    isLoading: true,
    antvl7,
    population: [
      { count: '> 9', color: '#662506' },
      { count: '> 7', color: '#993404' },
      { count: '> 6', color: '#cc4c02' },
      { count: '> 5', color: '#ec7014' },
      { count: '> 3', color: '#fe9929' },
      { count: '> 2', color: '#fec44f' },
      { count: '<= 2', color: '#fee391' },
    ],
  },
  onLoad() {
    counter = new LayerCounter(4, my, this);
    my.showLoading();
  },
  onTouchStart(e) {
    dispatchTouchStart(e);
  },
  onTouchMove(e) {
    dispatchTouchMove(e);
  },
  onTouchEnd(e) {
    dispatchTouchEnd(e);
  },
  onCanvasReady() {
    handleCanvas(this, my, (canvas) => {
      const miniMap = new Map({
        center: [105, 30.279383],
        zoom: 2,
        pitch: 0,
      });
      miniScene = new Scene({
        id: 'canvas',
        canvas,
        map: miniMap,
        hasBaseMap: false,
      });
      getJSON(chinaJSON, function (result, data) {
        if (result) {
          const polygonLayer = new PolygonLayer({})
            .source(data)
            .size('name', [0, 10000, 50000, 30000, 100000])
            .color('name', (name) => {
              const count = population[name];
              if (count && count > 90000000) {
                return '#662506';
              } else if (count && count > 70000000) {
                return '#993404';
              } else if (count && count > 65000000) {
                return '#cc4c02';
              } else if (count && count > 50000000) {
                return '#ec7014';
              } else if (count && count > 30000000) {
                return '#fe9929';
              } else if (count && count > 20000000) {
                return '#fec44f';
              } else {
                return '#fee391';
              }
            })
            .shape('fill')
            .style({
              opacity: 0.8,
            });

          miniScene.addLayer(polygonLayer);
          counter.loadLayer();

          const provinceLine = new PolygonLayer({})
            .source(data)
            .size(0.4)
            .color('#fff')
            .shape('line')
            .style({
              opacity: 0.8,
            });

          miniScene.addLayer(provinceLine);
          counter.loadLayer();
        }
      });

      getJSON(chinaBorderLine, function (result, data) {
        if (result) {
          const borderlineLayer = new LineLayer({ zIndex: 2 })
            .source(data)
            .shape('line')
            .size(0.6)
            .color('rgb(93,112,146)')
            .style({
              opacity: 0.8,
            });
          miniScene.addLayer(borderlineLayer);
          counter.loadLayer();
        }
      });

      const provinceName = new PointLayer({ zIndex: 1 })
        .source(provinceCenter, {
          parser: {
            type: 'json',
            x: 'lng',
            y: 'lat',
          },
        })
        .shape('n', 'text')
        .size(12)
        .color('#000')
        .style({
          stroke: '#fff',
          strokeWidth: 1,
          opacity: 0.8,
          textAllowOverlap: true,
        });

      miniScene.on('loaded', function () {
        miniScene.addLayer(provinceName);
        counter.loadLayer();
      });
    });
  },
  onUnload() {
    // é¡µé¢è¢«å…³é—­
    miniScene.destroy();
  },
});
```
æ–¹æ³•ä»£ç 
```javascript
function getJSON(url, callback) {
  my.request({
    url,
    method: 'GET',
    data: {
      from: 'æ”¯ä»˜å®',
      production: 'AlipayJSAPI',
    },
    headers: {
      'content-type': 'application/json', // é»˜è®¤å€¼
    },
    dataType: 'json',
    fail() {
      callback(false, null);
    },
    complete(res) {
      callback(true, res.data);
    },
  });
}

function handleCanvas(_that, my, callback) {
  const selector = my.createSelectorQuery();
  const domSelector = selector.select('#canvas');
  domSelector
    .fields(
      {
        node: true,
        context: false,
        rect: true,
        computedStyle: ['height', 'width'],
      },
      function (res) {
        res.node.left = res.left;
        res.node.top = res.top;

        const DPR = my.getSystemInfoSync().pixelRatio;
        res.node.width *= DPR;
        res.node.height *= DPR;

        callback(res.node);
      },
    )
    .exec();
}

class LayerCounter {
  private loadedLayer = 0;

  private totalLayers: number;

  private my: any;

  private context: any;

  constructor(totalLayers: number, my: any, context: any) {
    this.totalLayers = totalLayers;
    this.my = my;
    this.context = context;
  }

  loadLayer() {
    this.loadedLayer++;
    const that = this;
    if (this.loadedLayer >= this.totalLayers) {
      this.my.hideLoading({
        page: that, // é˜²æ­¢æ‰§è¡Œæ—¶å·²ç»åˆ‡æ¢åˆ°å…¶å®ƒé¡µé¢ï¼Œpage æŒ‡å‘ä¸å‡†ç¡®
      });
      this.context.setData({
        isLoading: false,
      });
    }
  }
}
```---
title: L7Mini ç»å…¸çƒ­åŠ›
order: 4
---

<embed src="@/docs/common/style.md"></embed>

## æ¡ˆä¾‹
<img width="200px" alt="ç»å…¸çƒ­åŠ›" src='https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*LgBfTbhEgzEAAAAAAAAAAAAAARQnAQ'>

### ç»å…¸çƒ­åŠ›

index.axml é¡µé¢ç»“æ„ä»£ç 
```javascript

<view class="isLoading" style="height: 100vh" a:if="{{isLoading}}">
  <view class="loadItem" a:for="{{10}}">
  </view>
</view>

<view id="box" class="wrap" 
  onTouchStart="onTouchStart" 
  onTouchMove="onTouchMove"
  onTouchEnd="onTouchEnd"
  >
  <canvas onReady="onCanvasReady" type="webgl" id="canvas" />
  <view class="populationWrap">
    <view class="populationIcons">
      äººå£/åƒä¸‡:
    </view>
    <view class="populationIcons" a:for="{{population}}">
      <view> {{item.count}}  </view>
      <view class="colorLine" style="background:{{item.color}}"></view>
    </view>
  </view>
</view>
<image class="antvl7" mode="scaleToFill" src="{{antvl7}}" />

```
index.less æ ·å¼ä»£ç 
```less
.wrap {
  height: 100vh;
  #canvas {
    height: 100%;
    width: 100%;
  }
}
```

index.ts è„šæœ¬ä»£ç 
```javascript
import {
  Map,
  Scene,
  PolygonLayer,
  LineLayer,
  dispatchTouchStart,
  dispatchTouchMove,
  dispatchTouchEnd,
  PointLayer,
} from '@antv/l7-mini';
import { getJSON } from '../../request';
import { antvl7, chinaJSON, chinaBorderLine, population, provinceCenter } from '../../mockData';
import { handleCanvas, LayerCounter } from '../../utils';

let miniScene;
let counter;

Page({
  data: {
    isLoading: true,
    antvl7,
    population: [
      { count: '> 9', color: '#662506' },
      { count: '> 7', color: '#993404' },
      { count: '> 6', color: '#cc4c02' },
      { count: '> 5', color: '#ec7014' },
      { count: '> 3', color: '#fe9929' },
      { count: '> 2', color: '#fec44f' },
      { count: '<= 2', color: '#fee391' },
    ],
  },
  onLoad() {
    counter = new LayerCounter(4, my, this);
    my.showLoading();
  },
  onTouchStart(e) {
    dispatchTouchStart(e);
  },
  onTouchMove(e) {
    dispatchTouchMove(e);
  },
  onTouchEnd(e) {
    dispatchTouchEnd(e);
  },
  onCanvasReady() {
    handleCanvas(this, my, (canvas) => {
      const miniMap = new Map({
        center: [105, 30.279383],
        zoom: 2,
        pitch: 0,
      });
      miniScene = new Scene({
        id: 'canvas',
        canvas,
        map: miniMap,
        hasBaseMap: false,
      });
      getJSON(chinaJSON, function (result, data) {
        if (result) {
          const polygonLayer = new PolygonLayer({})
            .source(data)
            .size('name', [0, 10000, 50000, 30000, 100000])
            .color('name', (name) => {
              const count = population[name];
              if (count && count > 90000000) {
                return '#662506';
              } else if (count && count > 70000000) {
                return '#993404';
              } else if (count && count > 65000000) {
                return '#cc4c02';
              } else if (count && count > 50000000) {
                return '#ec7014';
              } else if (count && count > 30000000) {
                return '#fe9929';
              } else if (count && count > 20000000) {
                return '#fec44f';
              } else {
                return '#fee391';
              }
            })
            .shape('fill')
            .style({
              opacity: 0.8,
            });

          miniScene.addLayer(polygonLayer);
          counter.loadLayer();

          const provinceLine = new PolygonLayer({})
            .source(data)
            .size(0.4)
            .color('#fff')
            .shape('line')
            .style({
              opacity: 0.8,
            });

          miniScene.addLayer(provinceLine);
          counter.loadLayer();
        }
      });

      getJSON(chinaBorderLine, function (result, data) {
        if (result) {
          const borderlineLayer = new LineLayer({ zIndex: 2 })
            .source(data)
            .shape('line')
            .size(0.6)
            .color('rgb(93,112,146)')
            .style({
              opacity: 0.8,
            });
          miniScene.addLayer(borderlineLayer);
          counter.loadLayer();
        }
      });

      const provinceName = new PointLayer({ zIndex: 1 })
        .source(provinceCenter, {
          parser: {
            type: 'json',
            x: 'lng',
            y: 'lat',
          },
        })
        .shape('n', 'text')
        .size(12)
        .color('#000')
        .style({
          stroke: '#fff',
          strokeWidth: 1,
          opacity: 0.8,
          textAllowOverlap: true,
        });

      miniScene.on('loaded', function () {
        miniScene.addLayer(provinceName);
        counter.loadLayer();
      });
    });
  },
  onUnload() {
    // é¡µé¢è¢«å…³é—­
    miniScene.destroy();
  },
});
```
æ–¹æ³•ä»£ç 
```javascript
function getJSON(url, callback) {
  my.request({
    url,
    method: 'GET',
    data: {
      from: 'æ”¯ä»˜å®',
      production: 'AlipayJSAPI',
    },
    headers: {
      'content-type': 'application/json', // é»˜è®¤å€¼
    },
    dataType: 'json',
    fail() {
      callback(false, null);
    },
    complete(res) {
      callback(true, res.data);
    },
  });
}

function handleCanvas(_that, my, callback) {
  const selector = my.createSelectorQuery();
  const domSelector = selector.select('#canvas');
  domSelector
    .fields(
      {
        node: true,
        context: false,
        rect: true,
        computedStyle: ['height', 'width'],
      },
      function (res) {
        res.node.left = res.left;
        res.node.top = res.top;

        const DPR = my.getSystemInfoSync().pixelRatio;
        res.node.width *= DPR;
        res.node.height *= DPR;

        callback(res.node);
      },
    )
    .exec();
}

class LayerCounter {
  private loadedLayer = 0;

  private totalLayers: number;

  private my: any;

  private context: any;

  constructor(totalLayers: number, my: any, context: any) {
    this.totalLayers = totalLayers;
    this.my = my;
    this.context = context;
  }

  loadLayer() {
    this.loadedLayer++;
    const that = this;
    if (this.loadedLayer >= this.totalLayers) {
      this.my.hideLoading({
        page: that, // é˜²æ­¢æ‰§è¡Œæ—¶å·²ç»åˆ‡æ¢åˆ°å…¶å®ƒé¡µé¢ï¼Œpage æŒ‡å‘ä¸å‡†ç¡®
      });
      this.context.setData({
        isLoading: false,
      });
    }
  }
}
```---
title: L7Mini heat
order: 4
---

<embed src="@/docs/api/mini/demos/heat.zh.md"></embed>
---
title: L7Mini highLine
order: 4
---

<embed src="@/docs/api/mini/demos/high-line.zh.md"></embed>
---
title: L7Mini ç­‰é«˜çº¿
order: 4
---

<embed src="@/docs/common/style.md"></embed>

## æ¡ˆä¾‹

<img width="200px" alt="ç­‰é«˜çº¿" src='https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*19PATJwDBWYAAAAAAAAAAAAAARQnAQ'>

### ä¸­å›½äººå£åœ°å›¾

index.axml é¡µé¢ç»“æ„ä»£ç 
```javascript

<view class="isLoading" style="height: 100vh" a:if="{{isLoading}}">
  <view class="loadItem" a:for="{{10}}">
  </view>
</view>

<view id="box" class="wrap" 
  onTouchStart="onTouchStart" 
  onTouchMove="onTouchMove"
  onTouchEnd="onTouchEnd"
  >
  <canvas onReady="onCanvasReady" type="webgl" id="canvas" />
  <view class="populationWrap">
    <view class="populationIcons">
      äººå£/åƒä¸‡:
    </view>
    <view class="populationIcons" a:for="{{population}}">
      <view> {{item.count}}  </view>
      <view class="colorLine" style="background:{{item.color}}"></view>
    </view>
  </view>
</view>
<image class="antvl7" mode="scaleToFill" src="{{antvl7}}" />

```
index.less æ ·å¼ä»£ç 
```less
.wrap {
  height: 100vh;
  #canvas {
    height: 100%;
    width: 100%;
  }
}
```

index.ts è„šæœ¬ä»£ç 
```javascript
import {
  Map,
  Scene,
  PolygonLayer,
  LineLayer,
  dispatchTouchStart,
  dispatchTouchMove,
  dispatchTouchEnd,
  PointLayer,
} from '@antv/l7-mini';
import { getJSON } from '../../request';
import { antvl7, chinaJSON, chinaBorderLine, population, provinceCenter } from '../../mockData';
import { handleCanvas, LayerCounter } from '../../utils';

let miniScene;
let counter;

Page({
  data: {
    isLoading: true,
    antvl7,
    population: [
      { count: '> 9', color: '#662506' },
      { count: '> 7', color: '#993404' },
      { count: '> 6', color: '#cc4c02' },
      { count: '> 5', color: '#ec7014' },
      { count: '> 3', color: '#fe9929' },
      { count: '> 2', color: '#fec44f' },
      { count: '<= 2', color: '#fee391' },
    ],
  },
  onLoad() {
    counter = new LayerCounter(4, my, this);
    my.showLoading();
  },
  onTouchStart(e) {
    dispatchTouchStart(e);
  },
  onTouchMove(e) {
    dispatchTouchMove(e);
  },
  onTouchEnd(e) {
    dispatchTouchEnd(e);
  },
  onCanvasReady() {
    handleCanvas(this, my, (canvas) => {
      const miniMap = new Map({
        center: [105, 30.279383],
        zoom: 2,
        pitch: 0,
      });
      miniScene = new Scene({
        id: 'canvas',
        canvas,
        map: miniMap,
        hasBaseMap: false,
      });
      getJSON(chinaJSON, function (result, data) {
        if (result) {
          const polygonLayer = new PolygonLayer({})
            .source(data)
            .size('name', [0, 10000, 50000, 30000, 100000])
            .color('name', (name) => {
              const count = population[name];
              if (count && count > 90000000) {
                return '#662506';
              } else if (count && count > 70000000) {
                return '#993404';
              } else if (count && count > 65000000) {
                return '#cc4c02';
              } else if (count && count > 50000000) {
                return '#ec7014';
              } else if (count && count > 30000000) {
                return '#fe9929';
              } else if (count && count > 20000000) {
                return '#fec44f';
              } else {
                return '#fee391';
              }
            })
            .shape('fill')
            .style({
              opacity: 0.8,
            });

          miniScene.addLayer(polygonLayer);
          counter.loadLayer();

          const provinceLine = new PolygonLayer({})
            .source(data)
            .size(0.4)
            .color('#fff')
            .shape('line')
            .style({
              opacity: 0.8,
            });

          miniScene.addLayer(provinceLine);
          counter.loadLayer();
        }
      });

      getJSON(chinaBorderLine, function (result, data) {
        if (result) {
          const borderlineLayer = new LineLayer({ zIndex: 2 })
            .source(data)
            .shape('line')
            .size(0.6)
            .color('rgb(93,112,146)')
            .style({
              opacity: 0.8,
            });
          miniScene.addLayer(borderlineLayer);
          counter.loadLayer();
        }
      });

      const provinceName = new PointLayer({ zIndex: 1 })
        .source(provinceCenter, {
          parser: {
            type: 'json',
            x: 'lng',
            y: 'lat',
          },
        })
        .shape('n', 'text')
        .size(12)
        .color('#000')
        .style({
          stroke: '#fff',
          strokeWidth: 1,
          opacity: 0.8,
          textAllowOverlap: true,
        });

      miniScene.on('loaded', function () {
        miniScene.addLayer(provinceName);
        counter.loadLayer();
      });
    });
  },
  onUnload() {
    // é¡µé¢è¢«å…³é—­
    miniScene.destroy();
  },
});
```
æ–¹æ³•ä»£ç 
```javascript
function getJSON(url, callback) {
  my.request({
    url,
    method: 'GET',
    data: {
      from: 'æ”¯ä»˜å®',
      production: 'AlipayJSAPI',
    },
    headers: {
      'content-type': 'application/json', // é»˜è®¤å€¼
    },
    dataType: 'json',
    fail() {
      callback(false, null);
    },
    complete(res) {
      callback(true, res.data);
    },
  });
}

function handleCanvas(_that, my, callback) {
  const selector = my.createSelectorQuery();
  const domSelector = selector.select('#canvas');
  domSelector
    .fields(
      {
        node: true,
        context: false,
        rect: true,
        computedStyle: ['height', 'width'],
      },
      function (res) {
        res.node.left = res.left;
        res.node.top = res.top;

        const DPR = my.getSystemInfoSync().pixelRatio;
        res.node.width *= DPR;
        res.node.height *= DPR;

        callback(res.node);
      },
    )
    .exec();
}

class LayerCounter {
  private loadedLayer = 0;

  private totalLayers: number;

  private my: any;

  private context: any;

  constructor(totalLayers: number, my: any, context: any) {
    this.totalLayers = totalLayers;
    this.my = my;
    this.context = context;
  }

  loadLayer() {
    this.loadedLayer++;
    const that = this;
    if (this.loadedLayer >= this.totalLayers) {
      this.my.hideLoading({
        page: that, // é˜²æ­¢æ‰§è¡Œæ—¶å·²ç»åˆ‡æ¢åˆ°å…¶å®ƒé¡µé¢ï¼Œpage æŒ‡å‘ä¸å‡†ç¡®
      });
      this.context.setData({
        isLoading: false,
      });
    }
  }
}
```---
title: L7Mini hexagon
order: 4
---

<embed src="@/docs/api/mini/demos/hexagon.zh.md"></embed>
---
title: L7Mini ç½‘æ ¼çƒ­åŠ›
order: 4
---

<embed src="@/docs/common/style.md"></embed>

## æ¡ˆä¾‹
<img width="200px" alt="ç½‘æ ¼çƒ­åŠ›" src='https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*7VR6To9TiwsAAAAAAAAAAAAAARQnAQ'>

### ç½‘æ ¼çƒ­åŠ›

index.axml é¡µé¢ç»“æ„ä»£ç 
```javascript
<view class="isLoading" style="height: 100vh" a:if="{{isLoading}}">
  <view class="loadItem" a:for="{{10}}">
  </view>
</view>

<view id="box" class="wrap" 
  onTouchStart="onTouchStart" 
  onTouchMove="onTouchMove"
  onTouchEnd="onTouchEnd"
  >
  <canvas onReady="onCanvasReady" type="webgl" id="canvas" />

    <view class="populationWrap">
    <view class="populationIcons">
      çƒ­åŠ›å€¼:
    </view>
    <view class="populationIcons" a:for="{{population}}">
      <view> {{item.count}}  </view>
      <view class="colorLine" style="background:{{item.color}}"></view>
    </view>
  </view>
  
</view>
<image class="antvl7" mode="scaleToFill" src="{{antvl7}}" />

```
index.less æ ·å¼ä»£ç 
```less
.wrap {
  height: 100vh;
  #canvas {
    height: 100%;
    width: 100%;
  }
}

.populationWrap {
  position: absolute;
  bottom: 32px;
  font-size: 0.6em;
  .populationIcons {
    float: left;
    margin-left: 10px;
    .colorLine {
      height: 5px;
      border-radius: 2px;
    }
  }
}
```

index.ts è„šæœ¬ä»£ç 
```javascript
import {
  Map,
  Scene,
  HeatmapLayer,
  dispatchTouchStart,
  dispatchTouchMove,
  dispatchTouchEnd,
  ImageLayer,
} from '@antv/l7-mini';
import { getJSON } from '../../request';
import { antvl7, hexagonData } from '../../mockData';
import { handleCanvas, LayerCounter } from '../../utils';

let miniScene;
let counter;

Page({
  data: {
    isLoading: true,
    antvl7,
    population: [
      { count: '0.1', color: '#CEF8D6' },
      { count: '0.2', color: '#A1EDB8' },
      { count: '0.3', color: '#7BE39E' },
      { count: '0.4', color: '#5FD3A6' },
      { count: '0.5', color: '#4AC5AF' },
      { count: '0.6', color: '#34B6B7' },
      { count: '0.7', color: '#289899' },
      { count: '0.8', color: '#1D7F7E' },
    ],
  },
  onLoad() {
    counter = new LayerCounter(1, my, this);
    my.showLoading();
  },
  onTouchStart(e) {
    dispatchTouchStart(e);
  },
  onTouchMove(e) {
    dispatchTouchMove(e);
  },
  onTouchEnd(e) {
    dispatchTouchEnd(e);
  },
  onCanvasReady() {
    handleCanvas(this, my, (canvas) => {
      const miniMap = new Map({
        pitch: 56.499,
        center: [114.06, 22.53],
        rotation: 39.19,
        zoom: 13,
      });
      miniScene = new Scene({
        id: 'canvas',
        canvas,
        map: miniMap,
        hasBaseMap: false,
      });
      miniScene.setBgColor('rgb(240, 243, 246)');

      const w = 0.125;
      const h = w * 0.5;
      const lng = 114.06;
      const lat = 22.53;
      const imageLayer = new ImageLayer();
      imageLayer.source(
        'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*EbL4QIQ3zKoAAAAAAAAAAAAAARQnAQ',
        {
          parser: {
            type: 'image',
            extent: [lng - w, lat - h, lng + w, lat + h],
          },
        },
      );

      getJSON(hexagonData, function (result, data) {
        if (result) {
          const layer = new HeatmapLayer({ zIndex: 1 })
            .source(data, {
              transforms: [
                {
                  type: 'hexagon',
                  size: 100,
                  field: 'h12',
                  method: 'sum',
                },
              ],
            })
            .size('sum', [0, 600])
            .shape('hexagonColumn')
            .style({
              coverage: 0.8,
              angle: 0,
              opacity: 1.0,
            })
            .color(
              'sum',
              [
                '#1D7F7E',
                '#289899',
                '#34B6B7',
                '#4AC5AF',
                '#5FD3A6',
                '#7BE39E',
                '#A1EDB8',
                '#CEF8D6',
              ].reverse(),
            );
          miniScene.addLayer(layer);
          counter.loadLayer();
        }
      });

      miniScene.on('loaded', function () {
        miniScene.addLayer(imageLayer);
        counter.loadLayer();
      });
    });
  },
  onUnload() {
    // é¡µé¢è¢«å…³é—­
    miniScene.destroy();
  },
});

```
æ–¹æ³•ä»£ç 
```javascript
function getJSON(url, callback) {
  my.request({
    url,
    method: 'GET',
    data: {
      from: 'æ”¯ä»˜å®',
      production: 'AlipayJSAPI',
    },
    headers: {
      'content-type': 'application/json', // é»˜è®¤å€¼
    },
    dataType: 'json',
    fail() {
      callback(false, null);
    },
    complete(res) {
      callback(true, res.data);
    },
  });
}

function handleCanvas(_that, my, callback) {
  const selector = my.createSelectorQuery();
  const domSelector = selector.select('#canvas');
  domSelector
    .fields(
      {
        node: true,
        context: false,
        rect: true,
        computedStyle: ['height', 'width'],
      },
      function (res) {
        res.node.left = res.left;
        res.node.top = res.top;

        const DPR = my.getSystemInfoSync().pixelRatio;
        res.node.width *= DPR;
        res.node.height *= DPR;

        callback(res.node);
      },
    )
    .exec();
}

class LayerCounter {
  private loadedLayer = 0;

  private totalLayers: number;

  private my: any;

  private context: any;

  constructor(totalLayers: number, my: any, context: any) {
    this.totalLayers = totalLayers;
    this.my = my;
    this.context = context;
  }

  loadLayer() {
    this.loadedLayer++;
    const that = this;
    if (this.loadedLayer >= this.totalLayers) {
      this.my.hideLoading({
        page: that, // é˜²æ­¢æ‰§è¡Œæ—¶å·²ç»åˆ‡æ¢åˆ°å…¶å®ƒé¡µé¢ï¼Œpage æŒ‡å‘ä¸å‡†ç¡®
      });
      this.context.setData({
        isLoading: false,
      });
    }
  }
}
```---
title: å›¾å±‚åŸºç±» BaseLayer
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

L7 Layer æ¥å£è®¾è®¡éµå¾ªå›¾å½¢è¯­æ³•ï¼Œæ‰€æœ‰å›¾å±‚éƒ½ç»§æ‰¿äºåŸºç±»ï¼ˆbaseLayerï¼‰ã€‚

è¯­æ³•ç¤ºä¾‹

```javascript
const layer = new BaseLayer(option) // option - ä¼ å…¥æ„é€ å‡½æ•°çš„å‚æ•°å¯¹è±¡ï¼Œæä¾› layer çš„åˆå§‹çŠ¶æ€
  .source(...)    // ä¼ å…¥å›¾å±‚éœ€è¦çš„æ•°æ®ä»¥åŠç›¸å…³çš„è§£æå™¨
  .filter()       // æ•°æ®è¿‡æ»¤æ–¹æ³•
  .shape(...)     // ä¸ºå›¾å±‚æŒ‡å®šå…·ä½“çš„å½¢çŠ¶ï¼Œå¦‚ï¼šcircle/triangle ç­‰
  .color(...)     // æŒ‡å®šå›¾å±‚çš„é¢œè‰²é…ç½®
  .texture(...)   // æŒ‡å®šå›¾å±‚å¼•ç”¨çš„çº¹ç†
  .size(...)      // è®¾ç½®å›¾å±‚å…ƒç´ çš„å¤§å°
  .animate(...)   // è®¾ç½®å›¾å±‚å…ƒç´ çš„åŠ¨ç”»æ¨¡å¼
  .active(...)    // æŒ‡å®šå›¾å±‚å…ƒç´ æ˜¯å¦æ”¯æŒåˆ’è¿‡é€‰ä¸­
  .select(...)    // æŒ‡å®šå›¾å±‚å…ƒç´ æ˜¯å¦æ”¯æŒç‚¹å‡»é€‰ä¸­
  .style(...);    // æŒ‡å®šå›¾å±‚è‡ªå®šä¹‰æ ·å¼çš„é…ç½®

scene.addLayer(layer);
```

<embed src="@/docs/common/layer/base.zh.md"></embed>
---
title: BaseLayer
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

The L7 Layer interface design follows graphics syntax, and all layers inherit from the base class (baseLayer).

Syntax example

```javascript
const layer = new BaseLayer(option) // option - the parameter object passed into the constructor, providing the initial state of the layer
  .source(...) // Pass in the data required by the layer and related parsers
  .filter() //data filtering method
  .shape(...) // Specify a specific shape for the layer, such as: circle/triangle, etc.
  .color(...) //Specify the color configuration of the layer
  .texture(...) //Specify the texture referenced by the layer
  .size(...) //Set the size of layer elements
  .animate(...) //Set the animation mode of layer elements
  .active(...) //Specify whether the layer element supports swipe selection
  .select(...) //Specify whether the layer element supports click selection
  .style(...); // Specify the configuration of the layer's custom style

scene.addLayer(layer);
```

<embed src="@/docs/common/layer/base.en.md"></embed>
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape` æ–¹æ³•ç”¨äºæŒ‡å®šé¢å›¾å±‚ç»˜åˆ¶å›¾å½¢çš„ç±»å‹ï¼Œå¦‚å¡«å……å›¾ï¼Œå¡«å……çº¿ï¼ŒæŒ¤å‡ºé›†åˆä½“ç­‰ã€‚

### shape('fill')

`shape` ä¸º `fill` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶å¹³é¢çš„å‡ ä½•å›¾å½¢ã€‚

```js
layer.shape('fill');
```

### shape('extrude')

`shape` ä¸º `extrude` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶ 3D çš„å‡ ä½•ä½“ã€‚

```js
layer.shape('extrude');
```

### extrusion

extrude å›¾å±‚çš„å‡çº§ç‰ˆ, æ”¯æŒ extrusionBaseï¼ˆåŸºç¡€é«˜åº¦ï¼‰æ•°æ®æ˜ å°„

```js
layer.shape('extrusion');

```






### shape('water')

`shape` ä¸º `water` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶å¹³é¢æ°´ä½“ã€‚

```js
layer.shape('water');
```

### shape('ocean')

`shape` ä¸º `ocean` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶å¹³é¢æµ·æ´‹æ°´ä½“ã€‚

```js
layer.shape('ocean');
```

### shape('line')

`shape` ä¸º `line` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶çº¿ã€‚

```js
layer.shape('line');
```

### shape('point_fill')

`shape` ä¸º `point_fill` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶å¡«å……ç‚¹ã€‚

```js
layer.shape('point_fill');
```

### shape('point_image')

`shape` ä¸º `point_image` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶ç‚¹å›¾æ ‡ã€‚

```js
layer.shape('point_image');
```

### shape('point_extrude')

`shape` ä¸º `point_extrude` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶æŸ±å­ã€‚

```js
layer.shape('point_extrude');
```

### shape('text')

`shape` ä¸º `text` å‡ ä½•å›¾å±‚ç”¨äºç»˜åˆ¶æ–‡å­—ã€‚

```js
layer.shape('text');
```
---
title: Size
order: 5
---

<embed src="@/docs/common/style.md"></embed>

`size`Method used to set the height of the Polygon

### IPointSize: number ï½œ\[number, number] | \[number, number, number]

* The size type is number, which represents the height of the Polygon.

```javascript
pointLayer.size(1);
```

### size(width: IPointSize)

The radius can be set directly on the polygon layer. All points in the layer use a height.

```js
layer.size(2);
```

### size(field: string)

The height of a polygon layer can be mapped based on the data values â€‹â€‹accepted by the layer, accepting fields of incoming data as parameters.

```js
layer.source([
  {
    lng: 120,
    lat: 30,
    r: 2,
  },
]);
layer.size('r');
```

### size(field: string, domain: IPointSize\[])

`size`Method supports simple value mapping and will be based on`field`The values â€‹â€‹extracted from the data passed into the layer are mapped to`domain`in the value range.

```js
layer.size('type', [1, 2, 3]);
```

### size(field: string, callback: () => IPointSize )

`size`The method supports the writing method of callback function, which will be based on`field`as`callback`method parameters,`callback`The return value of the method is the actual height of the polygon layer.

```js
layer.size('type', (value) => {
  switch (value) {
    case 'path':
      return 1;
    case 'road':
      return 2;
  }
});
```
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape`The method is used to specify the type of graphics drawn on the surface layer, such as filled graphics, filled lines, extruded aggregates, etc.

### shape('fill')

`shape`for`fill`Geometry layers are used to draw plane geometry.

```js
layer.shape('fill');
```

### shape('extrude')

`shape`for`extrude`Geometry layers are used to draw 3D geometry.

```js
layer.shape('extrude');
```

### extrusion

An upgraded version of the extrude layer, supporting extrusionBase (base height) data mapping

```js
layer.shape('extrusion');
```

### shape('water')

`shape`for`water`Geometry layers are used to draw flat water bodies.

```js
layer.shape('water');
```

### shape('ocean')

`shape`for`ocean`Geometry layers are used to draw flat ocean water bodies.

```js
layer.shape('ocean');
```

### shape('line')

`shape`for`line`Geometry layers are used to draw lines.

```js
layer.shape('line');
```

### shape('point\_fill')

`shape`for`point_fill`Geometry layers are used to draw fill points.

```js
layer.shape('point_fill');
```

### shape('point\_image')

`shape`for`point_image`Geometry layers are used to draw point icons.

```js
layer.shape('point_image');
```

### shape('point\_extrude')

`shape`for`point_extrude`The geometry layer is used to draw the columns.

```js
layer.shape('point_extrude');
```

### shape('text')

`shape`for`text`Geometry layers are used to draw text.

```js
layer.shape('text');
```
---
title: Size
order: 5
---

<embed src="@/docs/common/style.md"></embed>

`size` æ–¹æ³•ç”¨äºè®¾ç½® Polygon çš„é«˜åº¦

### IPointSize: number ï½œ[number, number] | [number, number, number]

- size ç±»å‹ä¸º number åˆ™è¡¨ç¤º Polygon çš„é«˜åº¦


```javascript
pointLayer.size(1);

```

### size(width: IPointSize)

é¢å›¾å±‚å¯ä»¥ç›´æ¥è®¾ç½®åŠå¾„ã€‚å›¾å±‚ä¸­æ‰€æœ‰çš„ç‚¹ä½¿ç”¨ä¸€ä¸ªé«˜åº¦ã€‚

```js
layer.size(2);
```

### size(field: string)

é¢å›¾å±‚çš„é«˜åº¦å¯ä»¥æ ¹æ®å›¾å±‚æ¥å—çš„æ•°æ®å€¼è¿›è¡Œæ˜ å°„ï¼Œæ¥å—ä¼ å…¥æ•°æ®çš„å­—æ®µä½œä¸ºå‚æ•°ã€‚

```js
layer.source([
  {
    lng: 120,
    lat: 30,
    r: 2,
  },
]);
layer.size('r');
```

### size(field: string, domain: IPointSize[])

`size` æ–¹æ³•æ”¯æŒç®€å•çš„å€¼æ˜ å°„ï¼Œå°†æ ¹æ® `field` ä»ä¼ å…¥å›¾å±‚çš„æ•°æ®ä¸­æå–çš„å€¼æ˜ å°„åˆ° `domain` å€¼åŸŸä¸­ã€‚

```js
layer.size('type', [1, 2, 3]);
```

### size(field: string, callback: () => IPointSize )

`size` æ–¹æ³•æ”¯æŒå›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œå°†æ ¹æ® `field` ä½œä¸º `callback` æ–¹æ³•çš„å‚æ•°ï¼Œ`callback` æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºé¢å›¾å±‚å®é™…é«˜åº¦ã€‚

```js
layer.size('type', (value) => {
  switch (value) {
    case 'path':
      return 1;
    case 'road':
      return 2;
  }
});
```
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`style` æ–¹æ³•ç”¨äºé…åˆ¶å›¾å±‚çš„æ ·å¼ï¼Œç›¸åŒå›¾å±‚æ‹¥æœ‰ä¸åŒçš„ `shape` å›¾å½¢ï¼Œä¸åŒ `shape` çš„å›¾å±‚ `style` æ–¹æ³•æ¥å—ä¸åŒçš„å‚æ•°ã€‚

```js
layer.style({
  opacity: 0.5,
});
```

### common

é€šç”¨ `style` å‚æ•°ï¼Œæ‰€æœ‰å›¾å½¢éƒ½æ”¯æŒçš„å‚æ•°ã€‚

| style   | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| ------- | -------- | ------------ | ------ |
| opacity | `number` | å›¾å½¢çš„é€æ˜åº¦ | `1`    |

### fill

`shape` ä¸ºå¹³é¢å¡«å……å‡ ä½•ä½“ã€‚

- [fill](/api/polygon_layer/shape#shapefill)

| style         | ç±»å‹             | æè¿°     | é»˜è®¤å€¼ |
| ------------- | ---------------- | -------- | ------ |
| raisingHeight | `number`         | æŠ¬å‡é«˜åº¦ | `0`    |
| opacityLinear | `IOpacityLinear` | é€æ˜æ¸å˜ | `/`    |

#### opacityLinear

```js
type IDir = 'in' | 'out';

interface IOpacityLinear {
  enable: false;
  dir: IDir;
}
```

### extrude

`shape` ä¸ºæŒ¤å‡ºå‡ ä½•ä½“ã€‚

- [extrude](/api/polygon_layer/shape#shapeextrude)

| style         | ç±»å‹      | æè¿°                       | é»˜è®¤å€¼  |
| ------------- | --------- | -------------------------- | ------- |
| raisingHeight | `number`  | æŠ¬å‡é«˜åº¦                   | `0`     |
| heightfixed   | `boolean` | æŠ¬å‡é«˜åº¦æ˜¯å¦éš `zoom` å˜åŒ– | `false` |
| topsurface    | `boolean` | é¡¶éƒ¨æ˜¯å¦æ˜¾ç¤º               | `true`  |
| sidesurface   | `boolean` | ä¾§é¢æ˜¯å¦æ˜¾ç¤º               | `true`  |
| sourceColor   | `IColor`  | ä¾§é¢åº•éƒ¨é¢œè‰²               | `/`     |
| targetColor   | `IColor`  | ä¾§é¢é¡¶éƒ¨é¢œè‰²               | `/`     |

### extrusion
`shape` ä¸ºæŒ¤å‡ºå‡ ä½•ä½“ã€‚

- [extrusion](/api/polygon_layer/shape#extrusion)

| style         | ç±»å‹      | æè¿°       |  æ˜¯å¦æ”¯æŒæ•°æ®æ˜ å°„               | é»˜è®¤å€¼  |
| ------------- | --------- | -----------| --------------- | ------- |
| extrusionBase | `number`  | åŸºç¡€é«˜åº¦ï¼Œå•ä½ç±³     | æ”¯æŒ           | `0`     |


#### linear

å‡ ä½•ä½“å›¾å±‚æ”¯æŒé…ç½®æ¸å˜æ•ˆæœï¼ˆsourceColorã€targetColorï¼‰ï¼Œåœ¨é…ç½®æ¸å˜æ•ˆæœåä¼šè¦†ç›– `layer.color` æ–¹æ³•è®¾ç½®çš„é¢œè‰²ã€‚

### water

`shape` ä¸ºæ°´ä½“è¡¨é¢å‡ ä½•ä½“ã€‚

- [water](/api/polygon_layer/shape#shapewater)

| style        | ç±»å‹     | æè¿°     | é»˜è®¤å€¼ |
| ------------ | -------- | -------- | ------ |
| speed        | `number` | æ°´æ³¢é€Ÿåº¦ | `0.5`  |
| waterTexture | `string` | æ°´é¢è´´å›¾ | `0`    |

`waterTexture` é»˜è®¤å€¼ä¸º 'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ'

### ocean

`shape` ä¸ºæµ·æ´‹è¡¨é¢å‡ ä½•ä½“ã€‚

- [ocean](/api/polygon_layer/shape#shapeocean)

| style       | ç±»å‹     | æè¿°     | é»˜è®¤å€¼    |
| ----------- | -------- | -------- | --------- |
| watercolor  | `IColor` | æ°´é¢é¢œè‰² | `#6D99A8` |
| watercolor2 | `IColor` | æ°´é¢é¢œè‰² | `#0F121C` |

### other

å‡ ä½•ä½“å›¾å±‚æ”¯æŒçš„å…¶ä»– `shape` éƒ½æœ‰å¯¹åº”çš„å›¾å±‚ï¼Œå¯ä»¥å‚è€ƒå¯¹åº”å›¾å±‚çš„æ ·å¼å‚æ•°ã€‚
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`style`The method is used to configure the style of the layer. The same layer has different`shape`graphics, different`shape`layer`style`Methods accept different parameters.

```js
layer.style({
  opacity: 0.5,
});
```

### common

Universal`style`Parameters, parameters supported by all graphics.

| style   | type     | describe             | default value |
| ------- | -------- | -------------------- | ------------- |
| opacity | `number` | Graphic transparency | `1`           |

### fill

`shape`Fills the plane with geometry.

* [fill](/api/polygon_layer/shape#shapefill)

| style         | type             | describe             | default value |
| ------------- | ---------------- | -------------------- | ------------- |
| raisingHeight | `number`         | Lifting height       | `0`           |
| opacityLinear | `IOpacityLinear` | transparent gradient | `/`           |

#### opacityLinear

```js
type IDir = 'in' | 'out';

interface IOpacityLinear {
  enable: false;
  dir: IDir;
}
```

### extrude

`shape`for extruded geometry.

* [extrude](/api/polygon_layer/shape#shapeextrude)

| style         | type      | describe                                   | default value |
| ------------- | --------- | ------------------------------------------ | ------------- |
| raisingHeight | `number`  | Lifting height                             | `0`           |
| heightfixed   | `boolean` | Does the lifting height vary?`zoom`Variety | `false`       |
| topsurface    | `boolean` | Whether to display the top                 | `true`        |
| sidesurface   | `boolean` | Whether to display on the side             | `true`        |
| sourceColor   | `IColor`  | Side bottom color                          | `/`           |
| targetColor   | `IColor`  | side top color                             | `/`           |

### extrusion

`shape`for extruded geometry.

* [extrusion](/api/polygon_layer/shape#extrusion)

| style         | type     | describe              | Whether to support data mapping | default value |
| ------------- | -------- | --------------------- | ------------------------------- | ------------- |
| extrusionBase | `number` | Base height in meters | support                         | `0`           |

#### linear

The geometry layer supports configuring gradient effects (sourceColor, targetColor), which will be overwritten after configuring the gradient effect.`layer.color`Method to set the color.

### water

`shape`is the water surface geometry.

* [water](/api/polygon_layer/shape#shapewater)

| style        | type     | describe              | default value |
| ------------ | -------- | --------------------- | ------------- |
| speed        | `number` | water wave speed      | `0.5`         |
| waterTexture | `string` | water surface texture | `0`           |

`waterTexture`The default value is '<https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ>'

### ocean

`shape`is the ocean surface geometry.

* [ocean](/api/polygon_layer/shape#shapeocean)

| style       | type     | describe    | default value |
| ----------- | -------- | ----------- | ------------- |
| watercolor  | `IColor` | water color | `#6D99A8`     |
| watercolor2 | `IColor` | water color | `#0F121C`     |

### other

Others supported by geometry layers`shape`There are corresponding layers. You can refer to the style parameters of the corresponding layers.
---
title: Animate
order: 7
---

<embed src="@/docs/common/style.md"></embed>

The geometry layer is`shape`for`water`or`ocean`When you will get a flowing water surface, at this time we need to use`animate`Method to enable animation.

<div>
  <div style="width:40%;float:left; margin: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### animate(boolean)

`animate`The method supports Boolean and object passing values.

```javascript
layer.animate(true);

layer.animate({
  enable: true,
});
```
---
title: Animate
order: 7
---

<embed src="@/docs/common/style.md"></embed>

å‡ ä½•ä½“å›¾å±‚åœ¨ `shape` ä¸º `water` æˆ– `ocean` çš„æ—¶å€™ä¼šå¾—åˆ°æµåŠ¨çš„æ°´é¢ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨ `animate` æ–¹æ³•å¼€å¯åŠ¨ç”»ã€‚

<div>
  <div style="width:40%;float:left; margin: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

### animate(boolean)

`animate` æ–¹æ³•æ”¯æŒå¸ƒå°”å€¼å’Œå¯¹è±¡ä¼ å€¼ã€‚

```javascript
layer.animate(true);

layer.animate({
  enable: true,
});
```
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.zh.md"></embed>
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.en.md"></embed>
---
title: Color
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/color.zh.md"></embed>
---
title: Color
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/color.en.md"></embed>
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.zh.md"></embed>
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

å‡ ä½•ä½“å›¾å±‚æ•°æ®æ¨èä½¿ç”¨ GeoJSON æ ¼å¼çš„æ•°æ®ã€‚

- [GeoJSON](/api/source/geojson/#point)

### GeoJSON

```js
// ä¼ å…¥ GeoJSON ç±»å‹æ•°æ® *** L7 é»˜è®¤æ”¯æŒï¼Œä¸éœ€è¦ parser è§£æ
const data = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {},
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [104.4140625, 35.460669951495305],
            [98.7890625, 24.206889622398023],
            [111.796875, 27.371767300523047],
            [104.4140625, 35.460669951495305],
          ],
        ],
      },
    },
  ],
};

const layer = new PolygonLayer().source(data);
```
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

It is recommended to use GeoJSON format data for geometry layer data.

* [GeoJSON](/api/source/geojson/#point)

### GeoJSON

```js
// Pass in GeoJSON type data *** L7 supports it by default and does not require parser analysis
const data = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {},
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [104.4140625, 35.460669951495305],
            [98.7890625, 24.206889622398023],
            [111.796875, 27.371767300523047],
            [104.4140625, 35.460669951495305],
          ],
        ],
      },
    },
  ],
};

const layer = new PolygonLayer().source(data);
```
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.en.md"></embed>
---
title: PolygonLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

Draws 2D polygons and 3D shapes stretched along the Z axis.

## use

```javascript
import { PolygonLayer } from '@antv/l7';
const layer = new PolygonLayer()
  .source({
    type: 'FeatureCollection',
    features: [
      {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'Polygon',
          coordinates: [
            [
              [104.4140625, 35.460669951495305],
              [98.7890625, 24.206889622398023],
              [111.796875, 27.371767300523047],
              [104.4140625, 35.460669951495305],
            ],
          ],
        },
      },
    ],
  })
  .shape('fill')
  .color('#f00')
  .style({
    opacity: 0.6,
  });
```
---
title: PolygonLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

ç»˜åˆ¶ 2D å¤šè¾¹å½¢ä»¥åŠæ²¿ Z è½´æ‹‰ä¼¸åçš„ 3D å›¾å½¢ã€‚

## ä½¿ç”¨

```javascript
import { PolygonLayer } from '@antv/l7';
const layer = new PolygonLayer()
  .source({
    type: 'FeatureCollection',
    features: [
      {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'Polygon',
          coordinates: [
            [
              [104.4140625, 35.460669951495305],
              [98.7890625, 24.206889622398023],
              [111.796875, 27.371767300523047],
              [104.4140625, 35.460669951495305],
            ],
          ],
        },
      },
    ],
  })
  .shape('fill')
  .color('#f00')
  .style({
    opacity: 0.6,
  });
```
---
title: RasterTile æ …æ ¼ç“¦ç‰‡
order: 7
---

<embed src="@/docs/common/style.md"></embed>

When L7 loads the raster tile map, it needs to be`source`Parse the tile service and configure the request parameters of the tile service.

## data

Tile URL, only supports EPSG 3857 coordinate system, supports TMS, WMS, WMTS protocols

### TMS

Pass parameters through url template, required to participate`{}`

* 1-4 server encoding {1-4}
* z zoom level
* x tile x coordinate
* y tile y coordinate

```js
const url =
  'http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}';
```

### WMS

url template parameters

* 1-x server encoding {1-4}
* bbox tile range template BBOXSR only supports 4326, IMAGESR only supports 3857

Example

```js
const url =
  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR=3857&DPI=90';
```

### WMTS

url template parameters

* 1-4 server encoding {1-4}

WMTS two ways

* The usage is similar to TMS, you can splice url strings
* Set service parameters through parser parameter wmtsOptions

```js
const url1 =
  'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';
const layer1 = new RasterLayer({
  zIndex: 1,
}).source(url1, {
  parser: {
    type: 'rasterTile',
    tileSize: 256,
    wmtsOptions: {
      layer: 'img',
      tileMatrixset: 'w',
      format: 'tiles',
    },
  },
});
```

## parser

### type

<description> *string* **required** *default:* rasterTile</description>The fixed value is`rasterTile`

### tileSize `number`

<description> *number* **Optional** *default:* 256</description>Request tile size optional

### zoomOffset

<description> number **Optional** *default:*0</description>Tile request tile level offset

### maxZoom

<description> *number* **Optional** *default:*0</description>

Maximum tile zoom level`20`

### minZoom tile minimum zoom, etc.

<description> *number* **Optional** *default:* 2-</description>

### extent `[number, number, number, number]`Map display range

<description> *number\[]* **Optional**not limited:\_</description>

### dataType

<description> *string* **Optional** *default:* image</description>

Tile data type

* image image type
* arraybuffer data type such as geotiff

### format function,

<description> *func* **Optional**\_default:</description>

Used when data raster is used to format raster data into standard data and customize data processing functions

### wmtsOptions wmsts configuration

<description> *Object* **Optional** *default:* null</description>

#### layer

<description> *string* **required** *default:* img</description>Layers

#### tileMatrixset

<description> *string* **required** *default:* w</description>

#### format

<description> *string* **required** *default:* tiles</description>Service type

```javascript
const rasterSource = new Source(
  'http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      tileSize: 256,
      zoomOffset: 0,
      extent: [-180, -85.051129, 179, 85.051129],
    },
  },
);
```

<embed src="@/docs/common/source/tile/method.en.md"></embed>
---
title: RasterTile æ …æ ¼ç“¦ç‰‡
order: 7
---

<embed src="@/docs/common/style.md"></embed>

L7 åŠ è½½æ …æ ¼ç“¦ç‰‡åœ°å›¾çš„æ—¶å€™éœ€è¦åœ¨ `source` ä¸­å¯¹ç“¦ç‰‡æœåŠ¡è¿›è¡Œè§£æï¼ŒåŒæ—¶é…ç½®ç“¦ç‰‡æœåŠ¡çš„è¯·æ±‚å‚æ•°ã€‚

## data

ç“¦ç‰‡ URL,ä»…æ”¯æŒ EPSG 3857 çš„åæ ‡ç³»ï¼Œæ”¯æŒ TMSã€WMSã€WMTS åè®®

### TMS

é€šè¿‡ url æ¨¡æ¿ä¼ å‚ï¼Œå‚ä¸éœ€è¦ä½¿ç”¨ `{}`

- 1-4 æœåŠ¡å™¨ç¼–ç  {1-4}
- z ç¼©æ”¾ç­‰çº§
- x ç“¦ç‰‡ x åæ ‡
- y ç“¦ç‰‡ y åæ ‡

```js
const url =
  'http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}';
```

### WMS

url æ¨¡æ¿å‚æ•°

- 1-x æœåŠ¡å™¨ç¼–ç  {1-4}
- bbox ç“¦ç‰‡èŒƒå›´æ¨¡æ¿ BBOXSR åªæ”¯æŒ 4326,IMAGESR åªæ”¯æŒ 3857

ç¤ºä¾‹

```js
const url =
  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR=3857&DPI=90';
```

### WMTS

url æ¨¡æ¿å‚æ•°

- 1-4 æœåŠ¡å™¨ç¼–ç  {1-4}

WMTS ä¸¤ç§æ–¹å¼

- ä½¿ç”¨æ–¹å¼å’Œ TMS ç›¸ä¼¼ï¼Œå¯ä»¥æ‹¼æ¥ url å­—ç¬¦ä¸²
- é€šè¿‡ parser å‚æ•° wmtsOptions è®¾ç½®æœåŠ¡å‚æ•°

```js
const url1 =
  'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';
const layer1 = new RasterLayer({
  zIndex: 1,
}).source(url1, {
  parser: {
    type: 'rasterTile',
    tileSize: 256,
    wmtsOptions: {
      layer: 'img',
      tileMatrixset: 'w',
      format: 'tiles',
    },
  },
});
```

## parser

### type

<description> _string_ **å¿…é€‰** _default:_ rasterTile</description>
å›ºå®šå€¼ä¸º `rasterTile`

### tileSize `number`

<description> _number_ **å¯é€‰** _default:_ 256</description>
è¯·æ±‚ç“¦ç‰‡çš„å¤§å° optional

### zoomOffset

<description> number **å¯é€‰** _default:_ 0</description>
ç“¦ç‰‡è¯·æ±‚ç“¦ç‰‡å±‚çº§çš„åç§»

### maxZoom

<description> _number_ **å¯é€‰** _default:_ 0</description>

ç“¦ç‰‡æœ€å¤§ç¼©æ”¾ç­‰çº§ `20`

### minZoom ç“¦ç‰‡æœ€å°ç¼©æ”¾ç­‰

<description> _number_ **å¯é€‰** _default:_ 2-</description>

### extent `[number, number, number, number]` åœ°å›¾æ˜¾ç¤ºèŒƒå›´

<description> _number[]_ **å¯é€‰** ä¸é™åˆ¶:\_ </description>

### dataType

<description> _string_ **å¯é€‰** _default:_ image</description>

ç“¦ç‰‡æ•°æ®ç±»å‹

- image å›¾åƒç±»å‹
- arraybuffer æ•°æ®ç±»å‹å¦‚ geotiff

### format func,

<description> _func_ **å¯é€‰** \_default:</description>

æ•°æ®æ …æ ¼æ—¶ä½¿ç”¨,ç”¨äºå°†æ …æ ¼æ•°æ®æ ¼å¼åŒ–ä¸ºæ ‡å‡†æ•°æ®,è‡ªå®šä¹‰æ•°æ®å¤„ç†å‡½æ•°

### wmtsOptions wmsts é…ç½®

<description> _Object_ **å¯é€‰** _default:_ null</description>

#### layer

<description> _string_ **å¿…é€‰** _default:_ img</description>
å›¾å±‚

#### tileMatrixset

<description> _string_ **å¿…é€‰** _default:_ w</description>

#### format

<description> _string_ **å¿…é€‰** _default:_ tiles</description>
æœåŠ¡ç±»å‹

```javascript
const rasterSource = new Source(
  'http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      tileSize: 256,
      zoomOffset: 0,
      extent: [-180, -85.051129, 179, 85.051129],
    },
  },
);
```
<embed src="@/docs/common/source/tile/method.zh.md"></embed>
---
title: GeoJSON
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

GeoJSON æ˜¯ä¸€ç§å¯¹å„ç§åœ°ç†æ•°æ®ç»“æ„è¿›è¡Œç¼–ç çš„æ ¼å¼ã€‚GeoJSON å¯¹è±¡å¯ä»¥è¡¨ç¤ºå‡ ä½•ã€ç‰¹å¾æˆ–è€…ç‰¹å¾é›†åˆã€‚GeoJSON æ”¯æŒä¸‹é¢å‡ ä½•ç±»å‹ï¼šç‚¹ã€çº¿ã€é¢ã€å¤šç‚¹ã€å¤šçº¿ã€å¤šé¢å’Œå‡ ä½•é›†åˆã€‚GeoJSON é‡Œçš„ç‰¹å¾åŒ…å«ä¸€ä¸ªå‡ ä½•å¯¹è±¡å’Œå…¶ä»–å±æ€§ï¼Œç‰¹å¾é›†åˆè¡¨ç¤ºä¸€ç³»åˆ—ç‰¹å¾ã€‚
[The GeoJSON Format](https://tools.ietf.org/html/draft-butler-geojson-06)

L7 æ•°æ® source æ”¯æŒ Â  ä¼ å…¥ Geometry é›†åˆ FeatureCollection

### Feature Collection Object

ä¸€ä¸ª feature Colletion ç”±å¯¹ä¸ª feature ç»„æˆ

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "tom"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [-2.8125, 34.59704151614417],
            [65.390625, 34.59704151614417],
            [65.390625, 61.10078883158897],
            [-2.8125, 61.10078883158897],
            [-2.8125, 34.59704151614417]
          ]
        ]
      }
    }
  ]
}
```

### Feature Object

ä¸€ä¸ª feature æœ‰ geometry ç©ºé—´ä¿¡æ¯ï¼Œproperties å±æ€§ä¿¡æ¯ï¼Œå…¶ä¸­ geometry æ˜¯å¿…é¡»å­—æ®µ

```json
{
  "type": "Feature",
  "properties": {},
  "geometry": {}
}
```

### Gemetry Object

æ”¯æŒ Gemetry Object ç±»å‹

#### Point

```json
{
  "type": "Point",
  "coordinates": [100.0, 0.0]
}
```

#### MultiPoint

```json
{
  "type": "MultiPoint",
  "coordinates": [
    [100.0, 0.0],
    [101.0, 1.0]
  ]
}
```

Line

#### LineSring

```json
{
  "type": "LineString",
  "coordinates": [
    [100.0, 0.0],
    [101.0, 1.0]
  ]
}
```

#### MultiLineString

```json
{
  "type": "MultiLineString",
  "coordinates": [
    [
      [100.0, 0.0],
      [101.0, 1.0]
    ],
    [
      [102.0, 2.0],
      [103.0, 3.0]
    ]
  ]
}
```

Polygon

#### Polygon

```json
{
  "type": "Polygon",
  "coordinates": [
    [
      [100.0, 0.0],
      [101.0, 0.0],
      [101.0, 1.0],
      [100.0, 1.0],
      [100.0, 0.0]
    ]
  ]
}
```

With holes:

```json
{
  "type": "Polygon",
  "coordinates": [
    [
      [-170.0, 10.0],
      [170.0, 10.0],
      [170.0, -10.0],
      [-170.0, -10.0],
      [-170.0, 10.0]
    ],
    [
      [175.0, 5.0],
      [-175.0, 5.0],
      [-175.0, -5.0],
      [175.0, -5.0],
      [175.0, 5.0]
    ]
  ]
}
```

#### MultiPolygon

```json
{
  "type": "MultiPolygon",
  "coordinates": [
    [
      [
        [102.0, 2.0],
        [103.0, 2.0],
        [103.0, 3.0],
        [102.0, 3.0],
        [102.0, 2.0]
      ]
    ],
    [
      [
        [100.0, 0.0],
        [101.0, 0.0],
        [101.0, 1.0],
        [100.0, 1.0],
        [100.0, 0.0]
      ],
      [
        [100.2, 0.2],
        [100.8, 0.2],
        [100.8, 0.8],
        [100.2, 0.8],
        [100.2, 0.2]
      ]
    ]
  ]
}
```

[geojson è¯¦ç»†æ–‡æ¡£]()

## Geojson ç›¸å…³çš„ JS åº“

### åœ°ç†ç»Ÿè®¡åˆ†æå·¥å…·

[turfjs](http://turfjs.org/): Â  åœ°ç†æ•°æ®è®¡ç®—ï¼Œå¤„ç†ï¼Œç»Ÿè®¡ï¼Œåˆ†æçš„ Javascript åº“

### åœ¨çº¿å·¥å…·ï¼š

[http://geojson.io/](http://geojson.io/) Â  Â  å¯ä»¥åœ¨çº¿æŸ¥çœ‹ï¼Œç»˜åˆ¶ï¼Œä¿®æ”¹ GeoJSON æ•°æ®

[https://mapshaper.org/](https://mapshaper.org/) å¯ä»¥æŸ¥çœ‹è¾ƒå¤§çš„ geojsonï¼Œè¿˜èƒ½å¤Ÿç®€åŒ– GeoJSON æ•°æ®
---
title: GeoJSON
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

GeoJSON is a format for encoding various geographic data structures. GeoJSON objects can represent geometries, features, or collections of features. GeoJSON supports the following geometry types: point, line, polygon, multipoint, multiline, polygon, and geometry collection. A feature in GeoJSON contains a geometric object and other attributes, and a feature collection represents a series of features.[The GeoJSON Format](https://tools.ietf.org/html/draft-butler-geojson-06)

L7 data source supports passing in the Geometry collection FeatureCollection

### Feature Collection Object

A feature Collection consists of pairs of features

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "tom"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [-2.8125, 34.59704151614417],
            [65.390625, 34.59704151614417],
            [65.390625, 61.10078883158897],
            [-2.8125, 61.10078883158897],
            [-2.8125, 34.59704151614417]
          ]
        ]
      }
    }
  ]
}
```

### Feature Object

A feature has geometry spatial information and properties attribute information, where geometry is a required field.

```json
{
  "type": "Feature",
  "properties": {},
  "geometry": {}
}
```

### Gemetry Object

Supports Gemetry Object type

#### Point

```json
{
  "type": "Point",
  "coordinates": [100.0, 0.0]
}
```

#### MultiPoint

```json
{
  "type": "MultiPoint",
  "coordinates": [
    [100.0, 0.0],
    [101.0, 1.0]
  ]
}
```

Line

#### LineSring

```json
{
  "type": "LineString",
  "coordinates": [
    [100.0, 0.0],
    [101.0, 1.0]
  ]
}
```

#### MultiLineString

```json
{
  "type": "MultiLineString",
  "coordinates": [
    [
      [100.0, 0.0],
      [101.0, 1.0]
    ],
    [
      [102.0, 2.0],
      [103.0, 3.0]
    ]
  ]
}
```

Polygon

#### Polygon

```json
{
  "type": "Polygon",
  "coordinates": [
    [
      [100.0, 0.0],
      [101.0, 0.0],
      [101.0, 1.0],
      [100.0, 1.0],
      [100.0, 0.0]
    ]
  ]
}
```

With holes:

```json
{
  "type": "Polygon",
  "coordinates": [
    [
      [-170.0, 10.0],
      [170.0, 10.0],
      [170.0, -10.0],
      [-170.0, -10.0],
      [-170.0, 10.0]
    ],
    [
      [175.0, 5.0],
      [-175.0, 5.0],
      [-175.0, -5.0],
      [175.0, -5.0],
      [175.0, 5.0]
    ]
  ]
}
```

#### MultiPolygon

```json
{
  "type": "MultiPolygon",
  "coordinates": [
    [
      [
        [102.0, 2.0],
        [103.0, 2.0],
        [103.0, 3.0],
        [102.0, 3.0],
        [102.0, 2.0]
      ]
    ],
    [
      [
        [100.0, 0.0],
        [101.0, 0.0],
        [101.0, 1.0],
        [100.0, 1.0],
        [100.0, 0.0]
      ],
      [
        [100.2, 0.2],
        [100.8, 0.2],
        [100.8, 0.8],
        [100.2, 0.8],
        [100.2, 0.2]
      ]
    ]
  ]
}
```

[geojson detailed documentation]()

## Geojson related JS libraries

### Geostatistical analysis tools

[turfjs](http://turfjs.org/): Javascript library for geographic data calculation, processing, statistics, and analysis

### Online tools:

<http://geojson.io/>You can view, draw and modify GeoJSON data online

<https://mapshaper.org/>Ability to view larger geojson and also simplify GeoJSON data
---
title: Raster RGB
order: 5
---

<embed src="@/docs/common/source/raster/raster_rgb.zh.md"></embed>
---
title: Raster RGB
order: 5
---

<embed src="@/docs/common/source/raster/raster_rgb.en.md"></embed>
---
title: Raster
order: 5
---

<embed src="@/docs/common/style.md"></embed>

Raster å›¾å±‚ä¸»è¦å®ç°æ …æ ¼æ•°æ®çš„å¯è§†åŒ–ï¼Œæ …æ ¼æ•°æ®ä¸»è¦æ¥æºæ˜¯å«æ˜Ÿé¥æ„Ÿæ•°æ®ï¼Œå¦‚æ•°å­—é«˜ç¨‹å›¾ï¼Œæ¤è¢«åˆ†å¸ƒå›¾ï¼Œå¤œå…‰å›¾ã€‚

<embed src="@/docs/common/source/raster/raster_single.zh.md"></embed>
---
title: Raster
order: 5
---

<embed src="@/docs/common/style.md"></embed>

The Raster layer mainly realizes the visualization of raster data. The main source of raster data is satellite remote sensing data, such as digital elevation map, vegetation distribution map, and night light map.

<embed src="@/docs/common/source/raster/raster_single.zh.md"></embed>
---
title: Source
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

source åœ°ç†æ•°æ®å¤„ç†æ¨¡å—ï¼Œä¸»è¦åŒ…å«æ•°æ®è§£æï¼ˆparser)ï¼Œå’Œæ•°æ®å¤„ç†ï¼ˆtransformï¼‰ã€‚

```js
const source = new Source(data, option);
```

- data
- option
  - cluster **boolean** æ˜¯å¦èšåˆ
  - clusterOptions èšåˆé…ç½®é¡¹
  - parser æ•°æ®è§£æé…ç½®
  - transforms æ•°æ®å¤„ç†é…ç½®

## data

ä¸åŒ parser ç±»å‹å¯¹åº”ä¸åŒ data ç±»å‹

- ç“¦ç‰‡å›¾å±‚ data ä¸º url æ¨¡æ¿ï¼Œæ”¯æŒ TMSã€WMSã€WMTS æ•°æ®æœåŠ¡
- éç“¦ç‰‡å›¾å±‚ data ä¸ºæ•°æ®å¯¹è±¡

## option

`source` é€šè¿‡ `option` æ¥æè¿°å¦‚æœå¤„ç†æ•°æ®ï¼Œ å…¶ä¸­ä¸»è¦åŒ…æ‹¬ `parser` å’Œ `transforms`ã€‚

### parser

ä¸åŒæ•°æ®ç±»å‹å¤„ç†æˆç»Ÿä¸€æ•°æ®æ ¼å¼ã€‚çŸ¢é‡æ•°æ®åŒ…æ‹¬ GeoJONï¼Œ CSVï¼ŒJson ç­‰ä¸åŒæ•°æ®æ ¼å¼ï¼Œæ …æ ¼æ•°æ®ï¼ŒåŒ…æ‹¬ Rasterï¼ŒImage æ•°æ®ã€‚å°†æ¥è¿˜ä¼šæ”¯æŒç“¦ç‰‡æ ¼å¼æ•°æ®ã€‚

ç©ºé—´æ•°æ®åˆ†çŸ¢é‡æ•°æ®ï¼Œæ …æ ¼æ•°æ®å’Œç“¦ç‰‡ä¸‰å¤§ç±»

- çŸ¢é‡æ•°æ® æ”¯æŒ csvï¼Œgeojsonï¼Œjson ä¸‰ç§æ•°æ®ç±»å‹
- æ …æ ¼æ•°æ® æ”¯æŒ imageï¼ŒRaster
- ç“¦ç‰‡æœåŠ¡ æ”¯æŒ mvtã€rasterTileã€geojsonvt

```js
type IParserType =
  | 'csv'
  | 'json'
  | 'geojson'
  | 'image'
  | 'raster'
  | 'rasterTile'
  | 'mvt'
  | 'geojsonvt';
interface IParser {
  type: IParserType;
  x?: string;
  y?: string;
  x1?: string;
  y1?: string;
  coordinates?: string;
  geometry?: string;
  [key: string]: any;
}
```

#### geojson

[geojson](https://www.yuque.com/antv/l7/dm2zll) æ•°æ®ä¸ºé»˜è®¤æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ ä¸è®¾ç½® parser å‚æ•°

```javascript
layer.source(data);
```

### transforms

tranforms å¤„ç†çš„æ˜¯çš„æ ‡å‡†åŒ–ä¹‹åçš„æ•°æ®ï¼Œè¿›è¡Œæ•°æ®è½¬æ¢ï¼Œæ•°æ®ç»Ÿè®¡ï¼Œç½‘æ ¼å¸ƒå±€ï¼Œæ•°æ®èšåˆç­‰æ•°æ®æ“ä½œï¼Œå¤„ç†å®Œä¹‹åè¿”å›çš„ä¹Ÿæ˜¯æ ‡å‡†æ•°æ®ã€‚  
æ ‡å‡†åŒ–ä¹‹åçš„æ•°æ®ç»“æ„åŒ…æ‹¬ coordinates åœ°ç†åæ ‡å­—æ®µï¼Œä»¥åŠå…¶ä»–å±æ€§å­—æ®µã€‚

```json
[
  {
    "coordinates": [[]], // åœ°ç†åæ ‡å­—æ®µ
    "_id": "122", // æ ‡å‡†åŒ–ä¹‹åæ–°å¢å­—æ®µ
    "name": "test",
    "value": 1
    // ....
  }
]
```

ç›®å‰æ”¯æŒä¸¤ç§çƒ­åŠ›å›¾ä½¿ç”¨çš„æ•°æ®å¤„ç†æ–¹æ³• gridï¼Œhexagon transform é…ç½®é¡¹

- type æ•°æ®å¤„ç†ç±»å‹
- tansform cfgÂ  æ•°æ®å¤„ç†é…ç½®é¡¹

#### grid

ç”Ÿæˆæ–¹æ ¼ç½‘å¸ƒå±€ï¼Œæ ¹æ®æ•°æ®å­—æ®µç»Ÿè®¡ï¼Œä¸»è¦åœ¨ç½‘æ ¼çƒ­åŠ›å›¾ä¸­ä½¿ç”¨

- type: 'grid',
- size: ç½‘æ ¼åŠå¾„
- field: æ•°æ®ç»Ÿè®¡å­—æ®µ
- method: èšåˆæ–¹æ³• Â count,max,min,sum,mean 5 ä¸ªç»Ÿè®¡ç»´åº¦

```javascript
layer.source(data, {
  transforms: [
    {
      type: 'grid',
      size: 15000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

#### hexagon

ç”Ÿæˆå…­è¾¹å½¢ç½‘æ ¼å¸ƒå±€ï¼Œæ ¹æ®æ•°æ®å­—æ®µç»Ÿè®¡

- type: 'hexagon',
- size: ç½‘æ ¼åŠå¾„
- field: æ•°æ®ç»Ÿè®¡å­—æ®µ
- method:èšåˆæ–¹æ³• Â Â count,max,min,sum,mean 5 ä¸ªç»Ÿè®¡ç»´åº¦

#### join

æ•°æ®è¿æ¥ï¼Œä¸šåŠ¡ä¸­è·Ÿå¤šæƒ…å†µæ˜¯åœ°ç†æ•°æ®å’Œä¸šåŠ¡æ•°æ®åˆ†å¼€çš„ä¸¤å¥—æ•°æ®ï¼Œæˆ‘ä»¬å¯ä¸é€šè¿‡ join æ–¹æ³•å°†åœ°ç†æ•°æ®å’Œä¸šåŠ¡æ•°æ®è¿›è¡Œå…³è”ã€‚

**é…ç½®é¡¹**

- type: join
- sourceField éœ€è¦è¿æ¥çš„ä¸šåŠ¡æ•°æ®å­—æ®µåç§°
- data éœ€è¦è¿æ¥çš„æ•°æ®æº ä»…æ”¯æŒ json æ ¼å¼
- targetField å…³è”çš„åœ°ç†æ•°æ®å­—æ®µåç§°

```javascript
const data = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {
        city: 'åŒ—äº¬',
      },
      geometry: {},
    },
  ],
};

const data2 = [
  {
    name: 'åŒ—äº¬',
    value: 13,
  },
  {
    name: 'å¤©æ´¥',
    value: 20,
  },
];
// data æ˜¯åœ°ç†æ•°æ®
// data2 å±æ€§æ•°æ®æˆ–è€…ä¸šåŠ¡æ•°æ®

// é€šè¿‡joinæ–¹æ³•æˆ‘ä»¬å°±å¯ä»¥å°†ä¸¤ä¸ªæ•°æ®è¿æ¥åˆ°ä¸€èµ·

layer
  .source(data, {
    transforms: [
      {
        type: 'join',
        sourceField: 'name', //data1 å¯¹åº”å­—æ®µå
        targetField: 'city', // data å¯¹åº”å­—æ®µå ç»‘å®šåˆ°çš„åœ°ç†æ•°æ®
        data: data2,
      },
    ],
  })
  .color('value'); // å¯ä»¥é‡‡ç”¨data1çš„valueå­—æ®µè¿›è¡Œæ•°æ®åˆ°é¢œè‰²çš„æ˜ å°„
```

### cluster

- cluster: `boolean`

`cluster` è¡¨ç¤ºæ˜¯å¦å¯¹æ•°æ®è¿›è¡Œèšåˆæ“ä½œï¼Œ ç›®å‰åªæœ‰ç‚¹å›¾å±‚æ”¯æŒã€‚

### clusterOption å¯é€‰

- radius èšåˆåŠå¾„ **number** default 40
- minZoom: æœ€å°èšåˆç¼©æ”¾ç­‰çº§ **number** default 0
- maxZoom: æœ€å¤§èšåˆç¼©æ”¾ç­‰çº§ **number** default 16

[èšåˆå›¾ä½¿ç”¨æ¡ˆä¾‹](/examples/point/cluster#cluster)

## æ–¹æ³•

### getClustersLeaves(cluster_id)

èšåˆå›¾ä½¿ç”¨ï¼Œè·å–èšåˆèŠ‚ç‚¹çš„åŸå§‹æ•°æ®

å‚æ•°ï¼š
id èšåˆèŠ‚ç‚¹çš„ cluster_id

```javascript
layer.on('click', (e) => {
  console.log(source.getClustersLeaves(e.feature.cluster_id));
});
```

### setData

æ›´æ–° source æ•°æ®

#### å‚æ•°

- data æ•°æ®åŒ source åˆå§‹åŒ–å‚æ•°
- option é…ç½®é¡¹åŒ source åˆå§‹åŒ–å‚æ•°

### getFeatureById

æ ¹æ® featurID è·å– feature è¦ç´ 

#### å‚æ•°

- id featureIdï¼ŒL7 å†…éƒ¨ç¼–ç çš„å”¯ä¸€è¦ç´  ID

```tsx
const source = layer.getSource();
source.getFeatureById(1);
```

### updateFeaturePropertiesById

æ ¹æ® ID æ›´æ–° source çš„å±æ€§æ•°æ®ï¼Œä¼šè§¦å‘ä»æ–°æ¸²æŸ“

#### å‚æ•°

- id featureIdï¼ŒL7 å†…éƒ¨ç¼–ç çš„å”¯ä¸€è¦ç´  ID
- Properties éœ€è¦æ›´æ–°å±æ€§æ•°æ®ï¼Œmerge æ“ä½œ

```tsx
const source = layer.getSource();
layer.on('click', (e) => {
  source.updateFeaturePropertiesById(e.featureId, {
    name: Math.random() * 10,
  });
});
```

### getFeatureId

æ ¹æ®å±æ€§çš„ keyã€value è·å–è¦ç´  L7 ç¼–ç  featureIdï¼Œç¡®ä¿è¯¥å±æ€§çš„ value æ˜¯å”¯ä¸€å€¼ï¼Œå¦‚å­˜åœ¨å¤šä¸ªè¿”å›ç¬¬ä¸€ä¸ªã€‚

#### å‚æ•°

- key: å±æ€§å­—æ®µ
- value: å¯¹åº”çš„å€¼

```tsx
const source = layer.getSource();
source.getFeatureId('name', 'å¼ ä¸‰');
```

## Source æ›´æ–°

å¦‚æœæ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥éœ€è¦æ›´æ–°æ•°æ®ã€‚
å¯ä»¥é€šè¿‡è°ƒç”¨ `layer` çš„ `setData` æ–¹æ³•å®ç°æ•°æ®çš„æ›´æ–°ã€‚

å…·ä½“è§ [Layer](/api/base_layer/base/#setdata)

```javascript
layer.setData(data);
```
<embed src="@/docs/common/source/tile/method.zh.md"></embed>

### æ•°æ®ç±»å‹

#### JSON

[JSON æ•°æ®æ ¼å¼è§£æ](/api/source/json)

#### csv

[CSV æ•°æ®æ ¼å¼è§£æ](/api/source/csv)

æ …æ ¼æ•°æ®ç±»å‹

#### image

[Image æ•°æ®æ ¼å¼è§£æ](/api/source/image)
---
title: Source
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

The source geographical data processing module mainly includes data analysis (parser) and data processing (transform).

```js
const source = new Source(data, option);
```

* data
* option
  * cluster **boolean**Whether to aggregate
  * clusterOptions aggregation configuration items
  * parser data parsing configuration
  * transforms data processing configuration

## data

Different parser types correspond to different data types

* The tile layer data is a url template and supports TMS, WMS, and WMTS data services.
* Non-tile layer data is a data object

## option

`source`pass`option`to describe how the data is processed, which mainly include`parser`and`transforms`ã€‚

### parser

Different data types are processed into a unified data format. Vector data includes different data formats such as GeoJON, CSV, and Json, and raster data includes Raster and Image data. Tile format data will also be supported in the future.

Spatial data is divided into three categories: vector data, raster data and tiles

* Vector data supports three data types: csv, geojson, and json.
* Raster data supports image, Raster
* Tile service supports mvt, rasterTile, geojsonvt

```js
type IParserType =
  | 'csv'
  | 'json'
  | 'geojson'
  | 'image'
  | 'raster'
  | 'rasterTile'
  | 'mvt'
  | 'geojsonvt';
interface IParser {
  type: IParserType;
  x?: string;
  y?: string;
  x1?: string;
  y1?: string;
  coordinates?: string;
  geometry?: string;
  [key: string]: any;
}
```

#### geojson

[geojson](https://www.yuque.com/antv/l7/dm2zll)The data is in the default data format, and the parser parameter does not need to be set.

```javascript
layer.source(data);
```

### transforms

Transforms processes standardized data and performs data operations such as data conversion, data statistics, grid layout, and data aggregation. After processing, standard data is returned.\
The standardized data structure includes coordinates geographical coordinate fields, and other attribute fields.

```json
[
  {
    "coordinates": [[]], // Geographical coordinates field
    "_id": "122", // New fields after standardization
    "name": "test",
    "value": 1
    // ....
  }
]
```

Currently, two data processing methods used in heat maps are supported: grid and hexagon transform configuration items

* type data processing type
* tansform cfg data processing configuration items

#### grid

Generate a square grid layout, based on data field statistics, mainly used in grid heat maps

* type: 'grid',
* size: grid radius
* field: data statistics field
* method: aggregation method count,max,min,sum,mean 5 statistical dimensions

```javascript
layer.source(data, {
  transforms: [
    {
      type: 'grid',
      size: 15000,
      field: 'v',
      method: 'sum',
    },
  ],
});
```

#### hexagon

Generate hexagonal grid layout, statistics based on data fields

* type: 'hexagon',
* size: grid radius
* field: data statistics field
* method: aggregation method count, max, min, sum, mean 5 statistical dimensions

#### join

Data connection, in many cases in business, geographical data and business data are two separate sets of data. We can associate geographical data and business data through the join method.

**Configuration items**

* type: join
* sourceField The name of the business data field that needs to be connected
* data The data source to be connected only supports json format
* targetField associated geographic data field name

```javascript
const data = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {
        city: 'Beijing',
      },
      geometry: {},
    },
  ],
};

const data2 = [
  {
    name: 'Beijing',
    value: 13,
  },
  {
    name: 'Tianjin',
    value: 20,
  },
];
// data is geographical data
// data2 attribute data or business data

// We can join two data together through the join method

layer
  .source(data, {
    transforms: [
      {
        type: 'join',
        sourceField: 'name', //data1 corresponding field name
        targetField: 'city', // data corresponds to the field name and is bound to the geographical data
        data: data2,
      },
    ],
  })
  .color('value'); // You can use the value field of data1 to map data to color.
```

### cluster

* cluster:`boolean`

`cluster`Indicates whether to aggregate data. Currently, only point layers support it.

### clusterOption optional

* radius aggregate radius**number**default 40
* minZoom: Minimum aggregate zoom level**number**default 0
* maxZoom: Maximum aggregate zoom level**number** default 16

[Aggregation graph use cases](/examples/point/cluster#cluster)

## method

### getClustersLeaves(cluster\_id)

Use the aggregation graph to obtain the original data of the aggregation node

parameter:
id cluster\_id of the aggregation node

```javascript
layer.on('click', (e) => {
  console.log(source.getClustersLeaves(e.feature.cluster_id));
});
```

### setData

Update source data

#### parameter

* data data is the same as source initialization parameter
* option configuration item is the same as source initialization parameter

### getFeatureById

Get feature elements based on featureID

#### parameter

* id featureId, unique feature ID encoded internally by L7

```tsx
const source = layer.getSource();
source.getFeatureById(1);
```

### updateFeaturePropertiesById

Updating source's attribute data based on ID will trigger re-rendering

#### parameter

* id featureId, unique feature ID encoded internally by L7
* Properties needs to update attribute data, merge operation

```tsx
const source = layer.getSource();
layer.on('click', (e) => {
  source.updateFeaturePropertiesById(e.featureId, {
    name: Math.random() * 10,
  });
});
```

### getFeatureId

Obtain the feature L7 encoding featureId based on the key and value of the attribute, and ensure that the value of the attribute is a unique value. If there are multiple, return the first one.

#### parameter

* key: attribute field
* value: corresponding value

```tsx
const source = layer.getSource();
source.getFeatureId('name', 'å¼ ä¸‰');
```

## Source update

If the data changes, the data may need to be updated.
This can be done by calling`layer`of`setData`Method to update data.

For details, see[Layer](/api/base_layer/base/#setdata)

```javascript
layer.setData(data);
```

<embed src="@/docs/common/source/tile/method.zh.md"></embed>

### type of data

#### JSON

[JSON data format parsing](/api/source/json)

#### csv

[CSV data format analysis](/api/source/csv)

Raster data type

#### image

[Image data format analysis](/api/source/image)
---
title: CSV
order: 3
---

<embed src="@/docs/common/style.md"></embed>

L7 supports CSV comma delimited CSV data loading.

CSV is a text data structure and it is difficult to express complex geographic data structures, so CSV only supports two data structures.

* Point data requires specifying longitude and latitude coordinates
* Line segment and arc data need to specify the longitude and latitude coordinates of the starting and ending points

## parser

* type string required json
* x string point data represents longitude
* y string point data represents latitude
* x1 string longitude
* x2 string latitude

### Point data loaded via CSV

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
});
```

[CSV data demo example](/examples/point/bubble#scatter)

### Segment arc data is loaded via CSV

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng1',
    y1: 'lat2',
  },
});
```

[CSV line segment data demo example](/examples/gallery/basic#arccircle)
---
title: CSV
order: 3
---

<embed src="@/docs/common/style.md"></embed>

L7 æ”¯æŒ CSV ä»¥é€—å·åˆ†éš”çš„ CSV æ•°æ®åŠ è½½ã€‚

CSV æ˜¯æ–‡æœ¬æ•°æ®ç»“æ„ï¼Œå¾ˆéš¾è¡¨è¾¾å¤æ‚çš„åœ°ç†æ•°æ®ç»“æ„ï¼Œå› æ­¤ CSV ä»…æ”¯æŒä¸¤ç§æ•°æ®ç»“æ„

- ç‚¹æ•°æ® éœ€è¦æŒ‡å®šç»åº¦ï¼Œçº¬åº¦åæ ‡
- çº¿æ®µï¼Œå¼§çº¿æ•°æ® éœ€è¦æŒ‡å®š èµ·æ­¢ç‚¹çš„ ç»åº¦ï¼Œçº¬åº¦åæ ‡

## parser

- type string å¿…é€‰ json
- x string ç‚¹æ•°æ®è¡¨ç¤º ç»åº¦
- y string ç‚¹æ•°æ®è¡¨ç¤º çº¬åº¦
- x1 string ç»åº¦
- x2 string çº¬åº¦

### ç‚¹æ•°æ®é€šè¿‡ CSV åŠ è½½

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng',
    y: 'lat',
  },
});
```

[CSV æ•°æ® demo ç¤ºä¾‹](/examples/point/bubble#scatter)

### çº¿æ®µå¼§çº¿æ•°æ®é€šè¿‡ CSV åŠ è½½

```javascript
layer.source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng1',
    y1: 'lat2',
  },
});
```

[CSV çº¿æ®µæ•°æ® demo ç¤ºä¾‹](/examples/gallery/basic#arccircle)
---
title: MVTTile çŸ¢é‡ç“¦ç‰‡
order: 6
---

<embed src="@/docs/common/style.md"></embed>

When L7 loads the vector tile map, it needs to be`source`Parse the tile service and configure the request parameters of the tile service.

## parser

### type

<description> *string* **required** *default:* mvt</description>

### tileSize `number`

<description> *number* **Optional** *default:* 256</description>Request tile size

### zoomOffset

<description> number **Optional** *default:*0</description>Tile request tile level offset

### maxZoom

<description> *number* **Optional** *default:*0</description>Maximum tile zoom level`20`

### minZoom

<description> *number* **Optional** *default:* 2-</description>Tile minimum scaling, etc.

### extent `[number, number, number, number]`

<description> *number\[]* **Optional**not limited:\_</description>Map display range

### getCustomData `(tile: { x: number, y: number, z: number }, callback: (err: any, data: any) => void) => void,`

<description>\_\_**Optional**</description>

callback parameters

* err when data is returned
* data arraybuffer type, pbf

Customize the tile data acquisition method, trial business scenarios require data authentication, or special processing scenarios

<embed src="@/docs/common/source/tile/method.en.md"></embed>

## Example

### Universal

```javascript
const tileSource = new Source(
  'http://localhost:3000/zhejiang.mbtiles/{z}/{x}/{y}.pbf',
  {
    parser: {
      type: 'mvt',
      tileSize: 256,
      zoomOffset: 0,
      maxZoom: 9,
      extent: [-180, -85.051129, 179, 85.051129],
    },
  },
);
```

### Custom method

```javascript
const source = new Source(
  'https://gridwise.alibaba-inc.com/tile/test?z={z}&x={x}&y={y}',
  {
    parser: {
      type: 'mvt',
      tileSize: 256,
      getCustomData: (tile, cb) => {
        const url = `https://gridwise.alibaba-inc.com/tile/test?z=${tile.z}&x=${tile.x}&y=${tile.y}`;
        fetch(url)
          .then((res) => res.arrayBuffer())
          .then((data) => {
            cb(null, data);
          });
      },
    },
  },
);
```
---
title: MVTTile çŸ¢é‡ç“¦ç‰‡
order: 6
---

<embed src="@/docs/common/style.md"></embed>

L7 åŠ è½½çŸ¢é‡ç“¦ç‰‡åœ°å›¾çš„æ—¶å€™éœ€è¦åœ¨ `source` ä¸­å¯¹ç“¦ç‰‡æœåŠ¡è¿›è¡Œè§£æï¼ŒåŒæ—¶é…ç½®ç“¦ç‰‡æœåŠ¡çš„è¯·æ±‚å‚æ•°ã€‚

## parser

### type

<description> _string_ **å¿…é€‰** _default:_ mvt</description>

### tileSize `number`

<description> _number_ **å¯é€‰** _default:_ 256</description>
è¯·æ±‚ç“¦ç‰‡çš„å¤§å°

### zoomOffset

<description> number **å¯é€‰** _default:_ 0</description>
ç“¦ç‰‡è¯·æ±‚ç“¦ç‰‡å±‚çº§çš„åç§»

### maxZoom

<description> _number_ **å¯é€‰** _default:_ 0</description>
ç“¦ç‰‡æœ€å¤§ç¼©æ”¾ç­‰çº§ `20`

### minZoom

<description> _number_ **å¯é€‰** _default:_ 2-</description>
ç“¦ç‰‡æœ€å°ç¼©æ”¾ç­‰

### extent `[number, number, number, number]`

<description> _number[]_ **å¯é€‰** ä¸é™åˆ¶:\_ </description>
åœ°å›¾æ˜¾ç¤ºèŒƒå›´

### getCustomData `(tile: { x: number, y: number, z: number }, callback: (err: any, data: any) => void) => void,`

<description> \_\_ **å¯é€‰**</description>

callback å‚æ•°

- err æ•°æ®è¿”å›æ—¶
- data arrarybuffer ç±»å‹ï¼Œ pbf

è‡ªå®šä¹‰ç“¦ç‰‡æ•°æ®è·å–æ–¹æ³•,è¯•ç”¨ä¸šåŠ¡åœºæ™¯éœ€è¦æ•°æ®é‰´æƒï¼Œæˆ–è€…ç‰¹æ®Šå¤„ç†çš„åœºæ™¯

<embed src="@/docs/common/source/tile/method.zh.md"></embed>

## ç¤ºä¾‹

### é€šç”¨

```javascript
const tileSource = new Source(
  'http://localhost:3000/zhejiang.mbtiles/{z}/{x}/{y}.pbf',
  {
    parser: {
      type: 'mvt',
      tileSize: 256,
      zoomOffset: 0,
      maxZoom: 9,
      extent: [-180, -85.051129, 179, 85.051129],
    },
  },
);
```

### è‡ªå®šä¹‰æ–¹æ³•

```javascript
const source = new Source(
  'https://gridwise.alibaba-inc.com/tile/test?z={z}&x={x}&y={y}',
  {
    parser: {
      type: 'mvt',
      tileSize: 256,
      getCustomData: (tile, cb) => {
        const url = `https://gridwise.alibaba-inc.com/tile/test?z=${tile.z}&x=${tile.x}&y=${tile.y}`;
        fetch(url)
          .then((res) => res.arrayBuffer())
          .then((data) => {
            cb(null, data);
          });
      },
    },
  },
);
```


---
title: JSON
order: 2
---

<embed src="@/docs/common/style.md"></embed>

GeoJSON è™½ç„¶æ˜¯é€šç”¨çš„çš„åœ°ç†æ•°æ®æ ¼å¼ï¼Œåœ¨å…·ä½“ä½¿ç”¨åœºæ™¯ä¸­ï¼Œæ•°æ®æœåŠ¡äººå‘˜å¯èƒ½å¹¶ä¸ç†Ÿæ‚‰ GeoJON,æˆ–è€…æ²¡æœ‰ç”Ÿæˆ GeoJON çš„å·¥å…·ï¼Œ å› æ­¤ L7 å¯¹æ•°æ®å®šä¹‰äº† Parser çš„æ¦‚å¿µï¼Œä½ çš„æ•°æ®å¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ï¼Œä½¿ç”¨æŒ‡å®šæ•°æ®å¯¹åº”çš„åœ°ç†ä¿¡æ¯å­—æ®µå³å¯ã€‚

## JSON

âš ï¸ json ä¸æ˜¯æ ‡å‡†çš„åœ°ç†æ•°æ®ç»“æ„ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶åŠ¡å¿…è¦è®¾ç½® Parser

json æ•°æ®è§£æä½¿ç”¨å¯¹åº” JSON parser

## parser

æ”¯æŒä¸¤ç§è§£ææ–¹å¼

### ç®€æ˜“è§£ææ–¹å¼

è¯¥æ–¹å¼åªæ”¯æŒè§£æçš„ç‚¹æ•°æ®ï¼Œæˆ–è€…åªæœ‰ä¸¤ä¸ªç‚¹çš„çº¿æ®µï¼Œæˆ–è€…å¼§çº¿æ•°æ®

- type `string` å¿…é€‰ `json`
- x `string` ç‚¹æ•°æ®è¡¨ç¤º ç»åº¦
- y `string` ç‚¹æ•°æ®è¡¨ç¤º çº¬åº¦
- x1 `string` ç»åº¦
- x2 `string` çº¬åº¦

å¦‚æœæ•°æ®æ˜¯ç‚¹æ•°æ®ï¼Œåªéœ€è¦è®¾ç½® x,y å­—æ®µå³å¯

å¦‚æœæ˜¯çº¿æ®µï¼Œå¼§çº¿æ•°æ®ï¼Œéœ€è¦çŸ¥é“èµ·æ­¢ç‚¹åæ ‡æ—¢ï¼Œx,y,x1,y1

```javascript
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  },
});
```

[JOSN æ•°æ® demo ç¤ºä¾‹](/examples/gallery/animate#animate_path_texture)

### é€šç”¨è§£ææ–¹å¼

å¯ä¹Ÿè§£æä»»æ„å¤æ‚çš„ç‚¹ï¼Œçº¿é¢

- type `string` å¿…é€‰ `json`
- coordinates `array` å¿…é€‰ï¼Œä¸»è¦ç”¨äºè¡¨è¾¾æ¯”è¾ƒå¤æ‚çš„æ ¼å¼ï¼Œç­‰åŒäº geojson coordinates å±æ€§

```javascript
layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'coord',
  },
});
```

## ä½¿ç”¨ç¤ºä¾‹

### ç‚¹æ•°æ®

#### ç®€æ˜“è§£æ

- type json
- x: ç»åº¦å­—æ®µ
- y: çº¬åº¦å­—æ®µ

```javascript
const data = [
  {
    lng: 112.345,
    lat: 30.455,
    value: 10,
  },
  {
    lng: 114.345,
    lat: 31.455,
    value: 10,
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  },
});
```

#### é€šç”¨è§£æ

[ ç‚¹ coodinates æ•°æ®æ ¼å¼](/api/source/geojson##point)

```javascript
const data = [
  {
    coord: [112.345, 30.455],
    value: 10,
  },
  {
    coord: [114.345, 32.455],
    value: 10,
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'coord',
  },
});
```

### çº¿æ•°æ®

#### ç®€æ˜“è§£æ

- type: json
- x `string` ç»åº¦
- y `string` çº¬åº¦
- x1 `string` ç»åº¦
- x2 `string` çº¬åº¦

ç®€æ˜“è§£æåªæ”¯æŒä¸¤ä¸ªç‚¹ç»„æˆçš„çº¿æ®µï¼Œä¸»è¦å†ç»˜åˆ¶å¼§çº¿çš„æ—¶å€™æ¯”è¾ƒå¸¸ç”¨ï¼Œåªéœ€æŒ‡å®šçº¿æ®µçš„èµ·æ­¢ç‚¹åæ ‡

```javascript
const data = [
  {
    lng1: 112.345,
    lat1: 30.455,
    lng2: 112.345,
    lat2: 30.455,
    value: 10,
  },
  {
    lng1: 114.345,
    lat1: 31.455,
    lng2: 112.345,
    lat2: 30.455,
    value: 10,
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng1',
    y1: 'lat2',
  },
});
```

#### é€šç”¨è§£æ

ç»˜åˆ¶çº¿æ®µã€å¼§çº¿ä¹Ÿæ”¯æŒä½¿ç”¨ coordinates ç»„ç»‡æ•°æ®

coordinates åŒ…å«ä¸¤ä¸ªåæ ‡ï¼Œ
ç¬¬ä¸€ä¸ªåæ ‡ å¯¹åº” x, y
ç¬¬äºŒä¸ªåæ ‡ å¯¹åº” x1, y1

```javascript
const data = [
  {
    id: '1',
    coord: [
      [101.953125, 50.51342652633956],
      [119.17968749999999, 33.137551192346145],
    ],
  },
];
layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'coord',
  },
});
```

å¦‚æœéœ€è¦ä½¿ç”¨ç»˜åˆ¶è½¨è¿¹æ•°æ®ï¼Œéœ€è¦é€šè¿‡ coodinates æŒ‡å®šçº¿çš„ç‚¹åºåˆ—ã€‚

coordinate æ ¼å¼ geojson çš„ coordinate å­—æ®µ æ”¯æŒ LineString, MultiLineString

[ çº¿ coodinates æ•°æ®æ ¼å¼](/api/source/geojson#linesring)

```javascript
const data = {
  name: 'path1',
  path: [
    [58.00781249999999, 32.84267363195431],
    [85.78125, 25.16517336866393],
    [101.953125, 41.77131167976407],
    [114.9609375, 39.639537564366684],
    [117.42187500000001, 28.613459424004414],
  ],
};
```

ä½¿ç”¨æ—¶é€šè¿‡ coordinates æŒ‡å®š

```javascript
layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'path',
  },
});
```

### é¢æ•°æ®

é¢æ•°æ® coordinates å­—æ®µæ¯”è¾ƒå¤æ‚ä¸æ”¯æŒç®€æ˜“çš„è§£ææ–¹å¼

#### é€šç”¨è§£æ

éœ€è¦æŒ‡å®š coordinates å­—æ®µ, æ ¼å¼åŒ GeoJSON çš„ coordinates å­—æ®µ

[é¢ coodinates æ•°æ®æ ¼å¼](/api/source/geojson/#polygon)

**æ³¨æ„é¢æ•°æ® coordÂ  æ˜¯ä¸‰å±‚æ•°æ®ç»“æ„**

```javascript
[
  {
    type: 'Polygon',
    geometryCoord: [
      [
        [115.1806640625, 30.637912028341123],
        [114.9609375, 29.152161283318915],
        [117.79541015625001, 27.430289738862594],
        [118.740234375, 29.420460341013133],
        [117.46582031249999, 31.50362930577303],
        [115.1806640625, 30.637912028341123],
      ],
    ],
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'geometryCoord',
  },
});
```
---
title: JSON
order: 2
---

<embed src="@/docs/common/style.md"></embed>

Although GeoJSON is a universal geographical data format, in specific usage scenarios, data service personnel may not be familiar with GeoJON, or do not have the tools to generate GeoJON. Therefore, L7 defines the concept of Parser for data, and your data can be in any format. , just use the geographic information field corresponding to the specified data.

## JSON

âš ï¸ json is not a standard geographical data structure, so be sure to set Parser when using it

json data parsing uses the corresponding JSON parser

## parser

Supports two parsing methods

### Simple analysis method

This method only supports analytical point data, or line segments with only two points, or arc data.

* type `string`required`json`
* x `string`Point data represents longitude
* y `string`Point data represents latitude
* x1 `string`longitude
* x2 `string`latitude

If the data is point data, you only need to set the x,y fields.

If it is line segment or arc data, you need to know the coordinates of the starting and ending points, x, y, x1, y1

```javascript
layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  },
});
```

[JSON data demo example](/examples/gallery/animate#animate_path_texture)

### Universal parsing method

It can also analyze arbitrarily complex points, lines and surfaces.

* type `string`required`json`
* coordinates `array`Required, mainly used to express more complex formats, equivalent to the geojson coordinates attribute

```javascript
layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'coord',
  },
});
```

## Usage example

### point data

#### Simple analysis

* type json
* x: longitude field
* y: latitude field

```javascript
const data = [
  {
    lng: 112.345,
    lat: 30.455,
    value: 10,
  },
  {
    lng: 114.345,
    lat: 31.455,
    value: 10,
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  },
});
```

#### general analysis

[Point coodinates data format](/api/source/geojson##point)

```javascript
const data = [
  {
    coord: [112.345, 30.455],
    value: 10,
  },
  {
    coord: [114.345, 32.455],
    value: 10,
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'coord',
  },
});
```

### line data

#### Simple analysis

* type: json
* x `string`longitude
* y `string`latitude
* x1 `string`longitude
* x2 `string`latitude

Simple analysis only supports line segments composed of two points. It is mainly used when drawing arcs. You only need to specify the starting and ending point coordinates of the line segment.

```javascript
const data = [
  {
    lng1: 112.345,
    lat1: 30.455,
    lng2: 112.345,
    lat2: 30.455,
    value: 10,
  },
  {
    lng1: 114.345,
    lat1: 31.455,
    lng2: 112.345,
    lat2: 30.455,
    value: 10,
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    x: 'lng1',
    y: 'lat1',
    x1: 'lng1',
    y1: 'lat2',
  },
});
```

#### general analysis

Drawing line segments and arcs also supports using coordinates to organize data.

coordinates contains two coordinates,
The first coordinate corresponds to x, y
The second coordinate corresponds to x1, y1

```javascript
const data = [
  {
    id: '1',
    coord: [
      [101.953125, 50.51342652633956],
      [119.17968749999999, 33.137551192346145],
    ],
  },
];
layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'coord',
  },
});
```

If you need to use drawing trajectory data, you need to specify the point sequence of the line through codinates.

coordinate format The coordinate field of geojson supports LineString, MultiLineString

[Line coodinates data format](/api/source/geojson#linesring)

```javascript
const data = {
  name: 'path1',
  path: [
    [58.00781249999999, 32.84267363195431],
    [85.78125, 25.16517336866393],
    [101.953125, 41.77131167976407],
    [114.9609375, 39.639537564366684],
    [117.42187500000001, 28.613459424004414],
  ],
};
```

Specify by coordinates when using

```javascript
layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'path',
  },
});
```

### area data

The coordinates field of surface data is relatively complex and does not support simple parsing methods.

#### general analysis

The coordinates field needs to be specified. The format is the same as the coordinates field of GeoJSON.

[Face codinates data format](/api/source/geojson/#polygon)

**Note that surface data coord is a three-layer data structure**

```javascript
[
  {
    type: 'Polygon',
    geometryCoord: [
      [
        [115.1806640625, 30.637912028341123],
        [114.9609375, 29.152161283318915],
        [117.79541015625001, 27.430289738862594],
        [118.740234375, 29.420460341013133],
        [117.46582031249999, 31.50362930577303],
        [115.1806640625, 30.637912028341123],
      ],
    ],
  },
];

layer.source(data, {
  parser: {
    type: 'json',
    coordinates: 'geometryCoord',
  },
});
```
---
title: Image
order: 4
---

<embed src="@/docs/common/style.md"></embed>

Image æ•°æ®ä¸»è¦ç”¨äºåœ¨åœ°å›¾æ ¹æ®ç»çº¬åº¦èŒƒå›´æ·»åŠ å›¾å›¾ç‰‡ï¼Œæ¯”å¦‚ä¸€å¹…çº¸åˆ¶åœ°å›¾æ‰«æç‰ˆä½ è¦æ”¾åœ¨åœ°å›¾æ˜¾ç¤ºã€‚

## parser

- type: image
- extent: å›¾åƒçš„ç»çº¬åº¦èŒƒå›´ [minlng, minlat,maxLng, maxLat]

æ ¹æ®å›¾ç‰‡çš„ç»çº¬åº¦èŒƒå›´ï¼Œå°†å›¾ç‰‡æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚

```javascript
layer.source(
  'https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg',
  {
    parser: {
      type: 'image',
      extent: [121.168, 30.2828, 121.384, 30.4219],
    },
  },
);
```
---
title: Image
order: 4
---

<embed src="@/docs/common/style.md"></embed>

Image data is mainly used to add images to maps based on longitude and latitude ranges. For example, you want to display a scanned version of a paper map on the map.

## parser

* type: image
* extent: the latitude and longitude range of the image \[minlng, minlat,maxLng, maxLat]

Add the image to the map based on its latitude and longitude range.

```javascript
layer.source(
  'https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg',
  {
    parser: {
      type: 'image',
      extent: [121.168, 30.2828, 121.384, 30.4219],
    },
  },
);
```
---
title: åŸå¸‚å»ºç­‘
order: 6
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

`CityBuildingLayer` ç”¨äºæ„å»ºåŸå¸‚å»ºç­‘ 3D æ¨¡å‹, å±•ç¤ºåŸå¸‚å»ºç­‘

## ä½¿ç”¨

```javascript
import { CityBuildingLayer } from '@antv/l7';
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_e7e1c6/afts/img/A*LoxeSZHuqXwAAAAAAAAAAAAAARQnAQ'>

### animate

æ˜¯å¦å¼€å¯åŠ¨ç”»æ•ˆæœ, ä»…æ”¯æŒ`boolean` æˆ–`enable: boolean` é…ç½®é¡¹

```javascript
layer.animate(true);

layer.animatte({
  enable: true,
});
```

âœ¨ åœ¨å¼€å¯ animate åé»˜è®¤ä¼šæ‰“å¼€ç‚¹äº®çª—æˆ·çš„åŠ¨ç”»  
ğŸŒŸ å¼€å¯ animate åŠ¨ç”»æ˜¯æ‰“å¼€æ‰«å…‰åŠ¨ç”»çš„å‰æ

### style

- baseColor æ¥¼æˆ¿é¢œè‰²,
- windowColor: çª—æˆ·é¢œè‰²,
- brightColor: ç‚¹äº®çª—æˆ·é¢œè‰²
- sweep: åœ†å½¢æ‰«å…‰æ‰©æ•£åŠ¨ç”»ç›¸å…³é…ç½®é¡¹
  - enable: æ˜¯å¦å¼€å¯æ‰«å…‰æ‰©æ•£
  - sweepRadius: æ‰©æ•£åŠå¾„
  - sweepCenter: æ‰©æ•£ä¸­å¿ƒåº—åæ ‡
  - sweepColor: æ‰©æ•£é¢œè‰²
  - sweepSpeed: æ‰©æ•£é€Ÿåº¦
- baseColor: å¼€å¯ sweep æ—¶çš„åŸºç¡€é¢œè‰²

å…¶ä»– style é…ç½®é¡¹åŒ

[baselayer#style](/api/base_layer/base#style)

## è‡ªå®šä¹‰åŠ¨ç”»é¢‘ç‡

è‡ªå®šä¹‰åŠ¨ç”»é¢‘ç‡éœ€è¦ å…³é—­é»˜è®¤åŠ¨ç”»ï¼Œé€šè¿‡ `setLight` æ–¹æ³•ä¸æ–­æ›´æ–°æ—¶é—´

### setLight(time)

å‚æ•°
time : æ—¶é—´ æ¯«ç§’

```js
import { CityBuildingLayer, Scene } from '@antv/l7';
import { Mapbox } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'dark',
    center: [121.507674, 31.223043],
    pitch: 65.59312320916906,
    zoom: 15.4,
    minZoom: 15,
    maxZoom: 18,
  }),
});
const buildingLayer = new CityBuildingLayer();
buildingLayer.animate(false);

let i = 0;
function step() {
  buildingLayer.setLight(i++);
  scene.render();
  requestAnimationFrame(step);
}

scene.on('loaded', () => {
  step();
});
```

#### demo

```javascript
import { Scene, CityBuildingLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    center: [120.173104, 30.244072],
    pitch: 70.41138037735848,
    zoom: 17.18,
    rotation: 2.24, // 358.7459759480504
    minZoom: 14,
  }),
});

scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/ggFwDClGjjvpSMBIrcEx.json')
    .then((res) => res.json())
    .then((data) => {
      const layer = new CityBuildingLayer({
        zIndex: 0,
      });
      layer.source(data);
      scene.addLayer(layer);
    });
});
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/gallery/animate#build_sweep)
---
title: City Build
order: 6
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

`CityBuildingLayer`Used to build 3D models of urban buildings and display urban buildings

## use

```javascript
import { CityBuildingLayer } from '@antv/l7';
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_e7e1c6/afts/img/A*LoxeSZHuqXwAAAAAAAAAAAAAARQnAQ'>

### animate

Whether to enable animation effects, only supported`boolean`or`enable: boolean`Configuration items

```javascript
layer.animate(true);

layer.animatte({
  enable: true,
});
```

âœ¨ After turning on animate, the animation of lighting up the windows will be turned on by default\
ğŸŒŸ Turning on animate animation is the prerequisite for turning on sweeping animation.

### style

* baseColor building color,
* windowColor: window color,
* brightColor: brighten window color
* sweep: Configuration items related to circular sweep and diffusion animation
  * enable: whether to enable scanning and diffusion
  * sweepRadius: spread radius
  * sweepCenter: diffusion center store coordinates
  * sweepColor: spread color
  * sweepSpeed: diffusion speed
* baseColor: base color when sweep is enabled

Other style configuration items are the same as

[baselayer#style](/api/base_layer/base#style)

## Custom animation frequency

Custom animation frequency requires turning off the default animation by`setLight`Method keeps updating time

### setLight(time)

parameter
time: time milliseconds

```js
import { CityBuildingLayer, Scene } from '@antv/l7';
import { Mapbox } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'dark',
    center: [121.507674, 31.223043],
    pitch: 65.59312320916906,
    zoom: 15.4,
    minZoom: 15,
    maxZoom: 18,
  }),
});
const buildingLayer = new CityBuildingLayer();
buildingLayer.animate(false);

let i = 0;
function step() {
  buildingLayer.setLight(i++);
  scene.render();
  requestAnimationFrame(step);
}

scene.on('loaded', () => {
  step();
});
```

#### demo

```javascript
import { Scene, CityBuildingLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    style: 'dark',
    center: [120.173104, 30.244072],
    pitch: 70.41138037735848,
    zoom: 17.18,
    rotation: 2.24, // 358.7459759480504
    minZoom: 14,
  }),
});

scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/ggFwDClGjjvpSMBIrcEx.json')
    .then((res) => res.json())
    .then((data) => {
      const layer = new CityBuildingLayer({
        zIndex: 0,
      });
      layer.source(data);
      scene.addLayer(layer);
    });
});
```

[Online case](/examples/gallery/animate#build_sweep)
---
title: PlaneGeometry
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

PlaneGeometry is a general plane geometry graphic provided by L7, which is expressed as a ground-fitting rectangle that can be customized with position, size and number of segments.

### demo

Set a normal rectangle

```javascript
import { Scene, GeometryLayer } from '@antv/l7';

const layer = new GeometryLayer()
  .shape('plane')
  .style({
    opacity: 0.8,
    width: 0.074,
    height: 0.061,
    center: [120.1025, 30.2594],
  })
  .active(true)
  .color('#ff0');
scene.addLayer(layer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*7DpqRrE0LM4AAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/geometry/geometry#plane)

Set 3D terrain mode

```javascript
import { Scene, GeometryLayer } from '@antv/l7';

const layer = new GeometryLayer().shape('plane').style({
  width: 0.074,
  height: 0.061,
  center: [120.1025, 30.2594],
  widthSegments: 200,
  heightSegments: 200,
  terrainClipHeight: 1,
  mapTexture:
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*gA0NRbuOF5cAAAAAAAAAAAAAARQnAQ',
  terrainTexture:
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*eYFaRYlnnOUAAAAAAAAAAAAAARQnAQ',
  rgb2height: (r, g, b) => {
    let h =
      -10000.0 +
      (r * 255.0 * 256.0 * 256.0 + g * 255.0 * 256.0 + b * 255.0) * 0.1;
    h = h / 20 - 127600;
    h = Math.max(0, h);
    return h;
  },
});
scene.addLayer(layer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mkPtQJVN8eQAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/geometry/geometry#terrain)

### source

ğŸŒŸ PlaneGeometry does not need to set the source, we give its position information through center in style.

### style

PlaneGeometry mainly sets position, size and other properties through the style method.

#### center: \[lng: number, lat: number]

Sets the position of the PlaneGeometry. The positioning is the geometric center of the PlaneGeometry. PlaneGeometry is placed close to the ground.

#### width: number

Sets the width of the PlaneGeometry in longitude.

#### height: number

Sets the height of the PlaneGeometry in latitude.

#### widthSegments: number

Set the number of segments of the PlaneGeometry in the latitude direction.

#### heightSegments: number

Set the number of segments of the PlaneGeometry in the longitude direction.

#### mapTexture: string

PlaneGeometry texture map URL.

#### terrainTexture: string

PlaneGeometry height map URL, when this parameter exists, L7 will automatically parse the elevation information.

#### terrainClipHeight: number

Specifies the clipping height of the 3D terrain. In some cases, we may only need to retain the parts where hills and mountains exist. Through this parameter, we can specify that parts of the terrain whose height is lower than this parameter value are not displayed.

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-SpgT6R05bcAAAAAAAAAAAAAARQnAQ'>

#### rgb2height: (r: number, g: number, b: number) => number

This is a callback function, and the parameter is the rgb information of the terrain map parsed by L7. Users can use this function to define the calculation logic of the height value (the calculation logic of different terrain maps is different).

ğŸŒŸ widthSegments/heightSegments specifies the number of segments of planeGeometry. The more segments, the smoother the terrain and the greater the performance consumption.
---
title: PlaneGeometry
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

PlaneGeometry æ˜¯ L7 æä¾›çš„é€šç”¨çš„å¹³é¢å‡ ä½•ä½“å›¾å½¢ï¼Œè¡¨ç°ä¸ºå¯ä»¥è‡ªå®šä¹‰ä¸ºä½ç½®ï¼Œå¤§å°å’Œåˆ†æ®µæ•°çš„è´´åœ°çŸ©å½¢ã€‚

### demo

è®¾ç½®æ™®é€šçŸ©å½¢

```javascript
import { Scene, GeometryLayer } from '@antv/l7';

const layer = new GeometryLayer()
  .shape('plane')
  .style({
    opacity: 0.8,
    width: 0.074,
    height: 0.061,
    center: [120.1025, 30.2594],
  })
  .active(true)
  .color('#ff0');
scene.addLayer(layer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*7DpqRrE0LM4AAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/geometry/geometry#plane)

è®¾ç½® 3D åœ°å½¢æ¨¡å¼

```javascript
import { Scene, GeometryLayer } from '@antv/l7';

const layer = new GeometryLayer().shape('plane').style({
  width: 0.074,
  height: 0.061,
  center: [120.1025, 30.2594],
  widthSegments: 200,
  heightSegments: 200,
  terrainClipHeight: 1,
  mapTexture:
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*gA0NRbuOF5cAAAAAAAAAAAAAARQnAQ',
  terrainTexture:
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*eYFaRYlnnOUAAAAAAAAAAAAAARQnAQ',
  rgb2height: (r, g, b) => {
    let h =
      -10000.0 +
      (r * 255.0 * 256.0 * 256.0 + g * 255.0 * 256.0 + b * 255.0) * 0.1;
    h = h / 20 - 127600;
    h = Math.max(0, h);
    return h;
  },
});
scene.addLayer(layer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mkPtQJVN8eQAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/geometry/geometry#terrain)

### source

ğŸŒŸ PlaneGeometry ä¸éœ€è¦è®¾ç½® sourceï¼Œæˆ‘ä»¬åœ¨ style ä¸­é€šè¿‡ center èµ‹äºˆå…¶ä½ç½®ä¿¡æ¯ã€‚

### style

PlaneGeometry ä¸»è¦é€šè¿‡ style æ–¹æ³•è®¾ç½®ä½ç½®ã€å¤§å°ä»¥åŠå…¶ä»–å±æ€§ã€‚

#### center: [lng: number, lat: number]

è®¾ç½® PlaneGeometry çš„ä½ç½®ï¼Œå®šä½æ˜¯ PlaneGeometry çš„å‡ ä½•ä¸­å¿ƒã€‚PlaneGeometry è´´åœ°æ”¾ç½®ã€‚

#### width: number

è®¾ç½® PlaneGeometry çš„å®½åº¦ï¼Œå•ä½æ˜¯ç»åº¦ã€‚

#### height: number

è®¾ç½® PlaneGeometry çš„é«˜åº¦ï¼Œå•ä½æ˜¯çº¬åº¦ã€‚

#### widthSegments: number

è®¾ç½® PlaneGeometry åœ¨ çº¬åº¦æ–¹å‘ä¸Šçš„åˆ†æ®µæ•°ã€‚

#### heightSegments: number

è®¾ç½® PlaneGeometry åœ¨ ç»åº¦æ–¹å‘ä¸Šçš„åˆ†æ®µæ•°ã€‚

#### mapTexture: string

PlaneGeometry çº¹ç†è´´å›¾ URLã€‚

#### terrainTexture: string

PlaneGeometry é«˜åº¦è´´å›¾ URLï¼Œå½“å­˜åœ¨è¯¥å‚æ•°çš„æ—¶å€™ L7 ä¼šè‡ªåŠ¨è§£æé«˜ç¨‹ä¿¡æ¯ã€‚

#### terrainClipHeight: number

æŒ‡å®š 3D åœ°å½¢çš„è£å‰ªé«˜åº¦ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½åªéœ€è¦ä¿ç•™å­˜åœ¨ä¸˜é™µå±±åœ°çš„éƒ¨åˆ†ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°æˆ‘ä»¬å¯ä»¥æŒ‡å®šåœ°å½¢é«˜åº¦ä½äºè¿™ä¸ªå‚æ•°å€¼çš„éƒ¨åˆ†ä¸æ˜¾ç¤º.

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-SpgT6R05bcAAAAAAAAAAAAAARQnAQ'>

#### rgb2height: (r: number, g: number, b: number) => number

è¿™æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå‚æ•°æ˜¯ L7 è§£æå‡ºçš„åœ°å½¢è´´å›¾çš„ rgb ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°å®šä¹‰é«˜åº¦å€¼çš„è®¡ç®—é€»è¾‘ï¼ˆä¸åŒçš„åœ°å½¢è´´å›¾è®¡ç®—é€»è¾‘ä¸åŒï¼‰ã€‚

ğŸŒŸ widthSegments/heightSegments æŒ‡å®š planeGeometry çš„åˆ†æ®µæ•°ï¼Œåˆ†æ®µè¶Šå¤šï¼Œåœ°å½¢è¶Šå¹³æ»‘ï¼ŒåŒæ—¶æ€§èƒ½æ¶ˆè€—è¶Šå¤§ã€‚
---
title: SpriteGeometry
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

SpriteGeometry is a universal particle layer provided by L7, which can be used to draw various particle effects.

### demo

Set up a normal particle layer.

```javascript
import { Scene, GeometryLayer } from '@antv/l7';

let layer = new GeometryLayer()
  .shape('sprite')
  .size(10)
  .style({
    opacity: 0.3,
    center: [120, 30],
    spriteCount: 120,
    spriteRadius: 10,
    spriteTop: 2500000,
    spriteUpdate: 20000,
    spriteScale: 0.6,
  });
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PEd7RasIpiEAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/geometry/geometry#snow)

### source

ğŸŒŸ SpriteGeometry does not need to set the source, we give its position information through center in style.

### style

SpriteGeometry mainly sets position, size and other properties through the style method.

#### center: \[lng: number, lat: number]

Sets the position of the SpriteGeometry. Positioning is the center of the SpriteGeometry.

#### mapTexture: string

Set the sprite's texture map.

#### spriteRadius: number

The radius of action of particles, default is 10.\
ğŸŒŸ Individual particles will be randomly distributed within the radius of the layer position.

#### spriteAnimate: string

The particle's movement defaults to 'down', which means downward movement. Optional values â€‹â€‹are 'down'/'up'.

#### spriteCount: number

The number of particles generated by the layer, default is 100.

#### spriteTop: number

The height range of particle movement, the default is 5000000.\
ğŸŒŸ It should be noted that under different map basemaps, the parameter values â€‹â€‹of spriteTop/spriteUpdate need to be adjusted to achieve better results. The default value is adjusted on the Amap 1.0 map.

#### spriteUpdate: number

The step size of particle motion refresh, expressed as motion speed, default is 10000.\
ğŸŒŸ It should be noted that under different map basemaps, the parameter values â€‹â€‹of spriteTop/spriteUpdate need to be adjusted to achieve better results. The default value is adjusted on the Amap 1.0 map.

#### spriteScale: number

Particle size scaling, default is 1.
---
title: SpriteGeometry
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

SpriteGeometry æ˜¯ L7 æä¾›çš„é€šç”¨çš„ç²’å­å›¾å±‚ï¼Œå¯ä»¥ç”¨æ¥ç»˜åˆ¶å„ç§ç²’å­æ•ˆæœã€‚

### demo

è®¾ç½®æ™®é€šçš„ç²’å­å›¾å±‚ã€‚

```javascript
import { Scene, GeometryLayer } from '@antv/l7';

let layer = new GeometryLayer()
  .shape('sprite')
  .size(10)
  .style({
    opacity: 0.3,
    center: [120, 30],
    spriteCount: 120,
    spriteRadius: 10,
    spriteTop: 2500000,
    spriteUpdate: 20000,
    spriteScale: 0.6,
  });
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PEd7RasIpiEAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/geometry/geometry#snow)

### source

ğŸŒŸ SpriteGeometry ä¸éœ€è¦è®¾ç½® sourceï¼Œæˆ‘ä»¬åœ¨ style ä¸­é€šè¿‡ center èµ‹äºˆå…¶ä½ç½®ä¿¡æ¯ã€‚

### style

SpriteGeometry ä¸»è¦é€šè¿‡ style æ–¹æ³•è®¾ç½®ä½ç½®ã€å¤§å°ä»¥åŠå…¶ä»–å±æ€§ã€‚

#### center: [lng: number, lat: number]

è®¾ç½® SpriteGeometry çš„ä½ç½®ï¼Œå®šä½æ˜¯ SpriteGeometry çš„ä¸­å¿ƒã€‚

#### mapTexture: string

è®¾ç½®ç²¾çµçš„çº¹ç†è´´å›¾ã€‚

#### spriteRadius: number

ç²’å­çš„ä½œç”¨åŠå¾„ï¼Œé»˜è®¤ä¸º 10ã€‚  
ğŸŒŸ å•ä¸ªç²’å­ä¼šåœ¨å›¾å±‚ä½ç½®åŠå¾„èŒƒå›´å†…éšæœºåˆ†å¸ƒã€‚

#### spriteAnimate: string

ç²’å­çš„è¿åŠ¨ã€é»˜è®¤ä¸º 'down'ï¼Œè¡¨ç¤ºå‘ä¸‹è¿åŠ¨ã€‚å¯é€‰å€¼æœ‰ 'down'/'up'ã€‚

#### spriteCount: number

å›¾å±‚ç”Ÿæˆçš„ç²’å­æ•°é‡ï¼Œé»˜è®¤ä¸º 100ã€‚

#### spriteTop: number

ç²’å­è¿åŠ¨çš„é«˜åº¦èŒƒå›´ï¼Œé»˜è®¤ä¸º 5000000.  
ğŸŒŸ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸åŒçš„åœ°å›¾åº•å›¾ä¸‹ï¼ŒspriteTop/spriteUpdate çš„å‚æ•°å€¼éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œæ‰èƒ½å¾—åˆ°è¾ƒå¥½çš„æ•ˆæœã€‚é»˜è®¤å€¼æ˜¯åœ¨é«˜å¾· 1.0 çš„åœ°å›¾ä¸Šè°ƒæ•´çš„ã€‚

#### spriteUpdate: number

ç²’å­è¿åŠ¨åˆ·æ–°çš„æ­¥é•¿ï¼Œè¡¨ç°ä¸ºè¿åŠ¨é€Ÿåº¦ã€é»˜è®¤ä¸º 10000ã€‚  
ğŸŒŸ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸åŒçš„åœ°å›¾åº•å›¾ä¸‹ï¼ŒspriteTop/spriteUpdate çš„å‚æ•°å€¼éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œæ‰èƒ½å¾—åˆ°è¾ƒå¥½çš„æ•ˆæœã€‚é»˜è®¤å€¼æ˜¯åœ¨é«˜å¾· 1.0 çš„åœ°å›¾ä¸Šè°ƒæ•´çš„ã€‚

#### spriteScale: number

ç²’å­å¤§å°ç¼©æ”¾ã€é»˜è®¤ä¸º 1ã€‚
---
title: Component ç»„ä»¶
order: 0
---

L7 ä¸­çš„ Component ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç§ç±»å‹ï¼š

- [Control æ§ä»¶ç±»å‹](/api/component/control/control)ï¼šæŒ‡çš„æ˜¯æ‚¬åœåœ¨åœ°å›¾å››å‘¨ï¼Œå¯ä»¥å¯¹åœ°å›¾ä»¥åŠå›¾å±‚ç­‰å…ƒç´ è¿›è¡Œä¿¡æ¯å‘ˆç°æˆ–äº¤äº’çš„ç»„ä»¶ã€‚
- [Popup æ°”æ³¡ç±»å‹](/api/component/popup/popup)ï¼šç”¨äºåœ¨åœ°å›¾ä¸ŠæŒ‡å®šç»çº¬åº¦ä½ç½®å±•ç¤ºæ°”æ³¡ï¼Œæ°”æ³¡å†…å®¹å®Œå…¨äº¤ç”±å¼€å‘è€…è‡ªå®šä¹‰ã€‚
- [Marker ç±»å‹](/api/component/marker/marker)ï¼šä¸ Popup ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ Marker å±•ç¤ºçš„å†…å®¹ä¸ä¼šåœ¨æ°”æ³¡å†…å±•ç¤ºï¼Œè€Œæ˜¯å®Œå…¨äº¤ç”±å¼€å‘è€…è‡ªå®šä¹‰ã€‚
---
title: Zoom ç¼©æ”¾
order: 3
---

ç”¨äºæ§åˆ¶åœ°å›¾**æ”¾å¤§**å’Œ**ç¼©å°**çš„æ§ä»¶ï¼Œå¹¶ä¸”å½“åœ°å›¾è¾¾åˆ°æœ€å¤§æˆ–æœ€å°ç¼©æ”¾æ¯”æ—¶ï¼Œä¼šç¦ç”¨å¯¹åº”ç¼©æ”¾æŒ‰é’®ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CJx3Tby-XlEAAAAAAAAAAAAAARQnAQ" width="400"/>

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#zoom)

```ts
import { Scene, Zoom } from '@antv/l7';

const scene = new Scene({
  //...
});

scene.on('loaded', () => {
  const zoom = new Zoom({
    zoomInTitle: 'æ”¾å¤§',
    zoomOutTitle: 'ç¼©å°',
  });
  scene.addControl(zoom);
});
```

## é…ç½®

| åç§°         | è¯´æ˜                                         | ç±»å‹                  |
| ------------ | -------------------------------------------- | --------------------- |
| zoomInText   | æ”¾å¤§æŒ‰é’®çš„å±•ç¤ºå†…å®¹                           | `Element` \| `string` |
| zoomInTitle  | æ”¾å¤§æŒ‰é’®çš„ `title` å±æ€§                      | `string`              |
| zoomOutText  | ç¼©å°æŒ‰é’®çš„å±•ç¤ºå†…å®¹                           | `Element` \| `string` |
| zoomOutTitle | ç¼©å°æŒ‰é’®çš„ `title` å±æ€§                      | `string`              |
| showZoom     | æ˜¯å¦å±•ç¤ºåœ°å›¾å½“å‰å®æ—¶ zoom æ•°å€¼ï¼Œé»˜è®¤å‘ä¸‹å–æ•´ | `boolean`             |

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

| åç§°    | è¯´æ˜     | ç±»å‹         |
| ------- | -------- | ------------ |
| zoomIn  | æ”¾å¤§åœ°å›¾ | `() => void` |
| zoomOut | ç¼©å°åº•å›¾ | `() => void` |

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: Zoom
order: 3
---

Used to control the map**enlarge**and**zoom out**control, and when the map reaches the maximum or minimum zoom ratio, the corresponding zoom button is disabled.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CJx3Tby-XlEAAAAAAAAAAAAAARQnAQ" width="400"/>

## use

[Example](/examples/component/control#zoom)

```ts
import { Scene, Zoom } from '@antv/l7';

const scene = new Scene({
  //...
});

scene.on('loaded', () => {
  const zoom = new Zoom({
    zoomInTitle: 'æ”¾å¤§',
    zoomOutTitle: 'ç¼©å°',
  });
  scene.addControl(zoom);
});
```

## Configuration

| name         | illustrate                                                                              | type                |
| ------------ | --------------------------------------------------------------------------------------- | ------------------- |
| zoomInText   | Enlarge button display content                                                          | `Element`\|`string` |
| zoomInTitle  | magnify button`title`Attributes                                                         | `string`            |
| zoomOutText  | Reduce button display content                                                           | `Element`\|`string` |
| zoomOutTitle | shrink button`title`Attributes                                                          | `string`            |
| showZoom     | Whether to display the current real-time zoom value of the map, rounded down by default | `boolean`           |

<embed src="@/docs/common/control/api.en.md"></embed>

## method

| name    | illustrate     | type         |
| ------- | -------------- | ------------ |
| zoomIn  | Enlarge map    | `() => void` |
| zoomOut | Reduce basemap | `() => void` |

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: LayerSwitch å›¾å±‚æ˜¾éš
order: 8
---

ç”¨äºæ§åˆ¶ç›®æ ‡å›¾å±‚ç»„çš„**æ˜¾ç¤º**å’Œ**éšè—**æ“ä½œã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*SiQWT5RnMDYAAAAAAAAAAAAAARQnAQ" width="400"/>

## è¯´æ˜

**æ³¨æ„**ï¼š åœ¨æ§ä»¶ä¸­å±•ç¤ºçš„å›¾å±‚åç§°ä¼šé»˜è®¤è¯»å–å›¾å±‚çš„ `name` å±æ€§ï¼Œå› æ­¤éœ€è¦ç”¨æˆ·åœ¨åˆå§‹åŒ–å›¾å±‚æ—¶ä¼ å…¥å›¾å±‚å¯¹åº”çš„åç§°ã€‚

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#layerswitch)

```ts
import { Scene, LayerSwitch } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const layer = new PointLayer({
    name: 'è‡ªå®šä¹‰å›¾å±‚åç§°',
  });
  scene.addLayer(layer);

  const layerSwitch = new LayerSwitch({
    layers: [layer],
  });
  scene.addControl(layerSwitch);
});
```

## é…ç½®

| åç§°   | è¯´æ˜                                                                                       | ç±»å‹                                         |
| ------ | ------------------------------------------------------------------------------------------ | -------------------------------------------- |
| layers | éœ€è¦è¢«æ§åˆ¶çš„ `layer` æ•°ç»„ï¼Œæ”¯æŒä¼ å…¥å›¾å±‚ç¤ºä¾‹æˆ–è€…å›¾å±‚ idï¼Œä¸ä¼ åˆ™é»˜è®¤è¯»å–å½“å‰ L7 ä¸­æ‰€æœ‰çš„å›¾å±‚ | `Array<ILayer \| string \| LayerSwitchItem>` |

### LayerSwitchItem

| åç§°  | è¯´æ˜                      | ç±»å‹                  |
| ----- | ------------------------- | --------------------- |
| layer | éœ€è¦è¢«æ§åˆ¶çš„ `layer` å®ä¾‹ | `ILayer`              |
| name  | å±•ç¤ºçš„å›¾å±‚åç§°            | `string \| undefined` |
| img   | å±•ç¤ºçš„å›¾å±‚å›¾ç‰‡ `URL`      | `string \| undefined` |

<embed src="@/docs/common/control/popper-api.zh.md"></embed>

<embed src="@/docs/common/control/btn-api.zh.md"></embed>

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>

<embed src="@/docs/common/control/popper-event.zh.md"></embed>

<embed src="@/docs/common/control/select-event.zh.md"></embed>
---
title: LayerSwitch
order: 8
---

Used to control the target layer group**show**and**hide**operate.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*SiQWT5RnMDYAAAAAAAAAAAAAARQnAQ" width="400"/>

## illustrate

**Notice**: The layer name displayed in the control will read the layer's name by default.`name`property, so the user needs to pass in the corresponding name of the layer when initializing the layer.

## use

[Example](/examples/component/control#layerswitch)

```ts
import { Scene, LayerSwitch } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const layer = new PointLayer({
    name: 'è‡ªå®šä¹‰å›¾å±‚åç§°',
  });
  scene.addLayer(layer);

  const layerSwitch = new LayerSwitch({
    layers: [layer],
  });
  scene.addControl(layerSwitch);
});
```

## Configuration

| name   | illustrate                                                                                                                                             | type                      |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------- |
| layers | need to be controlled`layer`Array, supports passing in layer example or layer id. If not passed, all layers in the current L7 will be read by default. | `Array<ILayer \| string>` |

<embed src="@/docs/common/control/popper-api.en.md"></embed>

<embed src="@/docs/common/control/btn-api.en.md"></embed>

<embed src="@/docs/common/control/api.en.md"></embed>

## method

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>

<embed src="@/docs/common/control/popper-event.en.md"></embed>

<embed src="@/docs/common/control/select-event.en.md"></embed>
---
title: Popup ä¿¡æ¯æ¡†
order: 0
---

Popup æ˜¯ç”¨äºåœ¨åœ°å›¾ä¸ŠæŒ‡å®šç»çº¬åº¦ä½ç½®ï¼Œå±•ç¤ºè‡ªå®šä¹‰å†…å®¹çš„æ°”æ³¡ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*N2hWTq-m-8EAAAAAAAAAAAAAARQnAQ" width="300"/>

## è¯´æ˜

Popup çš„é”šç‚¹ä½ç½®æ˜¯ç”±ç»çº¬åº¦æ¥è¡¨è¾¾çš„ï¼Œå½“åœ°å›¾ç¼©æ”¾/å¹³ç§»æ—¶ï¼ŒPopup ä¼šè‡ªåŠ¨è®¡ç®—ç›¸å¯¹äºå½“å‰åœ°å›¾çš„åæ ‡å¹¶ä¸”è‡ªåŠ¨ä½ç§»ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå¼€å‘è€…éœ€è¦åœ¨åœ°å›¾çš„**æŒ‡å®šç»çº¬åº¦ä½ç½®**å±•ç¤ºä¿¡æ¯æ°”æ³¡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Popup ç»„ä»¶æ¥å®ç°å¯¹åº”æ•ˆæœã€‚

å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ Popup ä¸»ä½“å±•ç¤ºå†…å®¹ï¼š

- çº¯æ–‡æœ¬å¯ä»¥é€šè¿‡ `text` é…ç½®æˆ–è€… `setText` æ–¹æ³•æ§åˆ¶ Popup çš„å±•ç¤ºæ–‡æœ¬ã€‚
- è‡ªå®šä¹‰ DOM å¯ä»¥é€šè¿‡ `html` é…ç½®æˆ–è€… `setHTML` æ–¹æ³•ï¼Œæ”¯æŒä¼ å…¥ HTML å­—ç¬¦ä¸²æˆ–è€… DOM å…ƒç´ æˆ–æ•°ç»„çš„æ–¹å¼æ§åˆ¶ Popup çš„å±•ç¤ºå†…å®¹ã€‚

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/popup#popup)

```ts
import { Scene, Popup } from '@antv/l7';

const scene = new Scene({
  id: 'map',
  map: new GaodeMapV2({
    // ...
  }),
});

scene.on('loaded', () => {
  const popup = new Popup({
    // åˆå§‹é”šç‚¹ç»çº¬åº¦
    lngLat: {
      lng: 120,
      lat: 30,
    },
    // Popup æ ‡é¢˜
    title: 'Popup Title',
    // Popup å†…å®¹
    html: 'Popup Content',
  });
  scene.addPopup(popup);

  // æ›´æ–° Popup é”šç‚¹ç»çº¬åº¦
  popup.setLngLat({
    lng: 130,
    lat: 40,
  });

  // æ›´æ–° Popup å†…å®¹
  popup.setHTML('New Popup Content');
});
```

## é…ç½®

| åç§°               | è¯´æ˜                                                                     | ç±»å‹                           | é»˜è®¤å€¼     |
| ------------------ | ------------------------------------------------------------------------ | ------------------------------ | ---------- |
| lngLat             | Popup æ‰€åœ¨çš„ç»çº¬åº¦                                                       | `{ lng: number; lat: number }` | -          |
| text               | Popup å†…å®¹å±•ç¤ºçš„æ–‡æœ¬å†…å®¹                                                 | `string`                       | -          |
| html               | Popup å†…å®¹å±•ç¤ºçš„è‡ªå®šä¹‰ HTMLï¼Œå¯ä»¥ä¼  HTML å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¼  DOM å¯¹è±¡æˆ–æ•°ç»„ | [ElementType](#elementtype)    | -          |
| title              | Popup æ ‡é¢˜å±•ç¤ºçš„è‡ªå®šä¹‰ HTMLï¼Œå¯ä»¥ä¼  HTML å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¼  DOM å¯¹è±¡æˆ–æ•°ç»„ | [ElementType](#elementtype)    | -          |
| closeOnClick       | ç‚¹å‡»åœ°å›¾åŒºåŸŸæ—¶ï¼Œæ˜¯å¦å…³é—­å½“å‰ Popup                                       | `boolean`                      | `false`    |
| closeOnEsc         | ç‚¹å‡» Esc é”®æ—¶ï¼Œæ˜¯å¦å…³é—­å½“å‰ Popup                                        | `boolean`                      | `false`    |
| maxWidth           | Popup çš„æœ€å¤§å®½åº¦                                                         | `string`                       | `240px`    |
| anchor             | Popup ç®­å¤´ä½ç½®ï¼Œå¯ä»¥æ§åˆ¶ Popup ç›¸å¯¹äºç»çº¬åº¦ç‚¹çš„å±•ç¤ºä½ç½®                  | [AnchorType](#anchortype)      | `'bottom'` |
| offsets            | Popup ç›¸å¯¹äºé”šç‚¹çš„åç§»                                                   | `[number, number]`             | `[0, 0]`   |
| autoPan            | å½“ Popup å±•ç¤ºæˆ–è€…ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåœ°å›¾æ˜¯å¦è¦è‡ªåŠ¨å¹³ç§»è‡³ Popup æ‰€åœ¨ä½ç½®     | `boolean`                      | `false`    |
| autoClose          | å½“æœ‰å…¶ä»– Popup å±•ç¤ºæ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨å…³é—­å½“å‰æ°”æ³¡                              | `boolean`                      | `true`     |
| followCursor       | Popup æ˜¯å¦è·Ÿéšå…‰æ ‡ç§»åŠ¨ï¼Œè‹¥è®¾ä¸º `true`ï¼Œåˆ™ `lngLat` é…ç½®æ— æ•ˆ              | `boolean`                      | `false`    |
| closeButton        | æ˜¯å¦å±•ç¤ºå…³é—­ Popup å›¾æ ‡                                                  | `boolean`                      | `true`     |
| closeButtonOffsets | å…³é—­ Popup å›¾æ ‡çš„ç›¸å¯¹åç§»                                                | `[number, number]`             | -          |
| stopPropagation    | Popup ä¸Šçš„é¼ æ ‡äº‹ä»¶æ˜¯å¦è¦é˜»æ­¢å…¶å†’æ³¡                                       | `boolean`                      | `true`     |

### ElementType

```ts
type ElementType =
  | HTMLElement
  | HTMLElement[]
  | DocumentFragment
  | Text
  | string;
```

### AnchorType

```ts
type AnchorType =
  | 'center'
  | 'top'
  | 'top-left'
  | 'top-right'
  | 'bottom'
  | 'bottom-left'
  | 'bottom-right'
  | 'left'
  | 'right';
```

## æ–¹æ³•

| åç§°       | è¯´æ˜                        | ç±»å‹                                                                 |
| ---------- | --------------------------- | -------------------------------------------------------------------- |
| getOptions | è·å–å½“å‰ Popup é…ç½®         | `() => IPopupOption`                                                 |
| setOptions | æ›´æ–°å½“å‰ Popup é…ç½®         | `(newOption: Partial<IPopupOption>) => this`                         |
| show       | æ˜¾ç¤º Popup                  | `() => this`                                                         |
| hide       | éšè— Popup                  | `() => this`                                                         |
| getIsShow  | åˆ¤æ–­å½“å‰æ°”æ³¡æ˜¯å¦å±•ç¤º        | `() => boolean`                                                      |
| setTitle   | è®¾ç½® Popup æ ‡é¢˜å±•ç¤ºçš„ HTML  | `(title: ElementType) => this`                                       |
| setHTML    | è®¾ç½® Popup å†…å®¹å±•ç¤ºçš„ HTML  | `(html: ElementType) => this`                                        |
| setText    | è®¾ç½® Popup å†…å®¹å±•ç¤ºçš„æ–‡æœ¬   | `(text: string) => this`                                             |
| setLngLat  | è®¾ç½® Popup é”šç‚¹æ‰€åœ¨ç»çº¬åº¦   | `(lngLat: { lng: number; lat: number } \| [number, number]) => this` |
| panToPopup | å°†åœ°å›¾å¹³ç§»è‡³å½“å‰ Popup ä½ç½® | `() => this`                                                         |

## äº‹ä»¶

| åç§°  | è¯´æ˜               | ç±»å‹         |
| ----- | ------------------ | ------------ |
| open  | Popup è¢«æ·»åŠ æ—¶è§¦å‘ | `() => void` |
| close | Popup è¢«ç§»é™¤æ—¶è§¦å‘ | `() => void` |
| show  | Popup æ˜¾ç¤ºæ—¶è§¦å‘   | `() => void` |
| hide  | Popup éšè—æ—¶è§¦å‘   | `() => void` |
---
title: Scale ç¼©æ”¾å°º
order: 4
---

è¯¥æ§ä»¶ç”¨äºæ˜¾ç¤ºåœ°å›¾ä¸Šçš„è·ç¦»ä¸åœ°é¢ä¸Šç›¸åº”è·ç¦»çš„æ¯”ç‡ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*r3iSQI4SekYAAAAAAAAAAAAAARQnAQ" width="400"/>

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#scale)

```ts
import { Scene, Scale } from '@antv/l7';

const scene = new Scene({
  //...
});

scene.on('loaded', () => {
  const scale = new Scale({
    zoomInTitle: 'æ”¾å¤§',
    zoomOutTitle: 'ç¼©å°',
  });
  scene.addControl(scale);
});
```

## é…ç½®

| åç§°           | è¯´æ˜                                 | ç±»å‹      | é»˜è®¤å€¼  |
| -------------- | ------------------------------------ | --------- | ------- |
| lockWidth      | æ˜¯å¦å›ºå®šå®¹å™¨å®½åº¦                     | `boolean` | `true`  |
| maxWidth       | ç»„ä»¶çš„å®¹å™¨æœ€å¤§å®½åº¦                   | `number`  | `100`   |
| metric         | å±•ç¤º**åƒç±³**æ ¼å¼çš„æ¯”ä¾‹å°º             | `boolean` | `true`  |
| imperial       | å±•ç¤º**è‹±é‡Œ**æ ¼å¼çš„æ¯”ä¾‹å°º             | `boolean` | `false` |
| updateWhenIdle | æ˜¯å¦åªåœ¨æ‹–æ‹½å’Œç¼©æ”¾ç»“æŸåæ‰æ›´æ–°æ¯”ä¾‹å°º | `boolean` | `false` |

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: Marker
order: 3
---

<embed src="@/docs/common/style.md"></embed>

Marker åœ°å›¾æ ‡æ³¨ ç›®å‰åªæ”¯æŒ 2D dom æ ‡æ³¨

## æ„é€ å‡½æ•°

Marker

`const Marker = new L7.Marker(option)`

#### option

- colorÂ  Â  Â  Â Â `string`Â ![L7 Marker](https://gw.alipayobjects.com/zos/basement_prod/b10e0efd-8379-4b04-bcbb-5cfefaa0327f.svg)è®¾ç½®é»˜è®¤ marker çš„é¢œè‰²
- elementÂ  Â Â `Dom|string`Â Â Â  è‡ªå®šä¹‰ marker Dom èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ dom å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ dom id
- anchorÂ  Â  Â `string`Â  é”šç‚¹ä½ç½® Â  æ”¯æŒ center, top, top-left, top-right, bottom, bottom-left,bottom-Â  Â Â Â  Â Â Â  Â Â Â  Â Â Â  Â Â Â  Â Â right,left, right
- offsetsÂ  Â Â `Array`Â  åç§»é‡ Â [ 0, 0 ] åˆ†åˆ«è¡¨ç¤º X, Y çš„åç§»é‡

### æ·»åŠ åˆ° Scene

```javascript
scene.addMarker(marker);
```

## æ–¹æ³•

#### setLnglat

è®¾ç½® marker ç»çº¬åº¦ä½ç½®

#### remove

ç§»é™¤ marker

#### getElement

è·å– marker dom Element

#### getLngLat

è·å– marker ç»çº¬åº¦åæ ‡

#### togglePopup

å¼€å¯æˆ–è€…å…³é—­ marker å¼¹å‡ºæ¡†

#### setPopup

ä¸º marker è®¾ç½® popup

#### getPopup

è·å– marker å¼¹å‡ºæ¡†

## ç¤ºä¾‹ä»£ç 

#### é»˜è®¤ Marker

`const marker = new L7.Marker({color:'blue'})`

#### è‡ªå®šä¹‰ Marker

```javascript
var el = document.createElement('label');
el.className = 'labelclass';
el.textContent = data[i].v;
el.style.background = getColor(data[i].v);
new L7.Marker({
  element: el,
}).setLnglat([data[i].x * 1, data[i].y]);
```

#### è®¾ç½® popup

```javascript
var popup = new L7.Popup({
  anchor: 'left',
}).setText(item.name);

new L7.Marker({
  element: el,
})
  .setLnglat(item.coordinates)
  .setPopup(popup);
```

[demo1](/examples/tutorial/marker#amap)
---
title: Marker æ ‡æ³¨
order: 3
---

<embed src="@/docs/common/style.md"></embed>

Marker åœ°å›¾æ ‡æ³¨ ç›®å‰åªæ”¯æŒ 2D Dom æ ‡æ³¨

## æ„é€ å‡½æ•°

Marker

`const Marker = new L7.Marker(option)`

#### option

- colorÂ  Â  Â  Â Â `string`Â 
  ![map-marker.png](https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*BJ6cTpDcuLcAAAAAAAAAAABkARQnAQ)Â  è®¾ç½®é»˜è®¤ marker çš„é¢œè‰²
- elementÂ  Â Â `Dom|string`Â Â Â  è‡ªå®šä¹‰ marker Dom èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ dom å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ dom id
- anchorÂ  Â  Â `string`Â  é”šç‚¹ä½ç½® Â  æ”¯æŒ center, top, top-left, top-right, bottom, bottom-left,bottom-right,left, right
- offsetsÂ  Â Â `Array`Â  åç§»é‡ Â [ 0, 0 ] åˆ†åˆ«è¡¨ç¤º X, Y çš„åç§»é‡
- extData ç”¨æˆ·è‡ªå®šä¹‰å±æ€§ï¼Œæ”¯æŒä»»æ„æ•°æ®ç±»å‹ï¼Œå­˜å‚¨ marker å±æ€§ä¿¡æ¯

### æ·»åŠ åˆ° Scene

```javascript
scene.addMarker(marker);
```

## æ–¹æ³•

#### setLnglat

è®¾ç½® marker ç»çº¬åº¦ä½ç½®

#### remove

ç§»é™¤ marker

#### getElement

è·å– marker dom Element

### setElement

- element `dom`

è®¾ç½® element é€šè¿‡æ­¤æ–¹æ³•æ›´æ–° Marker æ ·å¼

#### getLngLat

è·å– marker ç»çº¬åº¦åæ ‡

#### togglePopup

å¼€å¯æˆ–è€…å…³é—­ marker å¼¹å‡ºæ¡†

#### openPopup

æ‰“å¼€ Popup

### closePopup

å…³é—­ popup

#### setPopup

ä¸º marker è®¾ç½® popup

#### getPopup

è·å– marker å¼¹å‡ºæ¡†

#### getExtData()

è·å–ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®

#### setExtData(data)

è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®

## ç¤ºä¾‹ä»£ç 

#### é»˜è®¤ Marker

`const marker = new L7.Marker({color:'blue'})`

#### è‡ªå®šä¹‰ Marker

```javascript
var el = document.createElement('label');
el.className = 'labelclass';
el.textContent = data[i].v;
el.style.background = getColor(data[i].v);

const marker = new L7.Marker({
  element: el,
}).setLnglat([data[i].x * 1, data[i].y]);

scene.addMarker(marker);
```

#### è®¾ç½® popup

```javascript
var popup = new L7.Popup({
  anchor: 'left',
}).setText(item.name);

new L7.Marker({
  element: el,
})
  .setLnglat(item.coordinates)
  .setPopup(popup);
```

## äº‹ä»¶

### é¼ æ ‡äº‹ä»¶

- mousemove
- click
- mousedown
- mouseup
- dblclick
- contextmenu
- mouseover
- mouseout

äº‹ä»¶è¿”å›æ•°æ®

- target äº‹ä»¶è§¦å‘æº
- data extData ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®
- lnglat marker ç»çº¬åº¦

```javascript
marker.on('click', (e) => {});
```

## demo åœ°å€

[demo1](/examples/tutorial/marker#amap)
---
title: Popup
order: 0
---

Popup is a bubble used to specify the latitude and longitude location on the map and display customized content.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*N2hWTq-m-8EAAAAAAAAAAAAAARQnAQ" width="300"/>

## illustrate

The anchor point position of Popup is expressed by longitude and latitude. When the map is zoomed/panned, Popup will automatically calculate the coordinates relative to the current map and automatically shift. In other words, if a developer needs to**Specify latitude and longitude location**To display information bubbles, you can consider using the Popup component to achieve the corresponding effect.

Developers can customize the main display content of Popup:

* Plain text can pass`text`configure or`setText`Method controls the Popup's display text.
* Custom DOM can be created via`html`configure or`setHTML`Method supports passing in HTML strings or DOM elements or arrays to control the display content of the Popup.

## use

[Example](/examples/component/popup#popup)

```ts
import { Scene, Popup } from '@antv/l7';

const scene = new Scene({
  id: 'map',
  map: new GaodeMapV2({
    // ...
  }),
});

scene.on('loaded', () => {
  const popup = new Popup({
    //Initial anchor point latitude and longitude
    lngLat: {
      lng: 120,
      lat: 30,
    },
    // Popup title
    title: 'Popup Title',
    // Popup content
    html: 'Popup Content',
  });
  scene.addPopup(popup);

  //Update Popup anchor point latitude and longitude
  popup.setLngLat({
    lng: 130,
    lat: 40,
  });

  //Update Popup content
  popup.setHTML('New Popup Content');
});
```

## Configuration

| name               | illustrate                                                                                                                 | type                           | default value |
| ------------------ | -------------------------------------------------------------------------------------------------------------------------- | ------------------------------ | ------------- |
| lngLat             | The latitude and longitude where the Popup is located                                                                      | `{ lng: number; lat: number }` | -             |
| text               | Text content displayed by Popup content                                                                                    | `string`                       | -             |
| html               | Custom HTML for Popup content display, you can pass HTML string, DOM object or array                                       | [ElementType](#elementtype)    | -             |
| title              | Custom HTML displayed in the Popup title, you can pass HTML string, DOM object or array                                    | [ElementType](#elementtype)    | -             |
| closeOnClick       | Whether to close the current Popup when clicking on the map area                                                           | `boolean`                      | `false`       |
| closeOnEsc         | Whether to close the current Popup when clicking the Esc key                                                               | `boolean`                      | `false`       |
| maxWidth           | Popup's maximum width                                                                                                      | `string`                       | `240px`       |
| anchor             | The position of the Popup arrow can control the placement of the Popup relative to the latitude and longitude points.      | [AnchorType](#anchortype)      | `'bottom'`    |
| offsets            | Popup offset relative to anchor point                                                                                      | `[number, number]`             | `[0, 0]`      |
| autoPan            | When the Popup is displayed or its location changes, whether the map should automatically pan to the location of the Popup | `boolean`                      | `false`       |
| autoClose          | Whether to automatically close the current bubble when there are other Popups displayed                                    | `boolean`                      | `true`        |
| followCursor       | Whether Popup follows the cursor movement, if set to`true`,but`lngLat`Invalid configuration                                | `boolean`                      | `false`       |
| closeButton        | Whether to display the close Popup icon                                                                                    | `boolean`                      | `true`        |
| closeButtonOffsets | Turn off relative offset of Popup icons                                                                                    | `[number, number]`             | -             |
| stopPropagation    | Whether mouse events on Popup should be prevented from bubbling                                                            | `boolean`                      | `true`        |

### ElementType

```ts
type ElementType =
  | HTMLElement
  | HTMLElement[]
  | DocumentFragment
  | Text
  | string;
```

### AnchorType

```ts
type AnchorType =
  | 'center'
  | 'top'
  | 'top-left'
  | 'top-right'
  | 'bottom'
  | 'bottom-left'
  | 'bottom-right'
  | 'left'
  | 'right';
```

## method

| name       | illustrate                                               | type                                                                 |
| ---------- | -------------------------------------------------------- | -------------------------------------------------------------------- |
| getOptions | Get the current Popup configuration                      | `() => IPopupOption`                                                 |
| setOptions | Update current Popup configuration                       | `(newOption: Partial<IPopupOption>) => this`                         |
| show       | Show Popup                                               | `() => this`                                                         |
| hide       | Hide Popup                                               | `() => this`                                                         |
| getIsShow  | Determine whether the current bubble is displayed        | `() => boolean`                                                      |
| setTitle   | Set the HTML displayed by the Popup title                | `(title: ElementType) => this`                                       |
| setHTML    | Set the HTML for Popup content display                   | `(html: ElementType) => this`                                        |
| setText    | Set the text displayed by Popup content                  | `(text: string) => this`                                             |
| setLngLat  | Set the latitude and longitude of the Popup anchor point | `(lngLat: { lng: number; lat: number } \| [number, number]) => this` |
| panToPopup | Pan the map to the current Popup location                | `() => this`                                                         |

## event

| name  | illustrate                        | type         |
| ----- | --------------------------------- | ------------ |
| open  | Fired when Popup is added         | `() => void` |
| close | Triggered when Popup is removed   | `() => void` |
| show  | Triggered when Popup is displayed | `() => void` |
| hide  | Triggered when Popup is hidden    | `() => void` |
---
title: Scale
order: 4
---

This control displays the ratio of distances on the map to the corresponding distances on the ground.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*r3iSQI4SekYAAAAAAAAAAAAAARQnAQ" width="400"/>

## use

[Example](/examples/component/control#scale)

```ts
import { Scene, Scale } from '@antv/l7';

const scene = new Scene({
  //...
});

scene.on('loaded', () => {
  const scale = new Scale({
    zoomInTitle: 'æ”¾å¤§',
    zoomOutTitle: 'ç¼©å°',
  });
  scene.addControl(scale);
});
```

## Configuration

| name           | illustrate                                                               | type      | default value |
| -------------- | ------------------------------------------------------------------------ | --------- | ------------- |
| lockWidth      | Whether to fix the container width                                       | `boolean` | `true`        |
| maxWidth       | The maximum width of the component's container                           | `number`  | `100`         |
| metric         | exhibit**km**format scale                                                | `boolean` | `true`        |
| imperial       | exhibit**mile**format scale                                              | `boolean` | `false`       |
| updateWhenIdle | Whether to only update the scale after dragging and zooming are complete | `boolean` | `false`       |

<embed src="@/docs/common/control/api.en.md"></embed>

## method

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: ExportImage
order: 7
---

Take a screenshot of the current map part and generate a picture`Base64`String.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Yc78QZaeJWkAAAAAAAAAAAAAARQnAQ" width="400"/>

## illustrate

[Example](/examples/component/control#exportimage)

The captured targets when taking screenshots only include:

* map base map
* Layers (excluding MarkerLayer)

**Note: Since the current map base map corresponds to`Canvas`The buffer is enabled by default, so the basemap portion of the map cannot be captured by default.**

Therefore, if the developer needs the complete screenshot capability, the following parameters should be passed when initializing the map instance to turn it off.`Canvas`buffer.

```ts
new GaodeMapV2({
  WebGLParams: {
    preserveDrawingBuffer: true,
  },
});

new Mapbox({
  preserveDrawingBuffer: true,
});
```

## use

```ts
import { Scene, ExportImage } from '@antv/l7';

const scene = new Scene({
  id: 'map',
  map: new GaodeMapV2({
    // Close the map buffer, otherwise the map part cannot be captured when taking screenshots
    WebGLParams: {
      preserveDrawingBuffer: true,
    },
  }),
});

scene.on('loaded', () => {
  const zoom = new ExportImage({
    onExport: (base64: string) => {
      // download(base64)
    },
  });
  scene.addControl(zoom);
});
```

## Configuration

| name      | illustrate                                                                                                    | type                       |
| --------- | ------------------------------------------------------------------------------------------------------------- | -------------------------- |
| imageType | Screenshot image format                                                                                       | `'png'`\|`'jpeg'`          |
| onExport  | After the screenshot is successfully taken, it is used to receive the picture`Base64`String callback function | `(base64: string) => void` |

<embed src="@/docs/common/control/btn-api.zh.md"></embed>

<embed src="@/docs/common/control/api.zh.md"></embed>

## method

| name     | illustrate                              | type                    |
| -------- | --------------------------------------- | ----------------------- |
| getImage | Get the Base64 string of the screenshot | `() => Promise<string>` |

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: ExportImage å¯¼å‡ºå›¾ç‰‡
order: 7
---

å¯¹å½“å‰åœ°å›¾éƒ¨åˆ†è¿›è¡Œæˆªå›¾å¹¶ç”Ÿæˆå›¾ç‰‡çš„ `Base64` å­—ç¬¦ä¸²ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Yc78QZaeJWkAAAAAAAAAAAAAARQnAQ" width="400"/>

## è¯´æ˜

[ç¤ºä¾‹](/examples/component/control#exportimage)

æˆªå›¾æ—¶è¢«æˆªå–çš„ç›®æ ‡ä»…åŒ…å«ï¼š

- åœ°å›¾åº•å›¾
- å›¾å±‚ï¼ˆä¸åŒ…å« MarkerLayerï¼‰

**æ³¨æ„ï¼šç”±äºå½“å‰åœ°å›¾åº•å›¾å¯¹åº” `Canvas` é»˜è®¤å¼€å¯äº†ç¼“å†²åŒºï¼Œå¯¼è‡´é»˜è®¤æƒ…å†µä¸‹æ— æ³•æˆªå–åˆ°åœ°å›¾åº•å›¾éƒ¨åˆ†ã€‚**

å› æ­¤è‹¥å¼€å‘è€…éœ€è¦å®Œæ•´çš„æˆªå›¾èƒ½åŠ›ï¼Œåˆ™åº”å½“åœ¨åˆå§‹åŒ–åœ°å›¾å®ä¾‹æ—¶ä¼ é€’ä»¥ä¸‹å‚æ•°ä»¥å…³é—­ `Canvas` ç¼“å†²åŒºã€‚

```ts
new GaodeMapV2({
  WebGLParams: {
    preserveDrawingBuffer: true,
  },
});

new Mapbox({
  preserveDrawingBuffer: true,
});
```

## ä½¿ç”¨

```ts
import { Scene, ExportImage } from '@antv/l7';

const scene = new Scene({
  id: 'map',
  map: new GaodeMapV2({
    // å…³é—­åœ°å›¾ç¼“å†²åŒºï¼Œå¦åˆ™æˆªå›¾æ—¶æ— æ³•æˆªå–åˆ°åœ°å›¾éƒ¨åˆ†
    WebGLParams: {
      preserveDrawingBuffer: true,
    },
  }),
});

scene.on('loaded', () => {
  const zoom = new ExportImage({
    onExport: (base64: string) => {
      // download(base64)
    },
  });
  scene.addControl(zoom);
});
```

## é…ç½®

| åç§°      | è¯´æ˜                                               | ç±»å‹                       |
| --------- | -------------------------------------------------- | -------------------------- |
| imageType | æˆªå›¾å›¾ç‰‡çš„æ ¼å¼                                     | `'png'` \| `'jpeg'`    |
| onExport  | æˆªå›¾æˆåŠŸåï¼Œç”¨äºæ¥æ”¶å›¾ç‰‡ `Base64` å­—ç¬¦ä¸²çš„å›è°ƒå‡½æ•° | `(base64: string) => void` |

<embed src="@/docs/common/control/btn-api.zh.md"></embed>

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

| åç§°     | è¯´æ˜                     | ç±»å‹                    |
| -------- | ------------------------ | ----------------------- |
| getImage | è·å–æˆªå›¾çš„ Base64 å­—ç¬¦ä¸² | `() => Promise<string>` |

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: GeoLocate
order: 6
---

using browser environment`nagigator`of`getlocation`Method, use the browser to turn on the location sensing capability to obtain the longitude and latitude of the current user.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BOsBRJyYeMEAAAAAAAAAAAAAARQnAQ" width="400"/>

## illustrate

[Example](/examples/component/control#geolocate)

**Notice:**

* When using this capability, the user will be required to authenticate the browser to enable location awareness.
* The coordinates currently obtained by the browser are`WGS84`The geographical coordinate system will be biased when used on the Gaode map, so it can be used`transform`Configure the coordinate system conversion.

## use

```ts
import { Scene, GeoLocate } from '@antv/l7';
import gcoord from 'gcoord';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const geoLocate = new GeoLocate({
    transform: (position) => {
      //Convert the coordinates obtained based on the WGS84 geographical coordinate system into the GCJ02 coordinate system
      return gcoord.transform(position, gcoord.WGS84, gcoord.GCJ02);
    },
  });
  scene.addControl(geoLocate);
});
```

## Configuration

| name      | illustrate                                                                                                                              | type                                               |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------- |
| transform | Format passed`getlocation`The function of the obtained longitude and latitude can be used to convert the geographical coordinate system | `(position: [number, number]) => [number, number]` |

<embed src="@/docs/common/control/btn-api.en.md"></embed>

<embed src="@/docs/common/control/api.en.md"></embed>

## method

| name           | illustrate                                                    | type                              |
| -------------- | ------------------------------------------------------------- | --------------------------------- |
| getGeoLocation | Get the latitude and longitude of the current user's location | `() => Promise<[number, number]>` |

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: LayerPopup
order: 1
---

LayerPopup is a bubble encapsulated based on Popup and is specifically used to display layer element information.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HC6BT6v3YRIAAAAAAAAAAAAAARQnAQ" width="300"/>

## illustrate

LayerPopup is designed to allow developers to quickly generate bubbles for displaying layer information through configuration. Developers can pass in the layers that need to display information bubbles and the fields that need to be displayed.

LayerPopup will listen to the mouse events of the target layer by itself. When the user clicks/hoveres on an element of the target layer, the Popup will automatically open and display the field value of the element.

## use

[Example](/examples/component/popup#layerpopup)[Custom content examples](/zh/examples/component/popup/#customContent)

```ts
import { Scene, LayerPopup, PointLayer } from '@antv/l7';

const scene = new Scene({
  id: 'map',
  map: new GaodeMapV2({
    // ...
  }),
});

scene.on('loaded', () => {
  const pointLayer = new PointLayer();
  pointLayer.source(
    [
      {
        lng: 120,
        lat: 30,
        name: 'Test 1',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'lng',
        y: 'lat',
      },
    },
  );
  scene.addLayer(pointLayer);
  const layerPopup = new LayerPopup({
    items: [
      {
        layer: pointLayer,
        fields: [
          {
            field: 'name',
            formatValue: (name?: string) => name.trim() ?? '-',
          },
        ],
      },
    ],
    trigger: 'hover',
  });
  scene.addPopup(popup);
});
```

## Configuration

| name    | illustrate                                                                                                                                 | type                          | default value |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------- | ------------- |
| items   | The layer configuration array of Popup needs to be displayed, and each option type is visible[LayerPopupConfigItem](#layerpopupconfigitem) | `Array<LayerPopupConfigItem>` | `[]`          |
| trigger | How the mouse triggers Popup display                                                                                                       | `'hover' \| 'click'`          | `'hover'`     |

### LayerPopupConfigItem

| name          | illustrate                                                                                                                                                                                                     | type                                             |
| ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| layer         | Need to display the Popup's target layer instance, or its`id`or`name`                                                                                                                                          | `BaseLayer`\|`string`                            |
| fields        | Array of fields that need to be displayed, supporting the incoming field key value string, or detailed configuration for the field[LayerField](#layerfield)                                                    | `string`\|`LayerField`                           |
| customContent | Custom bubble content supports two ways of directly passing in custom content or returning custom content through a callback function.`fields`Under coexistence, the configuration is read first and rendered. | `ElementType \| ((feature: any) => ElementType)` |
| title         | Custom bubble title supports two ways of directly passing in custom content or returning custom content through a callback function.                                                                           | `ElementType \| ((feature: any) => ElementType)` |

### LayerField

| name        | illustrate                         | type                                                            |
| ----------- | ---------------------------------- | --------------------------------------------------------------- |
| field       | The key value string of the field  | `string`                                                        |
| formatField | Format the displayed key field     | `ElementType \| ((field: string, feature: any) => ElementType)` |
| formatValue | Format the displayed value value   | `ElementType \| ((value: any, feature: any) => ElementType)`    |
| getValue    | Customize the way to get the value | `(feature: any) => any`                                         |

### ElementType

```ts
type ElementType =
  | HTMLElement
  | HTMLElement[]
  | DocumentFragment
  | Text
  | string;
```

## method

| name       | illustrate                                               | type                                                                 |
| ---------- | -------------------------------------------------------- | -------------------------------------------------------------------- |
| getOptions | Get the current Popup configuration                      | `() => IPopupOption`                                                 |
| setOptions | Update current Popup configuration                       | `(newOption: Partial<IPopupOption>) => this`                         |
| show       | Show Popup                                               | `() => this`                                                         |
| hide       | Hide Popup                                               | `() => this`                                                         |
| setLngLat  | Set the latitude and longitude of the Popup anchor point | `(lngLat: { lng: number; lat: number } \| [number, number]) => this` |
| panToPopup | Pan the map to the current Popup location                | `() => this`                                                         |

## event

| name  | illustrate                        | type         |
| ----- | --------------------------------- | ------------ |
| open  | Fired when Popup is added         | `() => void` |
| close | Triggered when Popup is removed   | `() => void` |
| show  | Triggered when Popup is displayed | `() => void` |
| hide  | Triggered when Popup is hidden    | `() => void` |
---
title: æ§ä»¶
order: 1
---

åœ°å›¾æ§ä»¶æŒ‡çš„æ˜¯æ‚¬åœåœ¨åœ°å›¾å››å‘¨ï¼Œå¯ä»¥å¯¹åœ°å›¾ä»¥åŠå›¾å±‚ç­‰å…ƒç´ è¿›è¡Œ**ä¿¡æ¯å‘ˆç°**æˆ–**äº¤äº’**çš„ç»„ä»¶ã€‚

![](https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*zgFeTocc-_oAAAAAAAAAAAAAARQnAQ)

## ä½¿ç”¨

```ts
import { Scene, Zoom } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  // å®ä¾‹åŒ– Zoom æ§ä»¶ï¼Œå¯ä»¥åœ¨æ„é€ å™¨ä¸­ä¼ å…¥æ§ä»¶çš„é…ç½®
  const zoom = new Zoom({
    position: 'leftbottom',
    className: 'my-test-class',
  });

  // å°†å®ä¾‹åŒ–çš„æ§ä»¶æ·»åŠ è‡³ L7 ä¸­
  scene.addControl(zoom);
});
```

## æ›´æ–°é…ç½®

åœ¨æ§ä»¶å®ä¾‹åŒ–ä¹‹åï¼Œå¦‚æœéœ€è¦æ›´æ–°é…ç½®ï¼Œå¯ä»¥è°ƒç”¨æ§ä»¶å®ä¾‹çš„ `setOptions` æ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥éœ€è¦æ›´æ–°çš„é…ç½®å¯¹è±¡å³å¯ã€‚

```ts
const zoom = new Zoom({
  position: 'leftbottom',
});

const onPositionChange = () => {
  // é€šè¿‡ setOptions ä¼ å…¥éœ€è¦æ›´æ–°çš„é…ç½®å¯¹è±¡
  zoom.setOptions({
    position: 'topright',
  });
};
```

## æ’æ§½

å½“å‰ L7 ä¸­çš„æ§ä»¶æ”¯æŒæ’å…¥åˆ°åœ°å›¾çš„**å·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸Šã€å³ä¸‹ã€ä¸Šã€å·¦ã€ä¸‹ã€å³**å…«ä¸ªä½ç½®æ’æ§½æˆ–è€…ç”¨æˆ·è‡ªå®šä¹‰çš„ `DOM` ä¸­ï¼Œå¹¶ä¸”åœ¨åŒä¸€åœ°å›¾æ’æ§½ä¸­ï¼Œå¤šä¸ªæ§ä»¶ä¹‹é—´æ”¯æŒ**æ¨ªå‘**å’Œ**çºµå‘**æ’åˆ—ã€‚

åœ¨åˆå§‹åŒ–æ‰€æœ‰çš„æ§ä»¶ç±»æ—¶ï¼Œå¯ä»¥ä¼ å…¥ `position` å‚æ•°æ¥è®¾ç½®æ§ä»¶å¯¹åº”çš„æ’æ§½ä»¥åŠæ’åˆ—æ–¹å¼ã€‚

![](https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BfG1TI231ysAAAAAAAAAAAAAARQnAQ)

## é…ç½®

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: Control
order: 1
---

The map control refers to hovering around the map, and you can perform operations on the map, layers and other elements.**information presentation**or**interaction**s component.

![](https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*zgFeTocc-_oAAAAAAAAAAAAAARQnAQ)

## use

```ts
import { Scene, Zoom } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  //Instantiate the Zoom control, you can pass in the control configuration in the constructor
  const zoom = new Zoom({
    position: 'leftbottom',
    className: 'my-test-class',
  });

  //Add the instantiated control to L7
  scene.addControl(zoom);
});
```

## Update configuration

After the control is instantiated, if you need to update the configuration, you can call the control instance's`setOptions`method, and pass in the configuration object that needs to be updated.

```ts
const zoom = new Zoom({
  position: 'leftbottom',
});

const onPositionChange = () => {
  // Pass in the configuration object that needs to be updated through setOptions
  zoom.setOptions({
    position: 'topright',
  });
};
```

## slot

Currently the controls in L7 support inserting into the map**Upper left, lower left, upper right, lower right, upper, left, lower, right**Eight position slots or user-defined`DOM`, and support between multiple controls in the same map slot**Horizontal**and**portrait**arrangement.

When initializing all control classes, you can pass in`position`Parameters to set the corresponding slot and arrangement of the control.

![](https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BfG1TI231ysAAAAAAAAAAAAAARQnAQ)

## Configuration

<embed src="@/docs/common/control/api.en.md"></embed>

## method

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: GeoLocate å®šä½
order: 6
---

ä½¿ç”¨æµè§ˆå™¨ç¯å¢ƒçš„ `nagigator` çš„ `getlocation` æ–¹æ³•ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ä½ç½®æ„Ÿåº”èƒ½åŠ›è·å–å½“å‰ç”¨æˆ·æ‰€åœ¨ç»çº¬åº¦ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BOsBRJyYeMEAAAAAAAAAAAAAARQnAQ" width="400"/>

## è¯´æ˜

[ç¤ºä¾‹](/examples/component/control#geolocate)

**æ³¨æ„ï¼š**

- åœ¨ä½¿ç”¨è¯¥èƒ½åŠ›æ—¶ï¼Œä¼šéœ€è¦ç”¨æˆ·å¯¹æµè§ˆå™¨æ‰“å¼€ä½ç½®æ„ŸçŸ¥èƒ½åŠ›è¿›è¡Œé‰´æƒã€‚
- å½“å‰æµè§ˆå™¨è·å–åˆ°çš„åæ ‡æ˜¯ `WGS84` åœ°ç†åæ ‡ç³»ï¼Œåœ¨é«˜å¾·åœ°å›¾ä¸Šä½¿ç”¨ä¼šæœ‰åå·®ï¼Œå¯ä»¥ä½¿ç”¨ `transform` é…ç½®è¿›è¡Œåæ ‡ç³»çš„è½¬æ¢ã€‚

## ä½¿ç”¨

```ts
import { Scene, GeoLocate } from '@antv/l7';
import gcoord from 'gcoord';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const geoLocate = new GeoLocate({
    transform: (position) => {
      // å°†è·å–åˆ°åŸºäº WGS84 åœ°ç†åæ ‡ç³» çš„åæ ‡è½¬æˆ GCJ02 åæ ‡ç³»
      return gcoord.transform(position, gcoord.WGS84, gcoord.GCJ02);
    },
  });
  scene.addControl(geoLocate);
});
```

## é…ç½®

| åç§°      | è¯´æ˜                                                                    | ç±»å‹                                               |
| --------- | ----------------------------------------------------------------------- | -------------------------------------------------- |
| transform | æ ¼å¼åŒ–é€šè¿‡ `getlocation` è·å–åˆ°çš„ç»çº¬åº¦çš„å‡½æ•°ï¼Œå¯ä»¥ç”¨äºåœ°ç†åæ ‡ç³»çš„è½¬æ¢ | `(position: [number, number]) => [number, number]` |

<embed src="@/docs/common/control/btn-api.zh.md"></embed>

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

| åç§°           | è¯´æ˜                   | ç±»å‹                                |
| -------------- | ---------------------- |-----------------------------------|
| getGeoLocation | è·å–å½“å‰ç”¨æˆ·æ‰€åœ¨ç»çº¬åº¦ | `() => Promise<[number, number]>` |

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: LayerPopup å›¾å±‚ä¿¡æ¯æ¡†
order: 1
---

LayerPopup åŸºäº Popup å°è£…çš„ï¼Œä¸“é—¨ç”¨äºå±•ç¤ºå›¾å±‚å…ƒç´ ä¿¡æ¯çš„æ°”æ³¡ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HC6BT6v3YRIAAAAAAAAAAAAAARQnAQ" width="300"/>

## è¯´æ˜

LayerPopup æ˜¯ä¸ºäº†è®©å¼€å‘è€…é€šè¿‡é…ç½®å¿«é€Ÿç”Ÿæˆç”¨äºå±•ç¤ºå›¾å±‚ä¿¡æ¯çš„æ°”æ³¡ï¼Œå¼€å‘è€…å¯ä»¥ä¼ å…¥éœ€è¦å±•ç¤ºä¿¡æ¯æ°”æ³¡çš„å›¾å±‚ï¼Œä»¥åŠéœ€è¦å±•ç¤ºçš„å­—æ®µã€‚

LayerPopup ä¼šè‡ªè¡Œå¯¹ç›®æ ‡å›¾å±‚çš„é¼ æ ‡äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå½“ç”¨æˆ·ç‚¹å‡»/æ‚¬åœåœ¨ç›®æ ‡å›¾å±‚çš„æŸä¸€å…ƒç´ ä¸Šæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ Popup å¹¶å±•ç¤ºè¯¥å…ƒç´ çš„å­—æ®µå€¼ã€‚

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/popup#layerpopup)
[è‡ªå®šä¹‰å†…å®¹ç¤ºä¾‹](/zh/examples/component/popup/#customContent)

```ts
import { Scene, LayerPopup, PointLayer } from '@antv/l7';

const scene = new Scene({
  id: 'map',
  map: new GaodeMapV2({
    // ...
  }),
});

scene.on('loaded', () => {
  const pointLayer = new PointLayer();
  pointLayer.source(
    [
      {
        lng: 120,
        lat: 30,
        name: 'Test 1',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'lng',
        y: 'lat',
      },
    },
  );
  scene.addLayer(pointLayer);
  const layerPopup = new LayerPopup({
    items: [
      {
        layer: pointLayer,
        fields: [
          {
            field: 'name',
            formatValue: (name?: string) => name.trim() ?? '-',
          },
        ],
      },
    ],
    trigger: 'hover',
  });
  scene.addPopup(popup);
});
```

## é…ç½®

| åç§°    | è¯´æ˜                                                                                          | ç±»å‹                          | é»˜è®¤å€¼    |
| ------- | --------------------------------------------------------------------------------------------- | ----------------------------- | --------- |
| items   | éœ€è¦å±•ç¤º Popup çš„å›¾å±‚é…ç½®æ•°ç»„ï¼Œæ¯ä¸ªé€‰é¡¹ç±»å‹å¯è§ [LayerPopupConfigItem](#layerpopupconfigitem) | `Array<LayerPopupConfigItem>` | `[]`      |
| trigger | é¼ æ ‡è§¦å‘ Popup å±•ç¤ºçš„æ–¹å¼                                                                     | `'hover' \| 'click'`          | `'hover'` |

### LayerPopupConfigItem

| åç§°          | è¯´æ˜                                                                                                                 | ç±»å‹                                             |
| ------------- | -------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| layer         | éœ€è¦å±•ç¤º Popup çš„ç›®æ ‡å›¾å±‚å®ä¾‹ï¼Œæˆ–å…¶çš„ `id` æˆ– `name`                                                                 | `BaseLayer` \| `string`                          |
| fields        | éœ€è¦å±•ç¤ºçš„å­—æ®µæ•°ç»„ï¼Œæ”¯æŒä¼ å…¥å­—æ®µ key å€¼å­—ç¬¦ä¸²ï¼Œæˆ–è€…é’ˆå¯¹è¯¥å­—æ®µçš„è¯¦ç»†é…ç½® [LayerField](#layerfield)                    | `string` \| `LayerField`                         |
| customContent | è‡ªå®šä¹‰æ°”æ³¡å†…å®¹ï¼Œæ”¯æŒç›´æ¥ä¼ å…¥è‡ªå®šä¹‰å†…å®¹æˆ–è€…é€šè¿‡å›è°ƒå‡½æ•°è¿”å›è‡ªå®šä¹‰å†…å®¹ä¸¤ç§æ–¹å¼ï¼Œä¸ `fields` å…±å­˜ä¸‹ä¼˜å…ˆè¯»å–è¯¥é…ç½®å¹¶æ¸²æŸ“ | `ElementType \| ((feature: any) => ElementType)` |
| title         | è‡ªå®šä¹‰æ°”æ³¡æ ‡é¢˜ï¼Œæ”¯æŒç›´æ¥ä¼ å…¥è‡ªå®šä¹‰å†…å®¹æˆ–è€…é€šè¿‡å›è°ƒå‡½æ•°è¿”å›è‡ªå®šä¹‰å†…å®¹ä¸¤ç§æ–¹å¼                                         | `ElementType \| ((feature: any) => ElementType)` |

### LayerField

| åç§°        | è¯´æ˜                        | ç±»å‹                                                            |
| ----------- | --------------------------- | --------------------------------------------------------------- |
| field       | å­—æ®µçš„ key å€¼å­—ç¬¦ä¸²         | `string`                                                        |
| formatField | å¯¹å±•ç¤ºçš„ key å­—æ®µè¿›è¡Œæ ¼å¼åŒ– | `ElementType \| ((field: string, feature: any) => ElementType)` |
| formatValue | å¯¹å±•ç¤ºçš„ value å€¼è¿›è¡Œæ ¼å¼åŒ– | `ElementType \| ((value: any, feature: any) => ElementType)`    |
| getValue    | è‡ªå®šä¹‰è·å–å€¼çš„æ–¹å¼          | `(feature: any) => any`                                         |

### ElementType

```ts
type ElementType =
  | HTMLElement
  | HTMLElement[]
  | DocumentFragment
  | Text
  | string;
```

## æ–¹æ³•

| åç§°       | è¯´æ˜                        | ç±»å‹                                                                 |
| ---------- | --------------------------- | -------------------------------------------------------------------- |
| getOptions | è·å–å½“å‰ Popup é…ç½®         | `() => IPopupOption`                                                 |
| setOptions | æ›´æ–°å½“å‰ Popup é…ç½®         | `(newOption: Partial<IPopupOption>) => this`                         |
| show       | æ˜¾ç¤º Popup                  | `() => this`                                                         |
| hide       | éšè— Popup                  | `() => this`                                                         |
| setLngLat  | è®¾ç½® Popup é”šç‚¹æ‰€åœ¨ç»çº¬åº¦   | `(lngLat: { lng: number; lat: number } \| [number, number]) => this` |
| panToPopup | å°†åœ°å›¾å¹³ç§»è‡³å½“å‰ Popup ä½ç½® | `() => this`                                                         |

## äº‹ä»¶

| åç§°  | è¯´æ˜               | ç±»å‹         |
| ----- | ------------------ | ------------ |
| open  | Popup è¢«æ·»åŠ æ—¶è§¦å‘ | `() => void` |
| close | Popup è¢«ç§»é™¤æ—¶è§¦å‘ | `() => void` |
| show  | Popup æ˜¾ç¤ºæ—¶è§¦å‘   | `() => void` |
| hide  | Popup éšè—æ—¶è§¦å‘   | `() => void` |
---
title: Logo
order: 2
---

A control used to display logo images on the map, and supports click-to-jump hyperlinks.

![](https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CbdSRLizMLIAAAAAAAAAAAAAARQnAQ)

## illustrate

Currently, L7 will display this control in the lower left corner of the map by default. If it needs to be hidden, it can be configured when the Scene is instantiated:

```ts
import { Scene } from '@antv/l7';

const scene = new Scene({
  // ...

  // Close the default L7 Logo
  logoVisible: false,
});
```

## use

[Example](/examples/component/control#logo)

```ts
import { Scene, Logo } from '@antv/l7';

const scene = new Scene({
  //...
  logoVisible: false,
});

scene.on('loaded', () => {
  const logo = new Logo({
    // å›¾ç‰‡ url
    img:
      'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ',
    // è·³è½¬åœ°å€
    href: 'https://l7.antv.antgroup.com',
  });
  scene.addControl(logo);
});
```

## Configuration

| name | illustrate                                                                                                           | type     |
| ---- | -------------------------------------------------------------------------------------------------------------------- | -------- |
| img  | Logo display image url                                                                                               | `string` |
| href | Click the logo to jump to the hyperlink. If it is not uploaded, the image will be displayed. Clicking will not jump. | `string` |

<embed src="@/docs/common/control/api.en.md"></embed>

## method

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: Fullscreen
order: 5
---

Used to control map areas**full screen**and**Exit Full Screen**control button control.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CcOXRqK5ARgAAAAAAAAAAAAAARQnAQ" width="400"/>

## use

[Example](/examples/component/control#fullscreen)

```ts
import { Scene, Fullscreen } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const fullscreen = new Fullscreen({
    btnText: 'å…¨å±',
    exitBtnText: 'é€€å‡ºå…¨å±',
  });
  scene.addControl(fullscreen);
});
```

## Configuration

<embed src="@/docs/common/control/btn-api.en.md"></embed>

| name        | illustrate                                    | type                        |
| ----------- | --------------------------------------------- | --------------------------- |
| exitBtnIcon | Exit full screen button icon                  | `HTMLElement`\|`SVGElement` |
| exitBtnText | Text for exit full screen button              | `string`                    |
| exitTitle   | Exit full screen button text`title`Attributes | `string`                    |

<embed src="@/docs/common/control/api.en.md"></embed>

## method

| name             | illustrate                                                      | type         |
| ---------------- | --------------------------------------------------------------- | ------------ |
| toggleFullscreen | Enter/exit the full screen state of the full screen map section | `() => void` |

<embed src="@/docs/common/control/method.en.md"></embed>

## event

| name             | illustrate                                   | type                              |
| ---------------- | -------------------------------------------- | --------------------------------- |
| fullscreenChange | Triggered when the full screen state changes | `(isFullscreen: boolean) => void` |

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: Logo æ ‡å¿—
order: 2
---

ç”¨äºåœ¨åœ°å›¾ä¸Šå±•ç¤º Logo å›¾ç‰‡çš„æ§ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¶…é“¾æ¥ç‚¹å‡»è·³è½¬ã€‚

![](https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CbdSRLizMLIAAAAAAAAAAAAAARQnAQ)

## è¯´æ˜

å½“å‰ L7 ä¼šé»˜è®¤åœ¨åœ°å›¾å·¦ä¸‹è§’å±•ç¤ºè¯¥æ§ä»¶ï¼Œå¦‚éœ€éšè—å¯ä»¥åœ¨ Scene å®ä¾‹åŒ–æ—¶é…ç½®ï¼š

```ts
import { Scene } from '@antv/l7';

const scene = new Scene({
  // ...

  // å…³é—­é»˜è®¤ L7 Logo
  logoVisible: false,
});
```

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#logo)

```ts
import { Scene, Logo } from '@antv/l7';

const scene = new Scene({
  //...
  logoVisible: false,
});

scene.on('loaded', () => {
  const logo = new Logo({
    // å›¾ç‰‡ url
    img:
      'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ',
    // è·³è½¬åœ°å€
    href: 'https://l7.antv.antgroup.com',
  });
  scene.addControl(logo);
});
```

## é…ç½®

| åç§° | è¯´æ˜                                                 | ç±»å‹     |
| ---- | ---------------------------------------------------- | -------- |
| img  | Logo å±•ç¤ºçš„å›¾ç‰‡ url                                  | `string` |
| href | ç‚¹å‡» Logo è·³è½¬çš„è¶…é“¾æ¥ï¼Œä¸ä¼ åˆ™çº¯å±•ç¤ºå›¾ç‰‡ï¼Œç‚¹å‡»ä¸è·³è½¬ | `string` |

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: Fullscreen å…¨å±
order: 5
---

ç”¨äºæ§åˆ¶åœ°å›¾åŒºåŸŸçš„**å…¨å±**å’Œ**é€€å‡ºå…¨å±**çš„æ§åˆ¶æŒ‰é’®æ§ä»¶ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CcOXRqK5ARgAAAAAAAAAAAAAARQnAQ" width="400"/>

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#fullscreen)

```ts
import { Scene, Fullscreen } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const fullscreen = new Fullscreen({
    btnText: 'å…¨å±',
    exitBtnText: 'é€€å‡ºå…¨å±',
  });
  scene.addControl(fullscreen);
});
```

## é…ç½®

<embed src="@/docs/common/control/btn-api.zh.md"></embed>

| åç§°        | è¯´æ˜                              | ç±»å‹                              |
| ----------- | --------------------------------- | --------------------------------- |
| exitBtnIcon | é€€å‡ºå…¨å±æŒ‰é’®çš„å›¾æ ‡                | `HTMLElement` \| `SVGElement` |
| exitBtnText | é€€å‡ºå…¨å±æŒ‰é’®çš„æ–‡æœ¬                | `string`                          |
| exitTitle   | é€€å‡ºå…¨å±æŒ‰é’®çš„æ–‡æœ¬çš„ `title` å±æ€§ | `string`                          |

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

| åç§°             | è¯´æ˜                            | ç±»å‹         |
| ---------------- | ------------------------------- | ------------ |
| toggleFullscreen | è¿›å…¥/é€€å‡ºå…¨å±åœ°å›¾éƒ¨åˆ†çš„å…¨å±çŠ¶æ€ | `() => void` |

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

| åç§°             | è¯´æ˜                     | ç±»å‹                              |
| ---------------- | ------------------------ | --------------------------------- |
| fullscreenChange | å½“å…¨å±çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ | `(isFullscreen: boolean) => void` |

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: Marker å›¾å±‚
order: 3
---

<embed src="@/docs/common/style.md"></embed>

MarkerLayer æ˜¯ Marker çš„å‡çº§ç‰ˆï¼ŒMarker æ˜¯ç‹¬ç«‹çš„åœ°å›¾æ ‡æ³¨ï¼ŒMarkerLayer åˆ™æ˜¯ç»Ÿä¸€ç®¡ç†å¤§é‡çš„ Marker æ•°æ®ã€‚

**æŠ€æœ¯å·®å¼‚**

- Marker Dom ç»˜åˆ¶ä¸€ä¸ªåœ°å›¾å…ƒç´ 
- MarkerLayer ç»Ÿä¸€ç®¡ç†å¤šä¸ª DomMarker
- PointLayer é€šè¿‡ WebGL ç»˜åˆ¶å…ƒç´ ã€‚

**åŠŸèƒ½å·®å¼‚**

- MarkerLayer å…ƒç´ çš„è‡ªå®šä¹‰æ€§æ¯”è¾ƒå¼ºï¼Œä»»ä½• HTML+ CSS çš„ç»„åˆéƒ½å¯ä»¥ç»˜åˆ¶åœ¨åœ°å›¾ä¸Šã€‚
- PointLayer è‡ªå®šä¹‰æ€§æ¯”è¾ƒå¼±ï¼Œå®ç°æˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¼˜åŠ¿å¯ä»¥ç»˜åˆ¶å¤§é‡çš„æ•°æ®ï¼Œæ€§èƒ½æ¯”è¾ƒå¥½ã€‚

## ä½¿ç”¨

```javascript
import { Marker, MarkerLayer } from '@antv/l7';
```

### æ„é€ å‡½æ•°

```javascript
const markerLayer = new MarkerLayer(option);

// è°ƒç”¨ addMarkeræ–¹æ³• å°†å¤šä¸ªMarkeræ·»åŠ åˆ°Layer

scene.addMarkerLayer(markerLayer);
```

#### option

- cluster èšåˆ `boolean` é»˜è®¤ `false`

- clusterOption èšåˆé…ç½®

  - field `string` èšåˆç»Ÿè®¡å­—æ®µ
  - method `sum| max| min| mean`
  - element `function` é€šè¿‡å›è°ƒå‡½æ•°è®¾ç½®èšåˆ Marker çš„æ ·å¼ï¼Œè¿”å› dom å…ƒç´ 
    å›è°ƒå‡½æ•°åŒ…å«ä»¥ä¸‹å‚æ•°
    - point_count é»˜è®¤ èšåˆå…ƒç´ ä¸ªæ•°
    - clusterData `Array` èšåˆèŠ‚ç‚¹çš„åŸå§‹æ•°æ®
    - point_sum èšåˆæ±‚å’Œ æ ¹æ® field å’Œ method è®¡ç®—
    - point_max èšåˆæœ€å¤§å€¼ æ ¹æ® field å’Œ method è®¡ç®—
    - point_min èšåˆæœ€å°å€¼ æ ¹æ® field å’Œ method è®¡ç®—
    - point_mean èšåˆå¹³å‡å€¼ æ ¹æ® field å’Œ method è®¡ç®—

### æ–¹æ³•

#### addMarker

å‚æ•°

- marker `IMarker` éœ€è¦æ·»åŠ çš„ Marker

æ·»åŠ  Marker

é€šè¿‡ Marker å¯¹è±¡å®ä¾‹åŒ–ä¸€ä¸ª Marker

```javascript
const marker = new Marker().setLnglat(); // æ·»åŠ è¿›Markerå¿…é¡»è®¾ç½®ç»çº¬åº¦æ‰èƒ½æ·»åŠ 
markerLayer.addMarker(marker);
```

ä¸º Marker æ·»åŠ å±æ€§ä¿¡æ¯,

å¦‚æœèšåˆå‚æ•°è®¾ç½®ç»Ÿè®¡é…ç½®é¡¹ `field| method`éœ€è¦ä¸º Marker æ·»åŠ å±æ€§ä¿¡æ¯

é€šè¿‡ Marker çš„ extData[é…ç½®é¡¹](/api/compnent/marker#option)è®¾ç½® Marker å±æ€§ä¿¡æ¯

```javascript
const marker = new Marker({
  extData: nodes.features[i].properties,
}).setLnglat({
  lng: coordinates[0],
  lat: coordinates[1],
});
```

#### removeMarker

ä» MarkerLayer ç§»é™¤ Marker

#### getMarkers

è·å– MarkerLayer ä¸­çš„æ‰€æœ‰ Marker

#### clear

æ¸…é™¤æ‰æ‰€æœ‰çš„ Marker

####

### Scene

#### addMarkerLayer

æ·»åŠ  MarkerLayer

```javascript
scene.addMarkerLayer(layer);
```

#### removeMarkerLayer

ç§»é™¤ MarkerLayer

```javascript
scene.removeMarkerLayer(layer);
```

### demo åœ°å€

[markerLayer ](/examples/point/marker#markerlayer)

[markerLayer èšåˆ](/examples/point/marker#clustermarker)
---
title: Marker Layer
order: 3
---

<embed src="@/docs/common/style.md"></embed>

MarkerLayer ä¸åŒäº PointLayer å›¾å±‚

**æŠ€æœ¯å·®å¼‚**

- MarkerLayer åœ°å›¾å…ƒç´ é‡‡ç”¨ Dom å…ƒç´ ç»˜åˆ¶
- PointLayer é€šè¿‡ WebGL ç»˜åˆ¶å…ƒç´ ã€‚

**åŠŸèƒ½å·®å¼‚**

- MarkerLayer å…ƒç´ çš„è‡ªå®šä¹‰æ€§æ¯”è¾ƒå¼ºï¼Œä»»ä½• HTML+ CSS çš„ç»„åˆéƒ½å¯å¯ä»¥ç»˜åˆ¶åœ¨åœ°å›¾ä¸Šã€‚
- PointLayer è‡ªå®šä¹‰æ€§æ¯”è¾ƒå¼±ï¼Œå®ç°æˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¼˜åŠ¿å¯ä»¥ç»˜åˆ¶å¤§é‡çš„æ•°æ®ï¼Œæ€§èƒ½æ¯”äº¤äº’ã€‚

## ä½¿ç”¨

```javascript
import { Marker, MarkerLayer } from '@antv/l7';
```

### æ„é€ å‡½æ•°

```javascript
const markerLayer = new MarkerLayer(option);

// è°ƒç”¨ addMarkeræ–¹æ³• å°†å¤šä¸ªMarkeræ·»åŠ åˆ°Layer

scene.addMarkerLayer(markerLayer);
```

#### option

- cluster èšåˆ `boolean` é»˜è®¤ `false`

- clusterOption èšåˆé…ç½®

  - field `string` èšåˆç»Ÿè®¡å­—æ®µ
  - method `sum| max| min| mean`
  - element `function` é€šè¿‡å›è°ƒå‡½æ•°è®¾ç½®èšåˆ Marker çš„æ ·å¼ï¼Œè¿”å› dom å…ƒç´ 

    å›è°ƒå‡½æ•°åŒ…å«ä»¥ä¸‹å‚æ•°
    point_count é»˜è®¤ èšåˆå…ƒç´ ä¸ªæ•°
    clusterData `Array` èšåˆèŠ‚ç‚¹çš„åŸå§‹æ•°æ®
    point_sum èšåˆæ±‚å’Œ æ ¹æ® field å’Œ method è®¡ç®—
    point_max èšåˆæœ€å¤§å€¼ æ ¹æ® field å’Œ method è®¡ç®—
    point_min èšåˆæœ€å°å€¼ æ ¹æ® field å’Œ method è®¡ç®—
    point_mean èšåˆå¹³å‡å€¼ æ ¹æ® field å’Œ method è®¡ç®—

åç»­ä¼šå¢åŠ æ›´å¤šé…ç½®é¡¹ç›®

### æ–¹æ³•

#### addMarker

å‚æ•°

- marker `IMarker` éœ€è¦æ·»åŠ çš„ Marker

æ·»åŠ  Marker

é€šè¿‡ Marker å¯¹è±¡å®ä¾‹åŒ–ä¸€ä¸ª Marker

```javascript
const marker = new Marker().setLnglat(); // æ·»åŠ è¿›Markerå¿…é¡»è®¾ç½®ç»çº¬åº¦æ‰èƒ½æ·»åŠ 
markerLayer.addMarker(marker);
```

ä¸º Marker æ·»åŠ å±æ€§ä¿¡æ¯,

å¦‚æœèšåˆå‚æ•°è®¾ç½®ç»Ÿè®¡é…ç½®é¡¹ `field| method`éœ€è¦ä¸º Marker æ·»åŠ å±æ€§ä¿¡æ¯

é€šè¿‡ Marker çš„ extData[é…ç½®é¡¹](/api/component/marker#option)è®¾ç½® Marker å±æ€§ä¿¡æ¯

```javascript
const marker = new Marker({
  extData: nodes.features[i].properties,
}).setLnglat({
  lng: coordinates[0],
  lat: coordinates[1],
});
```

#### removeMarker

ä» MarkerLayer ç§»é™¤ Marker

#### getMarkers

è·å– MarkerLayer ä¸­çš„æ‰€æœ‰ Marker

#### clear

æ¸…é™¤æ‰æ‰€æœ‰çš„ Marker

####

### Scene

#### addMarkerLayer

æ·»åŠ  MarkerLayer

```javascript
scene.addMarkerLayer(layer);
```

#### removeMarkerLayer

ç§»é™¤ MarkerLayer

```javascript
scene.removeMarkerLayer(layer);
```

### demo åœ°å€

[markerLayer ](/examples/point/marker#markerlayer)

[markerLayer èšåˆ](/examples/point/marker#clustermarker)
---
title: MapTheme
order: 11
---

This control is used to switch the theme style of the map basemap.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*xb29TawbZDgAAAAAAAAAAAAAARQnAQ" width="400"/>

## illustrate

MapTheme will display the corresponding default theme options by default based on the current map basemap type (such as Mapbox, GaodeMapV2), and you can also pass in custom theme options.

## use

[Example](/examples/component/control#maptheme)

```ts
import { Scene, MapTheme } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const mapTheme = new MapTheme({});
  scene.addControl(mapTheme);
});
```

## Configuration

| name    | illustrate                                                                                                  | type                        |
| ------- | ----------------------------------------------------------------------------------------------------------- | --------------------------- |
| options | User-defined map theme options, the type of each option is visible[IControlOptionItem](#icontroloptionitem) | `Array<IControlOptionItem>` |

## IControlOptionItem

```ts
export type IControlOptionItem = {
  //The text corresponding to the theme option
  text: string;
  //The theme option corresponds to the key value of the map theme style
  value: string;
  //Theme options correspond to the pictures displayed
  img?: string;
};
```

<embed src="@/docs/common/control/popper-api.zh.md"></embed>

<embed src="@/docs/common/control/btn-api.en.md"></embed>

<embed src="@/docs/common/control/api.en.md"></embed>

## method

<embed src="@/docs/common/control/method.en.md"></embed>

## event

<embed src="@/docs/common/control/event.en.md"></embed>

<embed src="@/docs/common/control/popper-event.en.md"></embed>

<embed src="@/docs/common/control/select-event.en.md"></embed>
---
title: MouseLocation
order: 9
---

Used to display the longitude and latitude corresponding to the current cursor on the map in real time.

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*i4F5QZ4K650AAAAAAAAAAAAAARQnAQ" width="400"/>

## use

[Example](/examples/component/control#mouselocation)

```ts
import { Scene, MouseLocation } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const mouseLocation = new MouseLocation({
    transform: (position) => {
      return position;
    },
  });
  scene.addControl(mouseLocation);
});
```

## Configuration

| name      | illustrate                                                            | type                                               |
| --------- | --------------------------------------------------------------------- | -------------------------------------------------- |
| transform | Callback function to convert the longitude and latitude of the cursor | `(position: [number, number]) => [number, number]` |

<embed src="@/docs/common/control/api.en.md"></embed>

## method

<embed src="@/docs/common/control/method.en.md"></embed>

## event

| name           | illustrate                                                      | type                                   |
| -------------- | --------------------------------------------------------------- | -------------------------------------- |
| locationChange | Triggered when the longitude and latitude of the cursor changes | `(position: [number, number]) => void` |

<embed src="@/docs/common/control/event.en.md"></embed>
---
title: MouseLocation å…‰æ ‡ç»çº¬åº¦
order: 9
---

ç”¨äºå®æ—¶å±•ç¤ºå½“å‰å…‰æ ‡åœ¨åœ°å›¾ä¸Šæ‰€å¯¹åº”çš„ç»çº¬åº¦ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*i4F5QZ4K650AAAAAAAAAAAAAARQnAQ" width="400"/>

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#mouselocation)

```ts
import { Scene, MouseLocation } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const mouseLocation = new MouseLocation({
    transform: (position) => {
      return position;
    },
  });
  scene.addControl(mouseLocation);
});
```

## é…ç½®

| åç§°      | è¯´æ˜                         | ç±»å‹                                               |
| --------- | ---------------------------- | -------------------------------------------------- |
| transform | è½¬æ¢å…‰æ ‡æ‰€åœ¨ç»çº¬åº¦çš„å›è°ƒå‡½æ•° | `(position: [number, number]) => [number, number]` |

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

| åç§°           | è¯´æ˜                         | ç±»å‹                                   |
| -------------- | ---------------------------- | -------------------------------------- |
| locationChange | å…‰æ ‡æ‰€åœ¨ç»çº¬åº¦å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ | `(position: [number, number]) => void` |

<embed src="@/docs/common/control/event.zh.md"></embed>
---
title: MapTheme åœ°å›¾ä¸»é¢˜
order: 11
---

è¯¥æ§ä»¶ç”¨äºåˆ‡æ¢åœ°å›¾åº•å›¾çš„ä¸»é¢˜æ ·å¼ã€‚

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*xb29TawbZDgAAAAAAAAAAAAAARQnAQ" width="400"/>

## è¯´æ˜

MapTheme ä¼šæ ¹æ®å½“å‰åœ°å›¾åº•å›¾ç±»å‹ï¼ˆå¦‚ Mapboxã€GaodeMapV2ï¼‰ï¼Œé»˜è®¤å±•ç¤ºç›¸å¯¹åº”çš„é»˜è®¤ä¸»é¢˜é€‰é¡¹ï¼Œç”¨äºä¹Ÿå¯ä»¥ä¼ å…¥è‡ªå®šä¹‰çš„ä¸»é¢˜é€‰é¡¹

## ä½¿ç”¨

[ç¤ºä¾‹](/examples/component/control#maptheme)

```ts
import { Scene, MapTheme } from '@antv/l7';

const scene = new Scene({
  // ...
});

scene.on('loaded', () => {
  const mapTheme = new MapTheme({});
  scene.addControl(mapTheme);
});
```

## é…ç½®

| åç§°    | è¯´æ˜                                                                                   | ç±»å‹                        |
| ------- | -------------------------------------------------------------------------------------- | --------------------------- |
| options | ç”¨æˆ·è‡ªå®šä¹‰çš„åœ°å›¾ä¸»é¢˜é€‰é¡¹ï¼Œæ¯ä¸ªé€‰é¡¹çš„ç±»å‹å¯è§ [IControlOptionItem](#icontroloptionitem) | `Array<IControlOptionItem>` |

## IControlOptionItem

```ts
export type IControlOptionItem = {
  // ä¸»é¢˜é€‰é¡¹å¯¹åº”çš„æ–‡æœ¬
  text: string;
  // ä¸»é¢˜é€‰é¡¹å¯¹åº”åœ°å›¾ä¸»é¢˜ style çš„ key å€¼
  value: string;
  // ä¸»é¢˜é€‰é¡¹å¯¹åº”å±•ç¤ºçš„å›¾ç‰‡
  img?: string;
};
```

<embed src="@/docs/common/control/popper-api.zh.md"></embed>

<embed src="@/docs/common/control/btn-api.zh.md"></embed>

<embed src="@/docs/common/control/api.zh.md"></embed>

## æ–¹æ³•

<embed src="@/docs/common/control/method.zh.md"></embed>

## äº‹ä»¶

<embed src="@/docs/common/control/event.zh.md"></embed>

<embed src="@/docs/common/control/popper-event.zh.md"></embed>

<embed src="@/docs/common/control/select-event.zh.md"></embed>
---
title: ç“¦ç‰‡è°ƒè¯•å›¾å±‚
order: 4
---
æ˜¾ç¤ºç“¦ç‰‡èŒƒå›´å’Œè¡Œåˆ—å·ä¿¡æ¯ï¼Œç”¨äºæµ‹è¯•éªŒè¯ç“¦ç‰‡æœåŠ¡

```
import { Scene, TileDebugLayer } from '@antv/l7';
const debugerLayer = new TileDebugLayer();
scene.addLayer(debugerLayer);

```---
title: ç“¦ç‰‡è°ƒè¯•å›¾å±‚
order: 4
---

Display tile range and row and row number information for testing and verifying tile services

```
import { Scene, TileDebugLayer } from '@antv/l7';
const debugerLayer = new TileDebugLayer();
scene.addLayer(debugerLayer);
```
---
title: Vector çŸ¢é‡ç“¦ç‰‡
order: 0
---

<embed src="@/docs/common/style.md"></embed>

### ç®€ä»‹

`L7` çš„çŸ¢é‡ç“¦ç‰‡å›¾å±‚å¤ç”¨äº†æ™®é€šå›¾å±‚çš„æ•°æ®å¯è§†åŒ–èƒ½åŠ›ï¼Œæ”¯æŒå¯¹å›¾å±‚çš„æ ·å¼è¿›è¡Œæ•°æ®æ˜ å°„ã€‚ç›®å‰çŸ¢é‡ç“¦ç‰‡æ”¯æŒäº†ç‚¹ã€çº¿ã€é¢ã€æ©æ¨¡ç­‰å›¾å±‚

| åˆ†ç±»     | Layer            | parserType                          | æè¿°                                      |
| -------- | ---------------- | ----------------------------------- | ----------------------------------------- |
| çŸ¢é‡ç“¦ç‰‡ | `PointLayer`     | parser of PointLayerã€`geojsonvt`   | çŸ¢é‡ç‚¹å›¾å±‚                                |
| çŸ¢é‡ç“¦ç‰‡ | `LineLayer`      | parser of LineLayerã€`geojsonvt`    | çŸ¢é‡çº¿å›¾å±‚                                |
| çŸ¢é‡ç“¦ç‰‡ | `PolygonLayer`   | parser of PolygonLayerã€`geojsonvt` | çŸ¢é‡å‡ ä½•ä½“å›¾å±‚                            |
| çŸ¢é‡ç“¦ç‰‡ | `MaskLayer`      | parser of MaskLayerã€`geojsonvt`    | çŸ¢é‡æ©æ¨¡å›¾å±‚                              |
| çŸ¢é‡ç“¦ç‰‡ | `TileDebugLayer` | `/`                                 | `TileDebugLayer` ä¸éœ€è¦æ‰§è¡Œ `source` æ–¹æ³• |

ç“¦ç‰‡å›¾å±‚å…¶ä»–é…ç½®é¡¹å’ŒåŸºç¡€å›¾å±‚ PointLayerã€Linelayerã€PolygonLayer ä¿æŒä¸€è‡´

### options

<embed src="@/docs/api/tile/common/options.zh.md"></embed>

### source(url: string, option: IOption)

çŸ¢é‡ç“¦ç‰‡çš„æ•°æ®æºéœ€è¦ä¼ å…¥çŸ¢é‡æ•°æ®çš„ç“¦ç‰‡æœåŠ¡ä»¥åŠå¯¹åº”çš„é…ç½®å‚æ•°ã€‚

#### url

æ•°æ®æœåŠ¡çš„è·¯å¾„æ”¯æŒå•æœåŠ¡å’Œå¤šæœåŠ¡çš„å†™æ³•ã€‚

- å•æœåŠ¡å™¨ å‘ä¸€å°æœåŠ¡å™¨è¯·æ±‚ç“¦ç‰‡æ•°æ®ã€‚
- å¤šæœåŠ¡å™¨ å‘å¤šå°æœåŠ¡å™¨è¯·æ±‚åŒä¸€ä»½æœåŠ¡çš„ç“¦ç‰‡æ•°æ®ã€‚

  - ä½¿ç”¨å¤§æ‹¬å·çš„å†™æ³•è¯·æ±‚è®¾ç½®å¤šæœåŠ¡å™¨ï¼Œå¦‚ `{1-3}`ã€`{a-c}`ã€‚

```js
// å•æœåŠ¡å™¨
const source = new Source('http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...})

// å¤šæœåŠ¡å™¨
const source = new Source('http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...})
```

#### source option

å…³äºé…ç½®å‚æ•°æˆ‘ä»¬éœ€è¦å…³ç³»çš„æ˜¯é‡Œé¢ `parser` å­—æ®µå¯¹åº”çš„å‚æ•°ã€‚

```js
const source = new Source(url, {
  parser: {...}
})
```

| å‚æ•°           | ç±»å‹                               | é»˜è®¤å€¼                                     | æè¿°                 |
| -------------- | ---------------------------------- | ------------------------------------------ | -------------------- |
| type           | `string`                           | /                                          | å›ºå®šå€¼ä¸º `mvt`       |
| tileSize       | `number`                           | `256`                                      | è¯·æ±‚çš„ç“¦ç‰‡å°ºå¯¸       |
| minZoom        | `number`                           | `0`                                        | è¯·æ±‚ç“¦ç‰‡çš„æœ€å°å±‚çº§   |
| maxZoom        | `number`                           | `Infinity`                                 | è¯·æ±‚ç“¦ç‰‡çš„æœ€å¤§å±‚çº§   |
| zoomOffset     | `number`                           | `0`                                        | è¯·æ±‚ç“¦ç‰‡å±‚çº§çš„åç§»é‡ |
| extent         | `[number, number, number, number]` | `[-Infinity,-Infinity,Infinity,Infinity,]` | è¯·æ±‚ç“¦ç‰‡çš„è¾¹ç•Œ       |
| updateStrategy | `UpdateTileStrategy`               | `replace`                                  | ç“¦ç‰‡çš„æ›¿æ¢ç­–ç•¥       |

```js
type UpdateTileStrategy = 'realtime' | 'overlap' | 'replace';
```

ğŸŒŸ çŸ¢é‡ç“¦ç‰‡æ¨èå¤ç”¨ Source

```js
const vectorSource = new Source(
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf',
  {
    parser: {
      type: 'mvt',
      maxZoom: 9,
      extent: [-180, -85.051129, 179, 85.051129],
    },
  },
);
// å¤ç”¨
layer1.source(vectorSource);
layer2.source(vectorSource);
```
---
title: Vector çŸ¢é‡ç“¦ç‰‡
order: 0
---

<embed src="@/docs/common/style.md"></embed>

### Introduction

`L7`The vector tile layer reuses the data visualization capabilities of ordinary layers and supports data mapping of layer styles. Currently, vector tiles support point, line, surface, mask and other layers.

| Classification | Layer            | parserType                         | describe                                         |
| -------------- | ---------------- | ---------------------------------- | ------------------------------------------------ |
| vector tiles   | `PointLayer`     | parser of PointLayerã€`geojsonvt`   | vector point layer                               |
| vector tiles   | `LineLayer`      | parser of LineLayerã€`geojsonvt`    | vector line layer                                |
| vector tiles   | `PolygonLayer`   | parser of PolygonLayerã€`geojsonvt` | Vector geometry layer                            |
| vector tiles   | `MaskLayer`      | parser of MaskLayerã€`geojsonvt`    | Vector mask layer                                |
| vector tiles   | `TileDebugLayer` | `/`                                | `TileDebugLayer`No need to execute`source`method |

Other configuration items of the tile layer are consistent with the basic layers PointLayer, Linelayer, and PolygonLayer.

### options

<embed src="@/docs/api/tile/common/options.en.md"></embed>

### source(url: string, option: IOption)

The data source of vector tiles needs to pass in the tile service of vector data and the corresponding configuration parameters.

#### url

The data service path supports single service and multi-service writing.

* Single server Requests tile data from one server.
* Multiple servers request tile data for the same service from multiple servers.

  * Use braces to request the setting of multiple servers, such as`{1-3}`ã€`{a-c}`ã€‚

```js
// single server
const source = new Source('http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...})

//Multiple servers
const source = new Source('http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...} )
```

#### source option

Regarding the configuration parameters, what we need to relate to is the inside`parser`Parameters corresponding to the field.

```js
const source = new Source(url, {
  parser: {...}
})
```

| parameter      | type                               | default value                              | describe                           |
| -------------- | ---------------------------------- | ------------------------------------------ | ---------------------------------- |
| type           | `string`                           | /                                          | The fixed value is`mvt`            |
| tileSize       | `number`                           | `256`                                      | Requested tile size                |
| minZoom        | `number`                           | `0`                                        | Request the minimum level of tiles |
| maxZoom        | `number`                           | `Infinity`                                 | Request the maximum level of tiles |
| zoomOffset     | `number`                           | `0`                                        | Request tile level offset          |
| extent         | `[number, number, number, number]` | `[-Infinity,-Infinity,Infinity,Infinity,]` | Request the bounds of a tile       |
| updateStrategy | `UpdateTileStrategy`               | `replace`                                  | Tile replacement strategy          |

```js
type UpdateTileStrategy = 'realtime' | 'overlap' | 'replace';
```

ğŸŒŸ Recommended reuse of vector tiles Source

```js
const vectorSource = new Source(
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf',
  {
    parser: {
      type: 'mvt',
      maxZoom: 9,
      extent: [-180, -85.051129, 179, 85.051129],
    },
  },
);
// å¤ç”¨
layer1.source(vectorSource);
layer2.source(vectorSource);
```
---
title: GeoJsonVT ç“¦ç‰‡
order: 0
---

<embed src="@/docs/common/style.md"></embed>

`L7` çŸ¢é‡ç“¦ç‰‡é™¤äº†å¯ä»¥æ—¶å€™åç«¯æä¾›çš„ç“¦ç‰‡æœåŠ¡ä¹‹å¤–ï¼ŒåŒæ—¶æä¾›äº† `geojson-vt` ç“¦ç‰‡åˆ‡åˆ†æ–¹æ¡ˆï¼Œä½¿å¾—å‰ç«¯åœ¨æ²¡æœ‰åç«¯æ”¯æŒçš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä½¿ç”¨çŸ¢é‡ç“¦ç‰‡ã€‚

### çŸ¢é‡ç“¦ç‰‡ - GeoJsonVT

```javascript
import { PolygonLayer } from '@antv/l7';
fetch(
  'https://gw.alipayobjects.com/os/bmw-prod/2b7aae6e-5f40-437f-8047-100e9a0d2808.json',
)
  .then((d) => d.json())
  .then((data) => {
    const source = new Source(data, {
      parser: { type: 'geojsonvt', maxZoom: 9 },
    });
    const polygon = new PolygonLayer({ featureId: 'COLOR' })
      .source(source)
      .color('red');
  });
```

### sourceLayer

åœ¨ä½¿ç”¨å‰ç«¯ç“¦ç‰‡åˆ‡åˆ†çš„æ—¶å€™æˆ‘ä»¬ä¸å†éœ€è¦ä¸ºç“¦ç‰‡å›¾å±‚æŒ‡å®šæ•°æ®æºã€‚

### source(GeoJsonData: string, option: IOption)

åœ¨ä½¿ç”¨å‰ç«¯ç“¦ç‰‡åˆ‡åˆ†çš„çŸ¢é‡ç“¦ç‰‡æ—¶ï¼Œ`source` æ–¹æ³•æ¥æ”¶çš„ä¸åœ¨æ—¶æ•°æ®æœåŠ¡çš„åœ°å€ï¼Œè€Œæ˜¯æ ‡å‡†çš„ `GeoJson` æ•°æ®ã€‚

#### option

åœ¨ä½¿ç”¨å‰ç«¯ç“¦ç‰‡åˆ‡åˆ†çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å°† `source parser` çš„ç±»å‹è®¾ç½®ä¸º `geojsonvt`ã€‚

```js
const source = new Source(data, {
  parser: {
    type: 'geojsonvt',
    maxZoom: 9,
    geojsonvtOptions: {},
  },
});
```

`geojsonOptions` æ”¯æŒå¦‚ä¸‹å‚æ•°:

| å‚æ•°           | ç±»å‹        | é»˜è®¤å€¼   | æè¿°                                                           |
| -------------- | ----------- | -------- | -------------------------------------------------------------- | 
| maxZoom        | `number`    | `14`     | max zoom to preserve detail on                                 |
| indexMaxZoom   | `number`    | `5`      | max zoom in the tile index                                     |
| indexMaxPoints | `number`    | `100000` | max number of points per tile in the tile index                |
| tolerance      | `number`    | `3`      | simplification tolerance (higher means simpler)                |
| extent         | `number`    | `4096`   | tile extent                                                    |
| buffer         | `number`    | `64`     | tile buffer on each side                                       |
| lineMetrics    | `boolean`   | `false`  | whether to calculate line metrics                              |
| promoteId      | `string     | null`    | `null`                                                         | name of a feature property to be promoted to feature.id |
| generateId     | `boolean`   | `true`   | whether to generate feature ids. Cannot be used with promoteId |
| debug          | `0, 1 or 2` | `0`      | logging level (0, 1 or 2)                                      |
---
title: GeoJsonVT ç“¦ç‰‡
order: 0
---

<embed src="@/docs/common/style.md"></embed>

`L7`In addition to the tile services provided by the backend, vector tiles also provide`geojson-vt`The tile slicing scheme allows the front end to use vector tiles without back-end support.

### Vector Tiles - GeoJsonVT

```javascript
import { PolygonLayer } from '@antv/l7';
fetch(
  'https://gw.alipayobjects.com/os/bmw-prod/2b7aae6e-5f40-437f-8047-100e9a0d2808.json',
)
  .then((d) => d.json())
  .then((data) => {
    const source = new Source(data, {
      parser: { type: 'geojsonvt', maxZoom: 9 },
    });
    const polygon = new PolygonLayer({ featureId: 'COLOR' })
      .source(source)
      .color('red');
  });
```

### sourceLayer

When using front-end tile segmentation, we no longer need to specify a data source for the tile layer.

### source(GeoJsonData: string, option: IOption)

When using vector tiles split by front-end tiles,`source`The method receives not the address of the data service, but the standard`GeoJson`data.

#### option

When using front-end tile segmentation we need to`source parser`The type is set to`geojsonvt`ã€‚

```js
const source = new Source(data, {
  parser: {
    type: 'geojsonvt',
    maxZoom: 9,
    geojsonvtOptions: {},
  },
});
```

`geojsonOptions`The following parameters are supported:

| parameter      | type        | default value | describe                                                       |                                                         |
| -------------- | ----------- | ------------- | -------------------------------------------------------------- | ------------------------------------------------------- |
| maxZoom        | `number`    | `14`          | max zoom to preserve detail on                                 |                                                         |
| indexMaxZoom   | `number`    | `5`           | max zoom in the tile index                                     |                                                         |
| indexMaxPoints | `number`    | `100000`      | max number of points per tile in the tile index                |                                                         |
| tolerance      | `number`    | `3`           | simplification tolerance (higher means simpler)                |                                                         |
| extent         | `number`    | `4096`        | tile extent                                                    |                                                         |
| buffer         | `number`    | `64`          | tile buffer on each side                                       |                                                         |
| lineMetrics    | `boolean`   | `false`       | whether to calculate line metrics                              |                                                         |
| promoteId      | \`string    | null\`        | `null`                                                         | name of a feature property to be promoted to feature.id |
| generateId     | `boolean`   | `true`        | whether to generate feature ids. Cannot be used with promoteId |                                                         |
| debug          | `0, 1 or 2` | `0`           | logging level (0, 1 or 2)                                      |                                                         |
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

ç“¦ç‰‡å›¾å±‚çš„ `style` å‚æ•°å’Œä½¿ç”¨çš„å›¾å±‚ç›¸å…³ã€‚å¦‚çŸ¢é‡ç‚¹å›¾å±‚ï¼Œ`style` çš„å‚æ•°å°±æ˜¯å¯¹åº”ç‚¹å›¾å±‚çš„å‚æ•°ã€‚

### raster tile

#### domain: [number, number]

è®¾ç½®æ•°æ®æ˜ å°„çš„å®šä¹‰åŸŸã€‚  
psï¼šå›ºå®šå€¼åŸŸä¸º `[0, 1]`ï¼Œæˆ‘ä»¬å°†ä¼ å…¥çš„å€¼ï¼ˆdomainï¼‰ æ˜ å°„åˆ°å€¼åŸŸ `[0, 1]` åä» `rampColor` æ„å»ºçš„è‰²å¸¦ä¸Šå–é¢œè‰²ï¼Œrgb å¤šé€šé“æ …æ ¼ä¸æ”¯æŒã€‚

#### clampLow/clampHigh: boolean

`clampLow` çš„é»˜è®¤å€¼ä¸º `false`ï¼Œè®¾ç½®ä¸º `true`ï¼Œä½äº `domain` çš„æ•°æ®å°†ä¸æ˜¾ç¤ºã€‚  
`clampHigh` çš„é»˜è®¤å€¼ä¸º `false`ï¼Œè®¾ç½®ä¸º `true`ï¼Œé«˜äº `domain` çš„æ•°æ®å°†ä¸æ˜¾ç¤ºã€‚

psï¼šrgb å¤šé€šé“æ …æ ¼ä¸æ”¯æŒ

#### rampColors

- colorsÂ  é¢œè‰²æ•°ç»„
- positions æ•°æ®åŒºé—´

é…ç½®å€¼åŸŸæ˜ å°„é¢œè‰²çš„è‰²å¸¦ï¼Œå€¼åŸŸçš„èŒƒå›´ä¸º `[0 - 1]`, å¯¹åº”çš„æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ª `position` ä½ç½®è®¾ç½®ä¸€ä¸ªé¢œè‰²å€¼ã€‚

âš ï¸ colors, positions çš„é•¿åº¦è¦ç›¸åŒ

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```

psï¼šâš ï¸ color, position çš„é•¿åº¦è¦ç›¸åŒï¼Œrgb å¤šé€šé“æ …æ ¼ä¸æ”¯æŒ

### vector tile

çŸ¢é‡å›¾å±‚çš„ `style` æ ·å¼å’Œæ™®é€šå›¾å±‚ä¿æŒä¸€è‡´ã€‚

### event

ğŸŒŸ æ•°æ®æ …æ ¼æ”¯æŒå›¾å±‚äº‹ä»¶ï¼Œç›®å‰å›¾ç‰‡æ …æ ¼æš‚æ—¶ä¸æ”¯æŒå›¾å±‚äº‹ä»¶ã€‚

##### ç»‘å®šäº‹ä»¶

ğŸŒŸ æ•°æ®æ …æ ¼ç“¦ç‰‡

```javascript
// ç»‘å®šäº‹ä»¶çš„æ–¹å¼å’Œæ™®é€šå›¾å±‚ä¿æŒä¸€è‡´
layer.on('click', e => {...})
```

#### äº‹ä»¶å‚æ•°

ğŸŒŸ æ•°æ®æ …æ ¼ç“¦ç‰‡
æ•°æ®æ …æ ¼ç“¦ç‰‡çš„äº‹ä»¶å‚æ•°ç›¸æ¯”äºæ™®é€šå›¾å±‚çš„äº‹ä»¶è¿”å›äº†æ–°çš„å‚æ•°ã€‚

#### value: number

ğŸŒŸ æ•°æ®æ …æ ¼ç“¦ç‰‡
é¼ æ ‡äº‹ä»¶ä½ç½®çš„ç“¦ç‰‡çš„å®é™…æ•°å€¼ã€‚
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

of tile layer`style`Parameters depend on the layer used. Such as vector point layer,`style`The parameters of are the parameters of the corresponding point layer.

### raster tile

#### domain: \[number, number]

Set the domain of data mapping.\
ps: The fixed value range is`[0, 1]`, we map the incoming value (domain) to the value domain`[0, 1]`Later from`rampColor`The built ribbon picks up colors, and RGB multi-channel rasters are not supported.

#### clampLow/clampHigh: boolean

`clampLow`The default value is`false`,Set as`true`, lower than`domain`The data will not be displayed.\
`clampHigh`The default value is`false`,Set as`true`, higher than`domain`The data will not be displayed.

ps: rgb multi-channel raster is not supported

#### rampColors

* colors color array
* positions data interval

Configure the color band of the value range mapping color. The range of the value range is`[0 - 1]`, correspondingly we need to provide each`position`Position sets a color value.

âš ï¸ colors, positions must be the same length

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```

ps: âš ï¸ The lengths of color and position must be the same, rgb multi-channel raster is not supported

### vector tile

of vector layers`style`The style remains the same as the normal layer.

### event

ğŸŒŸ Data raster supports layer events, while image raster currently does not support layer events.

##### Binding events

ğŸŒŸ Data grid tiles

```javascript
// The method of binding events is consistent with that of ordinary layers.
layer.on('click', e => {...})
```

#### event parameters

ğŸŒŸ Data grid tiles
The event parameters of data grid tiles return new parameters compared to the events of ordinary layers.

#### value: number

ğŸŒŸ Data grid tiles
The actual value of the tile at the mouse event location.
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

#### sourceLayer

<description> _string_ **required** </description>

åªæœ‰çŸ¢é‡å›¾å±‚ç”Ÿæ•ˆï¼Œç”¨äºè®¾ç½®çŸ¢é‡å›¾å±‚çš„æ•°æ®æºã€‚

ğŸŒŸ ä¸€èˆ¬çŸ¢é‡æœåŠ¡è¿”å›çš„æ•°æ®ä¸­å­˜åœ¨å¤šä¸ªå›¾å±‚çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸­è¿›è¡Œé€‰å–ã€‚

```javascript
const layer = new PointLayer({
  sourceLayer: 'city',
});
```

#### featureId

<description> _string_ **optional** _default:_ è‡ªåŠ¨æ•°å­—ç¼–å·</description>

åªæœ‰çŸ¢é‡å›¾å±‚ç”Ÿæ•ˆï¼Œç”¨äºæŒ‡å®šçŸ¢é‡å›¾å±‚çš„ç¼–ç  `id`ã€‚

ğŸŒŸ ç¼–ç  `id` ç”¨äºåœ¨å›¾å±‚é«˜äº®æ—¶ä½¿ç”¨ã€‚

```javascript
const layer = new PointLayer({
  featureId: 'id',
});
```---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

#### sourceLayer

<description> *string* **required** </description>

Only valid for vector layers, used to set the data source of vector layers.

ğŸŒŸ Generally, there are multiple layers of data in the data returned by the vector service, and we need to select from them.

```javascript
const layer = new PointLayer({
  sourceLayer: 'city',
});
```

#### featureId

<description> *string* **optional** *default:*automatic numbering</description>

Only vector layers take effect, used to specify the encoding of vector layers.`id`ã€‚

ğŸŒŸ Encoding`id`Used when a layer is highlighted.

```javascript
const layer = new PointLayer({
  featureId: 'id',
});
```
---
title: Raster æ …æ ¼ç“¦ç‰‡
order: 0
---

<embed src="@/docs/common/style.md"></embed>

`L7`The raster layer supports loading`TMS`ã€`WMS`ã€`WMTS`and other image tiles in various formats, and also supports`Tiff`ã€`Lerc`Data raster tiles in various formats.

| Classification | Layer         | parserType   | dataType      | describe                          |
| -------------- | ------------- | ------------ | ------------- | --------------------------------- |
| grid tiles     | `RasterLayer` | `rasterTile` | `image`ã€`/`   | Picture grid                      |
| grid tiles     | `RasterLayer` | `rasterTile` | `arraybuffer` | data grid                         |
| grid tiles     | `RasterLayer` | `rasterTile` | `rgb`         | Color remote sensing image raster |

ğŸŒŸ Currently only supports 3857 coordinate system

### source(url: string, option: IOption)

The data source of vector tiles needs to pass in the tile service of vector data and the corresponding configuration parameters.

#### url

The path processing of data services supports single service and multi-service writing methods, and also supports simultaneous requests for multiple files.

* Single server Requests tile data from one server.

* Multiple servers request tile data for the same service from multiple servers.

  * Use braces to request the setting of multiple servers, such as`{1-3}`ã€`{a-c}`ã€‚

* Request multiple files. Request tile data from multiple tile services at the same time.
  * Use an array to set up multiple services.
  * Currently, the format for requesting multiple files is only supported by raster tiles.

```js
import { Source } from '@antv/l7'
// single server
const source = new Source('http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...})

//Multiple servers
const source = new Source('http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...} )

//Request multiple files
const urls = [
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
]

const urls = [
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
    bands: [0]
  },
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff'
  },
  ...
]
const tileSource = new Source(urls, {...});
```

#### source option

via configuration`parser`In the parameters, we can specify different tile types and parameters of the tile service.

```js
const source = new Source(url, {
  parser: {...}
})
```

| parameter      | type                               | default value                              | describe                              |
| -------------- | ---------------------------------- | ------------------------------------------ | ------------------------------------- |
| type           | `string`                           | /                                          | Describe the different types of tiles |
| tileSize       | `number`                           | `256`                                      | Requested tile size                   |
| minZoom        | `number`                           | `0`                                        | Request the minimum level of tiles    |
| maxZoom        | `number`                           | `Infinity`                                 | Request the maximum level of tiles    |
| zoomOffset     | `number`                           | `0`                                        | Request tile level offset             |
| extent         | `[number, number, number, number]` | `[-Infinity,-Infinity,Infinity,Infinity,]` | Request the bounds of a tile          |
| updateStrategy | `UpdateTileStrategy`               | `replace`                                  | Tile replacement strategy             |

```js
type UpdateTileStrategy = 'realtime' | 'overlap' | 'replace';
```

About using different grid tiles`parser`parameter.

| Tile type   | type         | dataType      | describe                    |
| ----------- | ------------ | ------------- | --------------------------- |
| TMS         | `rasterTile` | `image`       | Picture grid                |
| WMS         | `rasterTile` | `image`       | Picture grid                |
| WMTS        | `rasterTile` | `image`       | Picture grid                |
| arraybuffer | `rasterTile` | `arraybuffer` | Data raster, single channel |
| rgb         | `rasterRgb`  | `arraybuffer` | Data raster, multi-channel  |

ğŸŒŸ`WMTS`Format tiles have additional parameters.

| parameter     | type           | value | describe               |
| ------------- | -------------- | ----- | ---------------------- |
| `wmtsOptions` | `IWmtsOptions` | `/`   | Set request parameters |

`IWmtsOptions`The parameters are used for splicing`url`ã€‚

```js
interface IWmtsOptions {
  layer: string;
  version?: string;
  style?: string;
  format: string;
  service?: string;
  tileMatrixset: string;
}
```

#### parser parameters

##### type: string

Used to specify the parsing method of the tile service, the value is`rasterTile`and`mvt`ã€‚\
`rasterTile`For parsing of raster tiles,`mvt`For parsing of vector tiles.

##### dataType: string

use`dataType`Distinguish between picture raster and data raster, the value is`image`and`arraybuffer`,The default is`image`ã€‚

```javascript
//Set the image grid
layer.source({
  'http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      dataType: 'image',
      ...
    }
  }
})

//Set data grid
layer.source({
  'http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      dataType: 'arraybuffer',
      ...
    }
  }
})
```

##### minZoom/maxZoom: number

Set the request level for tile data. When the mapâ€™s zoom level`zoom`less than`minZoom`after, or`zoom`more than the`maxZoom`No more new tiles will be requested.\
`minZoom`The default value is`-Infinity`ã€‚\
`maxZoom`The default value is`Infinity`ã€‚

##### tileSize: number

The set value is the tile size returned by the tile service.\
`tileSize`The default value is 256.\
ps: This value is determined when producing tiles, we set`tileSize`It needs to be consistent with what is returned by the tile service.

##### extent: \[number, number, number, number]

Set the boundary of requesting tile data, the format is`[minLng, maxLat, maxLng, minLat]`, only tile data within the range will be requested.

##### zoomOffset: number

The set value is used to change the level of requested tile data. Usually on the mobile terminal, higher-level tiles can be requested for better clarity.`zoomOffset`The default value of is 0

##### format: IRasterFormat

<description> *IFormat* **required** </description>

`format`Method used to extract band data from the incoming raster file binary data.

* The first parameter is the raster file binary data.
* The second parameter is the band that should be extracted from the raster file specified by the first parameter. The method parameter is what we pass`source`parameters passed`data`numerical value.
* `format`Is a`async`method.

```js
interface IRasterData {
  rasterData: HTMLImageElement | Uint8Array | ImageBitmap | null | undefined;
  width: number;
  height: number;
}
type IRasterFormat = (
  data: ArrayBuffer,
  bands: number[],
) => Promise<IRasterData | IRasterData[]>;

const source = new Source(data, {
  parser: {
    format: async (data, bands) => {
      ...
      return {
        rasterData: bandData,
        width: 256;
        height: 256;
      }
    }
  }
})
```

## style

<embed src="@/docs/common/layer/raster/style_single.en.md"></embed>
---
title: Raster æ …æ ¼ç“¦ç‰‡
order: 0
---

<embed src="@/docs/common/style.md"></embed>

`L7` çš„æ …æ ¼å›¾å±‚æ”¯æŒåŠ è½½ `TMS`ã€`WMS`ã€`WMTS` ç­‰å¤šç§æ ¼å¼çš„å›¾ç‰‡ç“¦ç‰‡ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ `Tiff`ã€`Lerc` ç­‰å¤šç§æ ¼å¼çš„æ•°æ®æ …æ ¼ç“¦ç‰‡ã€‚

| åˆ†ç±»     | Layer         | parserType   | dataType      | æè¿°             |
| -------- | ------------- | ------------ | ------------- | ---------------- |
| æ …æ ¼ç“¦ç‰‡ | `RasterLayer` | `rasterTile` | `image`ã€`/`  | å›¾ç‰‡æ …æ ¼         |
| æ …æ ¼ç“¦ç‰‡ | `RasterLayer` | `rasterTile` | `arraybuffer` | æ•°æ®æ …æ ¼         |
| æ …æ ¼ç“¦ç‰‡ | `RasterLayer` | `rasterTile` | `rgb`         | å½©è‰²é¥æ„Ÿå½±åƒæ …æ ¼ |

ğŸŒŸ ç›®å‰åªæ”¯æŒ 3857 åæ ‡ç³»

### source(url: string, option: IOption)

çŸ¢é‡ç“¦ç‰‡çš„æ•°æ®æºéœ€è¦ä¼ å…¥çŸ¢é‡æ•°æ®çš„ç“¦ç‰‡æœåŠ¡ä»¥åŠå¯¹åº”çš„é…ç½®å‚æ•°ã€‚

#### url

æ•°æ®æœåŠ¡çš„è·¯å¾„å¤„ç†æ”¯æŒå•æœåŠ¡å’Œå¤šæœåŠ¡çš„å†™æ³•ï¼Œè¿˜æ”¯æŒåŒæ—¶è¯·æ±‚å¤šæ–‡ä»¶ã€‚

- å•æœåŠ¡å™¨ å‘ä¸€å°æœåŠ¡å™¨è¯·æ±‚ç“¦ç‰‡æ•°æ®ã€‚
- å¤šæœåŠ¡å™¨ å‘å¤šå°æœåŠ¡å™¨è¯·æ±‚åŒä¸€ä»½æœåŠ¡çš„ç“¦ç‰‡æ•°æ®ã€‚

  - ä½¿ç”¨å¤§æ‹¬å·çš„å†™æ³•è¯·æ±‚è®¾ç½®å¤šæœåŠ¡å™¨ï¼Œå¦‚ `{1-3}`ã€`{a-c}`ã€‚

- è¯·æ±‚å¤šæ–‡ä»¶ åŒæ—¶è¯·æ±‚å¤šä»½ç“¦ç‰‡æœåŠ¡çš„ç“¦ç‰‡æ•°æ®ã€‚
  - ä½¿ç”¨æ•°ç»„çš„æ–¹å¼è®¾ç½®å¤šæœåŠ¡ã€‚
  - ç›®å‰è¯·æ±‚å¤šæ–‡ä»¶çš„æ ¼å¼åªæœ‰æ …æ ¼ç“¦ç‰‡æ”¯æŒã€‚

```js
import { Source } from '@antv/l7'
// å•æœåŠ¡å™¨
const source = new Source('http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...})

// å¤šæœåŠ¡å™¨
const source = new Source('http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {...})

// è¯·æ±‚å¤šæ–‡ä»¶
const urls = [
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
]

const urls = [
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',
    bands: [0]
  },
  {
    url: 'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff'
  },
  ...
]
const tileSource = new Source(urls, {...});
```

#### source option

é€šè¿‡é…ç½® `parser` ä¸­çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸åŒçš„ç“¦ç‰‡ç±»å‹ä»¥åŠç“¦ç‰‡æœåŠ¡çš„å‚æ•°ã€‚

```js
const source = new Source(url, {
  parser: {...}
})
```

| å‚æ•°           | ç±»å‹                               | é»˜è®¤å€¼                                     | æè¿°                 |
| -------------- | ---------------------------------- | ------------------------------------------ | -------------------- |
| type           | `string`                           | /                                          | æè¿°ä¸åŒç±»å‹çš„ç“¦ç‰‡   |
| tileSize       | `number`                           | `256`                                      | è¯·æ±‚çš„ç“¦ç‰‡å°ºå¯¸       |
| minZoom        | `number`                           | `0`                                        | è¯·æ±‚ç“¦ç‰‡çš„æœ€å°å±‚çº§   |
| maxZoom        | `number`                           | `Infinity`                                 | è¯·æ±‚ç“¦ç‰‡çš„æœ€å¤§å±‚çº§   |
| zoomOffset     | `number`                           | `0`                                        | è¯·æ±‚ç“¦ç‰‡å±‚çº§çš„åç§»é‡ |
| extent         | `[number, number, number, number]` | `[-Infinity,-Infinity,Infinity,Infinity,]` | è¯·æ±‚ç“¦ç‰‡çš„è¾¹ç•Œ       |
| updateStrategy | `UpdateTileStrategy`               | `replace`                                  | ç“¦ç‰‡çš„æ›¿æ¢ç­–ç•¥       |

```js
type UpdateTileStrategy = 'realtime' | 'overlap' | 'replace';
```

å…³äºä¸åŒçš„æ …æ ¼ç“¦ç‰‡ä½¿ç”¨ä¸åŒçš„ `parser` å‚æ•°ã€‚

| ç“¦ç‰‡ç±»å‹    | type         | dataType      | æè¿°             |
| ----------- | ------------ | ------------- | ---------------- |
| TMS         | `rasterTile` | `image`       | å›¾ç‰‡æ …æ ¼         |
| WMS         | `rasterTile` | `image`       | å›¾ç‰‡æ …æ ¼         |
| WMTS        | `rasterTile` | `image`       | å›¾ç‰‡æ …æ ¼         |
| arraybuffer | `rasterTile` | `arraybuffer` | æ•°æ®æ …æ ¼ï¼Œå•é€šé“ |
| rgb         | `rasterRgb`  | `arraybuffer` | æ•°æ®æ …æ ¼ï¼Œå¤šé€šé“ |

ğŸŒŸ `WMTS` æ ¼å¼çš„ç“¦ç‰‡æœ‰é¢å¤–çš„å‚æ•°ã€‚

| å‚æ•°          | ç±»å‹           | å€¼  | æè¿°         |
| ------------- | -------------- | --- | ------------ |
| `wmtsOptions` | `IWmtsOptions` | `/` | è®¾ç½®è¯·æ±‚å‚æ•° |

`IWmtsOptions` çš„å‚æ•°ç”¨äºæ‹¼æ¥ `url`ã€‚

```js
interface IWmtsOptions {
  layer: string;
  version?: string;
  style?: string;
  format: string;
  service?: string;
  tileMatrixset: string;
}
```

#### parser å‚æ•°

##### type: string

ç”¨äºæŒ‡å®šç“¦ç‰‡æœåŠ¡çš„è§£ææ–¹å¼ï¼Œå€¼ä¸º `rasterTile` å’Œ `mvt`ã€‚  
`rasterTile` ç”¨äºæ …æ ¼ç“¦ç‰‡çš„è§£æï¼Œ`mvt` ç”¨äºçŸ¢é‡ç“¦ç‰‡çš„è§£æã€‚

##### dataType: string

ä½¿ç”¨ `dataType` åŒºåˆ†å›¾ç‰‡æ …æ ¼å’Œæ•°æ®æ …æ ¼ï¼Œå€¼ä¸º `image` å’Œ `arraybuffer`ï¼Œé»˜è®¤ä¸º `image`ã€‚

```javascript
// è®¾ç½®å›¾ç‰‡æ …æ ¼
layer.source({
  'http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      dataType: 'image',
      ...
    }
  }
})

// è®¾ç½®æ•°æ®æ …æ ¼
layer.source({
  'http://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',
  {
    parser: {
      type: 'rasterTile',
      dataType: 'arraybuffer',
      ...
    }
  }
})
```

##### minZoom/maxZoom: number

è®¾ç½®ç“¦ç‰‡æ•°æ®çš„è¯·æ±‚å±‚çº§ã€‚å½“åœ°å›¾çš„ç¼©æ”¾å±‚çº§ `zoom` å°äº `minZoom` åï¼Œæˆ– `zoom` å¤§äº `maxZoom` åå°†ä¸å†è¯·æ±‚æ–°çš„ç“¦ç‰‡ã€‚  
`minZoom` çš„é»˜è®¤å€¼ä¸º `-Infinity`ã€‚  
`maxZoom` çš„é»˜è®¤å€¼ä¸º `Infinity`ã€‚

##### tileSize: number

è®¾ç½®çš„å€¼æ˜¯ç“¦ç‰‡æœåŠ¡è¿”å›çš„ç“¦ç‰‡å¤§å°ã€‚  
`tileSize` çš„é»˜è®¤å€¼ä¸º 256ã€‚  
psï¼š è¯¥å€¼åœ¨ç”Ÿäº§ç“¦ç‰‡çš„æ—¶å€™ç¡®å®šï¼Œæˆ‘ä»¬è®¾ç½®çš„ `tileSize` éœ€è¦å’Œç“¦ç‰‡æœåŠ¡è¿”å›çš„ä¿æŒä¸€è‡´ã€‚

##### extent: [number, number, number, number]

è®¾ç½®è¯·æ±‚ç“¦ç‰‡æ•°æ®çš„è¾¹ç•Œï¼Œ æ ¼å¼æ˜¯ `[minLng, maxLat, maxLng, minLat]`ï¼Œåªä¼šè¯·æ±‚èŒƒå›´å†…çš„ç“¦ç‰‡æ•°æ®ã€‚

##### zoomOffset: number

è®¾ç½®çš„å€¼ç”¨äºæ”¹å˜è¯·æ±‚çš„ç“¦ç‰‡æ•°æ®çš„å±‚çº§ï¼Œé€šå¸¸åœ¨ç§»åŠ¨ç«¯å¯ä»¥è¯·æ±‚æ›´é«˜ä¸€çº§çš„ç“¦ç‰‡ä»¥è·å–æ›´å¥½çš„æ¸…æ™°åº¦ã€‚
`zoomOffset` çš„é»˜è®¤å€¼ä¸º 0

##### format: IRasterFormat

<description> _IFormat_ **å¿…é€‰** </description>

`format` æ–¹æ³•ç”¨äºä»ä¼ å…¥çš„æ …æ ¼æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®ä¸­æå–æ³¢æ®µæ•°æ®ã€‚

- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ …æ ¼æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®ã€‚
- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„æ …æ ¼æ–‡ä»¶ä¸­åº”è¯¥æå–çš„æ³¢æ®µï¼Œæ–¹æ³•å‚æ•°æ˜¯æˆ‘ä»¬é€šè¿‡ `source` å‚æ•°ä¼ é€’çš„ `data` æ•°å€¼ã€‚
- `format` æ˜¯ä¸€ä¸ª `async` æ–¹æ³•ã€‚

```js
interface IRasterData {
  rasterData: HTMLImageElement | Uint8Array | ImageBitmap | null | undefined;
  width: number;
  height: number;
}
type IRasterFormat = (
  data: ArrayBuffer,
  bands: number[],
) => Promise<IRasterData | IRasterData[]>;

const source = new Source(data, {
  parser: {
    format: async (data, bands) => {
      ...
      return {
        rasterData: bandData,
        width: 256;
        height: 256;
      }
    }
  }
})
```

## style

<embed src="@/docs/common/layer/raster/style_single.zh.md"></embed>
---
title: RasterLayer å¤šæ³¢æ®µè®¡ç®—
order: 2
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

å¤šæ³¢æ®µæ•°æ®å åŠ è®¡ç®—ç€è‰²ã€‚

## Option

<embed src="@/docs/common/layer/options.zh.md"></embed>

## source

<embed src="@/docs/common/source/raster/raster_band_calc.zh.md"></embed>

## style

<embed src="@/docs/common/layer/raster/style.zh.md"></embed>
---
title: RasterLayer multi band
order: 2
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

Multi-band data overlay calculation coloring.

## Option

<embed src="@/docs/common/layer/options.en.md"></embed>

## source

<embed src="@/docs/common/source/raster/raster_band_calc.en.md"></embed>

## style

<embed src="@/docs/common/layer/raster/style.en.md"></embed>
---
title: RasterLayer å¤šæ³¢æ®µåˆæˆ
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

`RasterLayer` å›¾å±‚ä¸»è¦å®ç°æ …æ ¼æ•°æ®çš„å¯è§†åŒ–ï¼Œæ …æ ¼æ•°æ®ä¸»è¦æ¥æºæ˜¯å«æ˜Ÿé¥æ„Ÿæ•°æ®ï¼Œå¦‚æ•°å­—é«˜ç¨‹å›¾ï¼Œæ¤è¢«åˆ†å¸ƒå›¾ï¼Œå¤œå…‰å›¾ã€‚

## Option

<embed src="@/docs/common/layer/options.zh.md"></embed>

## source

<embed src="@/docs/common/source/raster/raster_rgb.zh.md"></embed>

## style

### opacity é€æ˜åº¦

```js
layer.style({
  opacity: 0.5,
});
```
---
title: RasterLayer Composite band
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

`RasterLayer`The layer mainly realizes the visualization of raster data. The main source of raster data is satellite remote sensing data, such as digital elevation map, vegetation distribution map, and night light map.

## Option

<embed src="@/docs/common/layer/options.en.md"></embed>

## source

<embed src="@/docs/common/source/raster/raster_rgb.en.md"></embed>

## style

### opacity transparency

```js
layer.style({
  opacity: 0.5,
});
```
---
title: Raster
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

`RasterLayer`The layer mainly realizes the visualization of raster data. The main source of raster data is satellite remote sensing data, such as digital elevation map, vegetation distribution map, and night light map.

* L7 itself does not provide a raster data format internally. It needs to parse the external raster data file or provide a parsing method to pass it in, such as`tiff`ã€`lerc`ã€‚
* In addition to supporting simple rendering, the raster layer also supports multi-band calculations of raster data, and can be used to draw remote sensing color images.

### Data plotting

We can directly calculate the band data of the raster externally and then pass it to the raster layer for use.

* There is no need to provide additional extraction methods for raster data, and the parsed raster data can be parsed externally.
* This method only supports coloring of single-band data and cannot perform band calculations.

```js
const layer = new RasterLayer({})
  .source(tiffdata.data, {
    parser: {
      type: 'raster',
      width: tiffdata.width,
      height: tiffdata.height,
      min: 0,
      max: 80,
      extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],
    },
  })
  .style({
    opacity: 0.8,
    domain: [0, 2000],
    rampColors: {
      colors: [
        '#FF4818',
        '#F7B74A',
        '#FFF598',
        '#91EABC',
        '#2EA9A1',
        '#206C7C',
      ].reverse(),
      positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
    },
  });
```

### Multi-band calculation

We can pass the requested raster file to the raster layer for use.

* Additional parsing methods for raster data need to be provided. Raster files in different formats require corresponding methods, such as`tiff`For files in the format we generally use`geotiff.js`Perform analysis.
* When directly importing one (multiple) raster files, we can read the raster data of all bands contained in the file and support simple mathematical operations on the band data.

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*lmJFT7WONcoAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

#### Calculate NDVI

```javascript
async function getTiffData(url: string) {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  return arrayBuffer;
}
// tiffdata æ˜¯è¯·æ±‚åˆ°çš„äºŒè¿›åˆ¶çš„æ …æ ¼æ–‡ä»¶
const tiffdata = await getTiffData('https: // xxx');
const layer = new RasterLayer({})
  .source(
    [
      {
        data: tiffdata,
        bands: [0, 1, 2, 3],
      },
    ],
    {
      parser: {
        type: 'raster',
        format: async (data, bands) => {
          const tiff = await GeoTIFF.fromArrayBuffer(data);
          const imageCount = await tiff.getImageCount();
          const image1 = await tiff.getImage(1);
          const value1 = await image1.readRasters();
          const value = value1;
          return [
            { rasterData: value[2], width: value.width, height: value.height }, // R
            { rasterData: value[3], width: value.width, height: value.height }, // NIR
          ];
        },
        // blue green red nir
        // NDVI = ABS(NIR - R) / (NIR + R) = è¿‘çº¢å¤–ä¸çº¢å…‰ä¹‹å·® / è¿‘çº¢å¤–ä¸çº¢å…‰ä¹‹å’Œ
        operation: [
          '/',
          ['-', ['band', 0], ['band', 1]], // R > NIR
          ['+', ['band', 0], ['band', 1]],
        ],
        extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],
      },
    },
  )
  .style({
    domain: [0, 0.25],
    rampColors: {
      colors: [
        'rgb(166,97,26)',
        'rgb(223,194,125)',
        'rgb(245,245,245)',
        'rgb(128,205,193)',
        'rgb(1,133,113)',
      ],
      positions: [0, 0.25, 0.5, 0.75, 1.0],
    },
  });
```
---
title: Raster æ …æ ¼
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

`RasterLayer` å›¾å±‚ä¸»è¦å®ç°æ …æ ¼æ•°æ®çš„å¯è§†åŒ–ï¼Œæ …æ ¼æ•°æ®ä¸»è¦æ¥æºæ˜¯å«æ˜Ÿé¥æ„Ÿæ•°æ®ï¼Œå¦‚æ•°å­—é«˜ç¨‹å›¾ï¼Œæ¤è¢«åˆ†å¸ƒå›¾ï¼Œå¤œå…‰å›¾ã€‚

- L7 æœ¬èº«å†…éƒ¨æ²¡æœ‰æä¾›æ …æ ¼æ•°æ®æ ¼å¼, éœ€è¦å°†å¤–éƒ¨çš„æ …æ ¼æ•°æ®æ–‡ä»¶è§£æåæˆ–è€…æä¾›è§£ææ–¹æ³•åšä¼ å…¥ã€å¦‚ `tiff`ã€`lerc`ã€‚
- æ …æ ¼å›¾å±‚é™¤äº†æ”¯æŒç®€å•æ¸²æŸ“ä¹‹å¤–è¿˜æ”¯æŒæ …æ ¼æ•°æ®çš„å¤šæ³¢æ®µè®¡ç®—ï¼Œå¯ä»¥ç”¨äºç»˜åˆ¶é¥æ„Ÿå½©è‰²å½±åƒã€‚

### æ•°æ®ç»˜åˆ¶

æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å¤–éƒ¨è®¡ç®—å‡ºæ …æ ¼çš„æ³¢æ®µæ•°æ®åä¼ ç»™æ …æ ¼å›¾å±‚ä½¿ç”¨ã€‚

- ä¸éœ€è¦é¢å¤–æä¾›æ …æ ¼æ•°æ®çš„æå–æ–¹æ³•ï¼Œåœ¨å¤–éƒ¨è§£æä¼ å…¥è§£æå¥½çš„æ …æ ¼æ•°æ®ã€‚
- è¿™ç§æ–¹å¼åªæ”¯æŒå¯¹å•æ³¢æ®µæ•°æ®è¿›è¡ŒæŸ“è‰²ï¼Œæ— æ³•è¿›è¡Œæ³¢æ®µè®¡ç®—ã€‚

```js
const layer = new RasterLayer({})
  .source(tiffdata.data, {
    parser: {
      type: 'raster',
      width: tiffdata.width,
      height: tiffdata.height,
      min: 0,
      max: 80,
      extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],
    },
  })
  .style({
    opacity: 0.8,
    domain: [0, 2000],
    rampColors: {
      colors: [
        '#FF4818',
        '#F7B74A',
        '#FFF598',
        '#91EABC',
        '#2EA9A1',
        '#206C7C',
      ].reverse(),
      positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
    },
  });
```

### å¤šæ³¢æ®µè®¡ç®—

æˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚å¾—åˆ°çš„æ …æ ¼æ–‡ä»¶ä¼ ç»™æ …æ ¼å›¾å±‚ä½¿ç”¨ã€‚

- éœ€è¦é¢å¤–æä¾›æ …æ ¼æ•°æ®çš„è§£ææ–¹æ³•ï¼Œä¸åŒæ ¼å¼çš„æ …æ ¼æ–‡ä»¶æœ‰éœ€è¦å¯¹åº”çš„æ–¹æ³•ï¼Œå¦‚ `tiff` æ ¼å¼çš„æ–‡ä»¶æˆ‘ä»¬ä¸€èˆ¬å€ŸåŠ© `geotiff.js` è¿›è¡Œè§£æã€‚
- ç›´æ¥ä¼ å…¥ä¸€ï¼ˆå¤šï¼‰ä¸ªæ …æ ¼æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–æ–‡ä»¶ä¸­åŒ…å«çš„æ‰€æœ‰æ³¢æ®µçš„æ …æ ¼æ•°æ®ï¼ŒåŒæ—¶æ”¯æŒå¯¹æ³¢æ®µæ•°æ®è¿›è¡Œç®€å•çš„æ•°å­¦è¿ç®—ã€‚

<div>
  <div style="width:60%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*lmJFT7WONcoAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

#### è®¡ç®— NDVI

```javascript
async function getTiffData(url: string) {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  return arrayBuffer;
}
// tiffdata æ˜¯è¯·æ±‚åˆ°çš„äºŒè¿›åˆ¶çš„æ …æ ¼æ–‡ä»¶
const tiffdata = await getTiffData('https: // xxx');
const layer = new RasterLayer({})
  .source(
    [
      {
        data: tiffdata,
        bands: [0, 1, 2, 3],
      },
    ],
    {
      parser: {
        type: 'raster',
        format: async (data, bands) => {
          const tiff = await GeoTIFF.fromArrayBuffer(data);
          const imageCount = await tiff.getImageCount();
          const image1 = await tiff.getImage(1);
          const value1 = await image1.readRasters();
          const value = value1;
          return [
            { rasterData: value[2], width: value.width, height: value.height }, // R
            { rasterData: value[3], width: value.width, height: value.height }, // NIR
          ];
        },
        // blue green red nir
        // NDVI = ABS(NIR - R) / (NIR + R) = è¿‘çº¢å¤–ä¸çº¢å…‰ä¹‹å·® / è¿‘çº¢å¤–ä¸çº¢å…‰ä¹‹å’Œ
        operation: [
          '/',
          ['-', ['band', 0], ['band', 1]], // R > NIR
          ['+', ['band', 0], ['band', 1]],
        ],
        extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],
      },
    },
  )
  .style({
    domain: [0, 0.25],
    rampColors: {
      colors: [
        'rgb(166,97,26)',
        'rgb(223,194,125)',
        'rgb(245,245,245)',
        'rgb(128,205,193)',
        'rgb(1,133,113)',
      ],
      positions: [0, 0.25, 0.5, 0.75, 1.0],
    },
  });
```
---
title: RasterLayer data encode
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

Single-band raster data rendering, visual coloring based on raster data

## Option

<embed src="@/docs/common/layer/options.en.md"></embed>

`RasterLayer`The layer mainly realizes the visualization of raster data. The main source of raster data is satellite remote sensing data, such as digital elevation map, vegetation distribution map, and night light map.

## source

<embed src="@/docs/common/source/raster/raster_single.en.md"></embed>

## style

<embed src="@/docs/common/layer/raster/style.en.md"></embed>
---
title: RasterLayer å•æ³¢æ®µ
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

å•æ³¢æ®µæ …æ ¼æ•°æ®æ¸²æŸ“ã€æ ¹æ®æ …æ ¼æ•°æ®è¿›è¡Œå¯è§†åŒ–ç€è‰²

## Option

<embed src="@/docs/common/layer/options.zh.md"></embed>

`RasterLayer` å›¾å±‚ä¸»è¦å®ç°æ …æ ¼æ•°æ®çš„å¯è§†åŒ–ï¼Œæ …æ ¼æ•°æ®ä¸»è¦æ¥æºæ˜¯å«æ˜Ÿé¥æ„Ÿæ•°æ®ï¼Œå¦‚æ•°å­—é«˜ç¨‹å›¾ï¼Œæ¤è¢«åˆ†å¸ƒå›¾ï¼Œå¤œå…‰å›¾ã€‚

## source

<embed src="@/docs/common/source/raster/raster_single.zh.md"></embed>

## style

<embed src="@/docs/common/layer/raster/style.zh.md"></embed>
---
title: Scene
order: 0
redirect_from:
  - /en/docs/api
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

scene object`scene`It is a global object that contains maps, map controls, components, and loaded resources. It is passed`scene`Scene object, we can get everything we need to operate the map.

<div>
  <div style="width:40%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*3wMCR7vIlCwAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

## options

### id

<description> *string | HTMLElement* **required** </description>

You need to pass in the dom container or container id.

### map

<description> MapInstance **required** </description>

The map instance can be obtained through the scene map attribute.

```javascript
const map = scene.map;
```

In order to unify the interface differences between different basemaps`L7`exist`Scene`layer pair`map`The methods have been unified, so some map operation methods can be passed`Scene`Called so that consistent performance can be ensured when switching between different basemaps.

Sample code

```javascript
const scene = new L7.Scene({
  id: 'map',
  map: new L7.GaodeMap({
    style: 'dark',
    center: [110.770672, 34.159869],
    pitch: 45,
  }),
});
```

### logoPosition

<description> *bottomleft* **Optional** </description>

`L7`provided by default`Logo`The display position can be configured, and the default is the lower left corner.

* bottomright
* topright
* bottomleft
* topleft
* topcenter
* bottomcenter
* leftcenter
* rightcenter

### logoVisible Is the logo visible?

<description> *bottomleft* **Optional** *default: true* </description>

Configuration`L7`of`Logo`Whether to display or not, it is displayed by default.

### antialias Whether to enable anti-aliasing

<description> *boolean* **Optional** *default: true* </description>

Whether to start anti-aliasing before starting.

### stencil whether to enable cutting

<description> *boolean* **Optional** *default: false* </description>

Whether to start cropping.

ğŸŒŸ Supported from version v2.7.2, layer`Mask`Masking capabilities as well as vector tiles are required to start this configuration.

### preserveDrawingBuffer

<description> *boolean* **Optional** *default: false* </description>

Whether to retain buffer data`boolean` `false`ã€‚

## Layer method

### addLayer(layer): void Add layer object

Add the layer to`Scene`in the scene.

Parameters:

* `layer`layer object

```javascript
scene.addLayer(layer);
```

### getLayer(id: string): ILayer gets the corresponding layer object

Get the corresponding layer.

```javascript
scene.getLayer('layerID');
```

### getLayers(): ILayer\[] Get all map layers

Get all map layers.

```javascript
scene.getLayers();
```

### getLayerByName(name: string): ILayer Gets the layer based on the layer name

Get the layer based on its name.

* `name`The layer is configured during initialization.`name`ã€‚

```javascript
scene.getLayerByName(name);
```

### removeLayer(layer: ILayer): void remove layer layer

Remove`layer`layers.

```javascript
scene.removeLayer(layer);
```

ğŸŒŸ The layer will be destroyed when removed.

### removeAllLayer(): void removes all layer objects

Remove all layer objects.

```javascript
scene.removeAllLayer();
```

ğŸŒŸ The layer will be destroyed when removed.

## Control component methods

### addControl(ctl: IControl): void Add component control

Add component controls.

* `crl`User-created control object.

```javascript
scene.addControl(ctl);
```

### removeControl(ctr: IControl): void Removes the component control added by the user

Remove user-added component controls.

* `ctl`User-created control object.

```javascript
scene.removeControl(ctl);
```

### getControlByName(name: string): IControl gets the control based on its name

Get the control based on its name.

```javascript
const zoomControl = new Zoom({
  // zoom control
  name: 'z1', // The name of the control passed in by the user (or not passed in, the default name of the control is zoom)
  position: 'topright',
});

scene.getControlByName('z1');
```

## bubble method

### addPopup(popup: Popup): void Add bubbles

Add bubble objects to the scene. Bubbles are used to display user-defined information.

```javascript
scene.addPopup(popup);
```

### removePopup(popup: Popup): void removes bubbles

Remove the bubble object from the scene

```javascript
scene.removePopup(popup);
```

## Marking method

### addMarker(maker: IMarker): void Add mark

Add marker objects to the scene,`Marker`Instances are freely controlled by the user`DOM`ã€‚

* `maker`User created`Marker`Example.

```javascript
const marker = new Marker({
  element: el,
}).setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });
scene.addMarker(marker);
```

### addMarkerLayer(layer: IMarkerLayer): void Add Marker to manage layers uniformly

When the user needs to add many`Marker`Instances can be used to facilitate management`MarkerLayer`Unified management of objects.

* `layer`Mark layer objects.

```javascript
const markerLayer = new MarkerLayer();
scene.addMarkerLayer(markerLayer);
```

### removeMarkerLayer(layer: IMarkerLayer): void removes the label layer

Remove the label layer.

* `layer`Mark layer objects.

```javascript
scene.removeMarkerLayer(markerLayer);
```

### removeAllMarkers(): void removes all label objects in the scene

Removes all label objects from the scene.

```javascript
scene.removeAllMarkers();
```

## static method

Static methods are called through the Scene class, not the scene instance

### addProtocol

Add a custom data protocol and set up a custom load tile function that will be called when data starting with a custom URL pattern is used.

* protocol protocol name
* handler data processing callback function
  * requestParameters: RequestParameters,
    * url tile URL, carrying tile row and column numbers x, y, z
  * callback: ResponseCallback<any>) => Cancelable
    * Cancelableï¼š {
      cancel: () => void;
      };

#### Custom function

```ts
Scene.addProtocol('custom', (params, callback) => {
          fetch(`https://${params.url.split("://")[1]}`)
              .then(t => {
                  if (t.status == 200) {
                      t.arrayBuffer().then(arr => {
                          callback(null, arr, null, null);
                      });
                  } else {
                      callback(new Error(`Tile fetch error: ${t.statusText}`));
                  }
              })
              .catch(e => {
                  callback(new Error(e));
              });
          return { cancel: () => { } };
      });
// the following is an example of a way to return an error when trying to load a tile
    Scene.addProtocol('custom2', (params, callback) => {
        callback(new Error('someErrorMessage'));
        return { cancel: () => { } };
    });
```

#### Load PMTiles

```ts
import * as pmtiles from "pmtiles";
const protocol = new pmtiles.Protocol();
const scene = new Scene({
      id: 'map',
      map: new Map({
        center: [11.2438, 43.7799],
        zoom: 12,
      }),
    });

    scene.addProtocol('pmtiles',protocol.tile);
    const source = new Source('pmtiles://https://mdn.alipayobjects.com/afts/file/A*HYvHSZ-wQmIAAAAAAAAAAAAADrd2AQ/protomaps(vector)ODbL_firenze.bin', {
        parser: {
          type: 'mvt',
          tileSize: 256,
          maxZoom: 14,
          extent: [-180, -85.051129, 179, 85.051129],
        },
      })
```

### removeProtocol

Delete previously added protocols

* name: protocol name

```ts
scene.remove Protocol('mbtiles',protocol.tile);
```

## map method

### getZoom(): number Get the zoom level

Get the current zoom level.

```javascript
scene.getZoom();
```

### getCenter(): ILngLat gets the map center

Get map center point

```javascript
interface ILngLat {
  lng: number;
  lat: number;
}

scene.getCenter();
```

### getSize(): \[number, number] Get the map container size

Get the map container size, width, height.

```javascript
scene.getSize();
```

### getPitch(): number Get the map tilt angle

Get the map elevation angle.

```javascript
scene.getPitch();
```

### getContainer(): HTMLElement | null Get the map container

Get the map container.

```javascript
scene.getContainer();
```

### setMapStyle(style: string): void Set map style

parameter`style`The parameter is a string, and you can select the built-in map style. The specific style format is consistent with the setting method of each base map.

`L7`There are three built-in map styles:`AMAP`and`MapBox`All applicable.

* light
* dark
* normal

Method to set the map basemap style.

```javascript
//Shortcut name setting
scene.setMapStyle('light');

// mapbox theme settings
scene.setMapStyle('mapbox://styles/mapbox/streets-v11');

// AMap
scene.setMapStyle(
  'amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true',
);
```

### setCenter(center: ICenter, option?: ICameraOptions): void Set the map center point

Set the map center point coordinates.`L7`provided`setCenter`method, allowing the user to dynamically set the center point of the map, and also allows the optional`options`Property settings offset.

```js
type ICenter = [number, number];
interface ICameraOptions {
  padding:
    | number
    | [number, number, number, number]
    | {
        top?: number,
        bottom?: number,
        right?: number,
        left?: number,
      };
}

scene.setCenter([lng, lat]);
scene.setCenter([lng, lat], {
  padding: {
    top: 100,
  },
});
```

ğŸŒŸ`padding`Parameters support the following three value transfer methods. The unit of the value is`px`, indicating the offset distance between the center point of the map and the edge of the container.

```javascript
export interface ICameraOptions {
  padding:
    | number
    | [number, number, number, number]
    | {
        top?: number,
        bottom?: number,
        right?: number,
        left?: number,
      };
}
```

[Online case](/examples/point/bubble#point)

### setZoomAndCenter(zoom: number, center: ICenter): void Set the map zoom level and center point

Set map level and center.

```javascript
type ICenter = [number, number];
scene.setZoomAndCenter(zoom, center);
```

### setZoom(zoom: number): void Set the map zoom level

Set map zoom level

```javascript
scene.setZoom(10);
```

### setRotation(rotation: number): void Set map rotation

Set the clockwise rotation angle of the map. The rotation origin is the center point of the map container. The value range is \[0-360].

```javascript
scene.setRotation(rotation);
```

### zoomIn(); void Zoom the map one level

The map is zoomed in one level.

```javascript
scene.zoomIn();
```

### zoomOut(): void Zoom out one level of the map

The map shrinks one level.

```javascript
scene.zoomOut();
```

### panTo(lnglat: ILngLat): void map movement

Pan the map to the specified latitude and longitude location.

```javascript
type ILngLat = [number, number];
scene.panTo(LngLat);
```

### panBy(x: number, y: number): void map pan

Moves the map in pixels in the X and Y directions.

* `x`Moving pixels horizontally to the right is the positive direction.
* `y`Move pixels vertically downward in the positive direction.

```javascript
scene.panBy(x, y);
```

### setPitch(pitch: number): void Set the map tilt angle

Set the map tilt angle.

```javascript
scene.setPitch(pitch);
```

### setMapStatus(statusOption: IStatusOptions): void Set map status

Used to set some interactive configurations of the map.

```javascript
interface IStatusOptions {
  showIndoorMap: boolean;
  resizeEnable: boolean;
  dragEnable: boolean;
  keyboardEnable: boolean;
  doubleClickZoom: boolean;
  zoomEnable: boolean;
  rotateEnable: boolean;
}

scene.setMapStatus({ dragEnable: false });
```

### fitBounds(bound: IBounds, options?: IOptions): void Set the map zoom range

The map is zoomed to a certain range.

* `bound`Represents the latitude and longitude range \[\[minlng,minlat],\[maxlng,maxlat]].
* `options`User input, override`animate`Direct configuration, override`Scene`Incoming configuration items.

```javascript
type IBounds = [[number, number], [number, number]];
interface IOptions {
  [key]: any;
  animate: boolean;
}

scene.fitBounds([
  [112, 32],
  [114, 35],
]);
```

### containerToLngLat(point: IPoint): ILngLat canvas coordinates converted to latitude and longitude

Convert canvas coordinates to latitude and longitude coordinates

```javascript
type IPoint = [number, number];
interface ILngLat {
  lng: number;
  lat: number;
}

scene.pixelToLngLat([10, 10]);
```

### lngLatToContainer(lnglat: ILngLat): IPoint latitude and longitude converted to canvas coordinates

Convert latitude and longitude coordinates to canvas coordinates.

```javascript
type ILngLat = [number, number];
interface IPoint {
  x: number;
  y: number;
}

scene.lngLatToPixel([120, 10]);
```

### pixelToLngLat(pixel: IPoint): ILngLat pixel coordinates converted to longitude and latitude

The map pixel coordinates are converted into longitude and latitude coordinates, and the pixel coordinates are the distance between a point on the map and the upper left corner of the container.

```javascript
type IPoint = [number, number];
interface ILngLat {
  lng: number;
  lat: number;
}
scene.pixelToLngLat([10, 10]);
```

### lngLatToPixel(lnglat: ILngLat): IPoint longitude and latitude to pixel coordinates

Convert latitude and longitude coordinates to pixel coordinates.

```javascript
type ILngLat = [number, number];
interface IPoint {
  x: number;
  y: number;
}
scene.lngLatToPixel([120, 10]);
```

### exportMap(type?: IImage): string export

Exporting a map currently only supports the export of visualization layers and does not support the export of basemaps.

```javascript
type IImage = 'png' | 'jpg';
scene.exportMap('png');
```

### destroy(): void scene destruction

`scene`Destroy method, leave the page, call when you donâ€™t need to use the map, after calling`scene`The resources and resources in will be destroyed.

```javascript
scene.destroy();
```

## iconfont mapping support

### addIconFont(name: string, unicode: string): void Add mapping support

Supports processing of data passed in by users`unicode`mapping, which internally maintains a set of names and corresponding`key`key-value pairs.

```javascript
scene.addIconFont('icon1', 'î™‹');
scene.addIconFont('icon2', 'î™Œ');
scene.addFontFace(fontFamily, fontPath);
const pointIconFontLayer = new PointLayer({})
  .source(
    [
      {
        j: 140,
        w: 34,
        m: 'icon1',
      },
      {
        j: 140,
        w: 36,
        m: 'icon2',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'j',
        y: 'w',
      },
    },
  )
  .shape('m', 'text')
  .size(12)
  .color('w', ['#f00', '#f00', '#0f0'])
  .style({
    fontFamily,
    iconfont: true,
    textAllowOverlap: true,
  });
```

### addIconFonts(option: IOption): void Pass in multiple sets of name-unicode key-value pairs at the same time

Incoming multiple groups at the same time`name - unicode`key-value pairs.

```javascript
type IKeyValue = [name: string, unicode: string];
type IOption = Array<IKeyValue>;

scene.addIconFonts([
  ['icon1', 'î™‹'],
  ['icon2', 'î™Œ'],
]);
```

## global resources

### addImage(id: string, img: IImage): void Add global resources

exist`scene`Add globally`L7`The layer object can use the image resources in .

```javascript
type IImage = HTMLImageElement | string | Fileï¼›

scene.addImage( '02','https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg');
```

[Example address](/examples/gallery/animate#animate_path_texture)

### hasImage(id: string): boolean determines global image resources

Determine whether the corresponding image resource has been added globally.

```javascript
scene.hasImage('imageID');
```

### removeImage(id: string): void Globally delete image resources

Delete the corresponding image resource globally.

```javascript
scene.removeImage('imageID');
```

### addFontFace(fontFamily: string, fontPath: string): void Add font file

Add to`iconfont`font file.

* `fontFamily`Font name defined by the user for himself
* `fontPath`Imported file address

```javascript
let fontFamily = 'iconfont';
let fontPath =
  '//at.alicdn.com/t/font_2534097_iiet9d3nekn.woff2?t=1620444089776';
scene.addFontFace(fontFamily, fontPath);
```

## other

### getPointSizeRange(): Float32Array

Get the drawing supported by the current device`WebGL`The size of the point sprite.

## event

### on(eventName: string, handler: function): void

exist`scene`Bind event listener.

* `eventName`Event name.
* `handler`Event callback function.

### off(eventName: string, handler: function): void

remove in`scene`The event listener bound on.

* `eventName`Event name.
* `handler`Event callback function.

### scene event

`scene`Some common scene events will be triggered, and users can monitor them when needed.

#### loaded

`scene`Initialization completion event, we often use`scene`Add after initialization is complete`Layer`ã€‚

```javascript
scene.on('loaded', () => {
  scene.addLayer(layer);
});
```

#### resize

Map container change event

```javascript
scene.on('resize', () => {}); // Map container size change event
```

### map events

```javascript
scene.on('loaded', () => {}); //Triggered after map loading is completed
scene.on('mapmove', () => {}); // Event triggered when the map is moved
scene.on('movestart', () => {}); // Triggered when the map pan starts
scene.on('moveend', () => {}); // Triggered after the map movement ends, including translation and zooming when the center point changes. If the map has a dragging and easing effect, it will be triggered after the easing ends.
scene.on('zoomchange', () => {}); // Triggered after the map zoom level changes
scene.on('zoomstart', () => {}); // Triggered when zooming starts
scene.on('zoomend', () => {}); // Triggered when zooming stops
```

For other map events, you can view the event document of the corresponding basemap. Map events can also be viewed through`Scene.map`Make settings.

[Mapbox](https://docs.mapbox.com/mapbox-gl-js/api/#map.event)[Gaode](https://lbs.amap.com/api/javascript-api/reference/map)

### mouse events

```javascript
scene.on('click', (ev) => {}); // Left mouse button click event
scene.on('dblclick', (ev) => {}); // Left mouse button double-click event
scene.on('mousemove', (ev) => {}); // Triggered when the mouse moves on the map
scene.on('mousewheel', (ev) => {}); // Triggered when the mouse wheel starts to zoom the map
scene.on('mouseover', (ev) => {}); // Triggered when the mouse moves into the map container
scene.on('mouseout', (ev) => {}); // Triggered when the mouse moves out of the map container
scene.on('mouseup', (ev) => {}); // Triggered when the mouse is clicked and raised on the map
scene.on('mousedown', (ev) => {}); // Triggered when the mouse is clicked on the map
scene.on('contextmenu', (ev) => {}); // Right mouse click event
scene.on('dragstart', (ev) => {}); //Triggered when you start dragging the map
scene.on('dragging', (ev) => {}); // Triggered during dragging the map
scene.on('dragend', (ev) => {}); //Triggered when stopping dragging the map. If the map has a dragging and easing effect, it will be triggered before dragging stops and easing starts.

scene.on('webglcontextlost', () => {}); // webgl context lost
```

## Experimental parameters

Experimental parameters may be discarded.

### offsetCoordinate: boolean

Applicable to Gaode map, whether to turn off the offset coordinate system, the default is`true`ã€‚

```js
const scene = new Scene({
  offsetCoordinate: true,
});
```
---
title: MapBox åœ°å›¾
order: 1
------
title: å¤©åœ°å›¾
order: 4
---
---
title: åœ°å›¾ Map
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

L7 åœ°ç†å¯è§†åŒ–ä¾§é‡äºåœ°ç†æ•°æ®çš„å¯è§†åŒ–è¡¨è¾¾ï¼Œåœ°å›¾å±‚éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹åœ°å›¾ï¼Œç¬¬ä¸‰æ–¹åœ°å›¾é€šè¿‡ Scene ç»Ÿä¸€åˆ›å»ºï¼Œåˆ›å»ºç®¡ç†
åªéœ€è¦é€šè¿‡ Scene ä¼ å…¥åœ°å›¾é…ç½®é¡¹å³å¯ã€‚

L7 åœ¨å†…éƒ¨è§£å†³äº†ä¸åŒåœ°å›¾åº•å›¾ä¹‹é—´å·®å¼‚ï¼ŒåŒæ—¶ L7 å±‚é¢ç»Ÿä¸€ç®¡ç†åœ°å›¾çš„æ“ä½œæ–¹æ³•ã€‚

ç›®å‰ L7 æ”¯æŒä¸¤ç§åœ°å›¾åº•å›¾

- Map ç‹¬ç«‹åœ°å›¾å¼•æ“ï¼Œä¸éœ€è¦åº•å›¾ã€æˆ–è€…åŠ è½½åœ°å›¾ç“¦ç‰‡æœåŠ¡ï¼Œä¸éœ€è¦ Token

- é«˜å¾·åœ°å›¾  GaodeMap é»˜è®¤æŒ‡å‘  [Token](https://lbs.amap.com/api/javascript-api/guide/abc/prepare)

- MapBox å›½é™…ä¸šåŠ¡ï¼Œ éœ€è¦æ³¨å†Œ [Token]()

### import

```javascript
import { GaodeMap } from '@antv/l7-maps'; // é»˜è®¤å¼•å…¥é«˜å¾· 2.x ç‰ˆæœ¬ 2.11.0 ç‰ˆæœ¬å¼€å§‹é»˜è®¤å‡çº§ä¸ºv2
import { GaodeMapV1 } from '@antv/l7-maps'; //  2.11.0 ç‰ˆæœ¬ä¹‹å‰ç‰ˆæœ¬é»˜è®¤å‡çº§ä¸ºv1

import { Mapbox } from '@antv/l7-maps';
import { Map } from '@antv/l7-maps';
```

### å®ä¾‹åŒ–

âš ï¸ ä½¿ç”¨åœ°å›¾ç”³è¯·åœ°å›¾ tokenï¼ŒL7 å†…éƒ¨è®¾ç½®äº†é»˜è®¤ tokenï¼Œä»…ä¾›æµ‹è¯•ä½¿ç”¨

#### é»˜è®¤ Map å®ä¾‹åŒ–

```js
import { Map } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new Map({
    style: 'dark',
    center: [103, 30],
    pitch: 4,
    zoom: 10,
    rotation: 19,
  }),
});
```

#### é«˜å¾·åœ°å›¾å®ä¾‹åŒ–

é«˜å¾·åœ°å›¾ API é…ç½®å‚æ•°

- token
  æ³¨å†Œé«˜å¾· [API token](https://lbs.amap.com/api/javascript-api/guide/abc/prepare)

- plugin {array} `['AMap.ElasticMarker','AMap.CircleEditor']`

  åŠ è½½[é«˜å¾·åœ°å›¾æ’ä»¶](https://lbs.amap.com/api/javascript-api/guide/abc/plugins)

```javascript
const L7AMap = new GaodeMap({
  pitch: 35.210526315789465,
  style: 'dark',
  center: [104.288144, 31.239692],
  zoom: 4.4,
  token: 'xxxx - token',
  plugin: [], // å¯ä»¥ä¸è®¾ç½®
});
```

#### Mapbox åœ°å›¾å®ä¾‹åŒ–

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'dark',
    center: [103.83735604457024, 1.360253881403068],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313,
    token: 'xxxx - token',
  }),
});
```

### ä¼ å…¥å¤–éƒ¨å®ä¾‹

ä¸ºäº†æ”¯æŒå·²æœ‰åœ°å›¾é¡¹ç›®å¿«é€Ÿæ¥å…¥ L7 çš„èƒ½åŠ›ï¼ŒL7 æä¾›ä¼ å…¥åœ°å›¾å®ä¾‹çš„æ–¹æ³•ã€‚å¦‚æœä½ æ˜¯æ–°é¡¹ç›®æ¨èä½¿ç”¨ Scene åˆå§‹åŒ–åœ°å›¾

âš ï¸ scene id å‚æ•°éœ€è¦åœ°å›¾çš„ Map å®ä¾‹æ˜¯åŒä¸ªå®¹å™¨ã€‚

âš ï¸ ä¼ å…¥åœ°å›¾å®ä¾‹éœ€è¦è‡ªè¡Œå¼•å…¥ç›¸å…³åœ°å›¾çš„ API

âš ï¸ viewMode è®¾ç½®ä¸º 3D æ¨¡å¼ï¼ˆGaodeMap2.0 æ”¯æŒ 2D æ¨¡å¼ï¼Œå¯ä»¥ä¸è®¾ç½®ï¼‰

#### ä¼ å…¥é«˜å¾·åœ°å›¾å®ä¾‹

```javascript
const map = new AMap.Map('map', {
  viewMode: '3D',
  resizeEnable: true, // æ˜¯å¦ç›‘æ§åœ°å›¾å®¹å™¨å°ºå¯¸å˜åŒ–
  zoom: 11, // åˆå§‹åŒ–åœ°å›¾å±‚çº§
  center: [116.397428, 39.90923], // åˆå§‹åŒ–åœ°å›¾ä¸­å¿ƒç‚¹
});
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    mapInstance: map,
  }),
});
```

[ç¤ºä¾‹åœ°å€](/examples/tutorial/map#amapInstance)
[ä»£ç åœ°å€](https://github.com/antvis/L7/blob/master/examples/tutorial/map/demo/amapInstance.js)

[ç¤ºä¾‹åœ°å€ï¼ˆ 2D ï¼‰](/examples/tutorial/map#amapInstance2d)
[ä»£ç åœ°å€](https://github.com/antvis/L7/blob/master/examples/tutorial/map/demo/amapInstance.js)

#### ä¼ å…¥ Mapbox åœ°å›¾å®ä¾‹

```javascript
mapboxgl.accessToken = 'xxxx - token';
const map = new mapboxgl.Map({
  container: 'map', // container id
  style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
  center: [-74.5, 40], // starting position [lng, lat]
  zoom: 9, // starting zoom
});

const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    mapInstance: map,
  }),
});
```

## options

### zoom åˆå§‹åŒ–ç¼©æ”¾ç­‰çº§

<description> _number_ </description>

åœ°å›¾åˆå§‹æ˜¾ç¤ºçº§åˆ« {number} Mapbox ï¼ˆ0-24ï¼‰ é«˜å¾· ï¼ˆ2-19ï¼‰

### center åœ°å›¾ä¸­å¿ƒ

åœ°å›¾åˆå§‹ä¸­å¿ƒç»çº¬åº¦ {Lnglat}

### pitch åœ°å›¾å€¾è§’

åœ°å›¾åˆå§‹ä¿¯ä»°è§’åº¦ {number} Â default 0

### style åœ°å›¾å›¾æ ·å¼

ç®€åŒ–åœ°å›¾æ ·å¼è®¾ç½®ï¼ŒL7 å†…ç½®äº†ä¸‰ç§ä¸»é¢˜é»˜è®¤æ ·å¼ é«˜å¾·ï¼Œmapbox éƒ½å¯ä»¥ä½¿ç”¨

- dark
- light
- normal
- blank æ— åº•å›¾

é™¤äº†å†…ç½®çš„æ ·å¼ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ å…¥è‡ªå®šä¹‰çš„å…¶ä»–å±æ€§ã€‚

æ¯”å¦‚é«˜å¾·åœ°å›¾

âš ï¸ é«˜å¾·åœ°å›¾æ ·å¼ å¢åŠ  `isPublic=true` å‚æ•°

```javascript
{
  style: 'amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true'; // è®¾ç½®æ–¹æ³•å’Œé«˜å¾·åœ°å›¾ä¸€è‡´
}
```

### minZoom æœ€å°ç¼©æ”¾ç­‰çº§

åœ°å›¾æœ€å°ç¼©æ”¾ç­‰çº§ {number} Â default 0 Mapbox 0-24ï¼‰ é«˜å¾· ï¼ˆ2-19ï¼‰

### maxZoom æœ€å¤§ç¼©æ”¾ç­‰çº§

åœ°å›¾æœ€å¤§ç¼©æ”¾ç­‰çº§ {number} Â default 22 Mapboxï¼ˆ0-24ï¼‰ é«˜å¾· ï¼ˆ2-19ï¼‰

### rotateEnable æ˜¯å¦å…è®¸æ—‹è½¬

åœ°å›¾æ˜¯å¦å¯æ—‹è½¬ {Boolean} default true

## æ³¨å†Œä½¿ç”¨é«˜å¾·æ’ä»¶

```javascript
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [116.475, 39.99],
    pitch: 0,
    zoom: 13,
    plugin: ['AMap.ToolBar', 'AMap.LineSearch'],
  }),
});
// plugin: ['AMap.ToolBar', 'AMap.LineSearch'],
// ä¸ºäº†ä½¿ç”¨å¯¹åº”æ’ä»¶çš„èƒ½åŠ›ï¼Œåº”è¯¥é¦–å…ˆåœ¨ plugin ä¸­æ³¨å†Œå¯¹åº”çš„æ’ä»¶

// åŠ è½½çš„ AMap ä¼šæŒ‚è½½åœ¨å…¨å±€çš„ window å¯¹è±¡ä¸Š
scene.on('loaded', () => {
  window.AMap.plugin(['AMap.ToolBar', 'AMap.LineSearch'], () => {
    // add control
    scene.map.addControl(new AMap.ToolBar());

    var linesearch = new AMap.LineSearch({
      pageIndex: 1, //é¡µç ï¼Œé»˜è®¤å€¼ä¸º1
      pageSize: 1, //å•é¡µæ˜¾ç¤ºç»“æœæ¡æ•°ï¼Œé»˜è®¤å€¼ä¸º20ï¼Œæœ€å¤§å€¼ä¸º50
      city: 'åŒ—äº¬', //é™å®šæŸ¥è¯¢åŸå¸‚ï¼Œå¯ä»¥æ˜¯åŸå¸‚åï¼ˆä¸­æ–‡/ä¸­æ–‡å…¨æ‹¼ï¼‰ã€åŸå¸‚ç¼–ç ï¼Œé»˜è®¤å€¼ä¸ºã€å…¨å›½ã€
      extensions: 'all', //æ˜¯å¦è¿”å›å…¬äº¤çº¿è·¯è¯¦ç»†ä¿¡æ¯ï¼Œé»˜è®¤å€¼ä¸ºã€baseã€
    });

    //æ‰§è¡Œå…¬äº¤è·¯çº¿å…³é”®å­—æŸ¥è¯¢
    linesearch.search('536', function (status, result) {
      //æ‰“å°çŠ¶æ€ä¿¡æ¯statuså’Œç»“æœä¿¡æ¯result
      // ... do something
    });
  });
});
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ag-nSrIPPEUAAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/amapplugin/bus#busstop)
---
title: Map
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

L7 geographical visualization focuses on the visual expression of geographical data. The map layer needs to rely on third-party maps. The third-party maps are created and managed uniformly through Scene.
Just pass in the map configuration items through Scene.

L7 internally resolves the differences between different map basemaps, and at the same time, L7 manages the operation methods of the map in a unified manner.

Currently L7 supports two map basemaps

* Map is an independent map engine that does not require basemaps or loading map tile services, and does not require Token.

* GaodeMap default direction[Token](https://lbs.amap.com/api/javascript-api/guide/abc/prepare)

* MapBox international business, registration required[Token]()

### import

```javascript
import { GaodeMap } from '@antv/l7-maps'; // Import Gaode 2.x version by default. Starting from version 2.11.0, it will be upgraded to v2 by default.
import { GaodeMapV1 } from '@antv/l7-maps'; // Versions before 2.11.0 are upgraded to v1 by default

import { Mapbox } from '@antv/l7-maps';
import { Map } from '@antv/l7-maps';
```

### Instantiate

âš ï¸ Use the map to apply for a map token. L7 has a default token set internally for testing purposes only.

#### Default Map instantiation

```js
import { Map } from '@antv/l7-maps';
const scene = new Scene({
  id: 'map',
  map: new Map({
    style: 'dark',
    center: [103, 30],
    pitch: 4,
    zoom: 10,
    rotation: 19,
  }),
});
```

#### Amap instantiation

Amap API configuration parameters

* token
  Register Amap[API token](https://lbs.amap.com/api/javascript-api/guide/abc/prepare)

* plugin {array}`['AMap.ElasticMarker','AMap.CircleEditor']`

  load[Gaode map plug-in](https://lbs.amap.com/api/javascript-api/guide/abc/plugins)

```javascript
const L7AMap = new GaodeMap({
  pitch: 35.210526315789465,
  style: 'dark',
  center: [104.288144, 31.239692],
  zoom: 4.4,
  token: 'xxxx-token',
  plugin: [], // Can not be set
});
```

#### Mapbox map instantiation

```javascript
const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    style: 'dark',
    center: [103.83735604457024, 1.360253881403068],
    pitch: 4.00000000000001,
    zoom: 10.210275860702593,
    rotation: 19.313180925794313,
    token: 'xxxx - token',
  }),
});
```

### Pass in external instance

In order to support the ability of existing map projects to quickly access L7, L7 provides a method for passing in map instances. If you are a new project, it is recommended to use Scene to initialize the map.

âš ï¸ The scene id parameter requires the Map instances of the map to be in the same container.

âš ï¸ When passing in a map instance, you need to introduce the API of the relevant map yourself

âš ï¸ Set viewMode to 3D mode (GaodeMap2.0 supports 2D mode and does not need to be set)

#### Pass in Gaode map instance

```javascript
const map = new AMap.Map('map', {
  viewMode: '3D',
  resizeEnable: true, // Whether to monitor map container size changes
  zoom: 11, // Initialize map level
  center: [116.397428, 39.90923], // Initialize the map center point
});
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    mapInstance: map,
  }),
});
```

[Example address](/examples/tutorial/map#amapInstance)[code address](https://github.com/antvis/L7/blob/master/examples/tutorial/map/demo/amapInstance.js)

[Example address (2D)](/examples/tutorial/map#amapInstance2d)[code address](https://github.com/antvis/L7/blob/master/examples/tutorial/map/demo/amapInstance.js)

#### Pass in a Mapbox map instance

```javascript
mapboxgl.accessToken = 'xxxx - token';
const map = new mapboxgl.Map({
  container: 'map', // container id
  style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
  center: [-74.5, 40], // starting position [lng, lat]
  zoom: 9, // starting zoom
});

const scene = new Scene({
  id: 'map',
  map: new Mapbox({
    mapInstance: map,
  }),
});
```

## options

### zoom initialize zoom level

<description> *number* </description>

Initial map display level {number} Mapbox (0-24) Amap (2-19)

### center map center

Map initial center latitude and longitude {Lnglat}

### pitch map tilt angle

Map initial pitch angle {number} default 0

### style map style

Simplify the map style setting. L7 has three built-in theme default styles, which can be used by Amap and mapbox.

* dark
* light
* normal
* blank no basemap

In addition to the built-in styles, you can also pass in other custom attributes.

For example, Amap

âš ï¸ Gaode map style added`isPublic=true`parameter

```javascript
{
  style: 'amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true'; // The setting method is the same as AMAP
}
```

### minZoom minimum zoom level

Minimum map zoom level {number} default 0 Mapbox 0-24) Gaode (2-19)

### maxZoom maximum zoom level

Maximum map zoom level {number} default 22 Mapbox (0-24) Amap (2-19)

### rotateEnable whether to allow rotation

Whether the map can be rotated {Boolean} default true

## Register to use Gaode plug-in

```javascript
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    center: [116.475, 39.99],
    pitch: 0,
    zoom: 13,
    plugin: ['AMap.ToolBar', 'AMap.LineSearch'],
  }),
});
// plugin: ['AMap.ToolBar', 'AMap.LineSearch'],
// In order to use the capabilities of the corresponding plug-in, the corresponding plug-in should first be registered in plugin

//The loaded AMap will be mounted on the global window object
scene.on('loaded', () => {
  window.AMap.plugin(['AMap.ToolBar', 'AMap.LineSearch'], () => {
    // add control
    scene.map.addControl(new AMap.ToolBar());

    var linesearch = new AMap.LineSearch({
      pageIndex: 1, //Page number, default value is 1
      pageSize: 1, //The number of results displayed on a single page, the default value is 20, the maximum value is 50
      city: 'Beijing', //Limit the query city, which can be the city name (Chinese/Chinese full spelling), city code, the default value is "National"
      extensions: 'all', //Whether to return bus route details, the default value is "base"
    });

    //Execute bus route keyword query
    linesearch.search('536', function (status, result) {
      //Print status information status and result information result
      // ...do something
    });
  });
});
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ag-nSrIPPEUAAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/amapplugin/bus#busstop)
---
title: ç™¾åº¦åœ°å›¾
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

L7 åœ°ç†å¯è§†åŒ–ä¾§é‡äºåœ°ç†æ•°æ®çš„å¯è§†åŒ–è¡¨è¾¾ï¼Œåœ°å›¾å±‚éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹åœ°å›¾ï¼Œç¬¬ä¸‰æ–¹åœ°å›¾é€šè¿‡ Scene ç»Ÿä¸€åˆ›å»ºç®¡ç†ï¼Œåªéœ€è¦é€šè¿‡ Scene ä¼ å…¥åœ°å›¾é…ç½®é¡¹å³å¯ã€‚

L7 åœ¨å†…éƒ¨è§£å†³äº†ä¸åŒåœ°å›¾åº•å›¾ä¹‹é—´å·®å¼‚ï¼ŒåŒæ—¶ L7 å±‚é¢ç»Ÿä¸€ç®¡ç†åœ°å›¾çš„æ“ä½œæ–¹æ³•ã€‚

L7 ç›®å‰æ”¯æŒçš„ç™¾åº¦åœ°å›¾æ˜¯[API GLç‰ˆæœ¬](https://lbsyun.baidu.com/index.php?title=jspopularGL)ï¼Œä¹Ÿæ˜¯ç™¾åº¦åœ°å›¾å®˜æ–¹æ¨èä½¿ç”¨ç‰ˆæœ¬ã€‚

### ç”³è¯·token

ä½¿ç”¨ç™¾åº¦åœ°å›¾ä¹‹å‰ï¼Œéœ€è¦ç”³è¯·ç™¾åº¦åœ°å›¾å¯†é’¥ï¼Œå¦‚ä½•ç”³è¯·ç™¾åº¦åœ°å›¾å¯†é’¥[ç‚¹æˆ‘æŸ¥çœ‹](https://lbs.baidu.com/index.php?title=jspopularGL/guide/getkey)ã€‚

âš ï¸  L7 å†…éƒ¨è®¾ç½®äº†é»˜è®¤ tokenï¼Œä»…ä¾›æµ‹è¯•ä½¿ç”¨

### import

```javascript
import { BaiduMap } from '@antv/l7-maps';
```

### å®ä¾‹åŒ–

L7 æä¾› BaiduMapç›´æ¥å®ä¾‹åŒ–åœ°å›¾ï¼Œä¹Ÿå¯å¤–éƒ¨ä¼ å…¥æ–¹å¼å®ä¾‹åŒ–åœ°å›¾ã€‚

æ–°é¡¹ç›®æ¨è BaiduMap ç›´æ¥å®ä¾‹åŒ–ï¼Œå·²æœ‰åœ°å›¾é¡¹ç›®å¯å¤–éƒ¨ä¼ å…¥æ–¹å¼ï¼Œä»¥ä¾¿å¿«é€Ÿæ¥å…¥ L7 çš„èƒ½åŠ›ã€‚

#### BaiduMap å®ä¾‹åŒ–

```js
import { BaiduMap } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new BaiduMap({
    // å¡«å†™ç™¾åº¦åœ°å›¾å¯†é’¥ï¼Œæ­¤ä¸ºæµ‹è¯•tokenï¼Œä¸å¯ç”¨äºç”Ÿäº§
    token: 'zLhopYPPERGtpGOgimcdKcCimGRyyIsh',
    center: [103, 30],
    pitch: 4,
    zoom: 10,
    rotation: 19,
  }),
});
```

#### å¤–éƒ¨ä¼ å…¥å®ä¾‹åŒ–

âš ï¸ scene id å‚æ•°éœ€è¦ä¸ BMapGL.Map å®ä¾‹æ˜¯åŒä¸ªå®¹å™¨ã€‚

âš ï¸ ä¼ å…¥åœ°å›¾å®ä¾‹éœ€è¦è‡ªè¡Œå¼•å…¥[ç™¾åº¦åœ°å›¾çš„ API](https://lbs.baidu.com/index.php?title=jspopularGL/guide/show)

```javascript
const map = new BMapGL.Map('map', {
  zoom: 11, // åˆå§‹åŒ–åœ°å›¾å±‚çº§
  minZoom: 4,
  maxZoom: 23,
  enableWheelZoom: true
});

const scene = new Scene({
  id: 'map',
  map: new BaiduMap({
    mapInstance: map,
  }),
});
```

BaiduMap [ç¤ºä¾‹åœ°å€](/examples/map/map/#baidumap)ã€å¤–éƒ¨ä¼ å…¥[ç¤ºä¾‹åœ°å€](/examples/map/map/#bmapInstance)

## options

### zoom åˆå§‹åŒ–ç¼©æ”¾ç­‰çº§

åœ°å›¾åˆå§‹æ˜¾ç¤ºçº§åˆ« {number} ç™¾åº¦åœ°å›¾ï¼ˆ3-21ï¼‰

### center åœ°å›¾ä¸­å¿ƒ

åœ°å›¾åˆå§‹ä¸­å¿ƒç»çº¬åº¦ {Lnglat}

### pitch åœ°å›¾å€¾è§’

åœ°å›¾åˆå§‹ä¿¯ä»°è§’åº¦ {number} Â default 0

### style åœ°å›¾æ ·å¼

åœ°å›¾åˆå§‹æ ·å¼ {'normal' | string | Array}

- å€¼ 'normal' é»˜è®¤ä¸»é¢˜æ ·å¼ã€‚

- å€¼ string ç±»å‹æ—¶ï¼Œä¸ºä¸ªæ€§åŒ–é…ç½®çš„[æ ·å¼ID](https://lbsyun.baidu.com/index.php?title=jspopularGL/guide/custom)ã€‚

```javascript
{
  // æµ‹è¯•è´¦å·ï¼Œå·²å‘å¸ƒçš„æ ·å¼ID 
  style: '90dbaeacad6d1d1663046eed2555ab9e'
}
```

- å€¼ Array æ—¶ï¼Œä¸ºè‡ªå®šä¹‰çš„[æ ·å¼JSON](https://lbsyun.baidu.com/index.php?title=jspopularGL/guide/custom)

```javascript
{
  style: [{
    featureType: 'background',
    elementType: 'geometry',
    stylers: {
        color: '#070c17ff'
    }
  }]
}
```

### minZoom æœ€å°ç¼©æ”¾ç­‰çº§

åœ°å›¾æœ€å°ç¼©æ”¾ç­‰çº§ {number} ç™¾åº¦åœ°å›¾ï¼ˆ3-21ï¼‰

### maxZoom æœ€å¤§ç¼©æ”¾ç­‰çº§

åœ°å›¾æœ€å¤§ç¼©æ”¾ç­‰çº§ {number} ç™¾åº¦åœ°å›¾ï¼ˆ3-21ï¼‰

### rotateEnable æ˜¯å¦å…è®¸æ—‹è½¬

åœ°å›¾æ˜¯å¦å¯æ—‹è½¬ {Boolean} default true

---
title: é«˜å¾·åœ°å›¾
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

### é«˜å¾·åœ°å›¾ Token


## å¼•å…¥

## åˆå§‹åŒ–åŒ–

### åœ°å›¾é…ç½®



---
title: è…¾è®¯åœ°å›¾
order: 1
------
title: åœºæ™¯ Scene
description:  åœ°å›¾åœºæ™¯åˆå§‹ 
keywords: åœ°å›¾ Scene 
order: 0
redirect_from:
  - /zh/docs/api
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

åœºæ™¯å¯¹è±¡ `scene` æ˜¯åŒ…å«åœ°å›¾ã€åœ°å›¾æ§ä»¶ã€ç»„ä»¶ã€åŠ è½½èµ„æºçš„å…¨å±€å¯¹è±¡ï¼Œé€šè¿‡ `scene` åœºæ™¯å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°æ“ä½œåœ°å›¾éœ€è¦çš„æ‰€æœ‰å†…å®¹ã€‚

<div>
  <div style="width:40%;float:left; margin: 10px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*3wMCR7vIlCwAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

## options

### id

<description> _string | HTMLElement_ **å¿…é€‰** </description>

éœ€ä¼ å…¥ dom å®¹å™¨æˆ–è€…å®¹å™¨ idã€‚

### map

<description> MapInstance **å¿…é€‰** </description>

å¯ä»¥é€šè¿‡ scene map å±æ€§è·å– map å®ä¾‹ã€‚

```javascript
const map = scene.map;
```

ä¸ºäº†ç»Ÿä¸€ä¸åŒåº•å›¾ä¹‹å‰çš„æ¥å£å·®å¼‚ `L7` åœ¨ `Scene` å±‚å¯¹ `map` çš„æ–¹æ³•åšäº†ç»Ÿä¸€ï¼Œå› æ­¤ä¸€äº›åœ°å›¾çš„æ“ä½œæ–¹æ³•å¯ä»¥é€šè¿‡ `Scene` è°ƒç”¨ï¼Œè¿™æ ·ï¼Œåˆ‡æ¢ä¸åŒåº•å›¾æ—¶å¯ä»¥ä¿è¯è¡¨ç°ä¸€è‡´ã€‚

ç¤ºä¾‹ä»£ç 

```javascript
const scene = new L7.Scene({
  id: 'map',
  map: new L7.GaodeMap({
    style: 'dark',
    center: [110.770672, 34.159869],
    pitch: 45,
  }),
});
```

### logoPosition

<description> _bottomleft_ **å¯é€‰** </description>

`L7` é»˜è®¤æä¾›çš„ `Logo` å¯ä»¥é…ç½®æ˜¾ç¤ºä½ç½®ï¼Œé»˜è®¤åœ¨å·¦ä¸‹è§’ã€‚

- bottomright
- topright
- bottomleft
- topleft
- topcenter
- bottomcenter
- leftcenter
- rightcenter

### logoVisible logo æ˜¯å¦å¯è§

<description> _bottomleft_ **å¯é€‰** _default: true_ </description>

é…ç½® `L7` çš„ `Logo` æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤æ˜¾ç¤ºã€‚

### antialias æ˜¯å¦å¼€å¯æŠ—é”¯é½¿

<description> _boolean_ **å¯é€‰** _default: true_ </description>

æ˜¯å¦å¼€å§‹å‰æŠ—é”¯é½¿ã€‚

### stencil æ˜¯å¦å¼€å¯è£å‡

<description> _boolean_ **å¯é€‰** _default: false_ </description>

æ˜¯å¦å¼€å§‹å¼€å¯è£å‰ªã€‚

ğŸŒŸ ä» v2.7.2 ç‰ˆæœ¬å¼€å§‹æ”¯æŒï¼Œ å›¾å±‚ `Mask` æ©æ¨¡èƒ½åŠ›ä»¥åŠçŸ¢é‡ç“¦ç‰‡éœ€è¦å¼€å§‹è¯¥é…ç½®ã€‚

### preserveDrawingBuffer

<description> _boolean_ **å¯é€‰** _default: false_ </description>

æ˜¯å¦ä¿ç•™ç¼“å†²åŒºæ•°æ® `boolean` `false`ã€‚

## Layer æ–¹æ³•

### addLayer(layer): void å¢åŠ å›¾å±‚å¯¹è±¡

æŠŠå›¾å±‚æ·»åŠ åˆ° `Scene` åœºæ™¯ä¸­ã€‚

å‚æ•° :

- `layer` å›¾å±‚å¯¹è±¡

```javascript
scene.addLayer(layer);
```

### getLayer(id: string): ILayer è·å–å¯¹åº”çš„å›¾å±‚å¯¹è±¡

è·å–å¯¹åº”çš„å›¾å±‚ã€‚

```javascript
scene.getLayer('layerID');
```

### getLayers(): ILayer[] è·å–æ‰€æœ‰çš„åœ°å›¾å›¾å±‚

è·å–æ‰€æœ‰çš„åœ°å›¾å›¾å±‚ã€‚

```javascript
scene.getLayers();
```

### getLayerByName(name: string): ILayer æ ¹æ®å›¾å±‚åç§°è·å–å›¾å±‚

æ ¹æ®å›¾å±‚åç§°è·å–å›¾å±‚ã€‚

- `name` å›¾å±‚åœ¨åˆå§‹åŒ–çš„æ—¶å€™é…ç½®å›¾å±‚çš„ `name`ã€‚

```javascript
scene.getLayerByName(name);
```

### removeLayer(layer: ILayer): void ç§»é™¤ layer å›¾å±‚

ç§»é™¤ `layer` å›¾å±‚ã€‚

```javascript
scene.removeLayer(layer);
```

ğŸŒŸ ç§»é™¤çš„åŒæ—¶ä¼šå°†å›¾å±‚è¿›è¡Œé”€æ¯ã€‚

### removeAllLayer(): void ç§»é™¤æ‰€æœ‰çš„å›¾å±‚å¯¹è±¡

ç§»é™¤æ‰€æœ‰çš„å›¾å±‚å¯¹è±¡ã€‚

```javascript
scene.removeAllLayer();
```

ğŸŒŸ ç§»é™¤çš„åŒæ—¶ä¼šå°†å›¾å±‚è¿›è¡Œé”€æ¯ã€‚

## æ§åˆ¶ç»„ä»¶æ–¹æ³•

### addControl(ctl: IControl): void æ·»åŠ ç»„ä»¶æ§ä»¶

æ·»åŠ ç»„ä»¶æ§ä»¶ã€‚

- `crl` ç”¨æˆ·åˆ›å»ºçš„æ§ä»¶å¯¹è±¡ã€‚

```javascript
scene.addControl(ctl);
```

### removeControl(ctr: IControl): void ç§»é™¤ç”¨æˆ·æ·»åŠ çš„ç»„ä»¶æ§ä»¶

ç§»é™¤ç”¨æˆ·æ·»åŠ çš„ç»„ä»¶æ§ä»¶ã€‚

- `ctl` ç”¨æˆ·åˆ›å»ºçš„æ§ä»¶å¯¹è±¡ã€‚

```javascript
scene.removeControl(ctl);
```

### getControlByName(name: string): IControl æ ¹æ®æ§ä»¶çš„åç§°æ¥è·å–æ§ä»¶

æ ¹æ®æ§ä»¶çš„åç§°æ¥è·å–æ§ä»¶ã€‚

```javascript
const zoomControl = new Zoom({
  // zoom æ§ä»¶
  name: 'z1', // ç”¨æˆ·ä¼ å…¥çš„æ§ä»¶åç§°ï¼ˆä¹Ÿå¯ä»¥ä¸ä¼ å…¥ï¼Œè¯¥æ§ä»¶é»˜è®¤åç§°ä¸º zoomï¼‰
  position: 'topright',
});

scene.getControlByName('z1');
```

## æ°”æ³¡æ–¹æ³•

### addPopup(popup: Popup): void æ·»åŠ æ°”æ³¡

å¾€åœºæ™¯ä¸­æ·»åŠ æ°”æ³¡å¯¹è±¡ï¼Œæ°”æ³¡ç”¨äºå±•ç¤ºç”¨æˆ·è‡ªå®šä¹‰ä¿¡æ¯ã€‚

```javascript
scene.addPopup(popup);
```

### removePopup(popup: Popup): void ç§»é™¤æ°”æ³¡

å¾€åœºæ™¯ä¸­ç§»é™¤æ°”æ³¡å¯¹è±¡

```javascript
scene.removePopup(popup);
```

## æ ‡è®°æ–¹æ³•

### addMarker(maker: IMarker): void æ·»åŠ æ ‡è®°

å¾€åœºæ™¯ä¸­æ·»åŠ æ ‡è®°å¯¹è±¡ï¼Œ`Marker` å®ä¾‹æ˜¯ç”¨æˆ·è‡ªç”±æ§åˆ¶çš„ `DOM`ã€‚

- `maker` ç”¨æˆ·åˆ›å»ºçš„ `Marker` å®ä¾‹ã€‚

```javascript
const marker = new Marker({
  element: el,
}).setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });
scene.addMarker(marker);
```

### addMarkerLayer(layer: IMarkerLayer): void æ·»åŠ  Marker ç»Ÿä¸€ç®¡ç†å›¾å±‚

å½“ç”¨æˆ·éœ€è¦æ·»åŠ è®¸å¤šä¸ª `Marker` å®ä¾‹æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†å¯ä»¥ä½¿ç”¨ `MarkerLayer` å¯¹è±¡ç»Ÿä¸€ç®¡ç†ã€‚

- `layer` æ ‡è®°å›¾å±‚å¯¹è±¡ã€‚

```javascript
const markerLayer = new MarkerLayer();
scene.addMarkerLayer(markerLayer);
```

### removeMarkerLayer(layer: IMarkerLayer): void ç§»é™¤æ ‡ç­¾å›¾å±‚

ç§»é™¤æ ‡ç­¾å›¾å±‚ã€‚

- `layer` æ ‡è®°å›¾å±‚å¯¹è±¡ã€‚

```javascript
scene.removeMarkerLayer(markerLayer);
```

### removeAllMarkers(): void ç§»é™¤åœºæ™¯ä¸­æ‰€æœ‰çš„æ ‡ç­¾å¯¹è±¡

ç§»é™¤åœºæ™¯ä¸­æ‰€æœ‰çš„æ ‡ç­¾å¯¹è±¡ã€‚

```javascript
scene.removeAllMarkers();
```
## é™æ€æ–¹æ³•
é™æ€æ–¹æ³•é€šè¿‡ Scene ç±»å»è°ƒç”¨ï¼Œä¸æ˜¯ scene å®ä¾‹
### addProtocol
æ·»åŠ è‡ªå®šä¹‰æ•°æ®åè®®ï¼Œè®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰åŠ è½½ç“¦ç‰‡å‡½æ•°ï¼Œå½“ä½¿ç”¨ä»¥è‡ªå®šä¹‰ URL æ¨¡å¼å¼€å¤´çš„æ•°æ®æ—¶ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨ã€‚
-  protocol åè®®åç§°
-  handler æ•°æ®å¤„ç†å›è°ƒå‡½æ•°
    -  requestParameters: RequestParameters,
        - url ç“¦ç‰‡ URLï¼Œæºå¸¦ç“¦ç‰‡è¡Œåˆ—å· x,y,z 
    -  callback: ResponseCallback<any>) => Cancelable
        - Cancelableï¼š {
            cancel: () => void;
          };


#### è‡ªå®šä¹‰å‡½æ•°

```ts
    Scene.addProtocol('custom', (params, callback) => {
          fetch(`https://${params.url.split("://")[1]}`)
              .then(t => {
                  if (t.status == 200) {
                      t.arrayBuffer().then(arr => {
                          callback(null, arr, null, null);
                      });
                  } else {
                      callback(new Error(`Tile fetch error: ${t.statusText}`));
                  }
              })
              .catch(e => {
                  callback(new Error(e));
              });
          return { cancel: () => { } };
      });
// the following is an example of a way to return an error when trying to load a tile
    Scene.addProtocol('custom2', (params, callback) => {
        callback(new Error('someErrorMessage'));
        return { cancel: () => { } };
    });
```

#### åŠ è½½ PMTiles

```ts
import * as pmtiles from "pmtiles";
const protocol = new pmtiles.Protocol();
const scene = new Scene({
      id: 'map',
      map: new Map({
        center: [11.2438, 43.7799],
        zoom: 12,
      }),
    });

    scene.addProtocol('pmtiles',protocol.tile);
    const source = new Source('pmtiles://https://mdn.alipayobjects.com/afts/file/A*HYvHSZ-wQmIAAAAAAAAAAAAADrd2AQ/protomaps(vector)ODbL_firenze.bin', {
        parser: {
          type: 'mvt',
          tileSize: 256,
          maxZoom: 14,
          extent: [-180, -85.051129, 179, 85.051129],
        },
      })


```

### removeProtocol
  åˆ é™¤ä¹‹å‰æ·»åŠ çš„åè®®
  - name: åè®®åç§°

```ts
 scene.removeProtocol('pmtiles',protocol.tile);
```


## åœ°å›¾æ–¹æ³•

### getZoom(): number è·å–ç¼©æ”¾ç­‰çº§

è·å–å½“å‰ç¼©æ”¾ç­‰çº§ã€‚

```javascript
scene.getZoom();
```

### getCenter(): ILngLat è·å–åœ°å›¾ä¸­å¿ƒ

è·å–åœ°å›¾ä¸­å¿ƒç‚¹

```javascript
interface ILngLat {
  lng: number;
  lat: number;
}

scene.getCenter();
```

### getSize(): [number, number] è·å–åœ°å›¾å®¹å™¨å¤§å°

è·å–åœ°å›¾å®¹å™¨å¤§å°ï¼Œwidthã€heightã€‚

```javascript
scene.getSize();
```

### getPitch(): number è·å–åœ°å›¾å€¾è§’

è·å–åœ°å›¾ä¿¯ä»°è§’ã€‚

```javascript
scene.getPitch();
```

### getContainer(): HTMLElement | null è·å–åœ°å›¾å®¹å™¨

è·å–åœ°å›¾å®¹å™¨ã€‚

```javascript
scene.getContainer();
```

### setMapStyle(style: string): void è®¾ç½®åœ°å›¾æ ·å¼

å‚æ•° `style` å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€‰æ‹©å†…ç½®çš„åœ°å›¾æ ·å¼ å…·ä½“æ ·å¼æ ¼å¼å’Œå„åº•å›¾è®¾ç½®æ–¹æ³•ä¸€è‡´ã€‚

`L7` å†…ç½®äº†ä¸‰ç§åœ°å›¾æ ·å¼ï¼Œ`AMAP` å’Œ `MapBox` éƒ½é€‚ç”¨ã€‚

- light
- dark
- normal

è®¾ç½®åœ°å›¾åº•å›¾æ ·å¼çš„æ–¹æ³•ã€‚

```javascript
// å¿«æ·åç§°è®¾ç½®
scene.setMapStyle('light');

// mapbox ä¸»é¢˜è®¾ç½®
scene.setMapStyle('mapbox://styles/mapbox/streets-v11');

// AMap
scene.setMapStyle(
  'amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true',
);
```

### setCenter(center: ICenter, option?: ICameraOptions): void è®¾ç½®åœ°å›¾ä¸­å¿ƒç‚¹

è®¾ç½®åœ°å›¾ä¸­å¿ƒç‚¹åæ ‡ã€‚`L7` æä¾›äº† `setCenter` æ–¹æ³•ï¼Œå…è®¸ç”¨æˆ·åŠ¨æ€çš„è®¾ç½®åœ°å›¾çš„ä¸­å¿ƒç‚¹ä½ï¼ŒåŒæ—¶å…è®¸é€šè¿‡å¯é€‰çš„ `options` å±æ€§è®¾ç½®åç§»ã€‚

```js
type ICenter = [number, number];
interface ICameraOptions {
  padding:
    | number
    | [number, number, number, number]
    | {
        top?: number,
        bottom?: number,
        right?: number,
        left?: number,
      };
}

scene.setCenter([lng, lat]);
scene.setCenter([lng, lat], {
  padding: {
    top: 100,
  },
});
```

ğŸŒŸ `padding` å‚æ•°æ”¯æŒå¦‚ä¸‹çš„ä¸‰ç§ä¼ å€¼æ–¹å¼ï¼Œæ•°å€¼çš„å•ä½æ˜¯ `px`ï¼Œè¡¨ç¤ºåœ°å›¾ä¸­å¿ƒç‚¹è·ç¦»å®¹å™¨è¾¹ç¼˜çš„åç§»è·ç¦»ã€‚

```javascript
export interface ICameraOptions {
  padding:
    | number
    | [number, number, number, number]
    | {
        top?: number,
        bottom?: number,
        right?: number,
        left?: number,
      };
}
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/bubble#point)

### setZoomAndCenter(zoom: number, center: ICenter): void è®¾ç½®åœ°å›¾ç¼©æ”¾ç­‰çº§å’Œä¸­å¿ƒç‚¹

è®¾ç½®åœ°å›¾ç­‰çº§å’Œä¸­å¿ƒã€‚

```javascript
type ICenter = [number, number];
scene.setZoomAndCenter(zoom, center);
```

### setZoom(zoom: number): void è®¾ç½®åœ°å›¾ç¼©æ”¾ç­‰çº§

è®¾ç½®åœ°å›¾ç¼©æ”¾ç­‰çº§

```javascript
scene.setZoom(10);
```

### setRotation(rotation: number): void è®¾ç½®åœ°å›¾æ—‹è½¬

è®¾ç½®åœ°å›¾é¡ºæ—¶é’ˆæ—‹è½¬è§’åº¦ï¼Œæ—‹è½¬åŸç‚¹ä¸ºåœ°å›¾å®¹å™¨ä¸­å¿ƒç‚¹ï¼Œå–å€¼èŒƒå›´ [0-360]ã€‚

```javascript
scene.setRotation(rotation);
```

### zoomIn(); void åœ°å›¾æ”¾å¤§ä¸€çº§

åœ°å›¾æ”¾å¤§ä¸€çº§ã€‚

```javascript
scene.zoomIn();
```

### zoomOut(): void åœ°å›¾ç¼©å°ä¸€çº§

åœ°å›¾ç¼©å°ä¸€çº§ã€‚

```javascript
scene.zoomOut();
```

### panTo(lnglat: ILngLat): void åœ°å›¾ç§»åŠ¨

åœ°å›¾å¹³ç§»åˆ°æŒ‡å®šçš„ç»çº¬åº¦ä½ç½®ã€‚

```javascript
type ILngLat = [number, number];
scene.panTo(LngLat);
```

### panBy(x: number, y: number): void åœ°å›¾å¹³ç§»

ä»¥åƒç´ ä¸ºå•ä½æ²¿ X æ–¹å‘å’Œ Y æ–¹å‘ç§»åŠ¨åœ°å›¾ã€‚

- `x` æ°´å¹³æ–¹å‘ç§»åŠ¨åƒç´  å‘å³ä¸ºæ­£æ–¹å‘ã€‚
- `y` å‚ç›´æ–¹å‘ç§»åŠ¨åƒç´  å‘ä¸‹ä¸ºæ­£æ–¹å‘ã€‚

```javascript
scene.panBy(x, y);
```

### setPitch(pitch: number): void è®¾ç½®åœ°å›¾å€¾è§’

è®¾ç½®åœ°å›¾ä»°ä¿¯è§’åº¦ã€‚

```javascript
scene.setPitch(pitch);
```

### setMapStatus(statusOption: IStatusOptions): void è®¾ç½®åœ°å›¾çŠ¶æ€

ç”¨æ¥è®¾ç½®åœ°å›¾çš„ä¸€äº›äº¤äº’é…ç½®ã€‚

```javascript
interface IStatusOptions {
  showIndoorMap: boolean;
  resizeEnable: boolean;
  dragEnable: boolean;
  keyboardEnable: boolean;
  doubleClickZoom: boolean;
  zoomEnable: boolean;
  rotateEnable: boolean;
}

scene.setMapStatus({ dragEnable: false });
```

### fitBounds(bound: IBounds, options?: IOptions): void è®¾ç½®åœ°å›¾ç¼©æ”¾èŒƒå›´

åœ°å›¾ç¼©æ”¾åˆ°æŸä¸ªèŒƒå›´å†…ã€‚

- `bound` è¡¨ç¤ºç»çº¬åº¦èŒƒå›´ [[minlng,minlat],[maxlng,maxlat]]ã€‚
- `options` ç”¨æˆ·ä¼ å…¥ï¼Œè¦†ç›– `animate` ç›´æ¥é…ç½®ï¼Œè¦†ç›– `Scene` ä¼ å…¥çš„é…ç½®é¡¹ã€‚

```javascript
type IBounds = [[number, number], [number, number]];
interface IOptions {
  [key]: any;
  animate: boolean;
}

scene.fitBounds([
  [112, 32],
  [114, 35],
]);
```

### containerToLngLat(point: IPoint): ILngLat ç”»å¸ƒåæ ‡è½¬ç»çº¬åº¦

å°†ç”»å¸ƒåæ ‡è½¬ç»çº¬åº¦åæ ‡

```javascript
type IPoint = [number, number];
interface ILngLat {
  lng: number;
  lat: number;
}

scene.pixelToLngLat([10, 10]);
```

### lngLatToContainer(lnglat: ILngLat): IPoint ç»çº¬åº¦è½¬ç”»å¸ƒåæ ‡

ç»çº¬åº¦åæ ‡è½¬ç”»å¸ƒåæ ‡ã€‚

```javascript
type ILngLat = [number, number];
interface IPoint {
  x: number;
  y: number;
}

scene.lngLatToPixel([120, 10]);
```

### pixelToLngLat(pixel: IPoint): ILngLat åƒç´ åæ ‡è½¬ç»çº¬åº¦

åœ°å›¾åƒç´ åæ ‡è½¬ç»çº¬åº¦åæ ‡ï¼Œåƒç´ åæ ‡åœ°å›¾ä¸ŠæŸç‚¹è·ç¦»å®¹å™¨å·¦ä¸Šè§’çš„ä½ç½®ã€‚

```javascript
type IPoint = [number, number];
interface ILngLat {
  lng: number;
  lat: number;
}
scene.pixelToLngLat([10, 10]);
```

### lngLatToPixel(lnglat: ILngLat): IPoint ç»çº¬åº¦è½¬åƒç´ åæ ‡

ç»çº¬åº¦åæ ‡è½¬åƒç´ åæ ‡ã€‚

```javascript
type ILngLat = [number, number];
interface IPoint {
  x: number;
  y: number;
}
scene.lngLatToPixel([120, 10]);
```

### exportMap(type?: IImage): string å¯¼å‡º

å¯¼å‡ºåœ°å›¾ï¼Œç›®å‰ä»…æ”¯æŒå¯¼å‡ºå¯è§†åŒ–å±‚ï¼Œä¸æ”¯æŒåº•å›¾å¯¼å‡ºã€‚

```javascript
type IImage = 'png' | 'jpg';
scene.exportMap('png');
```

### destroy(): void åœºæ™¯é”€æ¯

`scene` é”€æ¯æ–¹æ³•ï¼Œç¦»å¼€é¡µé¢ï¼Œä¸éœ€è¦ä½¿ç”¨åœ°å›¾çš„æ—¶å€™è°ƒç”¨ï¼Œè°ƒç”¨å `scene` ä¸­çš„èµ„æºå’Œéƒ½ä¼šè¢«é”€æ¯ã€‚

```javascript
scene.destroy();
```

## iconfont æ˜ å°„æ”¯æŒ

### addIconFont(name: string, unicode: string): void å¢åŠ æ˜ å°„æ”¯æŒ

æ”¯æŒå¯¹ç”¨æˆ·ä¼ å…¥çš„æ•°æ®è¿›è¡Œ `unicode` çš„æ˜ å°„ï¼Œåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ç»„åç§°å’Œå¯¹åº” `key` çš„é”®å€¼å¯¹ã€‚

```javascript
scene.addIconFont('icon1', '&#xe64b;');
scene.addIconFont('icon2', '&#xe64c;');
scene.addFontFace(fontFamily, fontPath);
const pointIconFontLayer = new PointLayer({})
  .source(
    [
      {
        j: 140,
        w: 34,
        m: 'icon1',
      },
      {
        j: 140,
        w: 36,
        m: 'icon2',
      },
    ],
    {
      parser: {
        type: 'json',
        x: 'j',
        y: 'w',
      },
    },
  )
  .shape('m', 'text')
  .size(12)
  .color('w', ['#f00', '#f00', '#0f0'])
  .style({
    fontFamily,
    iconfont: true,
    textAllowOverlap: true,
  });
```

### addIconFonts(option: IOption): void åŒæ—¶ä¼ å…¥å¤šç»„ name - unicode çš„é”®å€¼å¯¹

åŒæ—¶ä¼ å…¥å¤šç»„ `name - unicode` çš„é”®å€¼å¯¹ã€‚

```javascript
type IKeyValue = [name: string, unicode: string];
type IOption = Array<IKeyValue>;

scene.addIconFonts([
  ['icon1', '&#xe64b;'],
  ['icon2', '&#xe64c;'],
]);
```

## å…¨å±€èµ„æº

### addImage(id: string, img: IImage): void æ·»åŠ å…¨å±€èµ„æº

åœ¨ `scene` å…¨å±€ä¸­æ·»åŠ  `L7` çš„å›¾å±‚å¯¹è±¡å¯ä»¥ä½¿ç”¨çš„å›¾ç‰‡èµ„æºåœ¨ã€‚

```javascript
type IImage = HTMLImageElement | string | Fileï¼›

scene.addImage( '02','https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg');
```

[ç¤ºä¾‹åœ°å€](/examples/gallery/animate#animate_path_texture)

### hasImage(id: string): boolean åˆ¤æ–­å…¨å±€å›¾ç‰‡èµ„æº

åˆ¤æ–­æ˜¯å¦å·²ç»åœ¨å…¨å±€æ·»åŠ è¿‡ç›¸åº”çš„å›¾ç‰‡èµ„æºã€‚

```javascript
scene.hasImage('imageID');
```

### removeImage(id: string): void å…¨å±€åˆ é™¤å›¾ç‰‡èµ„æº

ä»å…¨å±€åˆ é™¤å¯¹åº”çš„å›¾ç‰‡èµ„æºã€‚

```javascript
scene.removeImage('imageID');
```

### addFontFace(fontFamily: string, fontPath: string): void æ·»åŠ å­—ä½“æ–‡ä»¶

æ·»åŠ  `iconfont` å­—ä½“æ–‡ä»¶ã€‚

- `fontFamily` ç”¨æˆ·ä¸ºè‡ªå·±å®šä¹‰çš„å­—ä½“åç§°
- `fontPath` å¯¼å…¥çš„æ–‡ä»¶åœ°å€

```javascript
let fontFamily = 'iconfont';
let fontPath =
  '//at.alicdn.com/t/font_2534097_iiet9d3nekn.woff2?t=1620444089776';
scene.addFontFace(fontFamily, fontPath);
```

## å…¶ä»–

### getPointSizeRange(): Float32Array

è·å–å½“å‰è®¾å¤‡æ”¯æŒç»˜åˆ¶çš„ `WebGL` ç‚¹ç²¾çµçš„å¤§å°ã€‚

## äº‹ä»¶

### on(eventName: string, handler: function): void

åœ¨ `scene` ä¸Šç»‘å®šäº‹ä»¶ç›‘å¬ã€‚

- `eventName` äº‹ä»¶åã€‚
- `handler` äº‹ä»¶å›è°ƒå‡½æ•°ã€‚

### off(eventName: string, handler: function): void

ç§»é™¤åœ¨ `scene` ä¸Šç»‘å®šçš„äº‹ä»¶ç›‘å¬ã€‚

- `eventName` äº‹ä»¶åã€‚
- `handler` äº‹ä»¶å›è°ƒå‡½æ•°ã€‚

### åœºæ™¯äº‹ä»¶

`scene` ä¼šè§¦å‘ä¸€äº›å¸¸è§çš„åœºæ™¯äº‹ä»¶ï¼Œç”¨æˆ·åœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥è¿›è¡Œç›‘å¬ã€‚

#### loaded

`scene` åˆå§‹åŒ–å®Œæˆäº‹ä»¶ï¼Œæˆ‘ä»¬ç»å¸¸åœ¨ `scene` åˆå§‹åŒ–å®Œæˆåæ·»åŠ  `Layer`ã€‚

```javascript
scene.on('loaded', () => {
  scene.addLayer(layer);
});
```

#### resize

åœ°å›¾å®¹å™¨å˜åŒ–äº‹ä»¶

```javascript
scene.on('resize', () => {}); // åœ°å›¾å®¹å™¨å¤§å°æ”¹å˜äº‹ä»¶
```


### åœ°å›¾äº‹ä»¶

```javascript
scene.on('loaded', () => {}); //åœ°å›¾åŠ è½½å®Œæˆè§¦å‘
scene.on('mapmove', () => {}); // åœ°å›¾å¹³ç§»æ—¶è§¦å‘äº‹ä»¶
scene.on('movestart', () => {}); // åœ°å›¾å¹³ç§»å¼€å§‹æ—¶è§¦å‘
scene.on('moveend', () => {}); // åœ°å›¾ç§»åŠ¨ç»“æŸåè§¦å‘ï¼ŒåŒ…æ‹¬å¹³ç§»ï¼Œä»¥åŠä¸­å¿ƒç‚¹å˜åŒ–çš„ç¼©æ”¾ã€‚å¦‚åœ°å›¾æœ‰æ‹–æ‹½ç¼“åŠ¨æ•ˆæœï¼Œåˆ™åœ¨ç¼“åŠ¨ç»“æŸåè§¦å‘
scene.on('zoomchange', () => {}); // åœ°å›¾ç¼©æ”¾çº§åˆ«æ›´æ”¹åè§¦å‘
scene.on('zoomstart', () => {}); // ç¼©æ”¾å¼€å§‹æ—¶è§¦å‘
scene.on('zoomend', () => {}); // ç¼©æ”¾åœæ­¢æ—¶è§¦å‘
```

å…¶ä»–åœ°å›¾äº‹ä»¶å¯ä»¥æŸ¥çœ‹ç›¸åº”åº•å›¾çš„äº‹ä»¶æ–‡æ¡£,åœ°å›¾äº‹ä»¶ä¹Ÿå¯ä»¥é€šè¿‡ `Scene.map` è¿›è¡Œè®¾ç½®ã€‚

[Mapbox](https://docs.mapbox.com/mapbox-gl-js/api/#map.event)
[é«˜å¾·](https://lbs.amap.com/api/javascript-api/reference/map)

### é¼ æ ‡äº‹ä»¶

```javascript
scene.on('click', (ev) => {}); // é¼ æ ‡å·¦é”®ç‚¹å‡»äº‹ä»¶
scene.on('dblclick', (ev) => {}); // é¼ æ ‡å·¦é”®åŒå‡»äº‹ä»¶
scene.on('mousemove', (ev) => {}); // é¼ æ ‡åœ¨åœ°å›¾ä¸Šç§»åŠ¨æ—¶è§¦å‘
scene.on('mousewheel', (ev) => {}); // é¼ æ ‡æ»šè½®å¼€å§‹ç¼©æ”¾åœ°å›¾æ—¶è§¦å‘
scene.on('mouseover', (ev) => {}); // é¼ æ ‡ç§»å…¥åœ°å›¾å®¹å™¨å†…æ—¶è§¦å‘
scene.on('mouseout', (ev) => {}); // é¼ æ ‡ç§»å‡ºåœ°å›¾å®¹å™¨æ—¶è§¦å‘
scene.on('mouseup', (ev) => {}); // é¼ æ ‡åœ¨åœ°å›¾ä¸Šå•å‡»æŠ¬èµ·æ—¶è§¦å‘
scene.on('mousedown', (ev) => {}); // é¼ æ ‡åœ¨åœ°å›¾ä¸Šå•å‡»æŒ‰ä¸‹æ—¶è§¦å‘
scene.on('contextmenu', (ev) => {}); // é¼ æ ‡å³é”®å•å‡»äº‹ä»¶
scene.on('dragstart', (ev) => {}); //å¼€å§‹æ‹–æ‹½åœ°å›¾æ—¶è§¦å‘
scene.on('dragging', (ev) => {}); // æ‹–æ‹½åœ°å›¾è¿‡ç¨‹ä¸­è§¦å‘
scene.on('dragend', (ev) => {}); //åœæ­¢æ‹–æ‹½åœ°å›¾æ—¶è§¦å‘ã€‚å¦‚åœ°å›¾æœ‰æ‹–æ‹½ç¼“åŠ¨æ•ˆæœï¼Œåˆ™åœ¨æ‹½åœæ­¢ï¼Œç¼“åŠ¨å¼€å§‹å‰è§¦å‘

scene.on('webglcontextlost', () => {}); // webgl ä¸Šä¸‹æ–‡ä¸¢å¤±
```



## å®éªŒå‚æ•°

å®éªŒå‚æ•°å¯èƒ½ä¼šåºŸå¼ƒã€‚

### offsetCoordinate: boolean

é«˜å¾·åœ°å›¾é€‚ç”¨ï¼Œæ˜¯å¦å…³é—­åç§»åæ ‡ç³»ï¼Œ é»˜è®¤ä¸º `true`ã€‚

```js
const scene = new Scene({
  offsetCoordinate: true,
});
```
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape` æ–¹æ³•ç”¨äºæŒ‡å®šçƒ­åŠ›å›¾å±‚ç»˜åˆ¶çƒ­åŠ›çš„ç±»å‹ï¼Œç°åœ¨æ”¯æŒç»å…¸çƒ­åŠ›ã€èœ‚çªçƒ­åŠ›ã€ç½‘æ ¼çƒ­åŠ›ä¸‰ç§ç±»å‹ã€‚

### shape('heatmap')

`shape` ä¸º `heatmap` çƒ­åŠ›å›¾å±‚ç”¨äºç»˜åˆ¶ 2D ç»å…¸çƒ­åŠ›ã€‚

### shape('heatmap3D')

`shape` ä¸º `heatmap3D` çƒ­åŠ›å›¾å±‚ç”¨äºç»˜åˆ¶ 3D çƒ­åŠ›ã€‚

### transforms

ç½‘æ ¼çƒ­åŠ›å’Œèœ‚çªçƒ­åŠ›çš„å®ç°ä¾èµ–é…ç½® `transforms` çš„å‚æ•°ï¼Œ[å…·ä½“è¯´æ˜ä½¿ç”¨](/api/source/source/#transforms)ã€‚

```js
fetch(
  'https://gw.alipayobjects.com/os/basement_prod/513add53-dcb2-4295-8860-9e7aa5236699.json',
)
  .then((res) => res.json())
  .then((data) => {
    const layer = new HeatmapLayer({})
      .source(data, {
        transforms: [
          {
            type: 'hexagon',
            size: 100,
            field: 'h12',
            method: 'sum',
          },
        ],
      })
      .size('sum', [0, 600])
      .shape('hexagonColumn')
      .style({
        coverage: 0.8,
        angle: 0,
      })
      .color(
        'sum',
        [
          '#094D4A',
          '#146968',
          '#1D7F7E',
          '#289899',
          '#34B6B7',
          '#4AC5AF',
          '#5FD3A6',
          '#7BE39E',
          '#A1EDB8',
          '#CEF8D6',
        ].reverse(),
      );
    scene.addLayer(layer);
  });
```
---
title: Shape
order: 3
---

<embed src="@/docs/common/style.md"></embed>

`shape`The method is used to specify the type of heat drawn by the heat layer. Now it supports three types: classic heat, cellular heat, and grid heat.

### shape('heatmap')

`shape`for`heatmap`Heat layers are used to draw classic heat in 2D.

### shape('heatmap3D')

`shape`for`heatmap3D`Thermal layers are used to draw 3D heat.

### transforms

Implementation of Grid Thermal and Cellular Thermal depends on configuration`transforms`parameters,[Specific instructions for use](/api/source/source/#transforms)ã€‚

```js
fetch(
  'https://gw.alipayobjects.com/os/basement_prod/513add53-dcb2-4295-8860-9e7aa5236699.json',
)
  .then((res) => res.json())
  .then((data) => {
    const layer = new HeatmapLayer({})
      .source(data, {
        transforms: [
          {
            type: 'hexagon',
            size: 100,
            field: 'h12',
            method: 'sum',
          },
        ],
      })
      .size('sum', [0, 600])
      .shape('hexagonColumn')
      .style({
        coverage: 0.8,
        angle: 0,
      })
      .color(
        'sum',
        [
          '#094D4A',
          '#146968',
          '#1D7F7E',
          '#289899',
          '#34B6B7',
          '#4AC5AF',
          '#5FD3A6',
          '#7BE39E',
          '#A1EDB8',
          '#CEF8D6',
        ].reverse(),
      );
    scene.addLayer(layer);
  });
```
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`style` æ–¹æ³•ç”¨äºé…åˆ¶å›¾å±‚çš„æ ·å¼ï¼Œç›¸åŒå›¾å±‚æ‹¥æœ‰ä¸åŒçš„ `shape` å›¾å½¢ï¼Œä¸åŒ `shape` çš„å›¾å±‚ `style` æ–¹æ³•æ¥å—ä¸åŒçš„å‚æ•°ã€‚

ğŸŒŸ èœ‚çªçƒ­åŠ›å›¾å’Œç½‘æ ¼çƒ­åŠ›å›¾çš„ `style` æ ·å¼å¯ä»¥å‚è€ƒå®é™…ç»˜åˆ¶çš„å›¾å±‚ã€‚

```js
layer.style({
  opacity: 0.5,
});
```

### common

é€šç”¨ `style` å‚æ•°ï¼Œæ‰€æœ‰å›¾å½¢éƒ½æ”¯æŒçš„å‚æ•°ã€‚

| style   | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| ------- | -------- | ------------ | ------ |
| opacity | `number` | å›¾å½¢çš„é€æ˜åº¦ | `1`    |

### heatmap

`shape` ä¸º `heatmap`ã€`heatmap3D` ç±»å‹çš„æ—¶å€™ï¼Œç»˜åˆ¶ç»å…¸çƒ­åŠ›å›¾ã€‚

| style      | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| ---------- | -------- | ------------ | ------ |
| intensity  | `number` | çƒ­åŠ›çš„å¼ºåº¦   | `10`   |
| radius     | `number` | çƒ­åŠ›ç‚¹çš„åŠå¾„ | `10`   |
| rampColors | `number` | çƒ­åŠ›çš„è‰²å€¼   | `1`    |

#### rampColors

- colorsÂ  é¢œè‰²æ•°ç»„
- positions æ•°æ®åŒºé—´

é…ç½®å€¼åŸŸæ˜ å°„é¢œè‰²çš„è‰²å¸¦ï¼Œå€¼åŸŸçš„èŒƒå›´ä¸º `[0 - 1]`, å¯¹åº”çš„æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ª `position` ä½ç½®è®¾ç½®ä¸€ä¸ªé¢œè‰²å€¼ã€‚

âš ï¸ colors, positions çš„é•¿åº¦è¦ç›¸åŒ

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```

### hexagon

ç»˜åˆ¶èœ‚çªçƒ­åŠ›å›¾ã€‚

| style    | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| -------- | -------- | ------------ | ------ |
| angle    | `number` | å›¾å½¢æ—‹è½¬è§’åº¦ | `0`    |
| coverage | `number` | å›¾å½¢è¦†ç›–æ¯”ç‡ | `0.9`  |

### grid

ç»˜åˆ¶ç½‘æ ¼çƒ­åŠ›å›¾ã€‚

| style    | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| -------- | -------- | ------------ | ------ |
| coverage | `number` | å›¾å½¢è¦†ç›–æ¯”ç‡ | `1`    |
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`style`The method is used to configure the style of the layer. The same layer has different`shape`graphics, different`shape`layer`style`Methods accept different parameters.

ğŸŒŸ Honeycomb heat map and grid heat map`style`The style can refer to the actual drawn layer.

```js
layer.style({
  opacity: 0.5,
});
```

### common

Universal`style`Parameters, parameters supported by all graphics.

| style   | type     | describe             | default value |
| ------- | -------- | -------------------- | ------------- |
| opacity | `number` | Graphic transparency | `1`           |

### heatmap

`shape`for`heatmap`ã€`heatmap3D`type, draw a classic heat map.

| style      | type     | describe                   | default value |
| ---------- | -------- | -------------------------- | ------------- |
| intensity  | `number` | intensity of heat          | `10`          |
| radius     | `number` | The radius of the hot spot | `10`          |
| rampColors | `number` | thermal color value        | `1`           |

#### rampColors

* colors color array
* positions data interval

Configure the color band of the value range mapping color. The range of the value range is`[0 - 1]`, correspondingly we need to provide each`position`Position sets a color value.

âš ï¸ colors, positions must be the same length

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```

### hexagon

Draw cellular heat maps.

| style    | type     | describe                | default value |
| -------- | -------- | ----------------------- | ------------- |
| angle    | `number` | Graphic rotation angle  | `0`           |
| coverage | `number` | graphics coverage ratio | `0.9`         |

### grid

Draw a grid heat map.

| style    | type     | describe                | default value |
| -------- | -------- | ----------------------- | ------------- |
| coverage | `number` | graphics coverage ratio | `1`           |
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.zh.md"></embed>
---
title: Scale
order: 6
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/scale.en.md"></embed>
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.zh.md"></embed>
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/source.zh.md"></embed>

ğŸŒŸ çƒ­åŠ›å›¾çš„æ•°æ®ä½¿ç”¨å’Œç‚¹å›¾å±‚ä¿æŒä¸€è‡´ã€‚

### GeoJSON

```js
// ä¼ å…¥ GeoJSON ç±»å‹æ•°æ® *** L7 é»˜è®¤æ”¯æŒï¼Œä¸éœ€è¦ parser è§£æ
var data = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {},
          geometry: {
            type: 'Polygon',
            coordinates: [
              [120, 30],
              ...
            ]
          },
        },
      ],
    };

var layer = new HeatmapLayer()
.source(data)
```

### CSV

```js
// ä¼ å…¥ txt ç±»å‹æ•°æ®
var data = `from,to,value,type,lng1,lat1,lng2,lat2
é·å¤æƒƒ,å¨´ç–¯ã‚¿,6.91,move_out,91.111891,29.662557,97.342625,37.373799
é·å¤æƒƒ,é´æ„°å…˜,4.79,move_out,91.111891,29.662557,104.067923,30.679943
é·å¤æƒƒ,é–²å¶…ç°¡,2.41,move_out,91.111891,29.662557,106.530635,29.544606
é·å¤æƒƒ,é–æ¤¾å«,2.05,move_out,91.111891,29.662557,116.395645,39.929986
...`;

var layer = new HeatmapLayer().source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
  },
});
```

### JSON

```js
// ä¼ å…¥ JSON ç±»å‹çš„æ•°æ®
var data = [
  {
    lng: 120,
    lat: 30
  },
  ...
]

var layer = new HeatmapLayer()
.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  }
})
```
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/source.en.md"></embed>

ğŸŒŸ The data usage of heat map is consistent with that of point layer.

### GeoJSON

```js
// Pass in GeoJSON type data *** L7 supports it by default and does not require parser analysis
var data = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {},
          geometry: {
            type: 'Polygon',
            coordinates: [
              [120, 30],
              ...
            ]
          },
        },
      ],
    };

var layer = new HeatmapLayer()
.source(data)
```

### CSV

```js
// Pass in txt type data
var data = `from,to,value,type,lng1,lat1,lng2,lat2
é·å¤æƒƒ,ä»™é­”ã‚¿,6.91,move_out,91.111891,29.662557,97.342625,37.373799
é·åæƒƒ,é´æ„°å˜˜,4.79,move_out,91.111891,29.662557,104.067923,30.679943
é·åæƒƒ,ç·å¤æƒƒ,æœˆå……ç»,2.41,move_out,91.111891,29.662557,106.530635,29.544606
é·åæƒƒ,é–æ¤¾han,2.05,move_out,91.111891,29.662557,116.395645,39.929986
...`;

var layer = new HeatmapLayer().source(data, {
  parser: {
    type: 'csv',
    x: 'lng1',
    y: 'lat1',
  },
});
```

### JSON

```js
// Pass in JSON type data
var data = [
  {
    lng: 120,
    lat: 30
  },
  ...
]

var layer = new HeatmapLayer()
.source(data, {
  parser: {
    type: 'json',
    x: 'lng',
    y: 'lat',
  }
})
```
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.en.md"></embed>
---
title: Heatmap
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

çƒ­åŠ›å›¾ä»¥ç‰¹æ®Šé«˜äº®çš„å½¢å¼æ˜¾ç¤ºæ•°æ®åœ¨åœ°ç†åŒºåŸŸçš„èšé›†ç¨‹åº¦ï¼ŒL7 æä¾›äº†ä»¥å¤šç§è¡¨ç°å½¢å¼çš„çƒ­åŠ›å›¾ï¼Œé€šè¿‡åˆ‡æ¢ `shape` å‚æ•°ï¼Œç”¨æˆ·å¯ä»¥å¾—åˆ°ä¸åŒçš„çƒ­åŠ›å›¾

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*QstiQq4JBOIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

```javascript
layer
  .shape('heatmap')
  .size('mag', [0, 1.0]) // weightæ˜ å°„é€šé“
  .style({
    radius: 20,
    rampColors: rampColors,
  });
```
---
title: Heatmap
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

Heat maps display the degree of aggregation of data in geographical areas in a special highlighted form. L7 provides heat maps in a variety of presentation forms. By switching`shape`parameters, users can get different heat maps

<div>
  <div style="width:40%;float:right; margin-left: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*QstiQq4JBOIAAAAAAAAAAABkARQnAQ'>
  </div>
</div>

```javascript
layer
  .shape('heatmap')
  .size('mag', [0, 1.0]) // weight mapping channel
  .style({
    radius: 20,
    rampColors: rampColors,
  });
```
---
title: é£çº¿
order: 2
---

<embed src="@/docs/common/style.md"></embed>

ç”¨æˆ·åœ¨åœ°çƒæ¨¡å¼ä¸‹ä½¿ç”¨é£çº¿å›¾å±‚æ— éœ€åšé¢å¤–çš„æ“ä½œï¼ŒL7 ä¼šè‡ªåŠ¨è¯†åˆ«åœ°çƒæ¨¡å¼å¹¶ç›¸å…³çš„è½¬åŒ–

## ä½¿ç”¨

åœ°çƒé£çº¿å›¾é€šè¿‡ `LineLayer` å’Œ `EarthLayer` å®ä¾‹åŒ–

```javascript
import { EarthLayer, LineLayer } from '@antv/l7';
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4ZCnQaH_nLIAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7åœ°çƒé£çº¿å›¾å±‚" width="450px">

### shape

åœ°çƒé£çº¿å›¾å±‚ shape åªæ”¯æŒ **arc3d**
---
title: CanvasLayer
order: 7
---

CanvasLayer å…è®¸ç”¨æˆ·é€šè¿‡ canvas ç»˜åˆ¶çš„æ–¹æ³•è‡ªå®šä¹‰å›¾å±‚çš„å†…å®¹å’Œæ ·å¼ã€‚ç›¸æ¯”äº Marker é€šè¿‡åˆ›å»ºå®é™… DOM çš„æ–¹å¼ï¼ŒCanvasLayer æ— ç–‘æœ‰æ›´ä½³çš„æ€§èƒ½ã€‚

## ä½¿ç”¨

```jsx
import { CanvasLayer } from '@antv/l7';
const layer = new CanvasLayer({}).style({
  drawingOnCanvas: (option) => {
    const { size, ctx, mapService } = option;
    const [width, height] = size;

    ctx.clearRect(0, 0, width, height);
    // canvas ç»˜åˆ¶
  },
});
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hUmNQJ1sAb8AAAAAAAAAAAAAARQnAQ'/>

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/chart#custom)

### source

ğŸŒŸ CanvasLayer ä¸éœ€è¦è®¾ç½® sourceã€‚

### event

ğŸŒŸ CanvasLayer æš‚ä¸æ”¯æŒäº¤äº’åŠ¨ä½œã€‚

### animate

å½“ç”¨æˆ·åœ¨ç»˜åˆ¶ canvas åŠ¨ç”»çš„æ—¶å€™ï¼Œä¸ºäº†å®ç°åŠ¨ç”»çš„æ›´æ–°ï¼Œéœ€è¦æ‰§è¡Œ animate æ–¹æ³•ã€‚

```javascript
layer.animate(true);
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/chart#custom)

### style

#### zIndex

æ¯ä¸ªåˆ›å»ºä¸€ä¸ª CanvasLayerï¼ŒL7 ä¼šç”Ÿæˆä¸€ä¸ª Canvas DOM çš„å®ä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡è®¾ç½® zIndex çš„å€¼æ¥è°ƒæ•´ CanvasLayer çš„å±‚çº§ã€‚

#### update

æŒ‡å®š CanavsLayer çš„æ›´æ–°æ–¹å¼ï¼Œupdate æœ‰ä¸¤ä¸ªå€¼ 'always'ã€'dragend'ï¼Œé»˜è®¤ä¸º 'always'

- always æ€»æ˜¯æ›´æ–°
- dragend åœ°å›¾æ‹–åŠ¨å®Œå/ç¼©æ”¾å®Œåæ›´æ–°

#### drawingOnCanvas(options)

```javascript
options: {
  canvas: HTMLCanvasELement;
  ctx: CanvasRenderingContext2D;
  mapService: IMapService;
  size: [number, number];
}
```

drawingOnCanvasï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ç›¸å…³å‚æ•°ï¼Œç”¨æˆ·åœ¨è¯¥å‡½æ•°ä¸­å†™ canvas çš„ç»˜åˆ¶é€»è¾‘

- canvas CanvasLayer ç”Ÿæˆçš„ canvas DOM èŠ‚ç‚¹
- ctx ç”Ÿæˆçš„ canvas DOM çš„ä¸Šä¸‹æ–‡
- mapService å½“å‰åœ°å›¾çš„ mapServiceï¼Œä¸»è¦æä¾› lngLatToContainer æ–¹æ³•
- size å½“å‰è§†å›¾çš„å®é™…ç»˜å›¾èŒƒå›´çš„å¤§å°

#### lngLatToContainer([lng,lat]): {x: x, y: y}

è¯¥æ–¹æ³•æ˜¯ç”± mapService å‚æ•°æä¾›çš„ï¼Œä¸»è¦ç”¨äºå°†ç»çº¬åº¦ç‚¹ä½æ•°æ®å®æ—¶è½¬åŒ–æˆ Canvas ç»˜å›¾èƒ½å¤Ÿä½¿ç”¨çš„ xy åæ ‡ï¼Œä»è€Œè¾¾åˆ°ç»˜å›¾å†…å®¹ä¸åœ°å›¾çš„ä½ç½®çš„å¯¹åº”ã€‚

```javascript
var center = [120, 30];
var centerXY = mapService.lngLatToContainer(center); // {x: 100, y: 100}
// centerXY è¡¨ç¤ºè·ç¦»è§†å›¾å·¦ä¸Šè§’ x è½´æ–¹å‘ 100pxï¼Œy è½´æ–¹å‘ 100px
// canvas ç»˜å›¾åæ ‡ç³»
```
---
title: CanvasLayer
order: 7
---

CanvasLayer allows users to customize the content and style of the layer through canvas drawing methods. Compared to Marker by creating the actual DOM, CanvasLayer undoubtedly has better performance.

## use

```jsx
import { CanvasLayer } from '@antv/l7';
const layer = new CanvasLayer({}).style({
  drawingOnCanvas: (option) => {
    const { size, ctx, mapService } = option;
    const [width, height] = size;

    ctx.clearRect(0, 0, width, height);
    // canvas ç»˜åˆ¶
  },
});
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hUmNQJ1sAb8AAAAAAAAAAAAAARQnAQ'/>

[Online case](/examples/point/chart#custom)

### source

ğŸŒŸ CanvasLayer does not need to set source.

### event

ğŸŒŸ CanvasLayer does not support interactive actions yet.

### animate

When the user is drawing a canvas animation, in order to update the animation, the animate method needs to be executed.

```javascript
layer.animate(true);
```

[Online case](/examples/point/chart#custom)

### style

#### zIndex

Each time a CanvasLayer is created, L7 will generate an instance of the Canvas DOM. We adjust the level of the CanvasLayer by setting the zIndex value.

#### update

Specify the update method of CanavsLayer. update has two values â€‹â€‹'always' and 'dragend'. The default is 'always'

* always always updated
* dragend The map is updated after dragging/zooming.

#### drawingOnCanvas(options)

```javascript
options: {
  canvas: HTMLCanvasELement;
  ctx: CanvasRenderingContext2D;
  mapService: IMapService;
  size: [number, number];
}
```

drawingOnCanvas, this is a function that accepts relevant parameters. The user writes the canvas drawing logic in this function.

* canvas DOM node generated by canvas CanvasLayer
* The context of the canvas DOM generated by ctx
* mapService mapService of the current map, mainly provides lngLatToContainer method
* size The actual drawing range size of the current view

#### lngLatToContainer(\[lng,lat]): {x: x, y: y}

This method is provided by the mapService parameter and is mainly used to convert latitude and longitude point data into xy coordinates that can be used in Canvas drawing in real time, so as to achieve the correspondence between the drawing content and the location of the map.

```javascript
var center = [120, 30];
var centerXY = mapService.lngLatToContainer(center); // {x: 100, y: 100}
// centerXY means 100px from the upper left corner of the view in the x-axis direction and 100px in the y-axis direction
// canvas drawing coordinate system
```
---
title: FlyLine
order: 2
---

<embed src="@/docs/common/style.md"></embed>

Users do not need to do additional operations when using the fly line layer in earth mode. L7 will automatically recognize the earth mode and perform related conversions.

## use

Earth Flying Line Diagram Passed`LineLayer`and`EarthLayer`Instantiate

```javascript
import { EarthLayer, LineLayer } from '@antv/l7';
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4ZCnQaH_nLIAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7åœ°çƒé£çº¿å›¾å±‚" width="450px">

### shape

Earth fly line layer shape only supports**arc3d**
---
title: ç‚¹å›¾å±‚
order: 3
---

<embed src="@/docs/common/style.md"></embed>

ç”¨æˆ·åœ¨åœ°çƒæ¨¡å¼ä¸‹ä½¿ç”¨ç‚¹å›¾å±‚æ— éœ€åšé¢å¤–çš„æ“ä½œï¼ŒL7 ä¼šè‡ªåŠ¨è¯†åˆ«åœ°çƒæ¨¡å¼å¹¶ç›¸å…³çš„è½¬åŒ–

## ä½¿ç”¨

åœ°çƒç‚¹å›¾å±‚é€šè¿‡ `PointLayer` å’Œ `EarthLayer` å®ä¾‹åŒ–

```javascript
import { PointLayer, EarthLayer } from '@antv/l7';
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ck1XSZ4Vw0QAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒç‚¹å›¾å±‚" width="450px" >---
title: Earth Mode
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

l7-maps provides`Earth`Maps, compared to Amap and mapbox maps, are a completely different form of expression, providing visual display capabilities from a global perspective and providing users with more visual expressions of geographical information.

âœ¨ In order to distinguish from ordinary maps, l7-maps provides a brand new`Earth`Map type, L7 provides corresponding`EarthLayer`Layers

```js
import { EarthLayer } from '@antv/l7';
import { Earth } from '@antv/l7-maps';
```

## Currently supported layer types in Earth mode

### point layer

**Plane point: circle**

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PD6fTbs7E3gAAAAAAAAAAAAAARQnAQ'>

**cylindrical point: cylinder**

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*n6tYQKceveUAAAAAAAAAAAAAARQnAQ'>

### line layer

**3D arc: arc3d**

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*FjhGT77aCaIAAAAAAAAAAAAAARQnAQ'>

## use

```javascript
// 1. Introduce the corresponding module
import { Scene, Earth } from '@antv/l7-maps';
import { EarthLayer } from '@antv/l7-layers';

// 2. Build Earth Map
const scene = new Scene({
  id: 'map',
  map: new Earth({}),
});

// 3. Construct the earth layer. The current shape is base, which represents the basic sphere.
const earthlayer = new EarthLayer()
  .source(
    //Texture of the Earth's surface
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*3-3NSpqRqUoAAAAAAAAAAAAARQnAQ',
    {
      parser: {
        type: 'image',
        extent: [121.168, 30.2828, 121.384, 30.421],
      },
    },
  )
  .color('#f00')
  .shape('base')
  .style({
    opacity: 1.0,
    radius: 40,
    globalOptions: {
      ambientRatio: 0.6, // ambient light
      diffuseRatio: 0.4, // diffuse reflection
      specularRatio: 0.1, // specular reflection
      earthTime: 0.1,
    },
  })
  .animate(true);

scene.on('loaded', () => {
  // 4. Add a basic earth sphere
  scene.addLayer(earthlayer);
});
//After the above steps, we can add a basic earth to the scene
```

## Independent map type Earth

### Constructor Earth

As the base map type of l7-maps,`Earth`The camera system of the earth system is provided. Currently, only an empty object needs to be passed in.

* args:**{}**

```js
import { Scene, Earth } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Earth({}),
});
```

### rotateY

Provides a simple method to control the rotation of the earth system (actually controlling the rotation of the camera, you need to pass in an object

* force:`false`Determine whether to force it to take effect. By default, this method has a lower priority than the user's mouse operation. When the user operates the camera, this method will fail.
* reg:`0.01`Angle of rotation (visual rotation angle of the earth),`reg`It does not represent the actual rotation angle, but the ratio of the unit rotation angle.\
  ğŸŒŸUnit rotation angle = Math.min(this.earthCameraZoom \* this.earthCameraZoom, 1)

```js
import { Scene, Earth } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Earth({}),
});

function step() {
  scene.map.rotateY({
    option: {
      force: true,
      reg: 0.1,
    },
  });
  requestAnimationFrame(step);
}

scene.on('loaded', () => {
  scene.addLayer(earthlayer);
  step();
});
```

## Map layer EarthLayer

The earth layer is different from the layers of ordinary Gaode maps and Mapbox maps. It can only be used in earth mode and is used to represent the earth's sphere, atmosphere, glow and other effects.\
ğŸŒŸ Use different`shape`Parameters represent the differences between different earth layers.

### Earth sphere layer baseLayer

* source: data

  * map: The address of the earth's surface texture map
  * parser: Parser, currently you only need to write fixed object values:`{ parser: { type: "image" } }`

* shape: layer type

  The default value is`base`, currently supported`shape`Types are:

  * base: sphere
  * atomSphere: atmosphere
  * bloomSphere: Shining

  When the user's`shape`When the parameter is not recognized, it is automatically downgraded to`base`type

* globalOptions: layer style
  * ambientRatio: ambient light
  * diffuseRatio: diffuse reflection
  * specularRatio: specular reflection

```javascript
const earthlayer = new EarthLayer()
  .source(
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*3-3NSpqRqUoAAAAAAAAAAAAARQnAQ',
    {
      parser: {
        type: 'image',
      },
    },
  )
  .shape('base')
  .style({
    globalOptions: {
      ambientRatio: 0.6, // ambient light
      diffuseRatio: 0.4, // diffuse reflection
      specularRatio: 0.1, // specular reflection
    },
  });
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*i_TBRZRLSuYAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒå›¾å±‚" width="450px">

### Earth Inner Glow/Atmosphere layer atomLayer

`atomLayer`As the effect layer of the earth, there is no need to pass in data, so you donâ€™t need to call it.`source`method

```javascript
const atomLayer = new EarthLayer()
  .color('#2E8AE6')
  .shape('atomSphere')
  .style({
    //Can control the luminescence level
    opacity: 1,
  });
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1MU_RZQyFTkAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒå›¾å±‚å¤§æ°”æ•ˆæœ" width="450px" >

### Earth's internal and external glow/glow layer bloomLayer

`bloomLayer`As the effect layer of the earth, there is no need to pass in data, so you donâ€™t need to call it.`source`method

```javascript
const bloomLayer = new EarthLayer()
  .color('#fff')
  .shape('bloomSphere')
  .style({
    opacity: 0.5,
  });
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*FTniTZOZkNUAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒå›¾å±‚è¾‰å…‰æ•ˆæœ" width="450px" >
---
title: Earth Mode
order: 1
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

l7-maps æä¾› `Earth` åœ°å›¾ï¼Œç›¸è¾ƒäºé«˜å¾·åœ°å›¾ã€mapbox åœ°å›¾ï¼Œæ˜¯å®Œå…¨ä¸åŒçš„ä¸€ç§è¡¨ç°å½¢å¼ï¼Œæä¾›äº†å…¨çƒè§†è§’ä¸‹çš„å¯è§†åŒ–å±•ç¤ºèƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´å¤šçš„åœ°ç†ä¿¡æ¯å¯è§†åŒ–è¡¨ç°å½¢å¼ã€‚

âœ¨ ä¸ºäº†åŒºåˆ«æ™®é€šçš„åœ°å›¾ï¼Œl7-maps æä¾›äº†å…¨æ–°çš„ `Earth` åœ°å›¾ç±»å‹ï¼Œ L7 æä¾›å¯¹åº”çš„ `EarthLayer` å›¾å±‚

```js
import { EarthLayer } from '@antv/l7';
import { Earth } from '@antv/l7-maps';
```

## ç›®å‰åœ¨åœ°çƒæ¨¡å¼ä¸‹æ”¯æŒçš„å›¾å±‚ç±»å‹

### ç‚¹å›¾å±‚

**å¹³é¢ç‚¹: circle**

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PD6fTbs7E3gAAAAAAAAAAAAAARQnAQ'>

**åœ†æŸ±ç‚¹: cylinder**

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*n6tYQKceveUAAAAAAAAAAAAAARQnAQ'>

### çº¿å›¾å±‚

**3D å¼§çº¿: arc3d**

<img width="450px" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*FjhGT77aCaIAAAAAAAAAAAAAARQnAQ'>

## ä½¿ç”¨

```javascript
// 1ã€å¼•å…¥å¯¹åº”æ¨¡å—
import { Scene, Earth } from '@antv/l7-maps';
import { EarthLayer } from '@antv/l7-layers';

// 2ã€æ„å»º Earth Map
const scene = new Scene({
  id: 'map',
  map: new Earth({}),
});

// 3ã€æ„å»ºåœ°çƒå›¾å±‚ï¼Œå½“å‰çš„ shape ä¸º baseï¼Œè¡¨ç¤ºåŸºç¡€çƒä½“
const earthlayer = new EarthLayer()
  .source(
    // åœ°çƒè¡¨é¢çš„çº¹ç†
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*3-3NSpqRqUoAAAAAAAAAAAAAARQnAQ',
    {
      parser: {
        type: 'image',
        extent: [121.168, 30.2828, 121.384, 30.421],
      },
    },
  )
  .color('#f00')
  .shape('base')
  .style({
    opacity: 1.0,
    radius: 40,
    globalOptions: {
      ambientRatio: 0.6, // ç¯å¢ƒå…‰
      diffuseRatio: 0.4, // æ¼«åå°„
      specularRatio: 0.1, // é«˜å…‰åå°„
      earthTime: 0.1,
    },
  })
  .animate(true);

scene.on('loaded', () => {
  // 4ã€æ·»åŠ åŸºç¡€åœ°çƒçƒä½“
  scene.addLayer(earthlayer);
});
// ç»è¿‡ä¸Šè¿°çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åœºæ™¯ä¸­æ·»åŠ ä¸€ä¸ªåŸºç¡€çš„åœ°çƒäº†
```

## ç‹¬ç«‹çš„åœ°å›¾ç±»å‹ Earth

### æ„é€ å‡½æ•° Earth

ä½œä¸º l7-maps çš„åŸºç¡€åœ°å›¾ç±»å‹ï¼Œ`Earth` æä¾›äº†åœ°çƒç³»ç»Ÿçš„ç›¸æœºç³»ç»Ÿï¼Œç›®å‰åªéœ€è¦ä¼ å…¥ä¸€ä¸ªç©ºå¯¹è±¡ã€‚

- args: **{}**

```js
import { Scene, Earth } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Earth({}),
});
```

### rotateY

æä¾›äº†ç®€å•çš„æ–¹æ³•æ§åˆ¶åœ°çƒç³»ç»Ÿçš„æ—‹è½¬ï¼ˆå®é™…ä¸Šæ§åˆ¶çš„æ˜¯ç›¸æœºçš„æ—‹è½¬ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå¯¹è±¡

- force: `false` åˆ¤æ–­æ˜¯å¦å¼ºåˆ¶ç”Ÿæ•ˆï¼Œé»˜è®¤è¯¥æ–¹æ³•çš„ä¼˜å…ˆçº§æ¯”ç”¨æˆ·é¼ æ ‡æ“ä½œè¦ä½ï¼Œå½“ç”¨æˆ·æ“ä½œç›¸æœºçš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•ä¼šå¤±æ•ˆ
- reg: `0.01` æ—‹è½¬çš„è§’åº¦ï¼ˆè§†è§‰ä¸Šåœ°çƒçš„æ—‹è½¬è§’åº¦ï¼‰ï¼Œ `reg` è¡¨ç¤ºçš„å¹¶ä¸æ˜¯å®é™…çš„æ—‹è½¬è§’åº¦ï¼Œè€Œæ˜¯å•ä½æ—‹è½¬è§’åº¦çš„æ¯”ä¾‹  
  ğŸŒŸ å•ä½æ—‹è½¬è§’åº¦ = Math.min(this.earthCameraZoom \* this.earthCameraZoom, 1)

```js
import { Scene, Earth } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Earth({}),
});

function step() {
  scene.map.rotateY({
    option: {
      force: true,
      reg: 0.1,
    },
  });
  requestAnimationFrame(step);
}

scene.on('loaded', () => {
  scene.addLayer(earthlayer);
  step();
});
```

## åœ°å›¾å›¾å±‚ EarthLayer

åœ°çƒå›¾å±‚åŒºåˆ«äºæ™®é€šé«˜å¾·åœ°å›¾å’Œ Mapbox åœ°å›¾çš„å›¾å±‚ï¼Œåªåœ¨åœ°çƒæ¨¡å¼ä¸‹å¯ä»¥è¢«ä½¿ç”¨ï¼Œç”¨äºè¡¨ç¤ºåœ°çƒçš„çƒä½“ã€å¤§æ°”å±‚ã€è¾‰å…‰ç­‰æ•ˆæœã€‚  
ğŸŒŸ ä½¿ç”¨ä¸åŒçš„ `shape` å‚æ•°è¡¨ç¤ºåŒºåˆ«ä¸åŒçš„åœ°çƒå›¾å±‚ã€‚

### åœ°çƒçƒä½“å›¾å±‚ baseLayer

- source: æ•°æ®

  - map: åœ°çƒè¡¨é¢çº¹ç†è´´å›¾çš„åœ°å€
  - parser: è§£æå™¨ï¼Œç›®å‰åªéœ€è¦å†™å›ºå®šçš„å¯¹è±¡å€¼å³å¯: `{ parser: { type: "image" } }`

- shape: å›¾å±‚ç±»å‹

  é»˜è®¤å€¼æ˜¯ `base`, ç›®å‰æ”¯æŒçš„ `shape` ç±»å‹æœ‰:

  - base: çƒä½“
  - atomSphere: å¤§æ°”å±‚
  - bloomSphere: è¾‰å…‰

  å½“ç”¨æˆ·çš„ `shape` å‚æ•°ä¸è¢«è¯†åˆ«æ—¶ï¼Œè‡ªåŠ¨é™çº§ä¸º `base` ç±»å‹

- globalOptions: å›¾å±‚æ ·å¼
  - ambientRatio: ç¯å¢ƒå…‰
  - diffuseRatio: æ¼«åå°„
  - specularRatio: é«˜å…‰åå°„

```javascript
const earthlayer = new EarthLayer()
  .source(
    'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*3-3NSpqRqUoAAAAAAAAAAAAAARQnAQ',
    {
      parser: {
        type: 'image',
      },
    },
  )
  .shape('base')
  .style({
    globalOptions: {
      ambientRatio: 0.6, // ç¯å¢ƒå…‰
      diffuseRatio: 0.4, // æ¼«åå°„
      specularRatio: 0.1, // é«˜å…‰åå°„
    },
  });
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*i_TBRZRLSuYAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒå›¾å±‚" width="450px">

### åœ°çƒå†…å‘å…‰/å¤§æ°”å›¾å±‚ atomLayer

`atomLayer` ä½œä¸ºåœ°çƒçš„æ•ˆæœå›¾å±‚ï¼Œä¸éœ€è¦ä¼ å…¥æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥ä¸è°ƒç”¨ `source` æ–¹æ³•

```javascript
const atomLayer = new EarthLayer()
  .color('#2E8AE6')
  .shape('atomSphere')
  .style({
    // å¯ä»¥æ§åˆ¶å‘å…‰ç¨‹åº¦
    opacity: 1,
  });
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1MU_RZQyFTkAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒå›¾å±‚å¤§æ°”æ•ˆæœ" width="450px" >

### åœ°çƒå†…å¤–å‘å…‰/è¾‰å…‰å›¾å±‚ bloomLayer

`bloomLayer` ä½œä¸ºåœ°çƒçš„æ•ˆæœå›¾å±‚ï¼Œä¸éœ€è¦ä¼ å…¥æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥ä¸è°ƒç”¨ `source` æ–¹æ³•

```javascript
const bloomLayer = new EarthLayer()
  .color('#fff')
  .shape('bloomSphere')
  .style({
    opacity: 0.5,
  });
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*FTniTZOZkNUAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒå›¾å±‚è¾‰å…‰æ•ˆæœ" width="450px" >
---
title: ç‚¹å›¾å±‚
order: 3
---

<embed src="@/docs/common/style.md"></embed>

Users do not need to do additional operations when using point layers in earth mode. L7 will automatically recognize the earth mode and perform related conversions.

## use

Earth point layer passes`PointLayer`and`EarthLayer`Instantiate

```javascript
import { PointLayer, EarthLayer } from '@antv/l7';
```

<img src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ck1XSZ4Vw0QAAAAAAAAAAAAAARQnAQ" style="display: block; margin: 0 auto" alt="L7 åœ°çƒç‚¹å›¾å±‚" width="450px" >
---
title: threejs å¼•æ“å…¼å®¹
order: 3
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

1ã€L7 æ”¯æŒå…è®¸ç”¨æˆ·æ¥å…¥ç¬¬ä¸‰æ–¹çš„æ¸²æŸ“å¼•æ“å¯¹åœ°å›¾åœºæ™¯è¿›è¡Œå¼€å‘ï¼Œthreejs ä½œä¸ºå½“å‰æœ€å¹¿æ³›ä½¿ç”¨çš„é€šç”¨ 3D æ¸²æŸ“å¼•æ“ï¼ŒL7 å°†å…¶é›†æˆåå¯ä»¥æ»¡è¶³
ç”¨æˆ·è‡ªå®šä¹‰å¼€å‘çš„éœ€æ±‚ï¼Œå¯ä»¥è®© L7 è¦†ç›–æ›´å¤šçš„åº”ç”¨åœºæ™¯ã€‚

2ã€ç›®å‰ L7Three æ¨¡å—ä¸ºäº†æŠ¹å¹³ä¸åŒåœ°å›¾åº•å›¾ä¹‹é—´çš„å·®å¼‚ï¼Œæä¾›äº†ä¸€äº›å…¼å®¹æ–¹æ³•ï¼Œå¦‚ setMeshScale æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ–¹æ³•ç”¨æˆ·å¯ä»¥åœ¨ä¸åŒçš„åº•å›¾
ç¯å¢ƒä¸­ä½¿ç”¨åŒä¸€å¥—ä»£ç ã€‚

3ã€L7 æä¾›çš„é€‚é…æ–¹æ³•åªè´Ÿè´£ threejs ä¸–ç•Œåæ ‡åˆ°ä¸åŒåœ°å›¾åº•å›¾åæ ‡çš„è½¬åŒ–ã€ gl ä¸Šä¸‹æ–‡çš„å…±äº«ä»¥åŠæ¸²æŸ“å¸§çš„åŒæ­¥ï¼Œå…¶ä½™å…³äº 3D åœºæ™¯å†…å®¹çš„æ­å»º
ä¸æ™®é€š threejs åº”ç”¨çš„å¼€å‘æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚

4ã€L7 æœ¬èº«å¹¶æ²¡æœ‰é›†æˆ threejsï¼Œæ‰€ä»¥ç”¨äºåœ¨ä½¿ç”¨ L7Three æ¨¡å—çš„æ—¶å€™éœ€è¦ç‹¬ç«‹å®‰è£… threejsã€‚

âœ¨ ç›®å‰ L7 å®˜æ–¹æä¾›çš„ threejs å…¼å®¹æ˜¯æ ¹æ® 0.115.0 ç‰ˆæœ¬è¿›è¡Œå¼€å‘çš„ï¼Œä½¿ç”¨å…¶ä»–ç‰ˆæœ¬ threejs å¯èƒ½ä¼šå­˜åœ¨å…¼å®¹é—®é¢˜

## ä½¿ç”¨

```javascript
// 1ã€å¼•å…¥å¯¹åº”æ¨¡å—
import { ThreeLayer, ThreeRender } from '@antv/l7-three';
import * as THREE from 'three';
...
// 2ã€æ³¨å†ŒæœåŠ¡
scene.registerRenderService(ThreeRender);
...
// 3ã€æ„å»º threejs å›¾å±‚å¯¹è±¡å¹¶åœ¨å…¶ä¸­æ·»åŠ  threejs æ„å»ºçš„ç½‘æ ¼å¯¹è±¡
const threeJSLayer = new ThreeLayer({
  onAddMeshes: (threeScene: THREE.Scene, layer: ThreeLayer) => {
    threeScene.add(new THREE.AmbientLight(0xffffff));

    const sunlight = new THREE.DirectionalLight(0xffffff, 0.25);
    sunlight.position.set(0, 80000000, 100000000);
    sunlight.matrixWorldNeedsUpdate = true;
    threeScene.add(sunlight);

    let center = scene.getCenter();

    let cubeGeometry = new THREE.BoxBufferGeometry(10000, 10000, 10000);
    let cubeMaterial = new THREE.MeshNormalMaterial();
    let cube = new THREE.Mesh(cubeGeometry, cubeMaterial);

    layer.setObjectLngLat(cube, [center.lng + 0.05, center.lat], 0);
    threeScene.add(cube);
  },
})
.source(data)
.animate(true);

// 4ã€æ·»åŠ  threejs å›¾å±‚å¯¹è±¡
scene.addLayer(threeJSLayer);

```

L7 å°† threejs çš„å¼•ç”¨å°è£…æˆä¸€ä¸ªç‰¹æ®Šçš„å›¾å±‚å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨ä¸Šä¸å…¶ä»–çš„å›¾å±‚ç›¸åŒã€‚

## æ„é€ å‡½æ•° new ThreeLayer

### onAddMeshes

è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•° threeScene: THREE.Scene, layer: ThreeLayer

- threeScene: è¿™æ˜¯æ™®é€šçš„ threejs åœºæ™¯å¯¹è±¡
- layer: è¿™æ˜¯ L7 æä¾›çš„ threeLayer å¯¹è±¡ï¼Œä¸Šé¢æŒ‚è½½äº† threejs ç©ºé—´é€‚é…åˆ°åœ°å›¾ç©ºé—´æ‰€éœ€è¦çš„æ–¹æ³•

## ThreeLayer

ç”¨æˆ·æ–°å»ºçš„å›¾å±‚å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¼šåœ¨ onAddMesh æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¿”å›ã€‚

ä»¥ä¸‹æ˜¯æŒ‚è½½åœ¨ ThreeLayer å®ä¾‹ä¸Šçš„é€‚é…æ–¹æ³•ã€‚

### getModelMatrix(lnglat, altitude, rotation, scale): Matrix

- lnglat: [number, number] ç»çº¬åº¦
- altitude: number = 0 ç›¸å¯¹é«˜åº¦
- rotation: [number, number, number] = [0, 0, 0] æ—‹è½¬è§’åº¦
- scale: [number, number, number] = [1, 1, 1] ç¼©æ”¾æ¯”ä¾‹

ç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è®¡ç®—åœ¨å¯¹åº”ç»çº¬åº¦ç‚¹ä½ã€ç›¸å¯¹é«˜åº¦ã€æ—‹è½¬è§’åº¦å’Œç¼©æ”¾çš„æ¨¡å‹çŸ©é˜µ
è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ THREE.Matrix4 ç±»å‹çš„çŸ©é˜µ

### applyObjectLngLat(object, lnglat, altibute): void

- object: Object3D threejs å¯¹è±¡
- lnglat: ILngLat[number, number] ç»çº¬åº¦
- altitude = 0 ç›¸å¯¹é«˜åº¦

ç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•å°† object å¯¹è±¡ä»å½“å‰ä½ç½®å‘æŒ‡å®šä½ç½®ç§»åŠ¨ï¼ˆåœ°å›¾ç»çº¬åº¦åæ ‡ï¼‰

### setObjectLngLat(object, lnglat, altibute): void

- object: Object3D threejs å¯¹è±¡
- lnglat: ILngLat[number, number] ç»çº¬åº¦
- altitude = 0 ç›¸å¯¹é«˜åº¦

ç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è®¾ç½® object å¯¹è±¡çš„ä½ç½®ï¼ˆåœ°å›¾ç»çº¬åº¦åæ ‡ï¼‰

### lnglatToCoord(lnglat): [number, number]

- lnglat: ILngLat[number, number] ç»çº¬åº¦

ç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•å°†ç»çº¬åº¦åæ ‡è½¬åŒ–æˆ threejs ä¸–ç•Œåæ ‡

### adjustMeshToMap(object): void

- object: Object3D threejs å¯¹è±¡

ç”¨æˆ·åœ¨æ·»åŠ  threejs å¯¹è±¡çš„å‰å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è°ƒæ•´ 3D å¯¹è±¡çš„å§¿æ€ï¼Œä¿è¯æ·»åŠ å¯¹è±¡èƒ½æ­£ç¡®æ˜¾ç¤º

âœ¨ åœ¨ threejs ä¸–ç•Œåæ ‡ä¸­ï¼Œé»˜è®¤çš„ä¸Šæ–¹å‘ä¸º Y è½´æ­£æ–¹å‘ï¼Œè€Œåœ¨åœ°å›¾åæ ‡ä¸­ï¼Œé»˜è®¤çš„ä¸Šæ–¹å‘ä¸º Z è½´æ­£æ–¹å‘

âœ¨ ç”¨æˆ·ä¸ä¸€å®šä½¿ç”¨è¯¥æ–¹æ³•è°ƒæ•´ç‰©ä½“çš„å§¿æ€ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°

### setMeshScale(object, x, y, z): void

- object: Object3D threejs å¯¹è±¡
- x: number = 1 x è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹
- y: number = 1 y è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹
- z: number = 1 z è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹

ç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è®¾ç½® threejs å¯¹è±¡ç¼©æ”¾

âœ¨ å…¶å®é€šè¿‡è®¾ç½® threejs å¯¹è±¡çš„ scale å±æ€§ä¸€æ ·èƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œä½†æ˜¯ç”±äº mapbox åœ¨è®¡ç®—æ¨¡å‹çŸ©é˜µçš„æ—¶å€™å¼•å…¥äº†ç‰¹æ®Šè®¡ç®—ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥è®¾ç½® scale å±æ€§è¿›è¡Œç¼©æ”¾

âœ¨ åŒæ ·çš„ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ threejs çš„ positionã€rotation ç­‰è°ƒæ•´ 3D å¯¹è±¡çš„å§¿æ€

### addAnimateMixer(mixer): void

- mixer: AnimationMixer threejs çš„åŠ¨ç”»æ··åˆå™¨

ç”¨æˆ·é€šè¿‡è¯¥æ–¹æ³•ç®¡ç†åŠ è½½æ¨¡å‹çš„åŠ¨ç”»

### getRenderCamera(): THREE.Camera

è¿”å›æ ¹æ®å½“å‰åœ°å›¾åœºæ™¯å‚æ•°ä¸‹å¯¹åº”çš„ THREEJS ç›¸æœº

## åŠ è½½æ¨¡å‹

ç”¨æˆ·å¯ä»¥ä½¿ç”¨ threejs æä¾›çš„èƒ½åŠ›åŠ è½½å…¶æ”¯æŒçš„ä»»æ„æ¨¡å‹

### ç®€å•æ¡ˆä¾‹

âœ¨ ä»¥åŠ è½½ gltf æ¨¡å‹ä¸ºä¾‹

```javascript
// 1ã€å¼•å…¥åŠ è½½å™¨
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';
...
const threeJSLayer = new ThreeLayer({
  onAddMeshes: (threeScene: THREE.Scene, layer: ThreeLayer) => {
    ...
    // 2ã€æ„å»ºåŠ è½½å™¨
    const loader = new GLTFLoader();
    // 3ã€åŠ è½½æ¨¡å‹
    loader.load('https://gw.alipayobjects.com/os/bmw-prod/3ca0a546-92d8-4ba0-a89c-017c218d5bea.gltf',
    (gltf) => {
      const model = gltf.scene;
      layer.adjustMeshToMap(model);
      layer.setMeshScale(model, 1000, 1000, 1000);
      layer.setObjectLngLat( model, [center.lng, center.lat], 0 );

      // 4ã€æ’­æ”¾æ¨¡å‹ä¸Šç»‘å®šçš„åŠ¨ç”»
      const animations = gltf.animations;
      if (animations && animations.length) {
        const mixer = new THREE.AnimationMixer(model);
        const animation = animations[2];
        const action = mixer.clipAction(animation);
        action.play();
        // 5ã€ç”± L7 æ§åˆ¶æ¨¡å‹åŠ¨ç”»çš„æ’­æ”¾
        layer.addAnimateMixer(mixer);
      }
    })
  }
}).source(data)
.animate(true) // è‹¥éœ€è¦æ’­æ”¾æ¨¡å‹åŠ¨ç”»ï¼Œè¯·å¼€å¯åŠ¨ç”»æ¨¡å¼ï¼ˆæˆ–è€…åœºæ™¯ä¸­å·²ç»å­˜åœ¨å¼€å¯åŠ¨ç”»çš„å›¾å±‚ï¼‰

```
---
title: threejs å¼•æ“å…¼å®¹
order: 3
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

1\. L7 supports allowing users to access third-party rendering engines to develop map scenes. Threejs is currently the most widely used general-purpose 3D rendering engine. L7 can meet the requirements after integrating it.
User-defined development needs allow L7 to cover more application scenarios.

2\. Currently, in order to smooth out the differences between different map basemaps, the L7Three module provides some compatibility methods, such as the setMeshScale method. Through these methods, users can
environment using the same set of code.

3\. The adaptation method provided by L7 is only responsible for the conversion of threejs world coordinates to different map basemap coordinates, the sharing of gl context and the synchronization of rendering frames. The rest is related to the construction of 3D scene content.
There is no difference from the development of ordinary threejs applications.

4\. L7 itself does not integrate threejs, so you need to install threejs independently when using the L7Three module.

âœ¨ Currently, the threejs compatibility officially provided by L7 is developed based on version 0.115.0. There may be compatibility issues when using other versions of threejs.

## use

```javascript
// 1. Introduce the corresponding module
import { ThreeLayer, ThreeRender } from '@antv/l7-three';
import * as THREE from 'three';
...
// 2. Registration service
scene.registerRenderService(ThreeRender);
...
// 3. Build the threejs layer object and add the grid object built by threejs to it.
const threeJSLayer = new ThreeLayer({
  onAddMeshes: (threeScene: THREE.Scene, layer: ThreeLayer) => {
    threeScene.add(new THREE.AmbientLight(0xffffff));

    const sunlight = new THREE.DirectionalLight(0xffffff, 0.25);
    sunlight.position.set(0, 80000000, 100000000);
    sunlight.matrixWorldNeedsUpdate = true;
    threeScene.add(sunlight);

    let center = scene.getCenter();

    let cubeGeometry = new THREE.BoxBufferGeometry(10000, 10000, 10000);
    let cubeMaterial = new THREE.MeshNormalMaterial();
    let cube = new THREE.Mesh(cubeGeometry, cubeMaterial);

    layer.setObjectLngLat(cube, [center.lng + 0.05, center.lat], 0);
    threeScene.add(cube);
  },
})
.source(data)
.animate(true);

// 4. Add threejs layer object
scene.addLayer(threeJSLayer);
```

L7 encapsulates the reference of threejs into a special layer object, which is used the same as other layers.

## Constructor new ThreeLayer

### onAddMeshes

This method accepts two parameters threeScene: THREE.Scene, layer: ThreeLayer

* threeScene: This is a normal threejs scene object
* layer: This is the threeLayer object provided by L7, which mounts the methods needed to adapt the threejs space to the map space.

## ThreeLayer

The layer object created by the user will also be returned in the second parameter of the onAddMesh method.

The following is the adaptation method mounted on the ThreeLayer instance.

### getModelMatrix(lnglat, altitude, rotation, scale): Matrix

* lnglat: \[number, number] latitude and longitude
* altitude: number = 0 relative altitude
* rotation: \[number, number, number] = \[0, 0, 0] rotation angle
* scale: \[number, number, number] = \[1, 1, 1] scaling

Users can use this method to calculate the model matrix at the corresponding longitude and latitude point, relative height, rotation angle and scaling.
The return value of this method is a matrix of type THREE.Matrix4

### applyObjectLngLat(object, lnglat, altibute): void

* object: Object3D threejs object
* lnglat: ILngLat\[number, number] latitude and longitude
* altitude = 0 relative altitude

The user can use this method to move the object object from the current location to the specified location (map longitude and latitude coordinates)

### setObjectLngLat(object, lnglat, altibute): void

* object: Object3D threejs object
* lnglat: ILngLat\[number, number] latitude and longitude
* altitude = 0 relative altitude

The user can set the location of the object object (map longitude and latitude coordinates) through this method

### lnglatToCoord(lnglat): \[number, number]

* lnglat: ILngLat\[number, number] latitude and longitude

Users can use this method to convert latitude and longitude coordinates into threejs world coordinates

### adjustMeshToMap(object): void

* object: Object3D threejs object

Users can use this method to adjust the posture of the 3D object before adding the threejs object to ensure that the added object can be displayed correctly.

âœ¨ In threejs world coordinates, the default upward direction is the positive Y-axis direction, while in map coordinates, the default upward direction is the positive Z-axis direction.

âœ¨ Users do not necessarily use this method to adjust the posture of objects, they can also implement it themselves

### setMeshScale(object, x, y, z): void

* object: Object3D threejs object
* x: number = 1 Scaling ratio in x-axis direction
* y: number = 1 Scaling ratio in the y-axis direction
* z: number = 1 Scaling ratio in z-axis direction

Users can set the threejs object zoom through this method

âœ¨ In fact, the same effect can be achieved by setting the scale attribute of the threejs object. However, because mapbox introduces special calculations when calculating the model matrix, it cannot directly set the scale attribute for scaling.

âœ¨ Similarly, you can directly modify the position, rotation, etc. of threejs to adjust the posture of the 3D object.

### addAnimateMixer(mixer): void

* mixer: AnimationMixer animation mixer for threejs

The user manages the animation of loading the model through this method.

### getRenderCamera(): THREE.Camera

Returns the corresponding THREEJS camera based on the current map scene parameters.

## Load model

Users can use the capabilities provided by threejs to load any model it supports.

### Simple case

âœ¨ Take loading gltf model as an example

```javascript
// 1. Introduce loader
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';
...
const threeJSLayer = new ThreeLayer({
  onAddMeshes: (threeScene: THREE.Scene, layer: ThreeLayer) => {
    ...
    // 2. Build the loader
    const loader = new GLTFLoader();
    // 3. Load model
    loader.load('https://gw.alipayobjects.com/os/bmw-prod/3ca0a546-92d8-4ba0-a89c-017c218d5bea.gltf',
    (gltf) => {
      const model = gltf.scene;
      layer.adjustMeshToMap(model);
      layer.setMeshScale(model, 1000, 1000, 1000);
      layer.setObjectLngLat( model, [center.lng, center.lat], 0 );

      // 4. Play the animation bound to the model
      const animations = gltf.animations;
      if (animations && animations.length) {
        const mixer = new THREE.AnimationMixer(model);
        const animation = animations[2];
        const action = mixer.clipAction(animation);
        action.play();
        // 5. L7 controls the playback of model animation
        layer.addAnimateMixer(mixer);
      }
    })
  }
}).source(data)
.animate(true) // If you need to play model animation, please turn on the animation mode (or there is already a layer with animation turned on in the scene)
```
---
title: é£åœºå›¾å±‚
order: 7
---

`WindLayer` ç”¨äºå°†å­˜å‚¨é£åœºä¿¡æ¯çš„å›¾ç‰‡ï¼Œè®¾ç½®å…¶é£é€Ÿçº¿é‡‡æ ·ç›¸å…³å‚æ•°ï¼Œå°†é‡‡æ ·åçš„é£åœºçº¿çš„èµ°å‘ã€å¼ºåº¦é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼åœ¨åœ°å›¾ä¸Šå‘ˆç°å‡ºæ¥ã€‚

## ä½¿ç”¨

```jsx
import { WindLayer } from '@antv/l7';
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ADr-SIxhM9AAAAAAAAAAAAAAARQnAQ' />

### source

(data, options) => WindLayer, è®¾ç½®é£åœºç›¸å…³ä¿¡æ¯çš„å‡½æ•°

- data: string å­˜å‚¨é£åœºä¿¡æ¯çš„å›¾ç‰‡åœ°å€
  ğŸŒŸ [æ•°æ®è·å–](https://github.com/mapbox/webgl-wind#downloading-weather-data)
- options:

```js
{
  parser: {
    type: 'image',
      extent: [-180, -85, 180, 85],  // ç”¨äºè®¾ç½®é£åœºå›¾ç‰‡ä½œç”¨åˆ°åœ°å›¾ä¸Šçš„ç»çº¬å›¾åŒºé—´
  },
}
```

### animate

å¼€å¯åŠ¨ç”»æ•ˆæœã€‚

```javascript
layer.animate(true);
```

### style

- `uMin`: é£é€Ÿ `X` è½´/æ¨ªå‘æœ€å°å€¼ã€‚
- `uMax`: é£é€Ÿ `X` è½´/æ¨ªå‘æœ€å¤§å€¼ã€‚
- `vMin`: é£é€Ÿ `Y` è½´/çºµå‘æœ€å°å€¼ã€‚
- `vMax`: é£é€Ÿ `Y` è½´/çºµå‘æœ€å¤§å€¼ã€‚
- `sizeScale`: é£åœºçº¿æ¡ç²—ç»†ç¼©æ”¾æ¯”ï¼Œ`0 - 2`ã€‚
- `fadeOpacity`: çº¿æ¡é€æ˜åº¦ï¼Œ`0 - 1`ã€‚
- `numParticles`: çº¿æ¡æ•°é‡ã€‚
- `rampColors`: çº¿æ¡å¡«å……é¢œè‰²æ˜ å°„ã€‚

```js
const rampColors = {
  colors: [
    '#3288bd',
    '#66c2a5',
    '#abdda4',
    '#e6f598',
    '#fee08b',
    '#fdae61',
    '#f46d43',
    '#d53e4f',
  ],
  positions: [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 1.0],
};
```

#### rampColors

- colorsÂ  é¢œè‰²æ•°ç»„
- positions æ•°æ®åŒºé—´

é…ç½®å€¼åŸŸæ˜ å°„é¢œè‰²çš„è‰²å¸¦ï¼Œå€¼åŸŸçš„èŒƒå›´ä¸º `[0 - 1]`, å¯¹åº”çš„æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ª `position` ä½ç½®è®¾ç½®ä¸€ä¸ªé¢œè‰²å€¼ã€‚

âš ï¸ colors, positions çš„é•¿åº¦è¦ç›¸åŒ

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```

[åœ¨çº¿æ¡ˆä¾‹](/examples/wind/basic#wind)
---
title: é£åœºå›¾å±‚
order: 7
---

`WindLayer`It is used to store pictures of wind field information, set parameters related to wind speed line sampling, and present the direction and intensity of the sampled wind field lines on the map in a visual way.

## use

```jsx
import { WindLayer } from '@antv/l7';
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ADr-SIxhM9AAAAAAAAAAAAAAARQnAQ' />

### source

(data, options) => WindLayer, function to set wind field related information

* data: string image address to store wind farm information
  ğŸŒŸ[data collection](https://github.com/mapbox/webgl-wind#downloading-weather-data)
* options:

```js
{
  parser: {
    type: 'image',
      extent: [-180, -85, 180, 85], // Used to set the latitude and longitude chart interval where the wind field image is applied to the map
  },
}
```

### animate

Turn on animation effects.

```javascript
layer.animate(true);
```

### style

* `uMin`: wind speed`X`Axial/lateral minimum.
* `uMax`: wind speed`X`Axis/lateral maximum.
* `vMin`: wind speed`Y`Axis/longitudinal minimum.
* `vMax`: wind speed`Y`Axis/longitudinal maximum.
* `sizeScale`: Wind field line thickness scaling ratio,`0 - 2`ã€‚
* `fadeOpacity`: line transparency,`0 - 1`ã€‚
* `numParticles`: Number of lines.
* `rampColors`: Line fill color mapping.

```js
const rampColors = {
  colors: [
    '#3288bd',
    '#66c2a5',
    '#abdda4',
    '#e6f598',
    '#fee08b',
    '#fdae61',
    '#f46d43',
    '#d53e4f',
  ],
  positions: [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 1.0],
};
```

#### rampColors

* colors color array
* positions data interval

Configure the color band of the value range mapping color. The range of the value range is`[0 - 1]`, correspondingly we need to provide each`position`Position sets a color value.

âš ï¸ colors, positions must be the same length

```javascript
layer.style({
  rampColors: {
    colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'],
    positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],
  },
});
```

[Online case](/examples/wind/basic#wind)
---
title: ç®€å•åæ ‡ç³»ï¼ˆéåœ°ç†åæ ‡ç³»ï¼‰
order: 1
---

<embed src="@/docs/common/style.md"></embed>

æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç»çº¬åº¦æ¥æè¿°åœ°ç†ä½ç½®ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹æ®Šçš„åœºæ™¯ï¼Œæˆ‘ä»¬å¾€å¾€å€¾å‘äºä½¿ç”¨æ›´åŠ ç®€å•çš„å¹³é¢åæ ‡ç³»(xyz)æ¥æè¿°ä½ç½®çš„ç›¸å¯¹åæ ‡ï¼Œä¸ºæ­¤ L7 æä¾›äº†ç®€å•åæ ‡ç³»çš„æ¨¡å¼ã€‚

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HenKR5VsXX0AAAAAAAAAAAAAARQnAQ'>

[åœ¨çº¿æ¡ˆä¾‹](/examples/point/text#simplecoordinate)

### Map

ä¸ºäº†ä½¿ç”¨ç®€å•åæ ‡ç³»ï¼Œæˆ‘ä»¬éœ€è¦æ˜¯ä½¿ç”¨ L7 è‡ªå®šä¹‰çš„ Map åœ°å›¾ç±»å‹ï¼ŒåŒæ—¶åˆ¶å®š map çš„ version å±æ€§

```javascript
import { Scene, ImageLayer, PointLayer } from '@antv/l7';
import { Map } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Map({
    center: [500, 500],
    pitch: 0,
    zoom: 3,
    version: 'SIMPLE',
    mapSize: 1000,
    maxZoom: 5,
    minZoom: 2,
    pitchEnabled: false,
    rotateEnabled: false,
  }),
});
```

#### version

ç”¨æˆ·åœ¨ä½¿ç”¨è‡ªå®šä¹‰åæ ‡ç³»çš„æ—¶å€™ï¼Œéœ€è¦å°†åœ°å›¾çš„ç±»å‹è®¾ç½®æˆ 'SIMPLE'

#### mapSize: number

ç”¨æˆ·åœ¨ä½¿ç”¨è‡ªå®šä¹‰åæ ‡ç³»çš„æ—¶å€™ï¼Œå¯ä»¥è®¾ç½®ç»˜å›¾åŒºåŸŸçš„å¤§å°ã€‚ç»˜å›¾åŒºåŸŸé»˜è®¤æ˜¯ 10000 X 10000 çš„çŸ©å½¢åŒºåŸŸï¼Œåæ ‡èµ·ç‚¹æ˜¯å·¦ä¸‹è§’ï¼Œæ°´å¹³å‘å³ä¸º X æ­£æ–¹å‘ï¼Œå‚ç›´å‘ä¸Šæ˜¯ Y æ­£æ–¹å‘ã€‚

<img width="50%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*qimkTLy0P6IAAAAAAAAAAAAAARQnAQ'>

#### pitchEnabled/rotateEnabled

ç”¨æˆ·åœ¨ä½¿ç”¨è‡ªå®šä¹‰åæ ‡ç³»çš„æ—¶å€™ï¼Œæ¨èå°† pitchEnabled/rotateEnabled è®¾ç½®ä¸º false

#### layer

ç”¨æˆ·åœ¨ä½¿ç”¨è‡ªå®šä¹‰åæ ‡ç³»çš„æ—¶å€™ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨æ™®é€šçš„å›¾å±‚ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯éœ€è¦å°†åŸæœ¬çš„ç»çº¬åº¦åæ ‡è½¬åŒ–ä¸ºå¹³é¢åæ ‡

```javascript
const imagelayer = new ImageLayer({}).source(
   'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*I0X5R4jAUQ4AAAAAAAAAAAAAARQnAQ',
   {
   parser: {
      type: 'image',
      extent: [360, 400, 640, 600],
   },
   },
);

const textlayer = new PointLayer({ zIndex: 2 })
.source(
  [
    {
      x: 515,
      y: 575,
      t: 'å°å±‹',
    },
    ...
  ],
  {
    parser: {
      type: 'json',
      x: 'x',
      y: 'y',
    },
  },
)
.shape('t', 'text')
.size(12)
.active({
  color: '#00f',
  mix: 0.9
})
.color('rgb(86, 156, 214)')
.style({
  textAnchor: 'center', // æ–‡æœ¬ç›¸å¯¹é”šç‚¹çš„ä½ç½® center|left|right|top|bottom|top-left
  spacing: 2, // å­—ç¬¦é—´è·
  fontWeight: '800',
  padding: [1, 1], // æ–‡æœ¬åŒ…å›´ç›’ padding [æ°´å¹³ï¼Œå‚ç›´]ï¼Œå½±å“ç¢°æ’æ£€æµ‹ç»“æœï¼Œé¿å…ç›¸é‚»æ–‡æœ¬é çš„å¤ªè¿‘
  stroke: '#ffffff', // æè¾¹é¢œè‰²
  strokeWidth: 2, // æè¾¹å®½åº¦
  textAllowOverlap: true,
});

const lineData = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {
            testOpacity: 0.8,
          },
          geometry: {
            type: 'Polygon',
            coordinates: [
              [
                [6000, 6000],
                [6000, 7000],
                [7000, 7000],
                [7000, 6000],
              ],
            ],
          },
        },
      ],
    };

    const linelayer = new LineLayer()
      .source(lineData)
      .shape('line')
      .size(10)
      .color('#0f0')
      .active(true);


const polygonData = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {
            testOpacity: 0.4,
          },
          geometry: {
            type: 'MultiPolygon',
            coordinates: [
              [
                [
                  [6000, 6000],
                  [6000, 7000],
                  [7000, 7000],
                  [7000, 6000],
                  [6000, 6000],
                ],
                [
                  [6300, 6300],
                  [6300, 6700],
                  [6700, 6700],
                  [6700, 6300],
                  [6300, 6300],
                ],
              ],
              [
                [
                  [5000, 5000],
                  [5000, 6000],
                  [6000, 6000],
                  [6000, 5000],
                  [5000, 5000],
                ],
              ],
            ],
          },
        },
      ],
    };

    const polygonLayer = new PolygonLayer()
      .source(polygonData)
      .shape('fill')
      .color('#f00')
      .style({
        opacity: 0.6,
      })
      .active(true);
```
---
title: ç®€å•åæ ‡ç³»ï¼ˆéåœ°ç†åæ ‡ç³»ï¼‰
order: 1
---

<embed src="@/docs/common/style.md"></embed>

We usually use longitude and latitude to describe geographical location, but in some special scenarios, we tend to use a simpler plane coordinate system (xyz) to describe the relative coordinates of a location. For this reason, L7 provides a simple coordinate system mode.

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HenKR5VsXX0AAAAAAAAAAAAAARQnAQ'>

[Online case](/examples/point/text#simplecoordinate)

### Map

In order to use a simple coordinate system, we need to use the L7 custom Map map type and specify the version attribute of the map.

```javascript
import { Scene, ImageLayer, PointLayer } from '@antv/l7';
import { Map } from '@antv/l7-maps';

const scene = new Scene({
  id: 'map',
  map: new Map({
    center: [500, 500],
    pitch: 0,
    zoom: 3,
    version: 'SIMPLE',
    mapSize: 1000,
    maxZoom: 5,
    minZoom: 2,
    pitchEnabled: false,
    rotateEnabled: false,
  }),
});
```

#### version

When using a custom coordinate system, users need to set the map type to 'SIMPLE'

#### mapSize: number

When using a custom coordinate system, users can set the size of the drawing area. The default drawing area is a rectangular area of â€‹â€‹10000

<img width="50%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*qimkTLy0P6IAAAAAAAAAAAAAARQnAQ'>

#### pitchEnabled/rotateEnabled

When users use a custom coordinate system, it is recommended to set pitchEnabled/rotateEnabled to false

#### layer

When users use a custom coordinate system, they can use ordinary layers normally. The only difference is that they need to convert the original longitude and latitude coordinates into plane coordinates.

```javascript
const imagelayer = new ImageLayer({}).source(
   'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*I0X5R4jAUQ4AAAAAAAAAAAAARQnAQ',
   {
   parser: {
      type: 'image',
      extent: [360, 400, 640, 600],
   },
   },
);

const textlayer = new PointLayer({ zIndex: 2 })
.source(
  [
    {
      x: 515,
      y: 575,
      t: 'hut',
    },
    ...
  ],
  {
    parser: {
      type: 'json',
      x: 'x',
      y: 'y',
    },
  },
)
.shape('t', 'text')
.size(12)
.active({
  color: '#00f',
  mix: 0.9
})
.color('rgb(86, 156, 214)')
.style({
  textAnchor: 'center', // The position of the text relative to the anchor point center|left|right|top|bottom|top-left
  spacing: 2, // character spacing
  fontWeight: '800',
  padding: [1, 1], // Text bounding box padding [horizontal, vertical], which affects the collision detection results and prevents adjacent texts from being too close.
  stroke: '#ffffff', // stroke color
  strokeWidth: 2, // Stroke width
  textAllowOverlap: true,
});

const lineData = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {
            testOpacity: 0.8,
          },
          geometry: {
            type: 'Polygon',
            coordinates: [
              [
                [6000, 6000],
                [6000, 7000],
                [7000, 7000],
                [7000, 6000],
              ],
            ],
          },
        },
      ],
    };

    const linelayer = new LineLayer()
      .source(lineData)
      .shape('line')
      .size(10)
      .color('#0f0')
      .active(true);


const polygonData = {
      type: 'FeatureCollection',
      features: [
        {
          type: 'Feature',
          properties: {
            testOpacity: 0.4,
          },
          geometry: {
            type: 'MultiPolygon',
            coordinates: [
              [
                [
                  [6000, 6000],
                  [6000, 7000],
                  [7000, 7000],
                  [7000, 6000],
                  [6000, 6000],
                ],
                [
                  [6300, 6300],
                  [6300, 6700],
                  [6700, 6700],
                  [6700, 6300],
                  [6300, 6300],
                ],
              ],
              [
                [
                  [5000, 5000],
                  [5000, 6000],
                  [6000, 6000],
                  [6000, 5000],
                  [5000, 5000],
                ],
              ],
            ],
          },
        },
      ],
    };

    const polygonLayer = new PolygonLayer()
      .source(polygonData)
      .shape('fill')
      .color('#f00')
      .style({
        opacity: 0.6,
      })
      .active(true);
```
---
title: åå¤„ç†æ¨¡å—
order: 10
---

åå¤„ç†ï¼ˆPost-Process Effectï¼‰æ˜¯ 3D æ¸²æŸ“å¸¸è§çš„å¤„ç†æ•ˆæœï¼Œæ˜¯ä¸€ç§å¯¹æ¸²æŸ“ä¹‹åçš„ç”»é¢è¿›è¡Œå†åŠ å·¥çš„æŠ€æœ¯ï¼Œä¸€èˆ¬ç”¨äºå®ç°å„ç§ç‰¹æ•ˆã€‚L7 çš„åå¤„ç†æ¨¡å—ä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›å¸¸è§çš„åå¤„ç†æ•ˆæœï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†æ ‡å‡†è§„èŒƒï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åå¤„ç†æ•ˆæœã€‚

ğŸŒŸ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨åå¤„ç†é€šå¸¸ä¼šäº§ç”Ÿé¢å¤–çš„æ€§èƒ½æ¶ˆè€—ï¼Œç”¨æˆ·åº”è¯¥æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µåˆç†ä½¿ç”¨åå¤„ç†ã€‚

## ä½¿ç”¨

```jsx
const layer = new LineLayer({
  enableMultiPassRenderer: true,
  passes: [
    [
      'bloom',
      {
        bloomBaseRadio: 0.8,
        bloomRadius: 2,
        bloomIntensity: 1
      }
    ]
  ]
}).source(data)
  .size('ELEV', h => [ h % 50 === 0 ? 1.0 : 0.5, (h - 1300) * 0.2 ])
  .shape('line')
  .scale('ELEV', {
    type: 'quantize'
  })
  .color('ELEV', [
    '#094D4A',
    ...
  ]);
scene.addLayer(layer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PIXmQ6m1C10AAAAAAAAAAAAAARQnAQ' />

### å¼€å¯åå¤„ç†

ä¸ºäº†å¼€å¯å›¾å±‚çš„åå¤„ç†èƒ½åŠ›ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆå§‹åŒ–å›¾å±‚çš„æ—¶å€™é…ç½® enableMultiPassRenderer ä¸º trueï¼ŒåŒæ—¶ä¼ å…¥è¯¥å›¾å±‚ä½œç”¨çš„å¤„ç†æ•ˆæœé…ç½®ã€‚

```javascript
let pointLayer = new PointLayer({
  zIndex: 1,
  enableMultiPassRenderer: false,
  passes: [
    [
      'bloom',
      {
        bloomBaseRadio: 0.95,
        bloomRadius: 4,
        bloomIntensity: 1.1,
      },
    ],
  ],
});
```

- enableMultiPassRenderer é…ç½®è¯¥å›¾å±‚æ˜¯å¦å¼€å§‹åå¤„ç†èƒ½åŠ›
- passes åå¤„ç†é…ç½®åˆ—è¡¨  
  ğŸŒŸ passes éœ€è¦æ ¹æ®ä¸€å®šçš„è§„åˆ™é…ç½®

### å•å›¾å±‚åå¤„ç†

ä¼ ç»Ÿçš„åå¤„ç†æ¸²æŸ“å¾€å¾€ä¼šå¯¹åœºæ™¯ä¸­æ‰€æœ‰çš„å¯¹è±¡åšç»Ÿä¸€çš„åå¤„ç†ï¼Œè€Œè®¸å¤šæ—¶å€™æˆ‘ä»¬åªéœ€è¦å¯¹åœºæ™¯ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹åšåå¤„ç†ã€‚L7 çš„åå¤„ç†æ¨¡å—å¤©ç„¶æ”¯æŒä»¥å›¾å±‚ä¸ºå•ä½è¿›è¡Œåå¤„ç†ï¼Œè¿™ä½¿çš„ç”¨æˆ·å¯¹ L7 åœºæ™¯å†…å®¹çš„å¤„ç†æœ‰æ›´é«˜çš„è‡ªç”±åº¦ã€‚

### update pass options

ç”¨æˆ·åœ¨åˆå§‹åŒ–å®Œå›¾å±‚å¯¹è±¡ä¹‹åï¼Œè‹¥æƒ³è°ƒæ•´åå¤„ç†æ•ˆæœçš„å‚æ•°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ style æ–¹æ³•

```javascript
layer.style({
  passes: [
    [
      'colorHalftone',
      {
        // æ›´æ–° cenrter çš„ä½ç½®
        center: [newX, newY],
      },
    ],
  ],
});
scene.render();
```

### setMultiPass(enableMultiPassRenderer: boolean, passes?: pass[])

ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·åˆ‡æ¢åå¤„ç†çš„çŠ¶æ€ï¼ˆå¼€å¯ã€å…³é—­åå¤„ç†ï¼‰ï¼Œæˆ‘ä»¬ä¸ºç”¨æˆ·æä¾›äº†ä¸“é—¨çš„æ–¹æ³•

```javascript
// å½“å‰å›¾å±‚å­˜åœ¨ multiPassï¼Œæˆ‘ä»¬éœ€è¦å…³é—­æ—¶
// ç›´æ¥å…³é—­
layer.setMultiPass(false);
// å…³é—­çš„åŒæ—¶æ¸…é™¤ passes
layer.setMultiPass(false, []);

// å½“å‰å›¾å±‚ä¸å­˜åœ¨ multiPassï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯æ—¶
// å›¾å±‚åˆå§‹åŒ–æ—¶å·²ç»ä¼ å…¥ passes
const layer = new PolygonLayer({
  zIndex: 0,
  enableMultiPassRenderer: false,
  passes: [
    [
      'bloom',
      {
        bloomBaseRadio: 0.5,
        bloomRadius: 20,
        bloomIntensity: 1,
      },
    ],
  ],
});
layer.setMultiPass(true);

// å›¾å±‚åˆå§‹åŒ–æ—¶æ²¡æœ‰ä¼ å…¥ passes
layer.setMultiPass(true, [
  [
    'bloom',
    {
      bloomRadius: 10,
      bloomIntensity: 1,
    },
  ],
]);
```

### åå¤„ç†é“¾è·¯

passes å¯ä»¥ä¼ å…¥å¤šç§åå¤„ç†ï¼Œæ™®é€šæ¸²æŸ“çš„ç»“æœæ˜¯ç¬¬ä¸€ä¸ªåå¤„ç†çš„è¾“å…¥ï¼Œå‰ä¸€ç§åå¤„ç†çš„è¾“å‡ºæ˜¯åä¸€ä¸ªåå¤„ç†çš„è¾“å…¥ï¼Œæœ€åçš„ç»“æœè¾“å‡ºåˆ°å±å¹•ã€‚

### é¢„åˆ¶çš„åå¤„ç†

L7 çš„åå¤„ç†æ¨¡å—é¢„ç½®äº†å‡ ç§åå¤„ç†æ•ˆæœï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨ passes ä¸­é…ç½®ä½¿ç”¨ã€‚

#### bloom

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*I3FCSo-gZR4AAAAAAAAAAAAAARQnAQ' />

```javascript
const bloomPass = [
  'bloom',
  {
    bloomBaseRadio: 0.5,
    bloomRadius: 20,
    bloomIntensity: 1,
  },
];
```

è¾‰å…‰åå¤„ç†

- bloomBaseRadio  
  è®¾ç½®ä¿æŒå›¾å½¢åŸæœ¬æ ·å¼çš„æ¯”ä¾‹ï¼Œå€¼åœ¨ 0 - 1 ä¹‹é—´ï¼Œå€¼ä¸º 1 æ—¶å®Œå…¨ä¿å­˜æœ¬èº«çš„æ ·å¼
- bloomRadius
  è®¾ç½® bloom çš„åŠå¾„ï¼Œå€¼è¶Šå¤§ï¼Œbloom èŒƒå›´è¶Šå¤§
- bloomIntensity
  è®¾ç½® bloom çš„å¼ºåº¦ï¼Œå€¼è¶Šå¤§ï¼Œè¾‰å…‰è¶Šå¼º

#### blurV/blurH

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NrNGSIQuZ4oAAAAAAAAAAAAAARQnAQ' />

å‚ç›´æ–¹å‘æ¨¡ç³Š/æ°´å¹³æ–¹å‘æ¨¡ç³Š

```javascript
const blurVPass = [
  'blurV',
  {
    blurRadius: 5,
  },
];
const blurHPass = [
  'blurH',
  {
    blurRadius: 5,
  },
];
```

- blurRadius
  è®¾ç½®æ¨¡ç³ŠåŠå¾„

#### colorHalftone

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*QstwSr4dj20AAAAAAAAAAAAAARQnAQ' />

colorHalftone

```javascript
const colorHalftonePass = [
  'colorHalftone',
  {
    angle: 0,
    size: 8,
    centerX: 0.5,
    centerY: 0.5,
  },
];
```

- angle
  è®¾ç½®è§’åº¦
- size
  è®¾ç½®å¤§å°
- centerX
  è®¾ç½®ä¸­å¿ƒç‚¹ X
- centerY
  è®¾ç½®ä¸­å¿ƒç‚¹ Y

#### hexagonalPixelate

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*IQOMQrbDQ5IAAAAAAAAAAAAAARQnAQ' />

å…­è¾¹å½¢åƒç´ 

```javascript
const hexagonalPixelatePass = [
  'hexagonalPixelate',
  {
    scale: 10,
    centerX: 0.5,
    centerY: 0.5,
  },
];
```

- scale
  è®¾ç½®ç¼©æ”¾
- centerX
  è®¾ç½®ä¸­å¿ƒç‚¹ X
- centerY
  è®¾ç½®ä¸­å¿ƒç‚¹ Y

#### ink

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*IpogQbe-5K4AAAAAAAAAAAAAARQnAQ' />

ink

```javascript
const inkPass = [
  'ink',
  {
    strength: 1,
  },
];
```

- strength
  è®¾ç½®å¼ºåº¦

#### noise

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*6lcVS7YFrvUAAAAAAAAAAAAAARQnAQ' />

å™ªå£°

```javascript
const noisePass = [
  'noise',
  {
    amount: 1,
  },
];
```

- amount
  è®¾ç½®å™ªç‚¹æ•°é‡

### è‡ªå®šä¹‰åå¤„ç†

ç”¨æˆ·é€šè¿‡ L7 å®šä¹‰çš„æ ‡å‡†å¯ä»¥è½»æ¾çš„è‡ªå®šä¹‰åå¤„ç†æ•ˆæœã€‚

```javascript
import { BasePostProcessingPass, PolygonLayer, Scene } from '@antv/l7';

interface IDotScreenEffectConfig {
  center: [number, number]; // pattern åœ†å¿ƒ
  angle: number; // dot æ—‹è½¬è§’åº¦
  size: number; // dot å°ºå¯¸
}

class DotScreenEffect extends BasePostProcessingPass<IDotScreenEffectConfig> {
  protected setupShaders() {
    this.shaderModuleService.registerModule('dotScreenEffect', {
      vs: this.quad,
      fs: `
      varying vec2 v_UV;

      uniform sampler2D u_Texture;
      uniform vec2 u_ViewportSize : [1.0, 1.0];
      uniform vec2 u_Center : [0.5, 0.5];
      uniform float u_Angle : 1;
      uniform float u_Size : 3;

      float pattern(vec2 texSize, vec2 texCoord) {
        float scale = 3.1415 / u_Size;
        float s = sin(u_Angle), c = cos(u_Angle);
        vec2 tex = texCoord * texSize - u_Center * texSize;
        vec2 point = vec2(
          c * tex.x - s * tex.y,
          s * tex.x + c * tex.y
        ) * scale;
        return (sin(point.x) * sin(point.y)) * 4.0;
      }
      vec4 dotScreen_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
        float average = (color.r + color.g + color.b) / 3.0;
        return vec4(vec3(average * 10.0 - 5.0 + pattern(texSize, texCoord)), color.a);
      }

      void main() {
        gl_FragColor = vec4(texture2D(u_Texture, v_UV));
        gl_FragColor = dotScreen_filterColor(gl_FragColor, u_ViewportSize, v_UV);
      }
      `,
    });
    const { vs, fs, uniforms } = this.shaderModuleService.getModule('dotScreenEffect');
    const { width, height } = this.rendererService.getViewportSize();
    return {
      vs,
      fs,
      uniforms: {
        ...uniforms,
        u_ViewportSize: [width, height],
      },
    };
  }
}

// æ³¨å†Œè‡ªå®šä¹‰åå¤„ç†æ•ˆæœ
scene.registerPostProcessingPass(DotScreenEffect, 'dotScreenEffect');
const layer = new PolygonLayer({
  enableMultiPassRenderer: true,
  passes: [
    [
      'dotScreenEffect',
      {
        size: 8,
        angle: 1,
      },
    ],
  ],
});
```
---
title: åå¤„ç†æ¨¡å—
order: 10
---

Post-Process Effect is a common processing effect in 3D rendering. It is a technology for reprocessing the rendered images and is generally used to achieve various special effects. L7's post-processing module provides users with some common post-processing effects, and also provides standard specifications to allow users to customize post-processing effects.

ğŸŒŸ It should be noted that using post-processing usually results in additional performance consumption. Users should use post-processing reasonably according to the actual situation of the project.

## use

```jsx
const layer = new LineLayer({
  enableMultiPassRenderer: true,
  passes: [
    [
      'bloom',
      {
        bloomBaseRadio: 0.8,
        bloomRadius: 2,
        bloomIntensity: 1
      }
    ]
  ]
}).source(data)
  .size('ELEV', h => [ h % 50 === 0 ? 1.0 : 0.5, (h - 1300) * 0.2 ])
  .shape('line')
  .scale('ELEV', {
    type: 'quantize'
  })
  .color('ELEV', [
    '#094D4A',
    ...
  ]);
scene.addLayer(layer);
```

<img width="60%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PIXmQ6m1C10AAAAAAAAAAAAAARQnAQ' />

### Turn on post-processing

In order to enable the post-processing capability of the layer, we need to configure enableMultiPassRenderer to true when initializing the layer, and also pass in the processing effect configuration of the layer.

```javascript
let pointLayer = new PointLayer({
  zIndex: 1,
  enableMultiPassRenderer: false,
  passes: [
    [
      'bloom',
      {
        bloomBaseRadio: 0.95,
        bloomRadius: 4,
        bloomIntensity: 1.1,
      },
    ],
  ],
});
```

* enableMultiPassRenderer configures whether the layer starts post-processing capabilities
* passes post-processing configuration list\
  ğŸŒŸ passes need to be configured according to certain rules

### Single layer post-processing

Traditional post-processing rendering often performs unified post-processing on all objects in the scene, but many times we only need to post-process a part of the scene. L7â€™s post-processing module naturally supports post-processing on a layer-by-layer basis, which gives users a higher degree of freedom in processing L7 scene content.

### update pass options

After the user initializes the layer object, if he wants to adjust the parameters of the post-processing effect, he can directly use the style method.

```javascript
layer.style({ passes: [ [ 'color Halftone', { // Update the position of center center: [newX, newY], }, ], ],
});
scene.render();
```

### setMultiPass(enableMultiPassRenderer: boolean, passes?: pass\[])

In order to facilitate users to switch the state of post-processing (on or off post-processing), we provide users with a special method

```javascript
// MultiPass exists in the current layer and we need to close it
//Close directly
layer.setMultiPass(false);
// Clear passes while closing
layer.setMultiPass(false, []);

// MultiPass does not exist in the current layer, when we need to enable it
// passes have been passed in during layer initialization
const layer = new PolygonLayer({
  zIndex: 0,
  enableMultiPassRenderer: false,
  passes: [
    [
      'bloom',
      {
        bloomBaseRadio: 0.5,
        bloomRadius: 20,
        bloomIntensity: 1,
      },
    ],
  ],
});
layer.setMultiPass(true);

// No passes are passed in when initializing the layer
layer.setMultiPass(true, [
  [
    'bloom',
    {
      bloomRadius: 10,
      bloomIntensity: 1,
    },
  ],
]);
```

### Post-processing link

passes can pass in a variety of post-processing. The result of ordinary rendering is the input of the first post-processing, the output of the previous post-processing is the input of the next post-processing, and the final result is output to the screen.

### Prefabricated post-processing

L7's post-processing module presets several post-processing effects, so users can configure and use them directly in passes.

#### bloom

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*I3FCSo-gZR4AAAAAAAAAAAAAARQnAQ' />

```javascript
const bloomPass = [
  'bloom',
  {
    bloomBaseRadio: 0.5,
    bloomRadius: 20,
    bloomIntensity: 1,
  },
];
```

Glow post-processing

* bloomBaseRadio\
  Set the proportion that maintains the original style of the graphic. The value is between 0 and 1. When the value is 1, the original style is completely preserved.
* bloomRadius
  Set the radius of bloom. The larger the value, the larger the bloom range.
* bloomIntensity
  Set the intensity of bloom. The larger the value, the stronger the glow.

#### blurv

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NrNGSIQuZ4oAAAAAAAAAAAAAARQnAQ' />

Vertical Blur/Horizontal Blur

```javascript
const blurVPass = [
  'blurV',
  {
    blurRadius: 5,
  },
];
const blurHPass = [
  'blurH',
  {
    blurRadius: 5,
  },
];
```

* blurRadius
  Set blur radius

#### colorHalftone

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*QstwSr4dj20AAAAAAAAAAAAAARQnAQ' />

colorHalftone

```javascript
const colorHalftonePass = [
  'colorHalftone',
  {
    angle: 0,
    size: 8,
    centerX: 0.5,
    centerY: 0.5,
  },
];
```

* angle
  Set angle
* size
  Set size
* centerX
  Set center point X
* centerY
  Set center point Y

#### hexagonalPixelate

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*IQOMQrbDQ5IAAAAAAAAAAAAAARQnAQ' />

hexagonal pixels

```javascript
const hexagonalPixelatePass = [
  'hexagonalPixelate',
  {
    scale: 10,
    centerX: 0.5,
    centerY: 0.5,
  },
];
```

* scale
  Set zoom
* centerX
  Set center point X
* centerY
  Set center point Y

#### ink

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*IpogQbe-5K4AAAAAAAAAAAAAARQnAQ' />

ink

```javascript
const inkPass = [
  'ink',
  {
    strength: 1,
  },
];
```

* strength
  Set intensity

#### noise

<img width="40%" style="display: block;margin: 0 auto;" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*6lcVS7YFrvUAAAAAAAAAAAAAARQnAQ' />

noise

```javascript
const noisePass = [
  'noise',
  {
    amount: 1,
  },
];
```

* amount
  Set the amount of noise

### Custom post-processing

Users can easily customize post-processing effects through L7-defined standards.

```javascript
import { BasePostProcessingPass, PolygonLayer, Scene } from '@antv/l7';

interface IDotScreenEffectConfig {
  center: [number, number]; // pattern åœ†å¿ƒ
  angle: number; // dot æ—‹è½¬è§’åº¦
  size: number; // dot å°ºå¯¸
}

class DotScreenEffect extends BasePostProcessingPass<IDotScreenEffectConfig> {
  protected setupShaders() {
    this.shaderModuleService.registerModule('dotScreenEffect', {
      vs: this.quad,
      fs: `
      varying vec2 v_UV;

      uniform sampler2D u_Texture;
      uniform vec2 u_ViewportSize : [1.0, 1.0];
      uniform vec2 u_Center : [0.5, 0.5];
      uniform float u_Angle : 1;
      uniform float u_Size : 3;

      float pattern(vec2 texSize, vec2 texCoord) {
        float scale = 3.1415 / u_Size;
        float s = sin(u_Angle), c = cos(u_Angle);
        vec2 tex = texCoord * texSize - u_Center * texSize;
        vec2 point = vec2(
          c * tex.x - s * tex.y,
          s * tex.x + c * tex.y
        ) * scale;
        return (sin(point.x) * sin(point.y)) * 4.0;
      }
      vec4 dotScreen_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
        float average = (color.r + color.g + color.b) / 3.0;
        return vec4(vec3(average * 10.0 - 5.0 + pattern(texSize, texCoord)), color.a);
      }

      void main() {
        gl_FragColor = vec4(texture2D(u_Texture, v_UV));
        gl_FragColor = dotScreen_filterColor(gl_FragColor, u_ViewportSize, v_UV);
      }
      `,
    });
    const { vs, fs, uniforms } = this.shaderModuleService.getModule('dotScreenEffect');
    const { width, height } = this.rendererService.getViewportSize();
    return {
      vs,
      fs,
      uniforms: {
        ...uniforms,
        u_ViewportSize: [width, height],
      },
    };
  }
}

// æ³¨å†Œè‡ªå®šä¹‰åå¤„ç†æ•ˆæœ
scene.registerPostProcessingPass(DotScreenEffect, 'dotScreenEffect');
const layer = new PolygonLayer({
  enableMultiPassRenderer: true,
  passes: [
    [
      'dotScreenEffect',
      {
        size: 8,
        angle: 1,
      },
    ],
  ],
});
```
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`imagelayer` çš„ `style` å‚æ•°åªæ”¯æŒ `opacity`ã€‚

| style   | ç±»å‹     | æè¿°         | é»˜è®¤å€¼ |
| ------- | -------- | ------------ | ------ |
| opacity | `number` | å›¾å½¢çš„é€æ˜åº¦ | `1`    |
---
title: Style
order: 4
---

<embed src="@/docs/common/style.md"></embed>

`imagelayer`of`style`Parameters only support`opacity`ã€‚

| style   | type     | describe             | default value |
| ------- | -------- | -------------------- | ------------- |
| opacity | `number` | Graphic transparency | `1`           |
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.zh.md"></embed>
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

`imagelayer` é€šè¿‡æä¾›åœ¨çº¿å›¾ç‰‡çš„ `url` æŒ‡å®šæ•°æ®ï¼Œé€šè¿‡ `extent` æŒ‡å®šå›¾ç‰‡åœ¨åœ°å›¾ä¸Šçš„ä½ç½®ã€‚

```js
layer.source(
  'https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg',
  {
    parser: {
      type: 'image',
      extent: [121.168, 30.2828, 121.384, 30.4219],
    },
  },
);
```
---
title: Source
order: 2
---

<embed src="@/docs/common/style.md"></embed>

`imagelayer`By providing online pictures`url`Specify data via`extent`Specify the image's location on the map.

```js
layer.source(
  'https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg',
  {
    parser: {
      type: 'image',
      extent: [121.168, 30.2828, 121.384, 30.4219],
    },
  },
);
```
---
title: Options
order: 1
---

<embed src="@/docs/common/style.md"></embed>

<embed src="@/docs/common/layer/options.zh.md"></embed>
---
title: ImageLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

When adding a picture to the map, you need to specify the latitude and longitude range of the picture and the data parsing type.

<div>
  <div style="width:40%; margin: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8MtWSIGTN8UAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

```javascript
const layer = new ImageLayer({});
layer.source(
  'https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg',
  {
    parser: {
      type: 'image',
      extent: [121.168, 30.2828, 121.384, 30.4219],
    },
  },
);
```
---
title: ImageLayer
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

å°†å›¾ç‰‡æ·»åŠ åˆ°åœ°å›¾ä¸Šï¼ŒåŒæ—¶éœ€è¦æŒ‡å®šå›¾ç‰‡çš„ç»çº¬åº¦èŒƒå›´å’Œæ•°æ®è§£æç±»å‹ã€‚

<div>
  <div style="width:40%; margin: 16px;">
    <img  width="80%" alt="æ¡ˆä¾‹" src='https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8MtWSIGTN8UAAAAAAAAAAAAAARQnAQ'>
  </div>
</div>

```javascript
const layer = new ImageLayer({});
layer.source(
  'https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg',
  {
    parser: {
      type: 'image',
      extent: [121.168, 30.2828, 121.384, 30.4219],
    },
  },
);
```
---
title: DebugService
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## ç®€ä»‹

L7 åœ¨é€šè¿‡ debugService çš„å½¢å¼å¯¹å¤–æä¾›è°ƒè¯•æœåŠ¡ï¼Œé€šè¿‡ debugService ç”¨æˆ·å¯ä»¥è·å¾—ä¸€äº›æœ‰åŠ©äºæ€§èƒ½ç›‘æ§çš„ä¿¡æ¯ã€‚

### serEnable(enable: boolean)

ç”¨æˆ·å¯ä»¥é€šè¿‡ scene åˆå§‹åŒ–çš„æ—¶å€™å’Œ debugService æä¾›çš„æ–¹æ³•æ¥å¼€å¯ç›‘æ§ã€‚

```js
// å¯ä»¥åœ¨ scene åˆå§‹åŒ–çš„æ—¶å€™æ‰“å¼€ç›‘æ§
const scene = new Scene({
  debug: true, // é»˜è®¤ä¸º false
});

// å¯ä»¥é€šè¿‡ debugService å•ç‹¬æ§åˆ¶ç›‘æ§
const debugService = scene.getDebugService();
debugService.serEnable(true); // å¼€å¯ç›‘æ§
```

### getLog(field: undefined | string | string[]): ILog[] | ILog | undefined

ç”¨æˆ·é€šè¿‡ getLog æ–¹æ³•è·å–æ—¥å¿—ï¼Œé€šè¿‡ä¼ å…¥ä¸é€šçš„å‚æ•°ï¼Œç”¨æˆ·å¯ä»¥å‡†ç¡®è·å¾—è‡ªå·±éœ€è¦çš„æ—¥å¿—å†…å®¹ã€‚

```js
// è·å–åœ°å›¾åˆå§‹åŒ–æ—¥å¿—
debugService.getLog('map'); // map ä¸ºå›ºå®šå€¼

// åœ¨è·å–å›¾å±‚çš„åˆ›å»ºæ—¥å¿—æ—¶ï¼Œä¸ºäº†è·å–åˆ°å…¨éƒ¨çš„æ•°æ®ï¼Œéœ€è¦åœ¨ layer åˆ›å»ºå®Œæˆä¹‹åè·å–
layer.on('inited', () => {
  debugService.getLog(layer.id); // è·å–å•ä¸ªå›¾å±‚åˆ›å»ºæ—¥å¿—
});

layerAllLoad([pointLayer1, pointLayer2], () => {
  // layerAllLoad è‡ªå·±å®ç°ç›‘å¬
  debugService.getLog([pointLayer1.id, pointLayer2.id]); // è·å–å¤šä¸ªå›¾å±‚åˆ›å»ºæ—¥å¿—
});

// è·å–æ‰€æœ‰æ—¥å¿—
debugService.getLog();
```

- é€šè¿‡ getLog æ–¹æ³•å¯ä»¥è·å¾—å¦‚ä¸‹çš„æ—¥å¿—ä¿¡æ¯

```js
const enum IDebugLog {
  MapInitStart = 'mapInitStart', 			// åœ°å›¾åˆå§‹åŒ–æ—¶é—´

  LayerInitStart = 'layerInitStart',	// å›¾å±‚åˆå§‹åŒ–å¼€å§‹æ—¶é—´
  LayerInitEnd = 'layerInitEnd',			// å›¾å±‚åˆå§‹åŒ–ç»“æŸæ—¶é—´

  SourceInitStart = 'sourceInitStart',// souce åˆå§‹åŒ–å¼€å§‹æ—¶é—´
  SourceInitEnd = 'sourceInitEnd',		// souce åˆå§‹åŒ–ç»“æŸæ—¶é—´

  // scaleï¼šå°†æ•°æ®è¿›è¡Œ scale æ˜ å°„å¤„ç† => å°†æ•°æ®ä»å®šä¹‰åŸŸè½¬åŒ–åˆ°å€¼åŸŸ
  // å¦‚ï¼š layer.size('v', [1, 10]);
  //  		æ ¹æ®å­—æ®µ v è¡¨ç¤ºçš„å®šä¹‰åŸŸå°† size çš„ç»“æœæ˜ å°„åˆ° 1 ï½ 10 ä¹‹é—´
  ScaleInitStart = 'scaleInitStart',	// scale åˆå§‹åŒ–å¼€å§‹æ—¶é—´
  ScaleInitEnd = 'scaleInitEnd',			// scale åˆå§‹åŒ–ç»“æŸæ—¶é—´

  // mappingï¼šæ„å»ºæ¸²æŸ“æ•°æ®
  MappingStart = 'mappingStart',			// mapping åˆå§‹åŒ–å¼€å§‹æ—¶é—´
  MappingEnd = 'mappingEnd',					// mapping åˆå§‹åŒ–ç»“æŸæ—¶é—´

  // build modelï¼šæ„å»ºæ¸²æŸ“ä½¿ç”¨çš„ç¨‹åºå¯¹è±¡ã€æ„å»ºç½‘æ ¼ã€çº¹ç†ç­‰
  BuildModelStart = 'buildModelStart',// souce åˆå§‹åŒ–å¼€å§‹æ—¶é—´
  BuildModelEnd = 'buildModelEnd',		// souce åˆå§‹åŒ–ç»“æŸæ—¶é—´
}
```

### renderDebug(enable: boolean)

debugService æä¾›äº†ç›‘å¬å›¾å±‚æ¸²æŸ“æ—¶é—´çš„ä¾¿æ·æ–¹æ³•, é€šè¿‡ renderDebug å¼€å¯ã€‚

### on(name: string, options: any)

debugService æ”¯æŒäº‹ä»¶ç›‘å¬ï¼Œå¸¸ç”¨ä¸ç›‘å¬æ¸²æŸ“ã€‚

```js
debugService.on('renderEnd', renderInfo => {
  const {
    renderUid,			// å½“å‰å¸§æ¸²æŸ“å”¯ä¸€ç¼–å·
    renderStart,		// å½“å‰å¸§æ¸²æŸ“å¼€å§‹æ—¶é—´
    renderEnd,			// å½“å‰å¸§æ¸²æŸ“ç»“æŸæ—¶é—´
    renderDuration	// å½“å‰å¸§æ¸²æŸ“æ—¶é—´
  } = renderInfo;
  ...
}
```

### off(name: string, func: Function)

debugService äº‹ä»¶å–æ¶ˆç›‘å¬ã€‚
---
title: DebugService
order: 0
---

<embed src="@/docs/common/style.md"></embed>

## Introduction

L7 provides external debugging services in the form of debugService. Through debugService, users can obtain some information that is helpful for performance monitoring.

### serEnable(enable: boolean)

Users can enable monitoring through the methods provided by debugService during scene initialization.

```js
// Monitoring can be turned on during scene initialization
const scene = new Scene({
  debug: true, //default is false
});

// Monitoring can be controlled individually through debugService
const debugService = scene.getDebugService();
debugService.serEnable(true); // Enable monitoring
```

### getLog(field: undefined | string | string\[]): ILog\[] | Log | undefined

Users obtain logs through the getLog method. By passing in different parameters, users can accurately obtain the log content they need.

```js
// Get map initialization log
debugService.getLog('map'); // map is a fixed value

// When obtaining the creation log of the layer, in order to obtain all the data, it needs to be obtained after the layer creation is completed.
layer.on('initiated', () => {
  debugService.getLog(layer.id); // Get a single layer creation log
});

layerAllLoad([pointLayer1, pointLayer2], () => {
  // layerAllLoad implements monitoring by itself
  debugService.getLog([pointLayer1.id, pointLayer2.id]); // Get multiple layer creation logs
});

// Get all logs
debugService.getLog();
```

* The following log information can be obtained through the getLog method

```js
const enum IDebugLog {
  MapInitStart = 'mapInitStart', // Map initialization time

  LayerInitStart = 'layerInitStart', //Layer initialization start time
  LayerInitEnd = 'layerInitEnd', //Layer initialization end time

  SourceInitStart = 'sourceInitStart', // source initialization start time
  SourceInitEnd = 'sourceInitEnd', // souce initialization end time

  // scale: perform scale mapping on the data => convert the data from the definition domain to the value domain
  // Such as: layer.size('v', [1, 10]);
  //Map the result of size to between 1 and 10 according to the domain represented by field v
  ScaleInitStart = 'scaleInitStart', // scale initialization start time
  ScaleInitEnd = 'scaleInitEnd', // scale initialization end time

  //mapping: construct rendering data
  MappingStart = 'mappingStart', // mapping initialization start time
  MappingEnd = 'mappingEnd', // mapping initialization end time

  // build model: build program objects used for rendering, build meshes, textures, etc.
  BuildModelStart = 'buildModelStart',// souce initialization start time
  BuildModelEnd = 'buildModelEnd', // souce initialization end time
}
```

### renderDebug(enable: boolean)

debugService provides a convenient method to monitor the rendering time of a layer, which is enabled through renderDebug.

### on(name: string, options: any)

debugService supports event monitoring and is commonly used to monitor rendering.

```js
debugService.on('renderEnd', renderInfo => {
  const {
    renderUid, // The unique number of the current frame rendering
    renderStart, // current frame rendering start time
    renderEnd, // current frame rendering end time
    renderDuration // current frame rendering time
  } = renderInfo;
  ...
}
```

### off(name: string, func: Function)

debugService event cancels listening.
