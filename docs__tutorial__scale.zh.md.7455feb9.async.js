"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[4076],{68370:function(e,a,n){n.r(a);n(35164),n(43801),n(6974),n(27068),n(12520);var t=n(7808),l=n(19480),i=(n(64700),n(12318),n(99500)),r=n(13273),s=n(92379),c=n(63472),d=n(651);a.default=function(){return(0,d.jsx)(i.dY,{children:(0,d.jsx)(s.Suspense,{fallback:(0,d.jsx)(r.Z,{}),children:(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"markdown",children:[(0,d.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,d.jsxs)("h2",{id:"scale-简介",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#scale-简介",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Scale 简介"]}),(0,d.jsx)("p",{children:c.texts[0].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*AOIvTpmPOmgAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Scale"})}),(0,d.jsxs)("h2",{id:"scale-中的两个重要概念",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#scale-中的两个重要概念",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Scale 中的两个重要概念:"]}),(0,d.jsx)("p",{children:c.texts[1].value}),(0,d.jsx)("p",{children:c.texts[2].value}),(0,d.jsx)("p",{children:c.texts[3].value}),(0,d.jsx)("p",{children:c.texts[4].value}),(0,d.jsxs)(l.Z,{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:c.texts[5].value}),(0,d.jsx)("th",{children:c.texts[6].value})]})}),(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:c.texts[7].value}),(0,d.jsx)("td",{children:c.texts[8].value})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:c.texts[9].value}),(0,d.jsx)("td",{children:c.texts[10].value})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:c.texts[11].value}),(0,d.jsx)("td",{children:c.texts[12].value})]})]})]}),(0,d.jsxs)("h2",{id:"l7-scale",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#l7-scale",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"L7 Scale"]}),(0,d.jsx)("p",{children:c.texts[13].value}),(0,d.jsx)("p",{children:c.texts[14].value}),(0,d.jsx)("p",{children:c.texts[15].value}),(0,d.jsx)("p",{children:c.texts[16].value}),(0,d.jsx)("p",{children:c.texts[17].value}),(0,d.jsx)("p",{children:c.texts[18].value}),(0,d.jsxs)("h2",{id:"cat-枚举",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#cat-枚举",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Cat 枚举"]}),(0,d.jsx)("p",{children:c.texts[19].value}),(0,d.jsx)(t.Z,{lang:"tsx",children:c.texts[20].value}),(0,d.jsx)("p",{children:c.texts[21].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*rO53SYNk8hgAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale Cat映射"})}),(0,d.jsx)("p",{children:c.texts[22].value}),(0,d.jsx)(t.Z,{children:c.texts[23].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kyP2RpUXdGUAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Cat "})}),(0,d.jsxs)("h2",{id:"linear-连续线性",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#linear-连续线性",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Linear 连续线性"]}),(0,d.jsx)("p",{children:c.texts[24].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z_rGRr-jgI0AAAAAAAAAAAAADmJ7AQ/original'",alt:"L7 Scale 线性"})}),(0,d.jsx)(t.Z,{lang:"tsx",children:c.texts[25].value}),(0,d.jsx)("p",{children:c.texts[26].value}),(0,d.jsx)(t.Z,{lang:"ts",children:c.texts[27].value}),(0,d.jsxs)("h2",{id:"quantize-连续等间距",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#quantize-连续等间距",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"quantize 连续等间距"]}),(0,d.jsx)("p",{children:c.texts[28].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*YmwwQ5L-d7QAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Scale 连续等间距"})}),(0,d.jsx)("p",{children:c.texts[29].value}),(0,d.jsx)(t.Z,{lang:"tsx",children:c.texts[30].value}),(0,d.jsx)("p",{children:c.texts[31].value}),(0,d.jsx)(t.Z,{lang:"ts",children:c.texts[32].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*N61_Q6-U7jIAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale quantize"})}),(0,d.jsxs)("h2",{id:"quantile-连续等分位",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#quantile-连续等分位",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"quantile 连续等分位"]}),(0,d.jsx)("p",{children:c.texts[33].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2SFpSLRD3yYAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale quantile"})}),(0,d.jsx)("p",{children:c.texts[34].value}),(0,d.jsx)(t.Z,{lang:"tsx",children:c.texts[35].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*EMcjSrYe1l0AAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Scale quantile"})}),(0,d.jsxs)("h2",{id:"threshold-自定义分类",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#threshold-自定义分类",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"threshold 自定义分类"]}),(0,d.jsx)("p",{children:c.texts[36].value}),(0,d.jsx)("p",{children:c.texts[37].value}),(0,d.jsx)(t.Z,{lang:"tsx",children:c.texts[38].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*e1YyRKELsjwAAAAAAAAAAAAADmJ7AQ/original",alt:" L7 Scale threshold"})}),(0,d.jsxs)("h2",{id:"diverging-离散分类",children:[(0,d.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#diverging-离散分类",children:(0,d.jsx)("span",{className:"icon icon-link"})}),"diverging 离散分类"]}),(0,d.jsx)("p",{children:c.texts[39].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*8anRRLJNu6YAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 diverging"})}),(0,d.jsx)("p",{children:c.texts[40].value}),(0,d.jsx)(t.Z,{lang:"ts",children:c.texts[41].value}),(0,d.jsx)("p",{children:(0,d.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*4rcDQIRdRdEAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale diverging"})})]})})})})}},53980:function(e,a,n){n.d(a,{G:function(){return x}});var t=n(97502),l=n(99500),i=(n(92379),"d8ttRdvsaeIwjsXPUrV3"),r="YWbojl5X0YI9jR8WQ6vF",s="nHrVcWv4dgQMNfb_O3dk",c="kLT5PvcX6twH_8KM1K4Y",d="HdNrro6Kmg0q9gTP4YLJ",o=n(651);var x=function(e){var a,n=e.isPlayground,x=e.exampleId,u=e.header,h=e.error;return(0,o.jsxs)("div",{className:i,children:[n?null:(0,o.jsx)("div",{className:r,children:u}),(0,o.jsxs)("div",{className:s,children:[(0,o.jsx)("div",{id:"playgroundScriptContainer_".concat(x),className:c}),h?(0,o.jsx)(t.ZP,{className:d,status:"error",title:(0,o.jsx)(l._H,{id:"演示代码报错，请检查"}),subTitle:(0,o.jsx)("pre",{children:(a=h,(a.reason?a.reason:a.message?a.message:a).toString())})}):null]})]})}},19298:function(e,a,n){n.d(a,{S:function(){return Z}});var t=n(28633),l=n.n(t),i=n(5572),r=n(49377),s=n(23622),c=n(99500),d=n(35510),o=n(92379),x=n(4667),u=n(53980),h=n(8131),p=n(95913),A=n(32686),m=n(29318),j=n(52486),v=n(65879),g=n.n(v),I=n(72916),f=n(54014),y={},b=n(651),q=function(e){var a=e.title,n=e.relativePath,t=e.githubUrl,l=(0,c.WF)().themeConfig.relativePath;(0,f.KI)(),new(g())(location.href);return(0,b.jsx)(p.Z,{ghost:!1,title:a,subTitle:(0,b.jsx)(A.Z,{title:(0,b.jsx)(c._H,{id:"在 GitHub 上编辑"}),children:(0,b.jsx)("a",{href:function(e){var a=e.githubUrl,n=e.relativePath;e.prefix;return"".concat(a,"/edit/master/").concat(l,"/examples/").concat(n)}({githubUrl:t,relativePath:n,prefix:"examples"}),target:"_blank",rel:"noopener noreferrer",className:y.editOnGtiHubButton,children:(0,b.jsx)(h.Z,{})})}),extra:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Z,{split:(0,b.jsx)(j.Z,{type:"vertical"})}),(0,b.jsx)(I.Z,{})]})})},w=n(24325),S=n.n(w),_=n(72725);function L(e,a,n,t){var l=function(e){var a=new Map;return(0,_.Z)(e,(function(e){(0,_.Z)(e.examples,(function(n){(0,_.Z)(n.demos,(function(t){a.set("".concat(e.id,"-").concat(n.id,"-").concat(t.id),S()(S()({},t),{},{relativePath:"".concat(e.id,"/").concat(n.id,"/demo/").concat(t.filename),targetExample:n,targetTopic:e}))}))}))})),a}(e);return l.get("".concat(a,"-").concat(n,"-").concat(t))}var Z=function(e){var a=e.exampleTopics,n=e.topic,t=e.example,h=e.demo,p=e.size,A=e.replaceId,m=e.isPlayground,j=e.notFound,v=void 0===j?(0,b.jsx)(i.T,{}):j,g=L(a,n,t,h);if(!g)return v;var I=g.title,f=g.source,y=g.relativePath,w=(0,c.WF)().themeConfig,S=w.githubUrl,_=w.playground,Z=(0,o.useState)(),k=l()(Z,2),N=k[0],D=k[1],Q=(0,o.useState)(!1),z=l()(Q,2),P=(z[0],z[1]),R=((0,c.bU)(),(0,b.jsx)(q,{title:(0,s.ic)(I),relativePath:y,githubUrl:S})),C="".concat(n,"_").concat(t,"_").concat(h);return(0,b.jsxs)(x.Z,{split:"vertical",defaultSize:"".concat(100*(1-p),"%"),minSize:100,children:[(0,b.jsx)(u.G,{exampleId:C,error:N,header:R,isPlayground:m}),(0,b.jsx)(r.p,{exampleId:C,source:f,relativePath:y,replaceId:A,onError:D,onFullscreen:P,onDestroy:d.Z,onReady:d.Z,playground:_})]})}},72916:function(e,a,n){var t=n(35957),l=(n(92379),n(48229)),i=n(651),r=function(){return(0,i.jsx)("img",{width:16,style:{margin:"5px"},src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*iDSwRorar_QAAAAAAAAAAAAADmJ7AQ/original",alt:"react 组件库"})};a.Z=function(e){e.readingTime;return(0,i.jsxs)("div",{style:{float:"right",display:"flex",gap:"10px"},children:[(0,i.jsx)(l.Z,{href:"https://github.com/antvis/L7/issues/new","data-icon":"octicon-issue-opened","data-size":"large","data-show-count":"true","aria-label":"Issue antvis/l7 on GitHub",children:"反馈问题"}),(0,i.jsx)(l.Z,{href:"https://github.com/antvis/l7","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star antvis/l7 on GitHub",children:"关注项目"}),(0,i.jsx)(t.Z,{icon:(0,i.jsx)(r,{}),style:{fontWeight:600,height:"30px",padding:"1px 6px"},target:"blank",href:"https://larkmap.antv.antgroup.com/components/lark-map",children:"React 组件库"})]})}},54014:function(e,a,n){function t(){for(var e=window.location.pathname.replace("/docs/","/").replace("/zh/","/").split("/"),a=[],n=e.length;n>0;n--){var t=e.slice(0,n);a.push(t.join("/"))}return a}function l(){var e=window.location.pathname;e=(e=e.replace("/zh/","/")).replace("/docs","");var a=window.location.pathname.startsWith("/en")?/(\/[A-z]*\/?\/[A-z]*)\/?/:/(\/[A-z]*)\/?/;return e.match(a)[1]}function i(e){var a=[],n=e[0];for(a.push(n.key);n.children;)n=n.children[0],a.push(n.key);return a[a.length-1]}function r(e,a,n){return e.includes("/docs/")||e.includes("/zh/")?e.replace("/docs/","/").replace("/zh/","/"):n.every((function(a){var n="".concat(a).toLowerCase();return![n,"".concat(n,"/")].includes(e.toLowerCase())}))?a:e}n.d(a,{Gd:function(){return r},KI:function(){return l},Xd:function(){return t},iX:function(){return i}})},63472:function(e,a,n){n.r(a),n.d(a,{texts:function(){return t}});const t=[{value:"Scale 度量是用于将地图数据值（数字、日期、类别等数据）转成视觉变量（颜色、大小、形状）。Scale 是数据可视化的基本元素，因为它们决定了数据视觉编码的方式。L7 目前支持连续、离散、枚举类型等常用的 Scale。",paraId:0,tocIndex:0},{value:"Range 和 Domain",paraId:1,tocIndex:1},{value:"Domain: 地图数据值的定义区间",paraId:2,tocIndex:1},{value:"Range：视觉值的区间定义",paraId:3,tocIndex:1},{value:"不同 Scale 的差异在于 Domain-> Range 的转换方法不同",paraId:4,tocIndex:1},{value:"数据类",paraId:5,tocIndex:1},{value:"度量类型",paraId:5,tocIndex:1},{value:"连续",paraId:5,tocIndex:1},{value:"linear、log、pow",paraId:5,tocIndex:1},{value:"连续分类",paraId:5,tocIndex:1},{value:"quantize quantile,threshold,diverging",paraId:5,tocIndex:1},{value:"分类 枚举",paraId:5,tocIndex:1},{value:"cat",paraId:5,tocIndex:1},{value:"在使用 L7 过程中，默认情况下不需要进行 Scale 的配置，因为 L7 会根据数据类型对 scale 推断，推断过程如下：",paraId:6,tocIndex:2},{value:"查看用户是否设置了 Scale，如果没有:",paraId:7,tocIndex:2},{value:"判断字段的第一条数据的字段类型，如果数据中不存在对应的字段：",paraId:8,tocIndex:2},{value:"认为是常量为固定值",paraId:9,tocIndex:2},{value:"如果是数字则为 'linear';",paraId:10,tocIndex:2},{value:"如果是字符串类型 'cat';",paraId:11,tocIndex:2},{value:"Cat 指枚举类型，用于展示分类数据，比如农作物种植区分布图，水稻、玉米、大豆等不同类别需要映射为不同的颜色。在 L7 如果判断字段的值为字符串，将认为是 Cat 类型并自动获取类型的唯一值，设置为 domain 。这样三种作物就会被一一映射成对应的颜色。",paraId:12,tocIndex:3},{value:"\nconst data = [\n   {\n   type:'A',\n   x: 110,\n   y:30\n },\n {\n   type:'B',\n   x: 110,\n   y:32\n },\n {\n   type:'C',\n   x: 110,\n   y:31\n }\n ,{\n   type:'D',\n   x: 111,\n   y:33\n }，\n ,{\n   type:'E',\n   x: 112,\n   y:30\n }\n ,{\n   type:'F',\n   x: 110,\n   y:30\n }\n]\nlayer.color('type',['red','white','blue','yellow'])\n",paraId:13,tocIndex:3},{value:"如上面的代码所示，图层没有设置 Scale, L7 根据第一个数据\"A\"的类型 ,推断为枚举类型。同时取出该字段的去重后的所有值 ['A','B','C','D','E','F'] 设置为 scale 的 domain, 那么 range 就是对应的颜色 ['red','white','blue','yellow']。",paraId:14,tocIndex:3},{value:"如果不设置 domain，L7 内部会自动计算 domain，domain 顺序跟数据顺序相关。如果希望固定domain 可自己设置 domain。domain 数值 和 range数值 一一对应。",paraId:15,tocIndex:3},{value:"\nlayer.scale('type', {\n  type: 'cat',\n  domain: ['B', 'A', 'C', 'D'],\n});\nlayer.color('type', ['red', 'white', 'blue', 'yellow']);\n\n",paraId:16,tocIndex:3},{value:"线性是连续数据的映射方法，数据和视觉值是通过线性方法计算的。如数据范围domain [0,1000] 线性映射到 range [red,blue] 渐变色，就是依据线性函完成一一转换。",paraId:17,tocIndex:4},{value:"layer.color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494']);\n",paraId:18,tocIndex:4},{value:"对于连续型\n数据 L7 默认会设置为 linear, domain为数据的min、max值。颜色会根据 range 颜色生成渐变色。linear\n默认可不设置 domain 区间",paraId:19,tocIndex:4},{value:"layer.scale('value', {\n  type: 'linear',\n  domain: [5, 100], // 可定义domain,也可以不设置，自定根据数据计算\n});\n",paraId:20,tocIndex:4},{value:"等间距分类会根据属性值范围划分为若干个大小相等的子范围。相等间隔最适用于常见的数据范围，如百分比和温度。这种方法强调的是某个属性值相对于其他值的量。",paraId:21,tocIndex:5},{value:"等间距分类只与数据 mix、max 有关，如果没有设置 domain,将自动计算数据的 min、max 进行分段，分段个数依据 range 颜色的个数。等间距会出现空类，而且每个分类要素分布不均匀。",paraId:22,tocIndex:5},{value:"layer.color('type', ['red', 'white', 'blue', 'yellow']);\n",paraId:23,tocIndex:5},{value:"你也可以自定义 domain",paraId:24,tocIndex:5},{value:"layer.scale('value', {\n  type: 'quantize',\n  domain: [5, 100],\n});\n\nlayer.color('type', ['red', 'white', 'blue', 'yellow']);\n",paraId:25,tocIndex:5},{value:"等分位要求每个分类区间都含有相等数量的要素。分位数为每个分类分配相等数量数据值，不存在空类，也不存在值过多或过少的类。",paraId:26,tocIndex:6},{value:"等分位与数据的分布相关，需要拿到全量数据才能计算，因此等分位的 scale 不能单独设置 domain，只能自动计算。",paraId:27,tocIndex:6},{value:"layer.scale('value', {\n  type: 'quantile',\n});\n\nlayer.color('value', ['red', 'white', 'blue', 'yellow']);\n",paraId:28,tocIndex:6},{value:"自定义分类可以设定任意分类区间映射到对于视觉变量。domain 仍然是连续的，并根据提供的domain 进行分类。range 属性必须有 N+1 个元素，其中 N 是 domain 的个数。",paraId:29,tocIndex:7},{value:"threshold 为自定义分段，在使用时必须为 Scale 设置 domain, domain可以依据需求任意设置。",paraId:30,tocIndex:7},{value:"layer\n  .scale('rate', {\n    type: 'threshold',\n    domain: [3, 6, 8, 10],\n  })\n  .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494']);\n",paraId:31,tocIndex:7},{value:"离散分类通常与两种相反的色调一起使用，以显示从负值到中心到正值的变化。这些类型的地图显示了彼此相关的值的大小。",paraId:32,tocIndex:8},{value:"diverging 如果没有设置 domain 会自动根据数据计算min、middle、max 三个值作为domain。range 至少需要设置三个颜色，形成双极色带。",paraId:33,tocIndex:8},{value:"layer.scale('rate', {\n         type: 'diverging'\n         domain: [3, 6, 8, 10], //  the input domain and output range of a diverging scal\n       })\n       .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])\n",paraId:34,tocIndex:8}]}}]);