"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[8407],{43502:function(a,e,n){n.r(e),n.d(e,{texts:function(){return d}});const d=[{value:"L7 Layer 接口设计遵循图形语法，所有图层都继承于基类（baseLayer）。",paraId:0,tocIndex:0},{value:"语法示例",paraId:1,tocIndex:0},{value:"const layer = new BaseLayer(option) // option - 传入构造函数的参数对象，提供 layer 的初始状态\n  .source(...)    // 传入图层需要的数据以及相关的解析器\n  .filter()       // 数据过滤方法\n  .shape(...)     // 为图层指定具体的形状，如：circle/triangle 等\n  .color(...)     // 指定图层的颜色配置\n  .texture(...)   // 指定图层引用的纹理\n  .size(...)      // 设置图层元素的大小\n  .animate(...)   // 设置图层元素的动画模式\n  .active(...)    // 指定图层元素是否支持划过选中\n  .select(...)    // 指定图层元素是否支持点击选中\n  .style(...);    // 指定图层自定义样式的配置\n\nscene.addLayer(layer);\n",paraId:2,tocIndex:0},{value:" ",paraId:3,tocIndex:2},{value:"string",paraId:3,tocIndex:2},{value:" ",paraId:3,tocIndex:2},{value:"optional",paraId:3,tocIndex:2},{value:" ",paraId:3,tocIndex:2},{value:"default:",paraId:3,tocIndex:2},{value:" 自动数字编号",paraId:3,tocIndex:2},{value:"设置图层名称,可根据 name 获取 layer",paraId:4,tocIndex:2},{value:"scene.getLayerByName(name);\n",paraId:5,tocIndex:2},{value:" ",paraId:6,tocIndex:3},{value:"bool",paraId:6,tocIndex:3},{value:" ",paraId:6,tocIndex:3},{value:"optional",paraId:6,tocIndex:3},{value:" ",paraId:6,tocIndex:3},{value:"default:",paraId:6,tocIndex:3},{value:" true",paraId:6,tocIndex:3},{value:"图层是否可见",paraId:7,tocIndex:3},{value:" ",paraId:8,tocIndex:4},{value:"int",paraId:8,tocIndex:4},{value:" ",paraId:8,tocIndex:4},{value:"optional",paraId:8,tocIndex:4},{value:" ",paraId:8,tocIndex:4},{value:"default:",paraId:8,tocIndex:4},{value:" 0",paraId:8,tocIndex:4},{value:"图层绘制顺序，数值大绘制在上层，可以控制图层绘制的上下层级",paraId:9,tocIndex:4},{value:"L7 采用队列渲染的机制，所有的图层在内部保存在一个数组中，每一帧的渲染会将图层数组按照 zIndex 的值进行排序，然后遍历数组，将符合条件的图层渲染到场景中",paraId:10,tocIndex:4},{value:" ",paraId:11,tocIndex:5},{value:"number",paraId:11,tocIndex:5},{value:" ",paraId:11,tocIndex:5},{value:"optional",paraId:11,tocIndex:5},{value:" ",paraId:11,tocIndex:5},{value:"default:",paraId:11,tocIndex:5},{value:" Mapbox （0-24） 高德 （2-19)",paraId:11,tocIndex:5},{value:"图层显示最小缩放等级",paraId:12,tocIndex:5},{value:" ",paraId:13,tocIndex:6},{value:"number",paraId:13,tocIndex:6},{value:" ",paraId:13,tocIndex:6},{value:"optional",paraId:13,tocIndex:6},{value:" ",paraId:13,tocIndex:6},{value:"default:",paraId:13,tocIndex:6},{value:" Mapbox （0-24） 高德 （2-19)",paraId:13,tocIndex:6},{value:"图层显示最大缩放等级",paraId:14,tocIndex:6},{value:" ",paraId:15,tocIndex:7},{value:"bool",paraId:15,tocIndex:7},{value:" ",paraId:15,tocIndex:7},{value:"optional",paraId:15,tocIndex:7},{value:" ",paraId:15,tocIndex:7},{value:"default:",paraId:15,tocIndex:7},{value:" false",paraId:15,tocIndex:7},{value:"layer 初始化完成之后，地图是否自动缩放到图层范围",paraId:16,tocIndex:7},{value:" ",paraId:17,tocIndex:8},{value:"bool",paraId:17,tocIndex:8},{value:" ",paraId:17,tocIndex:8},{value:"optional",paraId:17,tocIndex:8},{value:" ",paraId:17,tocIndex:8},{value:"default:",paraId:17,tocIndex:8},{value:" 0",paraId:17,tocIndex:8},{value:"图层拾取缓存机制，如 1px 宽度的线鼠标很难拾取(点击)到, 通过设置该参数可扩大拾取的范围（放大图层对象的尺寸）",paraId:18,tocIndex:8},{value:" ",paraId:19,tocIndex:9},{value:"string",paraId:19,tocIndex:9},{value:" ",paraId:19,tocIndex:9},{value:"optional",paraId:19,tocIndex:9},{value:" ",paraId:19,tocIndex:9},{value:"default:",paraId:19,tocIndex:9},{value:" 'normal'",paraId:19,tocIndex:9},{value:"图层元素混合效果",paraId:20,tocIndex:9},{value:"normal 正常效果 默认 发生遮挡的时候，只会显示前面的图层的颜色",paraId:21,tocIndex:9},{value:"additive 叠加模式 发生遮挡的时候，显示前后图层颜色的叠加",paraId:21,tocIndex:9},{value:"subtractive 相减模式 发生遮挡的时候，显示前后图层颜色的相减",paraId:21,tocIndex:9},{value:"max 最大值 发生遮挡的时候，显示图层颜色 rgb 的最大值",paraId:21,tocIndex:9},{value:" ",paraId:22,tocIndex:10},{value:"boolean",paraId:22,tocIndex:10},{value:" ",paraId:22,tocIndex:10},{value:"optional",paraId:22,tocIndex:10},{value:" ",paraId:22,tocIndex:10},{value:"default:",paraId:22,tocIndex:10},{value:" 'false'",paraId:22,tocIndex:10},{value:"\n图层事件，默认只响应最上层图层，设置为true 将允许事件透传",paraId:22,tocIndex:10},{value:"⚠️ mask、maskfence 不推荐使用，一下配置 2.14.x 之后版本生效",paraId:23,tocIndex:10},{value:"模板图层：用做模板的图层，PointLayer、LineLayer、PolygonLayer 都可以作为模板\n掩模图层：被模板切割的图层",paraId:24,tocIndex:10},{value:"图层使用相对坐标系，缩放等级大于 20,室内场景",paraId:25,tocIndex:11},{value:"掩模图层生效",paraId:26,tocIndex:12},{value:" ",paraId:27,tocIndex:12},{value:"array Layer",paraId:27,tocIndex:12},{value:" ",paraId:27,tocIndex:12},{value:"optional",paraId:27,tocIndex:12},{value:" ",paraId:27,tocIndex:12},{value:"default:",paraId:27,tocIndex:12},{value:" []",paraId:27,tocIndex:12},{value:"掩模图层生效",paraId:28,tocIndex:13},{value:"是否开启掩模，默认开启 maskLayers 不为空时生效",paraId:29,tocIndex:13},{value:" ",paraId:30,tocIndex:13},{value:"bool",paraId:30,tocIndex:13},{value:" ",paraId:30,tocIndex:13},{value:"optional",paraId:30,tocIndex:13},{value:" ",paraId:30,tocIndex:13},{value:"default:",paraId:30,tocIndex:13},{value:" true",paraId:30,tocIndex:13},{value:"掩模图层生效\n",paraId:31,tocIndex:14},{value:" ",paraId:32,tocIndex:14},{value:"boolean",paraId:32,tocIndex:14},{value:" ",paraId:32,tocIndex:14},{value:"optional",paraId:32,tocIndex:14},{value:" ",paraId:32,tocIndex:14},{value:"default:",paraId:32,tocIndex:14},{value:" true",paraId:32,tocIndex:14},{value:"用来描述当前图层的内容与掩模边界显示。",paraId:33,tocIndex:14},{value:"true",paraId:34,tocIndex:14},{value:" 在掩模内部显示",paraId:34,tocIndex:14},{value:"false",paraId:34,tocIndex:14},{value:" 在掩模外部显示",paraId:34,tocIndex:14},{value:"模板图层生效\n",paraId:35,tocIndex:15},{value:" ",paraId:35,tocIndex:15},{value:"枚举",paraId:35,tocIndex:15},{value:" ",paraId:35,tocIndex:15},{value:"optional",paraId:35,tocIndex:15},{value:" ",paraId:35,tocIndex:15},{value:"default:",paraId:35,tocIndex:15},{value:" and",paraId:35,tocIndex:15},{value:"\nmaskLayers 为多个时失效，需要在模板图层设置",paraId:35,tocIndex:15},{value:"or 交集",paraId:36,tocIndex:15},{value:"and 并集",paraId:36,tocIndex:15},{value:"使用示例",paraId:37,tocIndex:15},{value:"const polygonLayer = new Polygon();\nconst rasterLayer = new Raster({\n  // 栅格图层使用polygon 掩模\n  maskLayers: [polygonLayer],\n  enableMask: true,\n  maskInside: true,\n});\n",paraId:38,tocIndex:15},{value:"设置图层数据以及解析配置 ",paraId:39,tocIndex:17},{value:"source(data, config)",paraId:39,tocIndex:17},{value:"。",paraId:39,tocIndex:17},{value:"data { geojson | json | csv }",paraId:40,tocIndex:17},{value:"config   可选   数据源配置项\n",paraId:40,tocIndex:17},{value:"parser 数据解析，默认是解析层 geojson",paraId:41,tocIndex:17},{value:"transforms [transform，transform ]  数据处理转换可设置多个",paraId:41,tocIndex:17},{value:"parser",paraId:42,tocIndex:17},{value:" 和  ",paraId:42,tocIndex:17},{value:"transforms",paraId:42,tocIndex:17},{value:" ",paraId:42,tocIndex:17},{value:"见 source 文档",paraId:43,tocIndex:17},{value:"。",paraId:42,tocIndex:17},{value:"layer.source(data, {\n  parser: {\n    type: 'csv',\n    x: 'lng',\n    y: 'lat',\n  },\n  transforms: [\n    {\n      type: 'map',\n      callback: function (item) {\n        const [x, y] = item.coordinates;\n        item.lat = item.lat * 1;\n        item.lng = item.lng * 1;\n        item.v = item.v * 1;\n        item.coordinates = [x * 1, y * 1];\n        return item;\n      },\n    },\n    {\n      type: 'hexagon',\n      size: 6000,\n      field: 'v',\n      method: 'sum',\n    },\n  ],\n});\n",paraId:44,tocIndex:17},{value:"我们在使用 ",paraId:45,tocIndex:18},{value:"cluster",paraId:45,tocIndex:18},{value:" 配置聚合图之后就可以使用一些聚合方法来获取对应参数。",paraId:45,tocIndex:18},{value:"获取指定缩放等级的聚合数据",paraId:46,tocIndex:19},{value:"zoom",paraId:47,tocIndex:19},{value:" 缩放等级",paraId:47,tocIndex:19},{value:"根据 ",paraId:48,tocIndex:20},{value:"id",paraId:48,tocIndex:20},{value:" 获取聚合节点的数据，每个聚合节点会有一个唯一 ",paraId:48,tocIndex:20},{value:"ID",paraId:48,tocIndex:20},{value:"。",paraId:48,tocIndex:20},{value:"id",paraId:49,tocIndex:20},{value:" 聚合节点的 ",paraId:49,tocIndex:20},{value:"id",paraId:49,tocIndex:20},{value:"const source = layer.getSource();\nsource.getClustersLeaves(id);\nlayer.on('click', (e) => {\n  console.log(source.getClustersLeaves(e.feature.cluster_id));\n});\n",paraId:50,tocIndex:20},{value:"Scale 度量是将地图数据值（数字、日期、类别等数据）转成视觉值（颜色、大小、形状）。尺度 Scale 是数据可视化的基本组成部分，因为它们决定了视觉编码的性质。 L7 目前支持连续、离散、枚举类型数据的Scale，并支持位置、形状、大小和颜色编码的映射。",paraId:51,tocIndex:21},{value:"在使用 L7 过程中，默认情况下不需要进行 Scale 的配置，因为 L7 会根据数据类型对 scale 推断，推断过程如下：",paraId:52,tocIndex:21},{value:"查看用户是否设置了 Scale，如果没有:",paraId:53,tocIndex:21},{value:"判断字段的第一条数据的字段类型，如果数据中不存在对应的字段：",paraId:54,tocIndex:21},{value:"认为是常量为固定值",paraId:55,tocIndex:21},{value:"如果是数字则为 'linear';",paraId:56,tocIndex:21},{value:"如果是字符串类型 'cat';",paraId:57,tocIndex:21},{value:"Scale 详细介绍",paraId:58,tocIndex:22},{value:"参数： (field: string, scaleOptions: IscaleOptions)",paraId:59,tocIndex:22},{value:"field",paraId:60,tocIndex:22},{value:" 指定 source 中传入的数据中用于映射的字段名",paraId:60,tocIndex:22},{value:"scaleOptions",paraId:60,tocIndex:22},{value:" 列定义配置，对象类型\n",paraId:60,tocIndex:22},{value:"type scale 类型",paraId:61,tocIndex:22},{value:"unknown 未匹配颜色 可选 默认透明",paraId:61,tocIndex:22},{value:"domain 值域 可选",paraId:61,tocIndex:22},{value:"interface IscaleOptions {\n  type: ScaleTypeName;\n  domain?: any[];\n  ...\n}\n\nlayer.color('id', ['#f00', '#ff0'])\n.size('mag', [1, 80])\n.scale('mag', {\n  type: 'linear',\n  domain: [ 1, 50]\n})；\n",paraId:62,tocIndex:22},{value:"Range 和 domain 是 Scale 中非常重要的两个参数",paraId:63,tocIndex:23},{value:"domain: 地图数据值的定义区间\nrange：视觉值的区间\n不同Scale 的差异在于 domain->range 的转换方法的不同",paraId:64,tocIndex:23},{value:"domain: 地图数据值的定义区间",paraId:65,tocIndex:23},{value:"range：视觉值的区间定义",paraId:65,tocIndex:23},{value:"数据类",paraId:66,tocIndex:23},{value:"度量类型",paraId:66,tocIndex:23},{value:"连续",paraId:66,tocIndex:23},{value:"linear、log、pow",paraId:66,tocIndex:23},{value:"连续分类",paraId:66,tocIndex:23},{value:"quantize quantile,threshold,diverging",paraId:66,tocIndex:23},{value:"分类 枚举",paraId:66,tocIndex:23},{value:"cat",paraId:66,tocIndex:23},{value:"Cat 指枚举类型，用于展示分类数据，比如农作物种植区分布图，水稻、玉米、大豆等不同类别需要映射为不同的颜色。",paraId:67,tocIndex:24},{value:"// 三种作物会分别转成对应的颜色\n// domain = ['corn','rice', 'soybean'];\n// range = ['red','white','blue'];\nconst data = [\n  { lng: 120, lat: 30, t: 'corn' },\n  { lng: 121, lat: 30, t: 'rice' },\n  { lng: 122, lat: 30, t: 'soybean' },\n];\nlayer.source(data, {\n  parser: {\n    type: 'type',\n    x: 'lng',\n    y: 'lat',\n  },\n});\nlayer.scale('t', { type: 'cat' });\nlayer.color('t', ['red', 'white', 'blue']);\n",paraId:68,tocIndex:24},{value:"数据值和映射值相同\n比如数据中value 字段记录了每个要素的颜色，数值既为要映射的结果值s",paraId:69,tocIndex:25},{value:"// 设置为 identify\nlayer.scale('value', { type: 'identify' });\n\n// 或者\n\nlayer.scale('value'); // L7  能够自动推断为  identify\n\n",paraId:70,tocIndex:25},{value:"线性是连续数据的映射方法，数据和视觉值是通过线性方法换算的。如数据值 1-100 线性映射到红到蓝的线下渐变色每个数字对应一个颜色",paraId:71,tocIndex:26},{value:"相等间隔会将属性值的范围划分为若干个大小相等的子范围。相等间隔最适用于常见的数据范围，如百分比和温度。这种方法强调的是某个属性值相对于其他值的量",paraId:72,tocIndex:27},{value:"每个类都含有相等数量的要素。分位数分类非常适用于呈线性分布的数据。分位数为每个类分配数量相等的数据值。不存在空类，也不存在值过多或过少的类。\n由于使用“分位数”分类将要素以同等数量分组到每个类中，因此得到的地图往往具有误导性。可能会将相似的要素置于相邻的类中，或将值差异较大的要素置于相同类中。可通过增加类的数量将这种失真降至最低。",paraId:73,tocIndex:28},{value:"他允许将域的任意子集（非统一段）映射到范围内的离散值。输入域仍然是连续的，并根据提供给域属性的一组阈值划分为多个切片。 range 属性必须有 N+1 个元素，其中 N 是域中提供的阈值边界数",paraId:74,tocIndex:29},{value:"手动设置间隔 Manual interval 手动设置分级分类区间，某些数据会有相应的业界标准，或者需要进行某种特殊的显示。如空气质量数据有严格数据分段标准",paraId:75,tocIndex:29},{value:'-1   => "red"\n0    => "white"\n0.5  => "white"\n1.0  => "blue"\n1000 => "blue\n\n',paraId:76,tocIndex:29},{value:"离散分类通常与两种相反的色调一起使用，以显示从负值到中心到正值的变化。这些类型的地图显示了彼此相关的值的大小。",paraId:77,tocIndex:30},{value:"根据视觉通道名称获取 scale 实例,调用之前确保 layer 已经初始化完成",paraId:78,tocIndex:31},{value:"const scale = layer.getScale('color');\nconst color = scale(1); // 将数值转换成颜色\n",paraId:79,tocIndex:31},{value:"更多是方法\n",paraId:80,tocIndex:31},{value:"scale 示例使用",paraId:80,tocIndex:31},{value:"可视化编码是将数据转换为可视形式的过程，L7 目前支持形状，大小，颜色 3 种视觉通道，你可以指定数据字段，为不同要素设置不同的图形属性。",paraId:81,tocIndex:32},{value:"数据过滤方法,支持回调函数，将数据映射为true | false, 结果为true 时可见",paraId:82,tocIndex:33},{value:"pointLayer.filter('type', (type) => {\n  // 回调函数\n  if (type === 'a') {\n    return false;\n  }\n  return true;\n});\n",paraId:83,tocIndex:33},{value:"将数据值映射到图形的大小上的方法，size 方法具体的参数使用可以查看对应图层的详细文档",paraId:84,tocIndex:34},{value:"pointLayer.size(10); // 常量\npointLayer.size('type'); // 使用字段映射到大小\npointLayer.size('type', [0, 10]); // 使用字段映射到大小，并指定最大值和最小值\npointLayer.size('type', (type) => {\n  // 回调函数\n  if (type === 'a') {\n    return 10;\n  }\n  return 5;\n});\n",paraId:85,tocIndex:34},{value:"传入数字常量，如  ",paraId:86,tocIndex:35},{value:"pointLayer.size(20)",paraId:86,tocIndex:35},{value:"根据 field 字段的值映射大小，使用默认的",paraId:87,tocIndex:36},{value:"最大值 max:10",paraId:87,tocIndex:36},{value:"  和",paraId:87,tocIndex:36},{value:"最小值 min: 1",paraId:87,tocIndex:36},{value:"。",paraId:87,tocIndex:36},{value:"使用回调函数控制图形大小。",paraId:88,tocIndex:37},{value:"callback",paraId:89,tocIndex:37},{value:": function 回调函数。",paraId:89,tocIndex:37},{value:"pointLayer.size('age', (value) => {\n  if (value === 1) {\n    return 5;\n  }\n  return 10;\n});\n",paraId:90,tocIndex:37},{value:"将数据值映射到图形的颜色上的方法。",paraId:91,tocIndex:38},{value:"layer.color('red'); // 常量颜色\nlayer.color('type'); // 对 type 字段进行映射，使用内置的颜色\nlayer.color('type', ['red', 'blue']); // 指定颜色\nlayer.color('type', (type) => {\n  // 通过回调函数\n  if (type === 'a') {\n    return 'red';\n  }\n  return 'blue';\n});\nlayer.color('type*value', (type, value) => {\n  //多个参数，通过回调函数\n  if (type === 'a' && value > 100) {\n    return 'red';\n  }\n  return 'blue';\n});\n",paraId:92,tocIndex:38},{value:"参数：",paraId:93,tocIndex:39},{value:"value",paraId:93,tocIndex:39},{value:" ：string",paraId:93,tocIndex:39},{value:"只支持接收一个参数，value 可以是：",paraId:94,tocIndex:39},{value:"映射至颜色属性的数据源字段名，如果数据源中不存在这个字段名的话，则按照常量进行解析，这个时候会使用 L7 默认提供的颜色。",paraId:95,tocIndex:39},{value:"也可以直接指定某一个具体的颜色值 color，如 '#fff', 'white','rgba(255,0,0,0.5)' ,rgb(255,0,1) 等。",paraId:96,tocIndex:39},{value:"如果数据为映射到颜色，默认为透明色不显示，如果需要设置该颜色，需要在scale 中设置",paraId:97,tocIndex:39},{value:"示例",paraId:98,tocIndex:39},{value:"layer.color('name'); // 映射数据字段\nlayer.color('white'); // 指定颜色\n",paraId:99,tocIndex:39},{value:"参数：",paraId:100,tocIndex:40},{value:"field",paraId:101,tocIndex:40},{value:": stringfield 为映射至颜色属性的数据源字段名，也支持指定多个参数。",paraId:101,tocIndex:40},{value:"colors",paraId:102,tocIndex:40},{value:": string | array | function",paraId:102,tocIndex:40},{value:"colors 的参数有以下情况：  如果为空，即未指定颜色的数组，那么使用内置的全局的颜色；如果需要指定颜色，则需要以数组格式传入，那么分类的颜色按照数组中的颜色确定。",paraId:103,tocIndex:40},{value:"layer.scale('name',{\n  type:'quantile'\n  unknown:'#ccc' // 设置无效颜色\n})\nlayer.color('name'); // 使用identity\nlayer.color('name', ['red', 'blue']); // 使用传入的指定颜色\n",paraId:104,tocIndex:40},{value:"colors 如果是回调函数，则该回调函数的参数为对应字段的数值，具体使用如下，当 color 映射为多个字段时，参数按照字段声明的顺序传入：",paraId:105,tocIndex:40},{value:"layer.color('gender', (value) => {\n  if (value === 1) {\n    return 'red';\n  }\n  return 'blue';\n});\nlayer.color('gender*age', (gender, age) => {\n  if (age === 20 && gender == ' 男') {\n    return 'red';\n  }\n  return 'blue';\n});\n",paraId:106,tocIndex:40},{value:"通常一种图层可以有多种表现形式，shape 方法用于指定图层具体的表现形式，以 PointLayer 的 shape 为例：",paraId:107,tocIndex:41},{value:"shape('circle'); // 圆形\nshape('triangle'); // 三角形\nshape('cylinder'); // 圆柱\n",paraId:108,tocIndex:41},{value:"shape(shape)",paraId:109,tocIndex:41},{value:"参数 ",paraId:110,tocIndex:41},{value:"shape",paraId:110,tocIndex:41},{value:" string",paraId:110,tocIndex:41},{value:"只支持接收一个参数，指定几何图像对象绘制的形状。下表列出了不同的 图层 几何图形对象支持的 shape 形状",paraId:111,tocIndex:41},{value:"layer 类型",paraId:112,tocIndex:41},{value:"shape 类型",paraId:112,tocIndex:41},{value:"备注",paraId:112,tocIndex:41},{value:"point",paraId:112,tocIndex:41},{value:"2d:point,circle, square, triangle,hexagon,image,text 3d:circle,triangle,hexagon,square",paraId:112,tocIndex:41},{value:"line",paraId:112,tocIndex:41},{value:"line,arc, arc3d, greatcircle",paraId:112,tocIndex:41},{value:"polygon",paraId:112,tocIndex:41},{value:"fill,line, extrude",paraId:112,tocIndex:41},{value:"shape(field, shapes)",paraId:113,tocIndex:41},{value:"shape 根据字段指定行形状，比如根据字段指定 PointLayer/imageLayer 的 icon 类型",paraId:114,tocIndex:41},{value:"scene.addImage(\n  '00',\n  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',\n);\nscene.addImage(\n  '01',\n  'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg',\n);\nscene.addImage(\n  '02',\n  'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',\n);\nconst imageLayer = new PointLayer()\n  .source(data, {\n    parser: {\n      type: 'json',\n      x: 'longitude',\n      y: 'latitude',\n    },\n  })\n  .shape('name', ['00', '01', '02'])\n  .size(20);\nscene.addLayer(imageLayer);\n",paraId:115,tocIndex:41},{value:"在线案例",paraId:116},{value:"shape(field, callback)",paraId:117},{value:"shape 也支持回调函数的写法",paraId:118},{value:".shape('key', value => {\n  if(value > 10) {\n    return 'circle';\n  } else {\n    return 'triangle';\n  }\n}\n",paraId:119},{value:"style 方法通常用于描述图层具体的样式，大多数图层会支持一些比较通用的属性， 如 opacity 属性，同时每个图层也会有仅限本图层支持的属性，如只有\nCityBuildingLayer 支持的 windowColor 属性，每个图层具体要如何配置属性请查看每个图层的详细文档。",paraId:120,tocIndex:42},{value:"opacity 设置透明度 大部分图层都支持",paraId:121,tocIndex:42},{value:"stroke 线填充颜色 仅点图层支持",paraId:122,tocIndex:42},{value:"strokeWidth 线的宽度 仅点图层支持",paraId:123,tocIndex:42},{value:"layer.style({\n  opacity: 0.8,\n  stroke: 'white',\n});\n",paraId:124,tocIndex:42},{value:"样式数据映射🌟",paraId:125,tocIndex:42},{value:"\n在正常情况下，style 的参数会作用到一个图层上的所有图形，如一个 PointLayer 中有十个点，我们设置 opacity = 0.5， 这样十个点的透明度都是 0.5。",paraId:125,tocIndex:42},{value:"\n而在特殊情况下，我们可能需要为每个点分别设置一个透明度，这时候按照原来的方式直接设置 style 方法的 opacity 的值就无法满足需求了，为此我们需要提供特殊的赋值方式。",paraId:125,tocIndex:42},{value:"\n通常我们会根据传入图层的数据为图层的每个图形设置单独的值，因此我们称之为“样式数据映射”。",paraId:125,tocIndex:42},{value:"\n我们支持几种设置 style 中的参数从 source 数据中动态取值的写法。",paraId:125,tocIndex:42},{value:"// 根据数据中的 v 字段的值设置点图层各个点的透明度\nconst data = [\n  {\n    lng: 120,\n    lat: 30,\n    v: 0.5\n  },\n  ...\n]\nconst layer = new PointLayer()\n  .source(data, {\n    parser: {\n      x: 'lng',\n      y: 'lat'\n    }\n  })\n  .shape('circle')\n  .color('#f00')\n  .size({\n    // 第一种写法 根据字段从 data 中直接取值\n    opacity: 'v'// opacity = 0.5\n  });\nscene.addLayer(layer);\n",paraId:126,tocIndex:42},{value:"在线案例",paraId:127},{value:"从 ",paraId:128},{value:"L7 2.5",paraId:128},{value:" 开始，各图层样式将逐步支持样式数据映射，目前支持样式数据映射的 ",paraId:128},{value:"style",paraId:128},{value:" 参数如下：",paraId:128},{value:"layer 类型/shape",paraId:129},{value:"支持的样式字段",paraId:129},{value:"备注",paraId:129},{value:"pointLayer/fill",paraId:129},{value:"opacity、strokeOpacity、strokeWidth、stroke、offsets",paraId:129},{value:"shape circle、triangle...",paraId:129},{value:"pointLayer/image",paraId:129},{value:"opacity、offsets",paraId:129},{value:"offsets 经纬度偏移",paraId:129},{value:"pointLayer/normal",paraId:129},{value:"opacity、offsets",paraId:129},{value:"pointLayer/text",paraId:129},{value:"opacity、strokeWidth、stroke、textOffset",paraId:129},{value:"textOffset 相对文字画布位置的偏移",paraId:129},{value:"pointLayer/extrude",paraId:129},{value:"opacity",paraId:129},{value:"polygonLayer/fill",paraId:129},{value:"opacity",paraId:129},{value:"polygonLayer/extrude",paraId:129},{value:"opacity",paraId:129},{value:"lineLayer/line",paraId:129},{value:"opacity",paraId:129},{value:"lineLayer/arc",paraId:129},{value:"opacity、thetaOffset",paraId:129},{value:"thetaOffset 弧线的弯曲弧度",paraId:129},{value:"lineLayer/arc3d",paraId:129},{value:"opacity",paraId:129},{value:"lineLayer/great_circle",paraId:129},{value:"opacity",paraId:129},{value:"在线案例",paraId:130},{value:"目前只在线图层上支持了纹理方法",paraId:131,tocIndex:43},{value:"texture 方法支持传入由 scene.addImage 方法添加的全局 icon 贴图资源",paraId:132,tocIndex:43},{value:"// 首先在全局加载图片资源\nscene.addImage(\n  'plane',\n  'https://gw.alipayobjects.com/zos/bmw-prod/0ca1668e-38c2-4010-8568-b57cb33839b9.svg',\n);\n\nconst layer = new LineLayer({\n  blend: 'normal',\n})\n  .source(data, {\n    parser: {\n      type: 'json',\n      x: 'lng1',\n      y: 'lat1',\n      x1: 'lng2',\n      y1: 'lat2',\n    },\n  })\n  .size(25)\n  .shape('arc')\n  .texture('plane') // 为图层绑定纹理\n  .color('#8C1EB2')\n  .style({\n    lineTexture: true, // 开启线的贴图功能\n    iconStep: 30, // 设置贴图纹理的间距\n    textureBlend: 'replace', // 设置纹理混合方式，默认值为 normal，可选值有 normal/replace 两种\n  });\n",paraId:133,tocIndex:43},{value:"在线案例",paraId:134},{value:"如果已经添加了图层，需要修改图层显示样式可以再次调用图形映射方法，然后调用 ",paraId:135,tocIndex:44},{value:"scene.render()",paraId:135,tocIndex:44},{value:"更新渲染即可",paraId:135,tocIndex:44},{value:"重新调用scale 方法",paraId:136,tocIndex:45},{value:"layer.scale('value', {\n  type: 'quantile',\n});\nscene.render();\n",paraId:137,tocIndex:45},{value:"重新调用 color/size/filter/shape等方法",paraId:138,tocIndex:46},{value:"layer.color('blue');\nlayer.size(10);\n\nscene.render();\n",paraId:139,tocIndex:46},{value:"layer.style({\n  opacity: 1,\n});\n\nscene.render();\n",paraId:140,tocIndex:47},{value:"更新 Source 数据",paraId:141,tocIndex:48},{value:"参数:",paraId:142,tocIndex:48},{value:"data 数据",paraId:143,tocIndex:48},{value:"option 默认和初始配置项一致，如果数据格式相同可不设置",paraId:143,tocIndex:48},{value:"调用 setData 方法会自动更新图层渲染",paraId:144,tocIndex:48},{value:"layer.setData(data);\n",paraId:145,tocIndex:48},{value:"设置图层叠加方法\n参数：",paraId:146,tocIndex:49},{value:"type blend 类型 normal ｜ additive ｜ subtractive ｜ max",paraId:147,tocIndex:49},{value:"图层显示",paraId:148,tocIndex:51},{value:"layer.show();\n",paraId:149,tocIndex:51},{value:"图层隐藏",paraId:150,tocIndex:52},{value:"layer.hide();\n",paraId:151,tocIndex:52},{value:"图层是否可见",paraId:152,tocIndex:53},{value:"layer.isVisible();\n",paraId:153,tocIndex:53},{value:"设置图层绘制顺序",paraId:154,tocIndex:54},{value:"layer.setIndex(1);\n",paraId:155,tocIndex:54},{value:"缩放到图层范围",paraId:156,tocIndex:55},{value:"layer.fitBounds();\n",paraId:157,tocIndex:55},{value:"设置图层最小缩放等级",paraId:158,tocIndex:56},{value:"layer.setMinZoom(zoom);\n",paraId:159,tocIndex:56},{value:"设置图层最大缩放等级",paraId:160,tocIndex:57},{value:"layer.setMinZoom(zoom);\n",paraId:161,tocIndex:57},{value:"设置图层最大缩放等级",paraId:162,tocIndex:57},{value:"参数",paraId:163,tocIndex:57},{value:"zoom {number}",paraId:164,tocIndex:57},{value:"layer.setMinZoom(zoom);\n",paraId:165,tocIndex:57},{value:"开启或者关闭 mousehover 元素高亮效果",paraId:166,tocIndex:59},{value:"activeOption",paraId:166,tocIndex:59},{value:"color",paraId:167,tocIndex:59},{value:": 高亮颜色",paraId:167,tocIndex:59},{value:"mix",paraId:167,tocIndex:59},{value:": 可选参数，默认为 0，表示高亮颜色是指定纯色，最大有效值是1，表示高亮色全部是底色",paraId:167,tocIndex:59},{value:"activeOption: {\n  color: '#f00';\n  mix: 0.6;\n}\n",paraId:168,tocIndex:59},{value:"// 开启 Active  使用默认高亮颜色\nlayer.active(true);\n\n//  开启 Active  自定义高亮颜色\n\nlayer.active({\n  color: 'red',\n  mix: 0.6,\n});\n\n// 关闭高亮效果\nlayer.active(false);\n",paraId:169,tocIndex:59},{value:"根据元素 ID 设置指定元素 hover 高亮",paraId:170,tocIndex:60},{value:"🌟 指定元素高亮不等于图层高亮，一个图层包含多个元素，一般传入 source 的数据数组中有多少单条数据，一个图层就有多少元素",paraId:171,tocIndex:60},{value:"layer.setActive(featureId);\n",paraId:172,tocIndex:60},{value:"开启或者关闭 mouseclick 元素选中高亮效果",paraId:173,tocIndex:61},{value:"selectOption\n",paraId:173,tocIndex:61},{value:"color",paraId:174,tocIndex:61},{value:": 选中高亮颜色",paraId:174,tocIndex:61},{value:"mix",paraId:174,tocIndex:61},{value:": 可选参数，默认为 0，表示选中高亮颜色是指定纯色，最大有效值是1，表示选中高亮色全部是底色",paraId:174,tocIndex:61},{value:"selectOption: {\n  color: '#f00';\n  mix: 0.6;\n}\n",paraId:175,tocIndex:61},{value:"// 开启 Active  使用默认高亮颜色\nlayer.select(true);\n\n//  开启 Active  自定义高亮颜色\n\nlayer.select({\n  color: 'red',\n  mix: 0.6,\n});\n\n// 关闭高亮效果\nlayer.select(false);\n",paraId:176,tocIndex:61},{value:"根据元素 ID 设置指定元素 click 选中 高亮",paraId:177,tocIndex:62},{value:"🌟 指定元素高亮不等于图层高亮，一个图层包含多个元素，一般传入 source 的数据数组中有多少单条数据，一个图层就有多少元素",paraId:178,tocIndex:62},{value:"layer.setSelect(featureId);\n",paraId:179,tocIndex:62},{value:"让用户可以主动设置图层的 autoFit 参数",paraId:180,tocIndex:63},{value:"\n🌟 设置完该方法后会在图层发生更新的时候生效，如在 setData 之后触发",paraId:180,tocIndex:63},{value:"// 使用方法\nlayer.setAutoFit(true);\n// 内部实现\npublic setAutoFit(autoFit: boolean): ILayer {\n    this.updateLayerConfig({\n      autoFit,\n    });\n    return this;\n  }\n",paraId:181,tocIndex:63},{value:"支持单独获取某个图形经过 scale 计算后的值， 满足用户获取图层某些 feature 值的需求。",paraId:182,tocIndex:64},{value:"attr scale 的属性值",paraId:183,tocIndex:64},{value:"const data = [\n  { lng: 120, lat: 30, name: 'n1' },\n  { lng: 120, lat: 30, name: 'n2' },\n];\nconst layer = new PointLayer()\n  .source(data, {\n    parser: {\n      x: 'lng',\n      y: 'lat',\n      type: 'json',\n    },\n  })\n  .shape('circle')\n  .color('name', ['#f00', '#ff0'])\n  .size('name', [20, 40]);\n\nscene.addLayer(layer);\n\n// 此时在 scene 上绘制两个点\n// 一个颜色为黄色，大小为 40 的点，对应 name 为 n1\n// 一个颜色为红色，大小为 20 的点，对应 name 为 n2\n\nconst colorScale = layer.getScale('color'); // 获取 color 方法产生的 scale\nconst color1 = colorScale('n1'); // '#ff0'\nconst color1 = colorScale('n2'); // '#f00'\n\nconst sizeScale = layer.getScale('size'); // 获取 size 方法产生的 scale\nconst size1 = sizeScale('n1'); // 40\nconst size2 = sizeScale('n2'); // 20\n",paraId:184,tocIndex:64},{value:"不推荐使用，将废弃，",paraId:185,tocIndex:65},{value:"获取图例配置",paraId:186,tocIndex:65},{value:"type 图例类型",paraId:187,tocIndex:65},{value:"index 可选 默认",paraId:187,tocIndex:65},{value:"layer.getLegendItems('color');\n\nlayer.getLegendItems('size');\n",paraId:188,tocIndex:65},{value:"getLegendItems方法的替代方法",paraId:189,tocIndex:66},{value:"该方法需要",paraId:190,tocIndex:66},{value:"返回值",paraId:191,tocIndex:66},{value:"type 图例类型",paraId:192,tocIndex:66},{value:"field 映射字段",paraId:192,tocIndex:66},{value:"items 图例项",paraId:192,tocIndex:66},{value:"layer.getLegend('color');\n\nlayer.getLegend('size');\n",paraId:193,tocIndex:66},{value:"注：rasterayer 只支持 color 类型",paraId:194,tocIndex:66},{value:"添加 Mask 图层\n",paraId:195,tocIndex:68},{value:"const polygonLayer = new Polygon();\nlayer.addMask(polygonLayer);\nscene.render();\n",paraId:196,tocIndex:68},{value:"const polygonLayer = new Polygon();\nlayer.removeMask(polygonLayer);\nscene.render();\n",paraId:197,tocIndex:69},{value:"layer.disableMask();\nscene.render();\n",paraId:198,tocIndex:70},{value:"layer.disableMask();\nscene.render();\n",paraId:199,tocIndex:71},{value:"鼠标事件回调参数 target",paraId:200,tocIndex:72},{value:"layer.on(eventName, (target) => console.log(target));\n",paraId:201,tocIndex:72},{value:"x: number 鼠标 \b 在地图位置 x 坐标",paraId:202,tocIndex:72},{value:"y: number 鼠标 \b 在地图位置 y 坐标",paraId:202,tocIndex:72},{value:"type: string 鼠标事件类型",paraId:202,tocIndex:72},{value:"lngLat: 经度度对象 {lng:number, lat: number }; 鼠标所在位置经纬度",paraId:202,tocIndex:72},{value:"feature: any; 数据选中的地理要素信息",paraId:202,tocIndex:72},{value:"featureId: number | null; 数据选中的地理要素的 ID",paraId:202,tocIndex:72},{value:"点击事件",paraId:203,tocIndex:73},{value:"layer.on('click', (e) => console.log(e));\n",paraId:204,tocIndex:73},{value:"双击",paraId:205,tocIndex:74},{value:"layer.on('dblclick', (e) => console.log(e));\n",paraId:206,tocIndex:74},{value:"鼠标移动事件",paraId:207,tocIndex:75},{value:"layer.on('mousemove', (e) => console.log(e));\n",paraId:208,tocIndex:75},{value:"鼠标移除",paraId:209,tocIndex:76},{value:"layer.on('mouseout', (e) => console.log(e));\n",paraId:210,tocIndex:76},{value:"鼠标抬起",paraId:211,tocIndex:77},{value:"layer.on('mouseup', (e) => console.log(e));\n",paraId:212,tocIndex:77},{value:"鼠标按下",paraId:213,tocIndex:78},{value:"layer.on('mousedown', (e) => console.log(e));\n",paraId:214,tocIndex:78},{value:"鼠标右键",paraId:215,tocIndex:79},{value:"layer.on('contextmenu', (e) => console.log(e));\n",paraId:216,tocIndex:79},{value:"双击拾取元素",paraId:217,tocIndex:80},{value:"layer.on('dblclick', (e) => console.log(e));\n",paraId:218,tocIndex:80},{value:"点击未拾取到元素",paraId:219,tocIndex:81},{value:"layer.on('unclick', (e) => console.log(e));\n",paraId:220,tocIndex:81},{value:"鼠标移动未拾取到元素",paraId:221,tocIndex:82},{value:"layer.on('unmousemove', (e) => console.log(e));\n",paraId:222,tocIndex:82},{value:"鼠标抬起未拾取到元素",paraId:223,tocIndex:83},{value:"layer.on('unmouseup', (e) => console.log(e));\n",paraId:224,tocIndex:83},{value:"鼠标按下未拾取到元素",paraId:225,tocIndex:84},{value:"layer.on('unmousedown', (e) => console.log(e));\n",paraId:226,tocIndex:84},{value:"鼠标右键位拾取到元素",paraId:227,tocIndex:85},{value:"layer.on('uncontextmenu', (e) => console.log(e));\n",paraId:228,tocIndex:85},{value:"所有鼠标事件未拾取到",paraId:229,tocIndex:86},{value:"layer.on('unpick', (e) => console.log(e));\n",paraId:230,tocIndex:86},{value:"移动端事件 touchstart",paraId:231,tocIndex:87},{value:"layer.on('touchstart', (e) => console.log(e));\n",paraId:232,tocIndex:87},{value:"移动端事件 touchend",paraId:233,tocIndex:88},{value:"layer.on('touchend', (e) => console.log(e));\n",paraId:234,tocIndex:88},{value:"使用示例",paraId:235,tocIndex:88},{value:"layer.on('click', (ev) => {}); // 鼠标左键点击图层事件\nlayer.on('mouseenter', (ev) => {}); // 鼠标进入图层要素\nlayer.on('mousemove', (ev) => {}); // 鼠标在图层上移动时触发\nlayer.on('mouseout', (ev) => {}); // 鼠标移出图层要素时触发\nlayer.on('mouseup', (ev) => {}); // 鼠标在图层上单击抬起时触发\nlayer.on('mousedown', (ev) => {}); // 鼠标在图层上单击按下时触发\nlayer.on('contextmenu', (ev) => {}); // 图层要素点击右键菜单\n\n// 鼠标在图层外的事件\nlayer.on('unclick', (ev) => {}); // 图层外点击\nlayer.on('unmousemove', (ev) => {}); // 图层外移动\nlayer.on('unmouseup', (ev) => {}); // 图层外鼠标抬起\nlayer.on('unmousedown', (ev) => {}); // 图层外单击按下时触发\nlayer.on('uncontextmenu', (ev) => {}); // 图层外点击右键\nlayer.on('unpick', (ev) => {}); // 图层外的操作的所有事件\n",paraId:236,tocIndex:88},{value:"参数 option",paraId:237,tocIndex:90},{value:"target 当前 layer",paraId:238,tocIndex:90},{value:"type 事件类型",paraId:238,tocIndex:90},{value:"图层初始化完成后触发",paraId:239,tocIndex:90},{value:"layer.on('inited', (option) => {});\n",paraId:240,tocIndex:90},{value:"图层添加到 scene",paraId:241,tocIndex:91},{value:"参数 option",paraId:242,tocIndex:91},{value:"target 当前 layer",paraId:243,tocIndex:91},{value:"type 事件类型",paraId:243,tocIndex:91},{value:"layer.on('add', (type) => console.log(type));\n",paraId:244,tocIndex:91},{value:"图层移除时触发",paraId:245,tocIndex:92},{value:"参数 option",paraId:246,tocIndex:92},{value:"target 当前 layer",paraId:247,tocIndex:92},{value:"type 事件类型",paraId:247,tocIndex:92},{value:"layer.on('remove', (type) => console.log(type));\n",paraId:248,tocIndex:92},{value:"数据映射更新，图例发生变化,主要 color、size",paraId:249,tocIndex:93},{value:"legend:color",paraId:250},{value:"数据映射更新，图例 color 颜色改变",paraId:251,tocIndex:94},{value:"参数 option：",paraId:252,tocIndex:94},{value:"type 图例类型",paraId:253,tocIndex:94},{value:"field 映射字段",paraId:253,tocIndex:94},{value:"items 图例项",paraId:253,tocIndex:94},{value:"layer.on('legend:color', (ev) => console.log(ev));\n",paraId:254,tocIndex:94},{value:"legend:size",paraId:250},{value:"数据映射更新，图例 size 大小改变",paraId:255,tocIndex:95},{value:"参数 option：",paraId:256,tocIndex:95},{value:"type 图例类型",paraId:257,tocIndex:95},{value:"field 映射字段",paraId:257,tocIndex:95},{value:"items 图例项",paraId:257,tocIndex:95},{value:"layer.on('legend:size', (ev) => console.log(ev));\n",paraId:258,tocIndex:95},{value:"参数 option",paraId:259,tocIndex:97},{value:"box [x1: number, y1: number, x2: number, y2: number] 相较于",paraId:260,tocIndex:97},{value:"cb (...args: any[]) => void 传入的回调方法，返回框选内部的 feature",paraId:260,tocIndex:97},{value:"layer.boxSelect(box, cb);\n// (x1, y1), (x2, y2) 框选的方框左上角和右下角相对于地图左上角的像素坐标\n// cb 是传入的回调函数，回调函数返回的参数是选中的 feature 对象数组，对象的字段和用户传入的数据相关\n",paraId:261,tocIndex:97}]}}]);