"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{28476:function(vt,V,a){a.r(V),a.d(V,{default:function(){return ct}});var va={version:"v0.1",metadata:{name:"\u9ED8\u8BA4\u914D\u7F6E\u5E94\u7528",creatTime:"2023-12-11 15:40:56"},datasets:[],spec:{map:{basemap:"Gaode",config:{zoom:5,center:[112.46641,40.91574],pitch:0,bearing:0,rotation:0,style:"normal",token:"f0230f884bbd54e2913c890cdf45aa7e",viewMode:"2D",dragRotate:!0,pitchWithRotate:!0,WebGLParams:{preserveDrawingBuffer:!0}}},layers:[],widgets:[{id:"BaseLayout_c0ca0c86-01ea-4476-988e-d3ba43d67ba0",type:"BaseLayout",metadata:{name:"\u57FA\u7840\u5E03\u5C40"},properties:{showSidePanel:!1}},{id:"ZoomControl_4b3f291a-cd06-4179-9c3a-deb5dfaa9637",type:"ZoomControl",metadata:{name:"\u7F29\u653E\u5668"},properties:{position:"bottomright",showZoom:!0},container:{id:"BaseLayout_c0ca0c86-01ea-4476-988e-d3ba43d67ba0",slot:"controls"}},{id:"ChoosePlace_afc9fe1a-36eb-4cef-9058-87bfa211dfad",type:"ChoosePlace",metadata:{name:"\u4E24\u5730\u70B9\u9009\u62E9"},properties:{position:"topleft"},container:{id:"BaseLayout_c0ca0c86-01ea-4476-988e-d3ba43d67ba0",slot:"controls"}}]}},fa=va,ga=a(82242),u=a.n(ga),W=a(5022),J={algorithm:W.Z.darkAlgorithm,token:{colorTextBase:"rgba(255,255,255,0.85)",colorBgBase:"#0f0f13",borderRadius:6}},ya=u()(u()({},J),{},{token:u()(u()({},J.token),{},{colorBgBase:"#1d1e25"})}),ba=a(96113),X=a(71720),xa=a(34591),ja=a(36632),ft=a(46789),Da=a(7557),C=a.n(Da),Qa=a(41498),F=a.n(Qa),ka=a(79800),z=a.n(ka),Sa=a(86289),za=a(18551),Ta=a(64451),La=a(80658),K=a(99742),wa=a(2741),Pa=a(11123),Ca=a(9498),O=a.n(Ca),P=a(77617),Ra=a(41363),T=a.n(Ra),L=a(68564),q,_,aa,ta,Aa,ea,ia,Ea=function(){var t=W.Z.useToken,A=t(),l=A.token,p=l.colorBgContainer;return{topPane:(0,L.iv)(q||(q=T()([`
      position: absolute;
      top: 5px;
      left: 5px;
      right: 5px;
      z-index: 9999;
    `]))),searchPane:(0,L.iv)(_||(_=T()([`
      padding: 0.75rem;
      border-radius: 0.5rem;
      background-color: `,`;
      flex-direction: row;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    `])),p),imageIcon:(0,L.iv)(aa||(aa=T()([`
      width: 15px;
      margin-right: 0.75rem;
    `]))),timePickerPane:(0,L.iv)(ta||(ta=T()([`
      padding: 0.25rem;
      border-radius: 0.5rem;
      background-color: `,`;
      width: 180px;
      margin-top: 10px;
    `])),p),locationSearch:(0,L.iv)(Aa||(Aa=T()([`
      min-width: 200px;
    `]))),locationSearchName:(0,L.iv)(ea||(ea=T()([`
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    `]))),locationSearchTip:(0,L.iv)(ia||(ia=T()([`
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      color: #818181;
      font-size: 12px;
    `])))}},Oa=Ea,Fa=["\u672A\u77E5","\u7F13\u884C","\u62E5\u5835","\u4E25\u91CD\u62E5\u5835"],Na=O()(new Date().toLocaleDateString()).format("YYYY-MM-DD"),gt="98d10f05a2da96697313a2ce35ebf1a2",yt="https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*7EZSSYpUeWwAAAAAAAAAAAAADpatAQ/original",na="https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*lXMHRblTVFQAAAAAAAAAAAAADpatAQ/original",sa="https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yeZ9R7WShEEAAAAAAAAAAAAADpatAQ/original",Ua={\u6674:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*hWmEQLDwGJkAAAAAAAAAAAAADpatAQ/original",\u5C11\u4E91:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*G_fUSY6oaw8AAAAAAAAAAAAADpatAQ/original",\u6674\u95F4\u591A\u4E91:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*nkHNTJ5h_ykAAAAAAAAAAAAADpatAQ/original",\u591A\u4E91:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*SB96R7Br7gEAAAAAAAAAAAAADpatAQ/original",\u9634:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*G_fUSY6oaw8AAAAAAAAAAAAADpatAQ/original",\u6709\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u5E73\u9759:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u5FAE\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u548C\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u6E05\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original","\u5F3A\u98CE/\u52B2\u98CE":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u75BE\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u5927\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u70C8\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u98CE\u66B4:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u72C2\u7206\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u98D3\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u70ED\u5E26\u98CE\u66B4:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*l-QpTLXOV1UAAAAAAAAAAAAADpatAQ/original",\u973E:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*-VVyTILygJkAAAAAAAAAAAAADpatAQ/original",\u4E2D\u5EA6\u973E:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*NdCQQJH9_m8AAAAAAAAAAAAADpatAQ/original",\u91CD\u5EA6\u973E:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*PqDLQrtkRfMAAAAAAAAAAAAADpatAQ/original",\u4E25\u91CD\u973E:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*PqDLQrtkRfMAAAAAAAAAAAAADpatAQ/original",\u9635\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original",\u96F7\u9635\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*3ReZSLkqr_kAAAAAAAAAAAAADpatAQ/original",\u96F7\u9635\u96E8\u5E76\u4F34\u6709\u51B0\u96F9:"",\u5C0F\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original",\u4E2D\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original",\u5927\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original",\u66B4\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*D_U5TK-m4X8AAAAAAAAAAAAADpatAQ/original",\u5927\u66B4\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*D_U5TK-m4X8AAAAAAAAAAAAADpatAQ/original",\u7279\u5927\u66B4\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*D_U5TK-m4X8AAAAAAAAAAAAADpatAQ/original",\u5F3A\u9635\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original",\u5F3A\u96F7\u9635\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*3ReZSLkqr_kAAAAAAAAAAAAADpatAQ/original",\u6781\u7AEF\u964D\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*3qWESpEucFMAAAAAAAAAAAAADpatAQ/original","\u6BDB\u6BDB\u96E8/\u7EC6\u96E8":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original",\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original","\u5C0F\u96E8-\u4E2D\u96E8":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original","\u4E2D\u96E8-\u5927\u96E8":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original","\u5927\u96E8-\u66B4\u96E8":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yHmiR6A9twQAAAAAAAAAAAAADpatAQ/original","\u66B4\u96E8-\u5927\u66B4\u96E8":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*3qWESpEucFMAAAAAAAAAAAAADpatAQ/original","\u5927\u66B4\u96E8-\u7279\u5927\u66B4\u96E8":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*3qWESpEucFMAAAAAAAAAAAAADpatAQ/original",\u96E8\u96EA\u5929\u6C14:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*zJU-SYgmOCkAAAAAAAAAAAAADpatAQ/original",\u96E8\u5939\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*zJU-SYgmOCkAAAAAAAAAAAAADpatAQ/original",\u9635\u96E8\u5939\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*zJU-SYgmOCkAAAAAAAAAAAAADpatAQ/original",\u51BB\u96E8:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*tPitRI60EEwAAAAAAAAAAAAADpatAQ/original",\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*6usDRK5hwosAAAAAAAAAAAAADpatAQ/original",\u9635\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*6usDRK5hwosAAAAAAAAAAAAADpatAQ/original",\u5C0F\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*6usDRK5hwosAAAAAAAAAAAAADpatAQ/original",\u4E2D\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*ra5GRp3U688AAAAAAAAAAAAADpatAQ/original",\u5927\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*ra5GRp3U688AAAAAAAAAAAAADpatAQ/original",\u66B4\u96EA:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*ra5GRp3U688AAAAAAAAAAAAADpatAQ/original","\u5C0F\u96EA-\u4E2D\u96EA":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*ra5GRp3U688AAAAAAAAAAAAADpatAQ/original","\u4E2D\u96EA-\u5927\u96EA":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*ra5GRp3U688AAAAAAAAAAAAADpatAQ/original","\u5927\u96EA-\u66B4\u96EA":"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*ra5GRp3U688AAAAAAAAAAAAADpatAQ/original",\u6D6E\u5C18:"",\u626C\u6C99:"",\u6C99\u5C18\u66B4:"",\u5F3A\u6C99\u5C18\u66B4:"",\u9F99\u5377\u98CE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*0b3hTq-reJ4AAAAAAAAAAAAADpatAQ/original",\u96FE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*E1YGT70TJDcAAAAAAAAAAAAADpatAQ/original",\u6D53\u96FE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*E1YGT70TJDcAAAAAAAAAAAAADpatAQ/original",\u5F3A\u6D53\u96FE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*E1YGT70TJDcAAAAAAAAAAAAADpatAQ/original",\u8F7B\u96FE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*E1YGT70TJDcAAAAAAAAAAAAADpatAQ/original",\u5927\u96FE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*E1YGT70TJDcAAAAAAAAAAAAADpatAQ/original",\u7279\u5F3A\u6D53\u96FE:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*E1YGT70TJDcAAAAAAAAAAAAADpatAQ/original",\u70ED:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*i6nKTpdxNIQAAAAAAAAAAAAADpatAQ/original",\u51B7:"https://mdn.alipayobjects.com/huamei_5vkpxz/afts/img/A*yAxYQofRH0sAAAAAAAAAAAAADpatAQ/original"},Ia={start:{id:"B0HGCLIRF3",name:"\u8682\u8681A\u7A7A\u95F4(\u4E1C\u95E8)",district:"\u6D59\u6C5F\u7701\u676D\u5DDE\u5E02\u897F\u6E56\u533A",location:"120.104785,30.262946",address:"\u897F\u6EAA\u8DEF569\u53F7\u8682\u8681\u96C6\u56E2A\u7A7A\u95F4",longitude:120.104785,latitude:30.262946},end:{id:"B000A83C36",name:"\u5317\u4EAC\u7AD9",district:"\u5317\u4EAC\u5E02\u4E1C\u57CE\u533A",location:"116.427354,39.902830",address:"\u6BDB\u5BB6\u6E7E\u80E1\u540C\u753213\u53F7",longitude:116.427354,latitude:39.90283}},Ya={autoFit:!0,shape:"line",size:5,zIndex:4,color:{field:"status",value:function(t){var A=t.status;return A==="\u7F13\u884C"?"#FFFF00":A==="\u62E5\u5835"?"#FFA500'":A==="\u4E25\u91CD\u62E5\u5835"?"#FF0000":"#5AC475"}},style:{strokeWidth:.3,stroke:"#2B6246"}},bt=[{title:"\u6E29\u5EA6",interval:[-35,-20,-10,-5,0,5,10,15,20,40],color:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"].reverse(),unit:"\u2103"},{title:"\u6E7F\u5EA6",interval:[0,10,20,30,40,50,60,70,80,100],color:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac"],unit:"%"},{title:"\u7A7A\u6C14\u8D28\u91CF(AQI)",interval:[0,300],color:["#d7191c","#fdae61","#ffffbf","#a6d96a"].reverse(),unit:""}],Ga=a(37205),N=a.n(Ga),U=a(7292),ra=a(80262),Za=a(39647),oa=a.n(Za),Ba=a(79382),$a=a(2505),Ma=["cities","polyline","tmcs"];function I(h,t){return"".concat(h,"?").concat(Object.entries(t).map(function(A){var l=z()(A,2),p=l[0],r=l[1];return"".concat(p,"=").concat(window.encodeURIComponent(String(r)))}).join("&"))}var Ha=function(){var h=F()(C()().mark(function t(A){var l;return C()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=I("https://restapi.amap.com/v3/weather/weatherInfo",{key:"fdd01f9a9dd6846239b9523d7923339b",city:A,extensions:"all"}),r.next=3,fetch(l);case 3:return r.next=5,r.sent.json();case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},t)}));return function(A){return h.apply(this,arguments)}}(),Va=function(t){var A=z()(t,4),l=A[0],p=A[1],r=A[2],b=A[3],g=I("https://dataservice-api.alipay.com/dataserving/api/queryData/ds18d7259ac920006159mapstudio",{date:"20240203",min_lng:l,max_lng:r,min_lat:p,max_lat:b});return new Promise(function(i){fetch(g).then(function(c){return c.json()}).then(function(c){var D=c.data;i(D.items.map(function(v){var s=v.equipment_value,S=v.equipment_lng,w=v.equipment_lat;return{count:+s.value||0,lng:+S.value,lat:+w.value}}))}).catch(function(){return i([])})})},Wa=function(){var h=F()(C()().mark(function t(A){var l,p,r,b,g,i,c,D,v,s,S,w;return C()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(A){n.next=2;break}return n.abrupt("return");case 2:if(l=A||{paths:[]},p=l.destination,r=l.origin,b=l.paths,g=function(m){return m.split(";").map(function(d){return d.split(",").map(function(x){return+x})})},i=function(m,d){return{type:"Feature",geometry:{type:"LineString",coordinates:g(m)},properties:d}},c={start:{points:p},end:{points:r},paths:[],districts:[],chargingPileInfo:[]},D=[],b.forEach(function(o,m){var d=o.distance,x=o.steps,j="",k=[],E=[];x.forEach(function(f){var Q=f.cities,y=f.polyline,G=f.tmcs,$=oa()(f,Ma);j+=y,k.push($);var Z=[];Q.forEach(function(M,mt){var H=g(y),da=mt*(H.length/Q.length),dt=da+H.length/Q.length,ua=H.slice(da,dt),ha=z()(ua[ua.length-1],2),ut=ha[0],ht=ha[1];Z.push(u()(u()({},M),{},{lngLat:{lng:ut,lat:ht}}))});var pt=G.filter(function(M){return Fa.includes(M.tmc_status)});E.push.apply(E,N()(pt)),D.push.apply(D,Z)}),c.paths.push({polyline:i(j,{status:"\u7545\u901A",index:m}),distance:d}),c.tmcs=E.map(function(f){return i(f.tmc_polyline,{status:f.tmc_status,index:m})})}),c.districts=(0,Ba.Z)(D,"adcode"),(0,$a.Z)(c.districts)){n.next=20;break}return v=c.districts,n.next=13,Promise.all(v.map(function(o){return Ha(o.adcode)}));case 13:return s=n.sent,c.districts=v.map(function(o){var m=s.find(function(d){return d.forecasts[0].adcode===o.adcode});return u()(u()({},o),{},{weatherInfo:m.forecasts[0]})}),S=(0,ra.VWR)(c.paths.map(function(o){return o.polyline})[0]),n.next=18,Va(S);case 18:w=n.sent,c.chargingPileInfo=w;case 20:return n.abrupt("return",c);case 21:case"end":return n.stop()}},t)}));return function(A){return h.apply(this,arguments)}}(),Ja=function(t){var A={backgroundColor:"#007bff"};return t.indexOf("\u6674")>=0?A={backgroundColor:"#19CAAD"}:t.indexOf("\u4E2D\u96E8")>=0?A={backgroundColor:"red"}:t.indexOf("\u5927\u96E8")>=0?A={backgroundColor:"black"}:t.indexOf("\u96EA")>=0?A={backgroundColor:"black"}:t.indexOf("\u96E8")>=0&&(A={backgroundColor:"#FF8033"}),A},Xa=function(t){return t&&(t<O()().startOf("day")||t>O()().add(3,"days").endOf("day"))},Y={iconPlace:"iconPlace___lj9tm",bubble:"bubble___kYwVb",weatherTool:"weatherTool___ZeItW"},e=a(32648),Ka=function(t){var A=t.districts,l=t.currentDate;return(0,e.jsx)("div",{children:A.map(function(p){var r=p.lngLat,b=p.adcode,g=p.weatherInfo,i=g==null?void 0:g.casts.find(function(D){return D.date===l}),c=Ja(i==null?void 0:i.dayweather);return(0,e.jsx)(U.Jx,{lngLat:r,anchor:"top-left",children:(0,e.jsxs)("div",{className:Y.bubble,style:u()(u()({},c),{},{"--bgColor":c.backgroundColor}),children:[(0,e.jsx)("img",{src:Ua[i==null?void 0:i.dayweather],className:"mr-2",alt:""}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"font-bold",children:[g==null?void 0:g.city,"\u6BB5"]}),(0,e.jsxs)("div",{className:Y.weatherTool,children:[i==null?void 0:i.dayweather," |"," ",(i==null?void 0:i.daytemp)+"\xB0C"," |"," ","\u98CE\u901F"+(i==null?void 0:i.daypower)]})]})]})},b)})})},qa=function(t){var A=t.searchResult,l=t.currentDate,p=A.paths,r=A.start,b=A.end,g=A.districts,i=A.tmcs,c=(0,P.useMemo)(function(){var v=r.points.split(",").map(function(d){return+d}),s=z()(v,2),S=s[0],w=s[1],R=b.points.split(",").map(function(d){return+d}),n=z()(R,2),o=n[0],m=n[1];return(0,e.jsxs)("div",{children:[(0,e.jsx)(U.Jx,{lngLat:{lng:S,lat:w},children:(0,e.jsx)("img",{className:Y.iconPlace,src:sa})},"start"),(0,e.jsx)(U.Jx,{lngLat:{lng:o,lat:m},children:(0,e.jsx)("img",{className:Y.iconPlace,src:na})},"end")]})},[r,b]),D=(0,P.useMemo)(function(){return(0,e.jsx)(U.Ie,u()(u()({},Ya),{},{id:"LineLayer",source:{data:(0,ra.uf4)([].concat(N()(p.map(function(v){return v.polyline})),N()(i)))}}))},[p,i]);return(0,e.jsxs)("div",{children:[D,c,(0,e.jsx)(Ka,{districts:g,currentDate:l})]})},_a=a(52882),la=a(97881),ca,pa,ma,at=function(){return{locationSearch:(0,L.iv)(ca||(ca=T()([`
      min-width: 200px;
    `]))),locationSearchName:(0,L.iv)(pa||(pa=T()([`
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    `]))),locationSearchTip:(0,L.iv)(ma||(ma=T()([`
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      color: #818181;
      font-size: 12px;
    `])))}},tt=at,At=["searchParams","showDistrict","showAddress","onSearchFinish","onChange"],et=la.Z.Option,B=function(t){var A=t.searchParams,l=t.showDistrict,p=t.showAddress,r=t.onSearchFinish,b=t.onChange,g=oa()(t,At),i=tt(),c=(0,P.useState)([]),D=z()(c,2),v=D[0],s=D[1];(0,P.useEffect)(function(){r==null||r(v)},[r,v]);var S=(0,_a.Z)(function(){var n=F()(C()().mark(function o(m){var d,x,j,k;return C()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(m){f.next=3;break}return s([]),f.abrupt("return");case 3:return j=I("https://restapi.amap.com/v3/assistant/inputtips",u()(u()({},A),{},{keywords:[].concat(N()(((d=A.keywords)!==null&&d!==void 0?d:"").split("|")),[m]).filter(function(Q){return!!Q}).join("|")})),f.next=6,fetch(j);case 6:return f.next=8,f.sent.json();case 8:k=f.sent,s(((x=k==null?void 0:k.tips)!==null&&x!==void 0?x:[]).filter(function(Q){return Q.location&&Q.location.length}).map(function(Q){var y=Q.location.split(","),G=z()(y,2),$=G[0],Z=G[1];return Q.longitude=+$,Q.latitude=+Z,Q}));case 10:case"end":return f.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),{wait:500}),w=S.run,R=(0,P.useCallback)(function(n){var o=n&&v.find(function(m){return m.name===n});b==null||b(n||void 0,o||void 0)},[b,v]);return(0,e.jsx)(la.Z,u()(u()({className:i.locationSearch,onSearch:w,onChange:R,optionLabelProp:"label",variant:"filled",size:"small",style:{width:150}},g),{},{children:v.map(function(n){var o="".concat(l?n.district:"").concat(p?n.address:"");return(0,e.jsxs)(et,{value:n.name,label:n.name,children:[(0,e.jsx)("div",{title:n.name,className:i.locationSearchName,children:n.name}),o&&(0,e.jsx)("div",{title:o,className:i.locationSearchTip,children:o})]},n.id)})}))};B.defaultProps={showSearch:!0,allowClear:!0,filterOption:!1,defaultActiveFirstOption:!1,showAddress:!0,showDistrict:!0};var it=function(){var h,t,A=(0,P.useState)(!1),l=z()(A,2),p=l[0],r=l[1],b=(0,P.useState)(Na),g=z()(b,2),i=g[0],c=g[1],D=(0,P.useState)(Ia),v=z()(D,2),s=v[0],S=v[1],w=(0,P.useState)(),R=z()(w,2),n=R[0],o=R[1],m=Oa();return(0,za.Z)(F()(C()().mark(function d(){var x,j,k,E,f;return C()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(s!=null&&s.start&&s.end)){y.next=18;break}if(x=s.start,j=s.end,x.name!==j.name){y.next=6;break}Ta.ZP.error("\u521D\u59CB\u70B9\u548C\u7EC8\u70B9\u4F4D\u7F6E\u4E0D\u80FD\u76F8\u540C"),y.next=18;break;case 6:return r(!0),k=I("https://restapi.amap.com/v5/direction/driving",{key:"fdd01f9a9dd6846239b9523d7923339b",origin:"".concat(x.longitude,",").concat(x.latitude),destination:"".concat(j.longitude,",").concat(j.latitude),show_fields:"cities,polyline,tmcs,cost"}),y.next=10,fetch(k);case 10:return y.next=12,y.sent.json();case 12:return E=y.sent,y.next=15,Wa(E.route);case 15:f=y.sent,o(f),r(!1);case 18:case"end":return y.stop()}},d)})),[s]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:m.topPane,children:(0,e.jsxs)(La.Z,{spinning:p,tip:"\u67E5\u8BE2\u4E2D\u3002\u3002\u3002",children:[(0,e.jsxs)("div",{className:m.searchPane,children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)(K.Z,{style:{marginBottom:"0.5rem"},align:"center",children:[(0,e.jsx)("img",{className:m.imageIcon,src:na}),(0,e.jsx)(B,{searchParams:{key:"fdd01f9a9dd6846239b9523d7923339b"},value:s==null||(h=s.start)===null||h===void 0?void 0:h.name,placeholder:"\u8F93\u5165\u8D77\u70B9",onChange:function(x,j){j&&S(function(k){return u()(u()({},k),{},{start:j})})}})]}),(0,e.jsxs)(K.Z,{align:"center",children:[(0,e.jsx)("img",{className:m.imageIcon,src:sa}),(0,e.jsx)(B,{searchParams:{key:"fdd01f9a9dd6846239b9523d7923339b"},value:s==null||(t=s.end)===null||t===void 0?void 0:t.name,placeholder:"\u8F93\u5165\u7EC8\u70B9",onChange:function(x,j){j&&S(function(k){return u()(u()({},k),{},{end:j})})}})]})]}),(0,e.jsx)(wa.ZP,{style:{marginLeft:"0.5rem"},type:"text",onClick:function(){s!=null&&s.end&&s.start&&S({start:s.end,end:s.start})},icon:(0,e.jsx)(Sa.Z,{style:{transform:"rotate(90deg)"}})})]}),(0,e.jsx)("div",{className:m.timePickerPane,children:(0,e.jsx)(Pa.Z,{defaultValue:O()(),disabledDate:Xa,bordered:!1,style:{width:"100%"},size:"small",onChange:function(x){c(O()(x,"YYYY-MM-DD").format("YYYY-MM-DD"))}})})]})}),n&&(0,e.jsx)(qa,{searchResult:n,currentDate:i})]})},nt=function(){var h={};return{schema:h}},st=(0,X.mV)({version:"v0.1",metadata:{name:"ChoosePlace",displayName:"\u4E24\u5730\u70B9\u9009\u62E9",description:"\u7528\u4E8E\u4E24\u5730\u70B9\u9009\u62E9",type:"Auto",category:"MapControl"},defaultProperties:{position:"topleft"},component:it,registerForm:nt}),rt={version:"v0.0.1",layers:[],widgets:[st]},ot=rt,lt=[ba.ZP,ot];function ct(){return(0,e.jsx)(xa.ZP,{theme:ya,locale:ja.Z,children:(0,e.jsx)(X.JX,{config:fa,assets:lt,style:{height:"100vh"}})})}}}]);
