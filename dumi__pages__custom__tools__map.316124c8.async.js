"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[90],{20777:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});var r=n(42241),a=n(42153),i=n(92379),c=n(5414),s=n(12027),l=n.n(s),o=n(29008),u=n.n(o),d=n(70958),p=n.n(d),f=n(29861),h=n.n(f),v=n(24325),x=n.n(v),m=n(28633),y=n.n(m),j=n(27894),g=n(50440),b=n(15521),w=n(60774),Z=n(91847),k=n(80250),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},N=n(34344),A=function(e,t){return i.createElement(N.Z,(0,k.Z)({},e,{ref:t,icon:C}))};var S=i.forwardRef(A),L=n(8971),O=n(9910),z=n(40041),D=n(3995),P=n(95295),T=n(48613),J=n(2679),B=n(5609),V=n(8235),G=function(e){var t=e.className,n=e.style,r=e.children,a=e.position,c=void 0===a?"topleft":a,s=e.name,l=(0,i.useRef)(document.createElement("div")),o=(0,V.L)(n);return function(e,t,n){var r=(0,B.$)(),a=(0,i.useRef)();(0,i.useEffect)((function(){var i=new T.Control(n);return i.onAdd=function(){return e(r)},i.onRemove=function(){},a.current=i,r.addControl(i),function(){"function"==typeof t&&t(r),a.current=null,r.removeControl(i)}}),[]),(0,J.Z)((function(){var e;null===(e=a.current)||void 0===e||e.setOptions(n)}),[n])}((0,i.useCallback)((function(){return l.current}),[]),void 0,(0,i.useMemo)((function(){return{position:c,name:s,className:t,style:o}}),[c,s,t,o])),(0,P.createPortal)(r,l.current)},_=n(51403),E=n(86408),M=n(29483),R=n(43625),q=n(73829),F=n(42524),I=n(61458),K=n(14738),W=n(60301),U=n(41196),Q=n(52582),H=n(70317),X=n(31823),Y=n(96621),$=n(5524),ee=(n(32519),n(83223)),te=n(651),ne={width:20,display:"none",rotate:0},re={width:370,rotate:180,display:"block"},ae=function(){var e,t,n=(0,i.useState)({data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}}),r=y()(n,2),a=r[0],c=r[1],s=(0,i.useState)(re),o=y()(s,2),d=o[0],f=o[1],v=(0,i.useState)(!1),m=y()(v,2),k=m[0],C=m[1],N="middle",A=(0,i.useState)(ee.Ay),P=y()(A,2),T=P[0],J=P[1],B=(0,i.useState)("gcj02"),V=y()(B,2),ae=V[0],ie=(V[1],(0,i.useState)([{currentLevel:"country",currentName:"中国",currentCode:1e5}])),ce=y()(ie,2),se=ce[0],le=ce[1],oe=(0,i.useMemo)((function(){return(0,ee.Ho)(T.currentLevel)}),[T.currentLevel]),ue=function(e,t){J(x()(x()({},T),{},h()({},e,t)))};(0,i.useEffect)((function(){document.body.clientWidth<768&&f(ne)}),[]);var de=(0,i.useState)(),pe=y()(de,2),fe=pe[0],he=pe[1],ve=function(){var e=p()(u()().mark((function e(){var t,n,r,a,i;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.currentLevel,n=T.hasSubChildren,r=T.childrenLevel,a=T.currentCode,n){e.next=7;break}return e.next=4,null==fe?void 0:fe.getChildrenData({parentLevel:t,parentAdcode:a,childrenLevel:t});case 4:i=e.sent,e.next=10;break;case 7:return e.next=9,null==fe?void 0:fe.getChildrenData({parentLevel:t,parentAdcode:a,childrenLevel:r});case 9:i=e.sent;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=p()(u()().mark((function e(){var t,n,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.datatype,n=T.currentName,e.next=3,ve();case 3:r=e.sent,(0,$.O6)(n,r,t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=p()(u()().mark((function e(){var t,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.currentName,e.next=3,ve();case 3:return n=e.sent,e.abrupt("return",(0,$.O6)(t,n,"SVG"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=p()(u()().mark((function e(){var t,n,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.dataLevel,n=T.datatype,C(!0),e.next=4,(0,ee.B4)(t);case 4:r=e.sent,C(!1),(0,$.O6)("全量数据".concat(t),r,n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=p()(u()().mark((function e(){var t,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.datatype,e.next=3,fetch("https://mdn.alipayobjects.com/afts/file/A*zMVuS7mKBI4AAAAAAAAAAAAADrd2AQ/%E5%85%A8%E5%9B%BD%E8%BE%B9%E7%95%8C.json");case 3:return e.next=5,e.sent.json();case 5:n=e.sent,(0,$.O6)("中国边界",n,t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=p()(u()().mark((function e(){var t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve();case 2:t=e.sent,navigator.clipboard.writeText(JSON.stringify(t)),_.ZP.success("复制成功");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=p()(u()().mark((function e(){var t,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve();case 2:return t=e.sent,e.next=5,(0,$.Y2)(t);case 5:n=e.sent,navigator.clipboard.writeText(n),_.ZP.success("复制成功");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=T.sourceType,t=T.sourceVersion,n=new X.DataSourceMap[e]({version:t,type:ae});C(!0),he(n),n.getChildrenData({childrenLevel:"province",parentAdcode:1e5,parentLevel:"country",precision:"low"}).then((function(e){c((function(t){return x()(x()({},t),{},{data:e})})),setTimeout((function(){n.getData({level:"city"})}),4e3),setTimeout((function(){n.getData({level:"county"})}),6e3),J(ee.Ay),C(!1)}))}),[T.sourceType,T.sourceVersion,ae]);var we=(0,Y.Z)(function(){var e=p()(u()().mark((function e(t){var n,r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("county"!==(n=(0,ee.q4)(T.currentLevel))){e.next=4;break}return _.ZP.info("已下钻到最底层"),e.abrupt("return");case 4:return C(!0),r={currentLevel:n,currentName:t.feature.properties.name,currentCode:t.feature.properties.adcode},le([].concat(l()(se),[r])),J(x()(x()(x()({},T),r),{},{childrenLevel:(0,ee.q4)(n)})),e.next=10,null==fe?void 0:fe.getChildrenData({parentLevel:r.currentLevel,parentAdcode:r.currentCode,childrenLevel:(0,ee.q4)(n),precision:"low"});case 10:a=e.sent,c((function(e){return x()(x()({},e),{},{data:a})})),C(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),600),Ze=(0,Y.Z)(p()(u()().mark((function e(){var t,n,r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=se.slice(0,se.length-1),n=t[t.length-1],"country"!==(r=T.currentLevel)){e.next=6;break}return _.ZP.info("已上卷到最上层"),e.abrupt("return");case 6:return C(!0),J(x()(x()(x()({},T),n),{},{childrenLevel:r})),le(t),e.next=11,null==fe?void 0:fe.getChildrenData({parentLevel:n.currentLevel,parentAdcode:n.currentCode,childrenLevel:r,precision:"low"});case 11:a=e.sent,c((function(e){return x()(x()({},e),{},{data:a})})),C(!1);case 14:case"end":return e.stop()}}),e)}))),600),ke=(0,i.useMemo)((function(){return(0,ee.wc)()}),[T.sourceType,T.currentLevel]);return(0,te.jsx)(E.Z,{spinning:k,tip:"数据加载中……",children:(0,te.jsxs)("div",{style:{display:"flex"},children:[(0,te.jsxs)(L.$,x()(x()({},ee.vc),{},{style:{height:"calc(100vh - 240px)",width:"calc(100% - ".concat(d.width,"px)")},children:[(0,te.jsx)(O.C,x()(x()({},ee.qX),{},{source:a,onDblClick:we,onUndblclick:Ze,id:"myChoroplethLayer"})),(0,te.jsx)(z.K,{closeButton:!1,closeOnClick:!1,anchor:"bottom-left",trigger:"hover",items:ke}),(0,te.jsx)(D.w,{position:"bottomright"}),(0,te.jsxs)(G,{position:"bottomleft",className:"custom-control-class",style:{background:"#fff",borderRadius:4,overflow:"hidden",padding:16},children:[(0,te.jsx)("div",{children:"下钻: 双击要下钻的区域"}),(0,te.jsx)("div",{children:"上卷: 双击非行政区划区域"})]})]})),(0,te.jsxs)("div",{className:"panel",style:{width:d.width},children:[(0,te.jsx)("div",{className:"toggle",children:(0,te.jsx)(j.Z,{title:"展开收起",rotate:d.rotate,className:"icon",onClick:function(){f(20===d.width?re:ne)}})}),(0,te.jsxs)("div",{style:{paddingLeft:"10px",display:d.display},children:[(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsx)(R.Z,{span:8,className:"label",children:"版本："}),(0,te.jsx)(R.Z,{span:16,style:{textAlign:"right"},children:(0,te.jsx)(q.default,{value:T.sourceVersion,size:"small",onChange:ue.bind(null,"sourceVersion"),options:ee.Fk[T.sourceType]})})]}),(0,te.jsx)(F.Z,{style:{margin:"8px 0"}}),(0,te.jsxs)(I.Z,{title:"当前地区",children:[(0,te.jsx)(I.Z.Item,{style:{width:"180px"},label:"名称",children:T.currentName}),(0,te.jsx)(I.Z.Item,{label:"adcode",children:T.currentCode})]}),(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsx)(R.Z,{span:12,className:"label",children:"数据格式:"}),(0,te.jsxs)(R.Z,{span:12,style:{textAlign:"right"},children:[(0,te.jsx)("span",{style:{marginRight:6},children:"GCJ02"}),(0,te.jsx)(K.Z,{content:"因政策原因，WGS84 坐标系数据已下线",children:(0,te.jsx)(g.Z,{})})]})]}),(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsx)(R.Z,{span:12,className:"label",children:"包含子区域:"}),(0,te.jsx)(R.Z,{span:12,style:{textAlign:"right"},children:(0,te.jsx)(W.Z,{style:{width:"32px"},checked:T.hasSubChildren,onChange:ue.bind(null,"hasSubChildren")})})]}),T.hasSubChildren&&(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsx)(R.Z,{span:10,className:"label",children:"子区域级别:"}),(0,te.jsx)(R.Z,{span:14,style:{textAlign:"right"},children:(0,te.jsxs)(U.ZP.Group,{defaultValue:oe[0]||"province",size:N,value:T.childrenLevel,onChange:function(e){ue("childrenLevel",e.target.value)},children:[-1!==oe.indexOf("province")&&(0,te.jsx)(U.ZP.Button,{value:"province",children:"省"}),-1!==oe.indexOf("city")&&(0,te.jsx)(U.ZP.Button,{value:"city",children:"市"}),(0,te.jsx)(U.ZP.Button,{value:"county",children:"县"})]})})]}),(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsx)(R.Z,{span:6,className:"label",children:"数据下载:"}),(0,te.jsxs)(R.Z,{span:18,style:{textAlign:"right"},children:[(0,te.jsx)(q.default,{value:T.datatype,style:{width:120},size:N,options:ee.y2,onChange:ue.bind(null,"datatype")}),(0,te.jsx)(Q.ZP,{type:"primary",style:{marginLeft:"8px"},icon:(0,te.jsx)(b.Z,{}),size:N,onClick:xe}),(0,te.jsx)(Q.ZP,{type:"primary",style:{marginLeft:"8px"},icon:(0,te.jsx)(w.Z,{}),onClick:ge,size:N})]})]}),(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsx)(R.Z,{span:6,className:"label",children:"SVG下载:"}),(0,te.jsxs)(R.Z,{span:18,style:{textAlign:"right"},children:[(0,te.jsxs)(Q.ZP,{style:{pointerEvents:"none",width:120},children:[" ",(0,te.jsx)(Z.Z,{})," SVG"," "]}),(0,te.jsx)(Q.ZP,{type:"primary",style:{marginLeft:"8px"},icon:(0,te.jsx)(b.Z,{}),size:N,onClick:me}),(0,te.jsx)(Q.ZP,{type:"primary",style:{marginLeft:"8px"},icon:(0,te.jsx)(w.Z,{}),onClick:be,size:N})]})]}),(0,te.jsx)("h3",{children:"其他下载"}),(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsxs)(R.Z,{span:12,className:"label",children:["中国边界下载"," ",(0,te.jsxs)(H.Z,{placement:"top",overlayInnerStyle:{color:"#111"},color:"#fff",title:"全国边界下载：包含国界线、海岸线、香港界、海上省界、未定国界等线要素.",children:[" ",(0,te.jsx)(S,{})]})]}),(0,te.jsx)(R.Z,{span:12,style:{textAlign:"right"},children:(0,te.jsx)(Q.ZP,{type:"primary",style:{marginLeft:"8px"},icon:(0,te.jsx)(b.Z,{}),onClick:je,size:N})})]}),(0,te.jsxs)(M.Z,{className:"row",children:[(0,te.jsxs)(R.Z,{span:12,className:"label",children:["高精度数据下载"," ",(0,te.jsxs)(H.Z,{placement:"top",overlayInnerStyle:{color:"#111"},color:"#fff",title:"省市县原始精度下载，数据量比较大，适合线下数据分析场景",children:[" ",(0,te.jsx)(S,{})]})]}),(0,te.jsxs)(R.Z,{span:12,style:{textAlign:"right"},children:[(0,te.jsx)(q.default,{value:T.dataLevel,style:{width:100},size:N,options:ee.B8,onChange:ue.bind(null,"dataLevel")}),(0,te.jsx)(Q.ZP,{type:"primary",style:{marginLeft:"8px"},icon:(0,te.jsx)(b.Z,{}),onClick:ye,size:N})]})]}),(0,te.jsx)("div",{className:"originData",style:{},children:(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{children:"数据来源："}),(0,te.jsx)("a",{href:"".concat(null==fe||null===(e=fe.info)||void 0===e||null===(e=e.desc)||void 0===e?void 0:e.href),children:"".concat(null==fe||null===(t=fe.info)||void 0===t||null===(t=t.desc)||void 0===t?void 0:t.text)})]})})]})]})]})})},ie=function(){return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(a.Z,{}),(0,te.jsx)(c.Z,{}),(0,te.jsx)(ae,{}),(0,te.jsx)(r.Z,{})]})}},5414:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(24325),a=n.n(r),i=n(75910),c=(n(78568),n(92379),n(651)),s=function(e){var t=e.url,n=e.title,r=e.to;return(0,c.jsxs)(i.rU,{className:"dumi-default-logo",to:r,children:[(0,c.jsx)("img",{src:t,alt:n}),n]})},l=(n(37421),function(e){var t=(0,i.TH)().pathname,n=e.nav;return(0,c.jsx)("ul",{className:"dumi-default-navbar",children:n.map((function(e){return(0,c.jsx)("li",{children:/^(\w+:)\/\/|^(mailto|tel):/.test(e.link)?(0,c.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:e.title}):(0,c.jsx)(i.rU,a()(a()({to:e.link},t.startsWith(e.activePath||e.link)?{className:"active"}:{}),{},{children:e.title}))},e.link)}))})}),o=(n(93322),{nav:[{title:"中国地图",order:1,link:"../custom/tools/map",activePath:"/custom/tools/map"},{title:"世界地图",order:1,link:"../custom/tools/worldmap",activePath:"/custom/tools/worldmap"},{title:"数据 SDK",order:2,link:"../custom/tools/sdk",activePath:"/custom/tools/sdk"},{title:"数据服务",order:3,link:"../custom/tools/service",activePath:"/custom/tools/service"}],url:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*uQbXRLw_Q2UAAAAAAAAAAAAADmJ7AQ/original",to:"/custom/tools",title:"GISDATA"}),u=function(){return(0,c.jsx)("div",{className:"dumi-default-header",children:(0,c.jsxs)("div",{className:"dumi-default-header-content",style:{height:"60px"},children:[(0,c.jsx)("section",{className:"dumi-default-header-left",children:(0,c.jsx)(s,a()({},o))}),(0,c.jsx)("section",{className:"dumi-default-header-right",children:(0,c.jsx)(l,{nav:o.nav})})]})})}},83223:function(e,t,n){n.d(t,{Ay:function(){return m},B4:function(){return g},B8:function(){return v},Fk:function(){return x},Ho:function(){return j},Tt:function(){return p},_1:function(){return u},q4:function(){return y},qX:function(){return l},vc:function(){return d},wc:function(){return f},y2:function(){return h},zD:function(){return o}});var r=n(29008),a=n.n(r),i=n(70958),c=n.n(i),s=n(31823),l={autoFit:!0,fillColor:"#377eb8",opacity:.3,strokeColor:"blue",lineWidth:.5,lineOpacity:1,state:{active:{strokeColor:"green",lineWidth:1.5,lineOpacity:.8},select:{strokeColor:"red",lineWidth:1.5,lineOpacity:.8}}},o={shape:"line",size:.8,color:{scale:{type:"cat",domain:["0","2","7","9"]},field:"type",value:["#084081","#09f","#377eb8","#e41a1c"]},style:{opacity:.8,lineType:"solid"}},u={shape:"line",size:.8,color:{scale:{type:"cat",domain:["1","8","10","11"]},field:"type",value:["#084081","#e41a1c","#377eb8","#09f"]},style:{opacity:1,lineType:"dash",dashArray:[1,1]}},d={mapType:"Gaode",mapOptions:{style:"light",center:[120.210792,30.246026],zoom:3,maxZoom:10,doubleClickZoom:!1}},p={mapType:"Gaode",mapOptions:{style:"light",center:[120.210792,30.246026],zoom:3,maxZoom:5,doubleClickZoom:!1}},f=function(){return[{layer:"myChoroplethLayer",fields:[{field:"name",formatField:function(){return"名称"}},{field:"adcode",formatField:"行政编号"}]}]},h=[{key:"GeoJSON",value:"GeoJSON",label:"GeoJSON"},{key:"TopoJSON",value:"TopoJSON",label:"TopoJSON"},{key:"JSON",value:"JSON",label:"JSON"},{key:"CSV",value:"CSV",label:"CSV"},{key:"KML",value:"KML",label:"KML"}],v=[{value:"country",label:"国家"},{value:"province",label:"省"},{value:"city",label:"市"},{value:"county",label:"县"}],x={DataVSource:[{value:"areas_v3",label:"areas_v3"},{value:"areas_v2",label:"areas_v2"}],RDBSource:[{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"2021",label:"2021"},{value:"2020",label:"2020"},{value:"2019",label:"2019"},{value:"2018",label:"2018"},{value:"2017",label:"2017"},{value:"2016",label:"2016"},{value:"2015",label:"2015"}]},m={sourceType:"RDBSource",sourceVersion:"2024",currentLevel:"country",currentName:"中国",currentCode:1e5,hasSubChildren:!0,childrenLevel:"province",datatype:"GeoJSON",dataLevel:"country"},y=function(e){switch(e){case"country":return"province";case"province":return"city";case"city":case"county":return"county";default:return}},j=function(e){switch(e){case"country":return["province","city","county"];case"province":return["city","county"];case"city":return["county"];default:return[]}},g=function(){var e=c()(a()().mark((function e(t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.RDBSource({version:"1"}),e.abrupt("return",n.getData({level:t}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},5524:function(e,t,n){n.d(t,{O6:function(){return u},Y2:function(){return o}});var r=n(7330),a=n(61021),i=n.n(a),c=(n(77849),n(23127)),s=n.n(c),l=n(1994);function o(e){var t=(0,r.Z)(e).bbox||[-180,-90,180,90],n=i()({mapExtent:{left:t[0],bottom:t[1],right:t[2],top:t[3]},precision:8,attributes:["properties.adcode","properties.name",{property:"stroke",value:"blue",type:"static"},{property:"fill",value:"#aaa",type:"static"}],viewportSize:{width:1e3,height:800},fitToViewBox:!0,outputFormat:"svg"}).convert(e).join();return'<svg width="'.concat(1e3,'" height="').concat(800,'" xmlns="http://www.w3.org/2000/svg"> ').concat(n,"</svg>")}function u(e,t,n){var r="SVG"===n?o(t):"TopoJSON"===n?function(e){return JSON.stringify(l.MM({data:e}))}(t):"GeoJSON"===n?function(e){return JSON.stringify(e)}(t):"CSV"===n?function(e){var t=e.features.map((function(e){return e.properties}));if(0!==t.length){var n=Object.keys(t[0]||{}),r=[n.join(",")];return t.forEach((function(e){var t=n.map((function(t){return e[t]}));r.push(t.join(","))})),r.join("\n")}}(t):"JSON"===n?function(e){var t=e.features.map((function(e){return e.properties}));return JSON.stringify(t)}(t):"KML"===n?function(e){return s()(e)}(t):"",a=document.createElement("a");a.download="".concat(e,".").concat(n.toLowerCase()),a.href="data:text/json;charset=utf-8,".concat(encodeURIComponent(r)),a.target="_blank",a.rel="noreferrer",a.click()}},32519:function(){}}]);