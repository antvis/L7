"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[861],{45580:function(e,t,a){a.r(t);a(92326),a(1364),a(43033),a(2043),a(10474);var n=a(27498),s=(a(52972),a(32149),a(13437),a(75910)),r=a(10465),o=a(92379),i=a(77840),l=a(651);t.default=function(){return(0,l.jsx)(s.dY,{children:(0,l.jsx)(o.Suspense,{fallback:(0,l.jsx)(r.Z,{}),children:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"markdown",children:[(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,l.jsx)("p",{children:i.texts[0].value}),(0,l.jsxs)("h3",{id:"option",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#option",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"option"]}),(0,l.jsxs)("p",{children:[i.texts[1].value,(0,l.jsx)("code",{children:i.texts[2].value}),i.texts[3].value]}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:i.texts[4].value}),i.texts[5].value,(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:i.texts[6].value})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:i.texts[7].value}),i.texts[8].value,(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:i.texts[9].value})})]})]}),(0,l.jsx)(n.Z,{lang:"javascript",children:i.texts[10].value}),(0,l.jsxs)("h4",{id:"mask",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#mask",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"Mask"]}),(0,l.jsxs)("p",{children:[i.texts[11].value,(0,l.jsx)("code",{children:i.texts[12].value}),i.texts[13].value,(0,l.jsx)("code",{children:i.texts[14].value}),i.texts[15].value]}),(0,l.jsx)(n.Z,{lang:"js",children:i.texts[16].value}),(0,l.jsxs)("h3",{id:"source",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#source",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"source"]}),(0,l.jsxs)("p",{children:[i.texts[17].value,(0,l.jsx)("code",{children:i.texts[18].value}),i.texts[19].value,(0,l.jsx)("code",{children:i.texts[20].value}),i.texts[21].value]}),(0,l.jsx)("img",{width:"80%",style:{display:"block",margin:"0 auto"},alt:"案例",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cMFMTqF7WoIAAAAAAAAAAAAAARQnAQ"}),(0,l.jsx)(n.Z,{lang:"javascript",children:i.texts[22].value}),(0,l.jsxs)("h3",{id:"event",children:[(0,l.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#event",children:(0,l.jsx)("span",{className:"icon icon-link"})}),"event"]}),(0,l.jsx)("p",{children:i.texts[23].value}),(0,l.jsx)(n.Z,{lang:"javascript",children:i.texts[24].value})]})})})})}},9730:function(e,t,a){a.d(t,{T:function(){return n.T}});var n=a(80427)},71297:function(e,t,a){a.d(t,{Z:function(){return n.Z}});var n=a(87785)},77840:function(e,t,a){a.r(t),a.d(t,{texts:function(){return n}});const n=[{value:"Compared with ordinary layers, tile layers have many things to pay attention to when using them.",paraId:0},{value:"When initializing tiles, in addition to those supported by ordinary layers",paraId:1,tocIndex:0},{value:"options",paraId:1,tocIndex:0},{value:"In addition to parameters, we also need to set parameters related to vector data in advance.",paraId:1,tocIndex:0},{value:"featureId",paraId:2,tocIndex:0},{value:": string\n",paraId:2,tocIndex:0},{value:"For customizable designation. Used to specify the pick highlight of the tile.",paraId:3,tocIndex:0},{value:"sourceLayer",paraId:2,tocIndex:0},{value:": string\n",paraId:2,tocIndex:0},{value:"It must be passed in and must exist in the returned vector data to specify which layer data in the vector data to draw.",paraId:4,tocIndex:0},{value:"const layer = new RasterLayer({\n  featureId: 'id',\n  sourceLayer: 'water',\n});\n",paraId:5,tocIndex:0},{value:"The mask of the tile layer is the same as that of the ordinary layer.",paraId:6,tocIndex:1},{value:"options",paraId:6,tocIndex:1},{value:"Medium settings",paraId:6,tocIndex:1},{value:"mask、maskfence",paraId:6,tocIndex:1},{value:"Parameters are enough, but the vector tile layer does not support setting masks for the time being.",paraId:6,tocIndex:1},{value:"fetch('https://gw.alipayobjects.com/os/bmw-prod/fccd80c0-2611-49f9-9a9f-e2a4dd12226f.json')\n  .then((res) => res.json())\n  .then((maskData) => {\n    const layer = new RasterLayer({\n      mask: true,\n      maskfence: maskData,\n    });\n\n    const tileSource = new Source(\n      'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',\n      {\n        parser: {\n          type: 'rasterTile',\n          dataType: 'arraybuffer',\n          tileSize: 256,\n          maxZoom: 13.1,\n          format: async (data) => {\n            const tiff = await GeoTIFF.fromArrayBuffer(data);\n            const image = await tiff.getImage();\n            const width = image.getWidth();\n            const height = image.getHeight();\n            const values = await image.readRasters();\n            return { rasterData: values[0], width, height };\n          },\n        },\n      },\n    );\n    layer.source(tileSource).style({\n      domain: [0.001, 11.001],\n      clampLow: false,\n      rampColors: {\n        colors: colorList,\n        positions,\n      },\n    });\n    scene.addLayer(layer);\n  });\n",paraId:7,tocIndex:1},{value:"In some scenarios, especially those involving vector tile maps, the same tile data will contain data from multiple layers at the same time. In this case, we need to reuse the same tile for multiple layers.",paraId:8,tocIndex:2},{value:"source",paraId:8,tocIndex:2},{value:"object. As shown in the figure below, we use the same data to draw the areas, boundaries and names of provinces and cities. At this time we should reuse",paraId:8,tocIndex:2},{value:"source",paraId:8,tocIndex:2},{value:"object.",paraId:8,tocIndex:2},{value:"const tileSource = new Source(\n    'http://localhost:3000/file.mbtiles/{z}/{x}/{y}.pbf',\n    {\n      parser: {\n        type: 'mvt',\n        tileSize: 256,\n        zoomOffset: 0,\n        maxZoom: 9,\n        extent: [-180, -85.051129, 179, 85.051129],\n      },\n    });\n  const option = {\n    featureId: 'NAME_CHN',\n    sourceLayer: 'city'\n  }\n  const linelayer = new LineLayer(option)\n    .source(tileSource)\n    .color('#f00')\n    .size(1)\n    .style({\n      opacity: 0.5,\n    });\n  this.scene.addLayer(linelayer);\n\n  const polygonlayer = new PolygonLayer(option)\n    .source(tileSource)\n    .color('citycode', (v: string) => {\n        return getRandomColor(v);\n      }\n    })\n    .style({\n      opacity: 0.4,\n    })\n    .select(true);\n  this.scene.addLayer(polygonlayer);\n\n  const pointlayer = new PointLayer(option)\n    .source(tileSource)\n    .shape('NAME_CHN', 'text')\n    .color('#f00')\n    .size(12)\n    .style({\n      stroke: '#fff',\n      strokeWidth: 2,\n    });\n\n  this.scene.addLayer(pointlayer);\n",paraId:9,tocIndex:2},{value:"In use, the operation of the tile layer binding event is consistent with that of the ordinary layer event, but in the return parameters of the event, the tile layer merges the distributed data in order to obtain the completeness of the current layer. data.",paraId:10,tocIndex:3},{value:"layer.on('click', e => {...})；\n",paraId:11,tocIndex:3}]}}]);