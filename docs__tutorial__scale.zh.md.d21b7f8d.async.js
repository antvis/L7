"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[4076],{73747:function(e,a,n){n.r(a);n(64996),n(94841),n(60761),n(95528),n(20694);var l=n(18468),t=n(56311),i=(n(80101),n(31875),n(46232)),d=n(96052),s=n(92379),r=n(31622),c=n(651);a.default=function(){return(0,c.jsx)(i.dY,{children:(0,c.jsx)(s.Suspense,{fallback:(0,c.jsx)(d.Z,{}),children:(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,c.jsxs)("h2",{id:"scale-简介",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#scale-简介",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"Scale 简介"]}),(0,c.jsx)("p",{children:r.texts[0].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*AOIvTpmPOmgAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Scale"})}),(0,c.jsxs)("h2",{id:"scale-中的两个重要概念",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#scale-中的两个重要概念",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"Scale 中的两个重要概念:"]}),(0,c.jsx)("p",{children:r.texts[1].value}),(0,c.jsx)("p",{children:r.texts[2].value}),(0,c.jsx)("p",{children:r.texts[3].value}),(0,c.jsx)("p",{children:r.texts[4].value}),(0,c.jsxs)(t.Z,{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:r.texts[5].value}),(0,c.jsx)("th",{children:r.texts[6].value})]})}),(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:r.texts[7].value}),(0,c.jsx)("td",{children:r.texts[8].value})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:r.texts[9].value}),(0,c.jsx)("td",{children:r.texts[10].value})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:r.texts[11].value}),(0,c.jsx)("td",{children:r.texts[12].value})]})]})]}),(0,c.jsxs)("h2",{id:"l7-scale",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#l7-scale",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"L7 Scale"]}),(0,c.jsx)("p",{children:r.texts[13].value}),(0,c.jsx)("p",{children:r.texts[14].value}),(0,c.jsx)("p",{children:r.texts[15].value}),(0,c.jsx)("p",{children:r.texts[16].value}),(0,c.jsx)("p",{children:r.texts[17].value}),(0,c.jsx)("p",{children:r.texts[18].value}),(0,c.jsxs)("h2",{id:"cat-枚举",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#cat-枚举",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"Cat 枚举"]}),(0,c.jsx)("p",{children:r.texts[19].value}),(0,c.jsx)(l.Z,{lang:"tsx",children:r.texts[20].value}),(0,c.jsx)("p",{children:r.texts[21].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*rO53SYNk8hgAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale Cat映射"})}),(0,c.jsx)("p",{children:r.texts[22].value}),(0,c.jsx)(l.Z,{children:r.texts[23].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kyP2RpUXdGUAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Cat "})}),(0,c.jsxs)("h2",{id:"linear-连续线性",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#linear-连续线性",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"Linear 连续线性"]}),(0,c.jsx)("p",{children:r.texts[24].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z_rGRr-jgI0AAAAAAAAAAAAADmJ7AQ/original'",alt:"L7 Scale 线性"})}),(0,c.jsx)(l.Z,{lang:"tsx",children:r.texts[25].value}),(0,c.jsx)("p",{children:r.texts[26].value}),(0,c.jsx)(l.Z,{lang:"ts",children:r.texts[27].value}),(0,c.jsxs)("h2",{id:"quantize-连续等间距",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#quantize-连续等间距",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"quantize 连续等间距"]}),(0,c.jsx)("p",{children:r.texts[28].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*YmwwQ5L-d7QAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Scale 连续等间距"})}),(0,c.jsx)("p",{children:r.texts[29].value}),(0,c.jsx)(l.Z,{lang:"tsx",children:r.texts[30].value}),(0,c.jsx)("p",{children:r.texts[31].value}),(0,c.jsx)(l.Z,{lang:"ts",children:r.texts[32].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*N61_Q6-U7jIAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale quantize"})}),(0,c.jsxs)("h2",{id:"quantile-连续等分位",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#quantile-连续等分位",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"quantile 连续等分位"]}),(0,c.jsx)("p",{children:r.texts[33].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2SFpSLRD3yYAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale quantile"})}),(0,c.jsx)("p",{children:r.texts[34].value}),(0,c.jsx)(l.Z,{lang:"tsx",children:r.texts[35].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*EMcjSrYe1l0AAAAAAAAAAAAADmJ7AQ/original",alt:"L7 Scale quantile"})}),(0,c.jsxs)("h2",{id:"threshold-自定义分类",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#threshold-自定义分类",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"threshold 自定义分类"]}),(0,c.jsx)("p",{children:r.texts[36].value}),(0,c.jsx)("p",{children:r.texts[37].value}),(0,c.jsx)(l.Z,{lang:"tsx",children:r.texts[38].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*e1YyRKELsjwAAAAAAAAAAAAADmJ7AQ/original",alt:" L7 Scale threshold"})}),(0,c.jsxs)("h2",{id:"diverging-离散分类",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#diverging-离散分类",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"diverging 离散分类"]}),(0,c.jsx)("p",{children:r.texts[39].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*8anRRLJNu6YAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 diverging"})}),(0,c.jsx)("p",{children:r.texts[40].value}),(0,c.jsx)(l.Z,{lang:"ts",children:r.texts[41].value}),(0,c.jsx)("p",{children:(0,c.jsx)("img",{src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*4rcDQIRdRdEAAAAAAAAAAAAADmJ7AQ/original",alt:"L7 scale diverging"})})]})})})})}},49578:function(e,a,n){n.d(a,{T:function(){return l.T}});var l=n(54614)},86957:function(e,a,n){n.d(a,{p:function(){return l.p}});var l=n(3691)},256:function(e,a,n){n.d(a,{G:function(){return l.G}});var l=n(91229)},15461:function(e,a,n){n.d(a,{S:function(){return l.S}});var l=n(53275)},31622:function(e,a,n){n.r(a),n.d(a,{texts:function(){return l}});const l=[{value:"Scale 度量是用于将地图数据值（数字、日期、类别等数据）转成视觉变量（颜色、大小、形状）。Scale 是数据可视化的基本元素，因为它们决定了数据视觉编码的方式。L7 目前支持连续、离散、枚举类型等常用的 Scale。",paraId:0,tocIndex:0},{value:"Range 和 Domain",paraId:1,tocIndex:1},{value:"Domain: 地图数据值的定义区间",paraId:2,tocIndex:1},{value:"Range：视觉值的区间定义",paraId:3,tocIndex:1},{value:"不同 Scale 的差异在于 Domain-> Range 的转换方法不同",paraId:4,tocIndex:1},{value:"数据类",paraId:5,tocIndex:1},{value:"度量类型",paraId:5,tocIndex:1},{value:"连续",paraId:5,tocIndex:1},{value:"linear、log、pow",paraId:5,tocIndex:1},{value:"连续分类",paraId:5,tocIndex:1},{value:"quantize quantile,threshold,diverging",paraId:5,tocIndex:1},{value:"分类 枚举",paraId:5,tocIndex:1},{value:"cat",paraId:5,tocIndex:1},{value:"在使用 L7 过程中，默认情况下不需要进行 Scale 的配置，因为 L7 会根据数据类型对 scale 推断，推断过程如下：",paraId:6,tocIndex:2},{value:"查看用户是否设置了 Scale，如果没有:",paraId:7,tocIndex:2},{value:"判断字段的第一条数据的字段类型，如果数据中不存在对应的字段：",paraId:8,tocIndex:2},{value:"认为是常量为固定值",paraId:9,tocIndex:2},{value:"如果是数字则为 'linear';",paraId:10,tocIndex:2},{value:"如果是字符串类型 'cat';",paraId:11,tocIndex:2},{value:"Cat 指枚举类型，用于展示分类数据，比如农作物种植区分布图，水稻、玉米、大豆等不同类别需要映射为不同的颜色。在 L7 如果判断字段的值为字符串，将认为是 Cat 类型并自动获取类型的唯一值，设置为 domain 。这样三种作物就会被一一映射成对应的颜色。",paraId:12,tocIndex:3},{value:"\nconst data = [\n   {\n   type:'A',\n   x: 110,\n   y:30\n },\n {\n   type:'B',\n   x: 110,\n   y:32\n },\n {\n   type:'C',\n   x: 110,\n   y:31\n }\n ,{\n   type:'D',\n   x: 111,\n   y:33\n }，\n ,{\n   type:'E',\n   x: 112,\n   y:30\n }\n ,{\n   type:'F',\n   x: 110,\n   y:30\n }\n]\nlayer.color('type',['red','white','blue','yellow'])\n",paraId:13,tocIndex:3},{value:"如上面的代码所示，图层没有设置 Scale, L7 根据第一个数据\"A\"的类型 ,推断为枚举类型。同时取出该字段的去重后的所有值 ['A','B','C','D','E','F'] 设置为 scale 的 domain, 那么 range 就是对应的颜色 ['red','white','blue','yellow']。",paraId:14,tocIndex:3},{value:"如果不设置 domain，L7 内部会自动计算 domain，domain 顺序跟数据顺序相关。如果希望固定domain 可自己设置 domain。domain 数值 和 range数值 一一对应。",paraId:15,tocIndex:3},{value:"\nlayer.scale('type', {\n  type: 'cat',\n  domain: ['B', 'A', 'C', 'D'],\n});\nlayer.color('type', ['red', 'white', 'blue', 'yellow']);\n\n",paraId:16,tocIndex:3},{value:"线性是连续数据的映射方法，数据和视觉值是通过线性方法计算的。如数据范围domain [0,1000] 线性映射到 range [red,blue] 渐变色，就是依据线性函完成一一转换。",paraId:17,tocIndex:4},{value:"layer.color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494']);\n",paraId:18,tocIndex:4},{value:"对于连续型\n数据 L7 默认会设置为 linear, domain为数据的min、max值。颜色会根据 range 颜色生成渐变色。linear\n默认可不设置 domain 区间",paraId:19,tocIndex:4},{value:"layer.scale('value', {\n  type: 'linear',\n  domain: [5, 100], // 可定义domain,也可以不设置，自定根据数据计算\n});\n",paraId:20,tocIndex:4},{value:"等间距分类会根据属性值范围划分为若干个大小相等的子范围。相等间隔最适用于常见的数据范围，如百分比和温度。这种方法强调的是某个属性值相对于其他值的量。",paraId:21,tocIndex:5},{value:"等间距分类只与数据 mix、max 有关，如果没有设置 domain,将自动计算数据的 min、max 进行分段，分段个数依据 range 颜色的个数。等间距会出现空类，而且每个分类要素分布不均匀。",paraId:22,tocIndex:5},{value:"layer.color('type', ['red', 'white', 'blue', 'yellow']);\n",paraId:23,tocIndex:5},{value:"你也可以自定义 domain",paraId:24,tocIndex:5},{value:"layer.scale('value', {\n  type: 'quantize',\n  domain: [5, 100],\n});\n\nlayer.color('type', ['red', 'white', 'blue', 'yellow']);\n",paraId:25,tocIndex:5},{value:"等分位要求每个分类区间都含有相等数量的要素。分位数为每个分类分配相等数量数据值，不存在空类，也不存在值过多或过少的类。",paraId:26,tocIndex:6},{value:"等分位与数据的分布相关，需要拿到全量数据才能计算，因此等分位的 scale 不能单独设置 domain，只能自动计算。",paraId:27,tocIndex:6},{value:"layer.scale('value', {\n  type: 'quantile',\n});\n\nlayer.color('value', ['red', 'white', 'blue', 'yellow']);\n",paraId:28,tocIndex:6},{value:"自定义分类可以设定任意分类区间映射到对于视觉变量。domain 仍然是连续的，并根据提供的domain 进行分类。range 属性必须有 N+1 个元素，其中 N 是 domain 的个数。",paraId:29,tocIndex:7},{value:"threshold 为自定义分段，在使用时必须为 Scale 设置 domain, domain可以依据需求任意设置。",paraId:30,tocIndex:7},{value:"layer\n  .scale('rate', {\n    type: 'threshold',\n    domain: [3, 6, 8, 10],\n  })\n  .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494']);\n",paraId:31,tocIndex:7},{value:"离散分类通常与两种相反的色调一起使用，以显示从负值到中心到正值的变化。这些类型的地图显示了彼此相关的值的大小。",paraId:32,tocIndex:8},{value:"diverging 如果没有设置 domain 会自动根据数据计算min、middle、max 三个值作为domain。range 至少需要设置三个颜色，形成双极色带。",paraId:33,tocIndex:8},{value:"layer.scale('rate', {\n         type: 'diverging'\n         domain: [3, 6, 8, 10], //  the input domain and output range of a diverging scal\n       })\n       .color('rate', ['#ffffcc', '#b6e2b6', '#64c1c0', '#338cbb', '#253494'])\n",paraId:34,tocIndex:8}]}}]);