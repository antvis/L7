"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[5170],{3871:function(e,a,n){n.r(a);n(35164),n(43801),n(6974),n(27068),n(12520);var t=n(7808),r=(n(19480),n(64700),n(12318),n(99500)),i=n(13273),s=n(92379),c=n(53667),o=n(651);a.default=function(){return(0,o.jsx)(r.dY,{children:(0,o.jsx)(s.Suspense,{fallback:(0,o.jsx)(i.Z,{}),children:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"markdown",children:[(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n h3 { color: #873bf4; border-bottom: 1px solid #f0f0f0; margin: 1.2em 0 0.4em; } p { margin: 0.6em 0; } h4 { border-bottom: 1px solid #f0f0f0; }h4::before { content: '> '; opacity: 0.5; } "}}),(0,o.jsxs)("p",{children:[c.texts[0].value,(0,o.jsx)("code",{children:c.texts[1].value}),c.texts[2].value,(0,o.jsx)("code",{children:c.texts[3].value}),c.texts[4].value]}),(0,o.jsxs)("h3",{id:"绘制图片栅格---tms",children:[(0,o.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制图片栅格---tms",children:(0,o.jsx)("span",{className:"icon icon-link"})}),"绘制图片栅格 - TMS"]}),(0,o.jsx)(t.Z,{lang:"javascript",children:c.texts[5].value}),(0,o.jsxs)("h3",{id:"绘制图片栅格---wms",children:[(0,o.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制图片栅格---wms",children:(0,o.jsx)("span",{className:"icon icon-link"})}),"绘制图片栅格 - WMS"]}),(0,o.jsx)(t.Z,{lang:"javascript",children:c.texts[6].value}),(0,o.jsxs)("h3",{id:"绘制图片栅格---wmts",children:[(0,o.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制图片栅格---wmts",children:(0,o.jsx)("span",{className:"icon icon-link"})}),"绘制图片栅格 - WMTS"]}),(0,o.jsx)(t.Z,{lang:"javascript",children:c.texts[7].value}),(0,o.jsxs)("h3",{id:"绘制数据栅格---arraybuffer",children:[(0,o.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制数据栅格---arraybuffer",children:(0,o.jsx)("span",{className:"icon icon-link"})}),"绘制数据栅格 - arraybuffer"]}),(0,o.jsx)(t.Z,{lang:"javascript",children:c.texts[8].value}),(0,o.jsxs)("h3",{id:"绘制数据栅格---rgb",children:[(0,o.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#绘制数据栅格---rgb",children:(0,o.jsx)("span",{className:"icon icon-link"})}),"绘制数据栅格 - rgb"]}),(0,o.jsx)(t.Z,{lang:"javascript",children:c.texts[9].value})]})})})})}},53980:function(e,a,n){n.d(a,{G:function(){return u}});var t=n(97502),r=n(99500),i=(n(92379),"d8ttRdvsaeIwjsXPUrV3"),s="YWbojl5X0YI9jR8WQ6vF",c="nHrVcWv4dgQMNfb_O3dk",o="kLT5PvcX6twH_8KM1K4Y",l="HdNrro6Kmg0q9gTP4YLJ",d=n(651);var u=function(e){var a,n=e.isPlayground,u=e.exampleId,h=e.header,p=e.error;return(0,d.jsxs)("div",{className:i,children:[n?null:(0,d.jsx)("div",{className:s,children:h}),(0,d.jsxs)("div",{className:c,children:[(0,d.jsx)("div",{id:"playgroundScriptContainer_".concat(u),className:o}),p?(0,d.jsx)(t.ZP,{className:l,status:"error",title:(0,d.jsx)(r._H,{id:"演示代码报错，请检查"}),subTitle:(0,d.jsx)("pre",{children:(a=p,(a.reason?a.reason:a.message?a.message:a).toString())})}):null]})]})}},19298:function(e,a,n){n.d(a,{S:function(){return z}});var t=n(28633),r=n.n(t),i=n(5572),s=n(49377),c=n(23622),o=n(99500),l=n(35510),d=n(92379),u=n(4667),h=n(53980),p=n(8131),f=n(95913),x=n(32686),m=n(29318),v=n(52486),g=n(65879),j=n.n(g),b=n(72916),y=n(54014),w={},I=n(651),S=function(e){var a=e.title,n=e.relativePath,t=e.githubUrl,r=(0,o.WF)().themeConfig.relativePath;(0,y.KI)(),new(j())(location.href);return(0,I.jsx)(f.Z,{ghost:!1,title:a,subTitle:(0,I.jsx)(x.Z,{title:(0,I.jsx)(o._H,{id:"在 GitHub 上编辑"}),children:(0,I.jsx)("a",{href:function(e){var a=e.githubUrl,n=e.relativePath;e.prefix;return"".concat(a,"/edit/master/").concat(r,"/examples/").concat(n)}({githubUrl:t,relativePath:n,prefix:"examples"}),target:"_blank",rel:"noopener noreferrer",className:w.editOnGtiHubButton,children:(0,I.jsx)(p.Z,{})})}),extra:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(m.Z,{split:(0,I.jsx)(v.Z,{type:"vertical"})}),(0,I.jsx)(b.Z,{})]})})},A=n(24325),Z=n.n(A),_=n(72725);function T(e,a,n,t){var r=function(e){var a=new Map;return(0,_.Z)(e,(function(e){(0,_.Z)(e.examples,(function(n){(0,_.Z)(n.demos,(function(t){a.set("".concat(e.id,"-").concat(n.id,"-").concat(t.id),Z()(Z()({},t),{},{relativePath:"".concat(e.id,"/").concat(n.id,"/demo/").concat(t.filename),targetExample:n,targetTopic:e}))}))}))})),a}(e);return r.get("".concat(a,"-").concat(n,"-").concat(t))}var z=function(e){var a=e.exampleTopics,n=e.topic,t=e.example,p=e.demo,f=e.size,x=e.replaceId,m=e.isPlayground,v=e.notFound,g=void 0===v?(0,I.jsx)(i.T,{}):v,j=T(a,n,t,p);if(!j)return g;var b=j.title,y=j.source,w=j.relativePath,A=(0,o.WF)().themeConfig,Z=A.githubUrl,_=A.playground,z=(0,d.useState)(),k=r()(z,2),N=k[0],P=k[1],R=(0,d.useState)(!1),L=r()(R,2),F=(L[0],L[1]),M=((0,o.bU)(),(0,I.jsx)(S,{title:(0,c.ic)(b),relativePath:w,githubUrl:Z})),W="".concat(n,"_").concat(t,"_").concat(p);return(0,I.jsxs)(u.Z,{split:"vertical",defaultSize:"".concat(100*(1-f),"%"),minSize:100,children:[(0,I.jsx)(h.G,{exampleId:W,error:N,header:M,isPlayground:m}),(0,I.jsx)(s.p,{exampleId:W,source:y,relativePath:w,replaceId:x,onError:P,onFullscreen:F,onDestroy:l.Z,onReady:l.Z,playground:_})]})}},72916:function(e,a,n){var t=n(35957),r=(n(92379),n(48229)),i=n(651),s=function(){return(0,i.jsx)("img",{width:16,style:{margin:"5px"},src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*iDSwRorar_QAAAAAAAAAAAAADmJ7AQ/original",alt:"react 组件库"})};a.Z=function(e){e.readingTime;return(0,i.jsxs)("div",{style:{float:"right",display:"flex",gap:"10px"},children:[(0,i.jsx)(r.Z,{href:"https://github.com/antvis/L7/issues/new","data-icon":"octicon-issue-opened","data-size":"large","data-show-count":"true","aria-label":"Issue antvis/l7 on GitHub",children:"反馈问题"}),(0,i.jsx)(r.Z,{href:"https://github.com/antvis/l7","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star antvis/l7 on GitHub",children:"关注项目"}),(0,i.jsx)(t.Z,{icon:(0,i.jsx)(s,{}),style:{fontWeight:600,height:"30px",padding:"1px 6px"},target:"blank",href:"https://larkmap.antv.antgroup.com/components/lark-map",children:"React 组件库"})]})}},54014:function(e,a,n){function t(){for(var e=window.location.pathname.replace("/docs/","/").replace("/zh/","/").split("/"),a=[],n=e.length;n>0;n--){var t=e.slice(0,n);a.push(t.join("/"))}return a}function r(){var e=window.location.pathname;e=(e=e.replace("/zh/","/")).replace("/docs","");var a=window.location.pathname.startsWith("/en")?/(\/[A-z]*\/?\/[A-z]*)\/?/:/(\/[A-z]*)\/?/;return e.match(a)[1]}function i(e){var a=[],n=e[0];for(a.push(n.key);n.children;)n=n.children[0],a.push(n.key);return a[a.length-1]}function s(e,a,n){return e.includes("/docs/")||e.includes("/zh/")?e.replace("/docs/","/").replace("/zh/","/"):n.every((function(a){var n="".concat(a).toLowerCase();return![n,"".concat(n,"/")].includes(e.toLowerCase())}))?a:e}n.d(a,{Gd:function(){return s},KI:function(){return r},Xd:function(){return t},iX:function(){return i}})},53667:function(e,a,n){n.r(a),n.d(a,{texts:function(){return t}});const t=[{value:"栅格瓦片图层包括图片栅格和数据栅格，其中图片栅格通常加载 ",paraId:0},{value:"png/jpg",paraId:0},{value:" 图片，数据栅格则加载 ",paraId:0},{value:"tiff/lerc",paraId:0},{value:" 等栅格数据文件.",paraId:0},{value:"// 图片瓦片图层 - 卫星图\nconst layer = new RasterLayer().source(\n  'http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',\n  {\n    parser: {\n      type: 'rasterTile',\n      updateStrategy: 'overlap',\n    },\n  },\n);\n",paraId:1,tocIndex:0},{value:"// 绘制 WMS 格式瓦片\nconst url =\n  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR=3857&DPI=90';\n\nconst layer = new RasterLayer().source(url, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    zoomOffset: 1,\n  },\n});\n",paraId:2,tocIndex:1},{value:"// 绘制 WMTS 格式瓦片\nconst url1 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\nconst layer1 = new RasterLayer().source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    wmtsOptions: {\n      layer: 'img',\n      tileMatrixset: 'w',\n      format: 'tiles',\n    },\n  },\n});\n",paraId:3,tocIndex:2},{value:"const tileSource = new Source(\n  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',\n  {\n    parser: {\n      type: 'rasterTile',\n      dataType: 'arraybuffer',\n      tileSize: 256,\n      maxZoom: 13.1,\n      format: async (data) => {\n        const tiff = await GeoTIFF.fromArrayBuffer(data);\n        const image = await tiff.getImage();\n        const width = image.getWidth();\n        const height = image.getHeight();\n        const values = await image.readRasters();\n        return { rasterData: values[0], width, height };\n      },\n    },\n  },\n);\n\nlayer.source(tileSource).style({\n  domain: [0.001, 11.001],\n  clampLow: false,\n  rampColors: {\n    colors: colorList,\n    positions,\n  },\n});\n",paraId:4,tocIndex:3},{value:"const url = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\nconst tiffdata = await getTiffData(url);\nconst layer = new RasterLayer({ zIndex: 10 }).source(\n  [\n    {\n      data: tiffdata,\n      bands: [7, 6, 5].map((v) => v - 1),\n    },\n  ],\n  {\n    parser: {\n      type: 'rasterRgb',\n      format: async (data, bands) => {\n        const tiff = await GeoTIFF.fromArrayBuffer(data);\n        const image1 = await tiff.getImage();\n        const value = await image1.readRasters();\n        return bands.map((band) => {\n          return {\n            rasterData: value[band],\n            width: value.width,\n            height: value.height,\n          };\n        });\n      },\n      operation: 'rgb',\n      extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n    },\n  },\n);\n",paraId:5,tocIndex:4}]}}]);