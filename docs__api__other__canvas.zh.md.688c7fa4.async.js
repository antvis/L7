"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[3757],{88864:function(e,a,n){n.r(a);n(92326),n(1364),n(43033),n(2043),n(10474);var d=n(27498),s=(n(52972),n(32149),n(13437),n(75910)),t=n(10465),l=n(92379),r=n(30690),c=n(651);a.default=function(){return(0,c.jsx)(s.dY,{children:(0,c.jsx)(l.Suspense,{fallback:(0,c.jsx)(t.Z,{}),children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("code",{children:r.texts[0].value}),r.texts[1].value,(0,c.jsx)("code",{children:r.texts[2].value}),r.texts[3].value,(0,c.jsx)("code",{children:r.texts[4].value}),r.texts[5].value,(0,c.jsx)("code",{children:r.texts[6].value}),r.texts[7].value,(0,c.jsx)("code",{children:r.texts[8].value}),r.texts[9].value,(0,c.jsx)("code",{children:r.texts[10].value}),r.texts[11].value,(0,c.jsx)("code",{children:r.texts[12].value}),r.texts[13].value]}),(0,c.jsxs)("p",{children:[r.texts[14].value,(0,c.jsx)("code",{children:r.texts[15].value}),r.texts[16].value,(0,c.jsx)("code",{children:r.texts[17].value}),r.texts[18].value,(0,c.jsx)("code",{children:r.texts[19].value}),r.texts[20].value,(0,c.jsx)("code",{children:r.texts[21].value}),r.texts[22].value,(0,c.jsx)("code",{children:r.texts[23].value}),r.texts[24].value]}),(0,c.jsxs)("h2",{id:"使用",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#使用",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"使用"]}),(0,c.jsx)(d.Z,{lang:"jsx",children:r.texts[25].value}),(0,c.jsx)("img",{width:"60%",style:{display:"block",margin:"0 auto"},alt:"案例",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hUmNQJ1sAb8AAAAAAAAAAAAAARQnAQ"})]}),(0,c.jsx)(s.rU,{to:"/examples/point/chart#custom",children:r.texts[26].value}),(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsxs)("h3",{id:"属性",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#属性",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"属性"]}),(0,c.jsxs)("h4",{id:"draw",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#draw",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"draw"]}),(0,c.jsxs)("p",{children:[r.texts[27].value,(0,c.jsx)("code",{children:r.texts[28].value})]}),(0,c.jsx)(d.Z,{lang:"TypeScript",children:r.texts[29].value}),(0,c.jsxs)("p",{children:[r.texts[30].value,(0,c.jsx)("code",{children:r.texts[31].value}),r.texts[32].value]}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:r.texts[33].value}),(0,c.jsx)("li",{children:r.texts[34].value}),(0,c.jsx)("li",{children:r.texts[35].value}),(0,c.jsxs)("li",{children:[r.texts[36].value,(0,c.jsx)("code",{children:r.texts[37].value}),r.texts[38].value]}),(0,c.jsxs)("li",{children:[r.texts[39].value,(0,c.jsx)("code",{children:r.texts[40].value}),r.texts[41].value]})]}),(0,c.jsxs)("h4",{id:"trigger",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#trigger",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"trigger"]}),(0,c.jsxs)("p",{children:[r.texts[42].value,(0,c.jsx)("code",{children:r.texts[43].value})]}),(0,c.jsx)("p",{children:r.texts[44].value}),(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:[r.texts[45].value,(0,c.jsx)("code",{children:r.texts[46].value}),r.texts[47].value]}),(0,c.jsxs)("li",{children:[r.texts[48].value,(0,c.jsx)("code",{children:r.texts[49].value}),r.texts[50].value]})]}),(0,c.jsxs)("h4",{id:"zindex",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#zindex",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"zIndex"]}),(0,c.jsxs)("p",{children:[r.texts[51].value,(0,c.jsx)("code",{children:r.texts[52].value})]}),(0,c.jsx)("p",{children:r.texts[53].value}),(0,c.jsxs)("h3",{id:"方法",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#方法",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"方法"]}),(0,c.jsxs)("h4",{id:"draw-1",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#draw-1",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"draw"]}),(0,c.jsxs)("p",{children:[r.texts[54].value,(0,c.jsx)("code",{children:r.texts[55].value})]}),(0,c.jsx)("p",{children:r.texts[56].value}),(0,c.jsxs)("h4",{id:"updatelayerconfig",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#updatelayerconfig",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"updateLayerConfig"]}),(0,c.jsxs)("p",{children:[r.texts[57].value,(0,c.jsx)("code",{children:r.texts[58].value})]}),(0,c.jsxs)("p",{children:[r.texts[59].value,(0,c.jsx)("code",{children:r.texts[60].value}),r.texts[61].value]}),(0,c.jsxs)("h4",{id:"render",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#render",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"render"]}),(0,c.jsxs)("p",{children:[r.texts[62].value,(0,c.jsx)("code",{children:r.texts[63].value})]}),(0,c.jsx)("p",{children:r.texts[64].value}),(0,c.jsxs)("h4",{id:"getcanvas",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#getcanvas",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"getCanvas"]}),(0,c.jsxs)("p",{children:[r.texts[65].value,(0,c.jsx)("code",{children:r.texts[66].value})]}),(0,c.jsxs)("p",{children:[r.texts[67].value,(0,c.jsx)("code",{children:r.texts[68].value}),r.texts[69].value,(0,c.jsx)("code",{children:r.texts[70].value}),r.texts[71].value,(0,c.jsx)("code",{children:r.texts[72].value}),r.texts[73].value,(0,c.jsx)("code",{children:r.texts[74].value}),r.texts[75].value]}),(0,c.jsxs)("h4",{id:"show",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#show",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"show"]}),(0,c.jsxs)("p",{children:[r.texts[76].value,(0,c.jsx)("code",{children:r.texts[77].value})]}),(0,c.jsxs)("p",{children:[r.texts[78].value,(0,c.jsx)("code",{children:r.texts[79].value})]}),(0,c.jsxs)("h4",{id:"hide",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#hide",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"hide"]}),(0,c.jsxs)("p",{children:[r.texts[80].value,(0,c.jsx)("code",{children:r.texts[81].value})]}),(0,c.jsxs)("p",{children:[r.texts[82].value,(0,c.jsx)("code",{children:r.texts[83].value})]}),(0,c.jsxs)("h3",{id:"事件",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#事件",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"事件"]}),(0,c.jsxs)("p",{children:[r.texts[84].value,(0,c.jsx)(s.rU,{to:"/api/base_layer/base#%E5%9B%BE%E5%B1%82%E4%BA%8B%E4%BB%B6",children:r.texts[85].value})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:r.texts[86].value}),r.texts[87].value,(0,c.jsx)("code",{children:r.texts[88].value}),r.texts[89].value,(0,c.jsx)("code",{children:r.texts[90].value}),r.texts[91].value,(0,c.jsx)("code",{children:r.texts[92].value}),r.texts[93].value,(0,c.jsx)("code",{children:r.texts[94].value}),r.texts[95].value]}),(0,c.jsx)("p",{children:r.texts[96].value}),(0,c.jsx)(d.Z,{lang:"jsx",children:r.texts[97].value})]})]})})})}},9730:function(e,a,n){n.d(a,{T:function(){return d.T}});var d=n(80427)},71297:function(e,a,n){n.d(a,{Z:function(){return d.Z}});var d=n(87785)},30690:function(e,a,n){n.r(a),n.d(a,{texts:function(){return d}});const d=[{value:"CanvasLayer",paraId:0},{value:" 会在官方图层画布之上额外创建一个 ",paraId:0},{value:"canvas",paraId:0},{value:" 画布，允许用户通过 ",paraId:0},{value:"canvas",paraId:0},{value:" 绘制的方法自定义图层的内容和样式，相比于 ",paraId:0},{value:"Marker",paraId:0},{value:" 通过创建实际 ",paraId:0},{value:"DOM",paraId:0},{value:" 的方式，",paraId:0},{value:"CanvasLayer",paraId:0},{value:" 无疑有更佳的性能，同时 ",paraId:0},{value:"CanvasLayer",paraId:0},{value:" 的绘制内容会永远覆盖在官方图层的内容之上。",paraId:0},{value:"用户主要通过 ",paraId:1},{value:"CanvasLayer",paraId:1},{value:" 的 ",paraId:1},{value:"draw",paraId:1},{value:" 回调函数来自定义 ",paraId:1},{value:"canvas",paraId:1},{value:" 上绘制的内容，并且 ",paraId:1},{value:"CanvasLayer",paraId:1},{value:" 在用户进行地图缩放、移动等操作时会自动调用 ",paraId:1},{value:"draw",paraId:1},{value:" 方法保证绘制物与地图位置相对不变。",paraId:1},{value:"import { CanvasLayer, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  //...\n});\n\nscene.on('loaded', () => {\n  const layer = new CanvasLayer({\n    trigger: 'change',\n  });\n\n  layer.draw(({ container, ctx, utils }) => {\n    const [width, height] = size;\n    // 清空画布\n    ctx.clearRect(0, 0, container.width, container.height);\n    // 经纬度 => 像素坐标 的转换\n    const { x, y } = utils.lngLatToContainer([120, 30]);\n    // 设置绘制颜色\n    ctx.fillStyle = 'red';\n    // 绘制一个矩形\n    ctx.fillRect(x, y, 10, 10);\n  });\n\n  scene.addLayer(layer);\n});\n",paraId:2,tocIndex:0},{value:"在线案例",paraId:3},{value:"类型：",paraId:4,tocIndex:2},{value:"(drawParams: ICanvasLayerRenderParams) => void",paraId:4,tocIndex:2},{value:"type ICanvasLayerRenderParams = {\n  canvas: HTMLCanvasELement;\n  ctx: RenderingContext;\n  container: {\n    width: number;\n    height: number;\n    bounds: [\n      [number, number],\n      [number, number],\n    ];\n  };\n  utils: {\n    lngLatToContainer: IMapService['lngLatToContainer'];\n  };\n  mapService: IMapService;\n}\n",paraId:5,tocIndex:2},{value:"作用：",paraId:6,tocIndex:2},{value:"draw",paraId:6,tocIndex:2},{value:" 方法是用于在地图状态更新时调用的渲染函数，接受相关参数，用户在该函数中写 canvas 的绘制逻辑",paraId:6,tocIndex:2},{value:"canvas CanvasLayer 生成的 canvas DOM 节点",paraId:7,tocIndex:2},{value:"ctx 生成的 canvas DOM 的上下文",paraId:7,tocIndex:2},{value:"container 当前视图的实际绘图范围和地图展示的经纬度范围",paraId:7,tocIndex:2},{value:"utils 提供在 ",paraId:7,tocIndex:2},{value:"draw",paraId:7,tocIndex:2},{value:" 方法中常用的工具函数",paraId:7,tocIndex:2},{value:"mapService 当前地图的 ",paraId:7,tocIndex:2},{value:"mapService",paraId:7,tocIndex:2},{value:"，提供位置转换的相关方法",paraId:7,tocIndex:2},{value:"类型：",paraId:8,tocIndex:3},{value:"'change' | 'end'",paraId:8,tocIndex:3},{value:"作用：指定 CanvasLayer 的更新方式，update 有两个值 'change'、'end'，默认为 'change'",paraId:9,tocIndex:3},{value:"change：地图更新时触发 ",paraId:10,tocIndex:3},{value:"draw",paraId:10,tocIndex:3},{value:" 方法",paraId:10,tocIndex:3},{value:"end： 地图拖动完后/缩放完后触发 ",paraId:10,tocIndex:3},{value:"draw",paraId:10,tocIndex:3},{value:" 方法",paraId:10,tocIndex:3},{value:"类型：",paraId:11,tocIndex:4},{value:"number",paraId:11,tocIndex:4},{value:"作用：每个创建一个 CanvasLayer，L7 会生成一个 Canvas DOM 的实例，我们通过设置 zIndex 的值来调整 CanvasLayer 的层级。",paraId:12,tocIndex:4},{value:"类型：",paraId:13,tocIndex:6},{value:"(drawCallback: (renderParams: ICanvasLayerRenderParams) => void) => this",paraId:13,tocIndex:6},{value:"作用：更新 draw 绘制方法",paraId:14,tocIndex:6},{value:"类型：",paraId:15,tocIndex:7},{value:"(options: Partial<ICanvasLayerOptions>) => this",paraId:15,tocIndex:7},{value:"作用：更新 ",paraId:16,tocIndex:7},{value:"CanvasLayer",paraId:16,tocIndex:7},{value:" 的配置",paraId:16,tocIndex:7},{value:"类型：",paraId:17,tocIndex:8},{value:"() => void",paraId:17,tocIndex:8},{value:"作用：触发 CanvasLayer 的重新渲染",paraId:18,tocIndex:8},{value:"类型：",paraId:19,tocIndex:9},{value:"() => HTMLCanvasElement | null",paraId:19,tocIndex:9},{value:"作用：获取 ",paraId:20,tocIndex:9},{value:"Canvas",paraId:20,tocIndex:9},{value:" 实例，只有在 ",paraId:20,tocIndex:9},{value:"CanvasLayer",paraId:20,tocIndex:9},{value:" 的 ",paraId:20,tocIndex:9},{value:"add",paraId:20,tocIndex:9},{value:" 事件触发后，",paraId:20,tocIndex:9},{value:"getCanvas",paraId:20,tocIndex:9},{value:" 才能获取到值",paraId:20,tocIndex:9},{value:"类型：",paraId:21,tocIndex:10},{value:"() => this",paraId:21,tocIndex:10},{value:"作用：显示 ",paraId:22,tocIndex:10},{value:"CanvasLayer",paraId:22,tocIndex:10},{value:"类型：",paraId:23,tocIndex:11},{value:"() => this",paraId:23,tocIndex:11},{value:"作用：隐藏 ",paraId:24,tocIndex:11},{value:"CanvasLayer",paraId:24,tocIndex:11},{value:"图层基础事件可见 ",paraId:25,tocIndex:12},{value:"图层事件",paraId:26,tocIndex:12},{value:"注意",paraId:27,tocIndex:12},{value:"：如需监听 ",paraId:27,tocIndex:12},{value:"canvas",paraId:27,tocIndex:12},{value:" 画布相关事件，需要在 ",paraId:27,tocIndex:12},{value:"CanvasLayer",paraId:27,tocIndex:12},{value:" 触发 ",paraId:27,tocIndex:12},{value:"add",paraId:27,tocIndex:12},{value:" 事件后（",paraId:27,tocIndex:12},{value:"canvas",paraId:27,tocIndex:12},{value:" DOM 初始化并挂载完成后），方可监听相应事件。",paraId:27,tocIndex:12},{value:"例如：",paraId:28,tocIndex:12},{value:"const layer = new CanvasLayer({\n  // ...\n});\nscene.addLayer(layer);\n\nlayer.on('add', () => {\n  // 通过 getCanvas 获取 canvas DOM 实例\n  layer.getCanvas().addEventListener('click', (e) => {\n    console.log(e);\n  });\n});\n",paraId:29,tocIndex:12}]}}]);