"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[3757],{33249:function(e,a,n){n.r(a);n(35164),n(43801),n(6974),n(27068),n(12520);var t=n(7808),r=(n(19480),n(64700),n(12318),n(99500)),s=n(13273),d=n(92379),l=n(13412),c=n(651);a.default=function(){return(0,c.jsx)(r.dY,{children:(0,c.jsx)(d.Suspense,{fallback:(0,c.jsx)(s.Z,{}),children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("code",{children:l.texts[0].value}),l.texts[1].value,(0,c.jsx)("code",{children:l.texts[2].value}),l.texts[3].value,(0,c.jsx)("code",{children:l.texts[4].value}),l.texts[5].value,(0,c.jsx)("code",{children:l.texts[6].value}),l.texts[7].value,(0,c.jsx)("code",{children:l.texts[8].value}),l.texts[9].value,(0,c.jsx)("code",{children:l.texts[10].value}),l.texts[11].value,(0,c.jsx)("code",{children:l.texts[12].value}),l.texts[13].value]}),(0,c.jsxs)("p",{children:[l.texts[14].value,(0,c.jsx)("code",{children:l.texts[15].value}),l.texts[16].value,(0,c.jsx)("code",{children:l.texts[17].value}),l.texts[18].value,(0,c.jsx)("code",{children:l.texts[19].value}),l.texts[20].value,(0,c.jsx)("code",{children:l.texts[21].value}),l.texts[22].value,(0,c.jsx)("code",{children:l.texts[23].value}),l.texts[24].value]}),(0,c.jsxs)("h2",{id:"使用",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#使用",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"使用"]}),(0,c.jsx)(t.Z,{lang:"jsx",children:l.texts[25].value}),(0,c.jsx)("img",{width:"60%",style:{display:"block",margin:"0 auto"},alt:"案例",src:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hUmNQJ1sAb8AAAAAAAAAAAAAARQnAQ"})]}),(0,c.jsx)(r.rU,{to:"/examples/point/chart#custom",children:l.texts[26].value}),(0,c.jsxs)("div",{className:"markdown",children:[(0,c.jsxs)("h3",{id:"属性",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#属性",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"属性"]}),(0,c.jsxs)("h4",{id:"draw",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#draw",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"draw"]}),(0,c.jsxs)("p",{children:[l.texts[27].value,(0,c.jsx)("code",{children:l.texts[28].value})]}),(0,c.jsx)(t.Z,{lang:"TypeScript",children:l.texts[29].value}),(0,c.jsxs)("p",{children:[l.texts[30].value,(0,c.jsx)("code",{children:l.texts[31].value}),l.texts[32].value]}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:l.texts[33].value}),(0,c.jsx)("li",{children:l.texts[34].value}),(0,c.jsx)("li",{children:l.texts[35].value}),(0,c.jsxs)("li",{children:[l.texts[36].value,(0,c.jsx)("code",{children:l.texts[37].value}),l.texts[38].value]}),(0,c.jsxs)("li",{children:[l.texts[39].value,(0,c.jsx)("code",{children:l.texts[40].value}),l.texts[41].value]})]}),(0,c.jsxs)("h4",{id:"trigger",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#trigger",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"trigger"]}),(0,c.jsxs)("p",{children:[l.texts[42].value,(0,c.jsx)("code",{children:l.texts[43].value})]}),(0,c.jsx)("p",{children:l.texts[44].value}),(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:[l.texts[45].value,(0,c.jsx)("code",{children:l.texts[46].value}),l.texts[47].value]}),(0,c.jsxs)("li",{children:[l.texts[48].value,(0,c.jsx)("code",{children:l.texts[49].value}),l.texts[50].value]})]}),(0,c.jsxs)("h4",{id:"zindex",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#zindex",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"zIndex"]}),(0,c.jsxs)("p",{children:[l.texts[51].value,(0,c.jsx)("code",{children:l.texts[52].value})]}),(0,c.jsx)("p",{children:l.texts[53].value}),(0,c.jsxs)("h3",{id:"方法",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#方法",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"方法"]}),(0,c.jsxs)("h4",{id:"draw-1",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#draw-1",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"draw"]}),(0,c.jsxs)("p",{children:[l.texts[54].value,(0,c.jsx)("code",{children:l.texts[55].value})]}),(0,c.jsx)("p",{children:l.texts[56].value}),(0,c.jsxs)("h4",{id:"updatelayerconfig",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#updatelayerconfig",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"updateLayerConfig"]}),(0,c.jsxs)("p",{children:[l.texts[57].value,(0,c.jsx)("code",{children:l.texts[58].value})]}),(0,c.jsxs)("p",{children:[l.texts[59].value,(0,c.jsx)("code",{children:l.texts[60].value}),l.texts[61].value]}),(0,c.jsxs)("h4",{id:"render",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#render",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"render"]}),(0,c.jsxs)("p",{children:[l.texts[62].value,(0,c.jsx)("code",{children:l.texts[63].value})]}),(0,c.jsx)("p",{children:l.texts[64].value}),(0,c.jsxs)("h4",{id:"getcanvas",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#getcanvas",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"getCanvas"]}),(0,c.jsxs)("p",{children:[l.texts[65].value,(0,c.jsx)("code",{children:l.texts[66].value})]}),(0,c.jsxs)("p",{children:[l.texts[67].value,(0,c.jsx)("code",{children:l.texts[68].value}),l.texts[69].value,(0,c.jsx)("code",{children:l.texts[70].value}),l.texts[71].value,(0,c.jsx)("code",{children:l.texts[72].value}),l.texts[73].value,(0,c.jsx)("code",{children:l.texts[74].value}),l.texts[75].value]}),(0,c.jsxs)("h4",{id:"show",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#show",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"show"]}),(0,c.jsxs)("p",{children:[l.texts[76].value,(0,c.jsx)("code",{children:l.texts[77].value})]}),(0,c.jsxs)("p",{children:[l.texts[78].value,(0,c.jsx)("code",{children:l.texts[79].value})]}),(0,c.jsxs)("h4",{id:"hide",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#hide",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"hide"]}),(0,c.jsxs)("p",{children:[l.texts[80].value,(0,c.jsx)("code",{children:l.texts[81].value})]}),(0,c.jsxs)("p",{children:[l.texts[82].value,(0,c.jsx)("code",{children:l.texts[83].value})]}),(0,c.jsxs)("h3",{id:"事件",children:[(0,c.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#事件",children:(0,c.jsx)("span",{className:"icon icon-link"})}),"事件"]}),(0,c.jsxs)("p",{children:[l.texts[84].value,(0,c.jsx)(r.rU,{to:"/api/base_layer/base#%E5%9B%BE%E5%B1%82%E4%BA%8B%E4%BB%B6",children:l.texts[85].value})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:l.texts[86].value}),l.texts[87].value,(0,c.jsx)("code",{children:l.texts[88].value}),l.texts[89].value,(0,c.jsx)("code",{children:l.texts[90].value}),l.texts[91].value,(0,c.jsx)("code",{children:l.texts[92].value}),l.texts[93].value,(0,c.jsx)("code",{children:l.texts[94].value}),l.texts[95].value]}),(0,c.jsx)("p",{children:l.texts[96].value}),(0,c.jsx)(t.Z,{lang:"jsx",children:l.texts[97].value})]})]})})})}},53980:function(e,a,n){n.d(a,{G:function(){return u}});var t=n(97502),r=n(99500),s=(n(92379),"d8ttRdvsaeIwjsXPUrV3"),d="YWbojl5X0YI9jR8WQ6vF",l="nHrVcWv4dgQMNfb_O3dk",c="kLT5PvcX6twH_8KM1K4Y",i="HdNrro6Kmg0q9gTP4YLJ",x=n(651);var u=function(e){var a,n=e.isPlayground,u=e.exampleId,o=e.header,v=e.error;return(0,x.jsxs)("div",{className:s,children:[n?null:(0,x.jsx)("div",{className:d,children:o}),(0,x.jsxs)("div",{className:l,children:[(0,x.jsx)("div",{id:"playgroundScriptContainer_".concat(u),className:c}),v?(0,x.jsx)(t.ZP,{className:i,status:"error",title:(0,x.jsx)(r._H,{id:"演示代码报错，请检查"}),subTitle:(0,x.jsx)("pre",{children:(a=v,(a.reason?a.reason:a.message?a.message:a).toString())})}):null]})]})}},19298:function(e,a,n){n.d(a,{S:function(){return P}});var t=n(28633),r=n.n(t),s=n(5572),d=n(49377),l=n(23622),c=n(99500),i=n(35510),x=n(92379),u=n(4667),o=n(53980),v=n(8131),h=n(95913),p=n(32686),I=n(29318),j=n(52486),m=n(65879),g=n.n(m),f=n(72916),y=n(54014),b={},w=n(651),C=function(e){var a=e.title,n=e.relativePath,t=e.githubUrl,r=(0,c.WF)().themeConfig.relativePath;(0,y.KI)(),new(g())(location.href);return(0,w.jsx)(h.Z,{ghost:!1,title:a,subTitle:(0,w.jsx)(p.Z,{title:(0,w.jsx)(c._H,{id:"在 GitHub 上编辑"}),children:(0,w.jsx)("a",{href:function(e){var a=e.githubUrl,n=e.relativePath;e.prefix;return"".concat(a,"/edit/master/").concat(r,"/examples/").concat(n)}({githubUrl:t,relativePath:n,prefix:"examples"}),target:"_blank",rel:"noopener noreferrer",className:b.editOnGtiHubButton,children:(0,w.jsx)(v.Z,{})})}),extra:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I.Z,{split:(0,w.jsx)(j.Z,{type:"vertical"})}),(0,w.jsx)(f.Z,{})]})})},L=n(24325),A=n.n(L),k=n(72725);function N(e,a,n,t){var r=function(e){var a=new Map;return(0,k.Z)(e,(function(e){(0,k.Z)(e.examples,(function(n){(0,k.Z)(n.demos,(function(t){a.set("".concat(e.id,"-").concat(n.id,"-").concat(t.id),A()(A()({},t),{},{relativePath:"".concat(e.id,"/").concat(n.id,"/demo/").concat(t.filename),targetExample:n,targetTopic:e}))}))}))})),a}(e);return r.get("".concat(a,"-").concat(n,"-").concat(t))}var P=function(e){var a=e.exampleTopics,n=e.topic,t=e.example,v=e.demo,h=e.size,p=e.replaceId,I=e.isPlayground,j=e.notFound,m=void 0===j?(0,w.jsx)(s.T,{}):j,g=N(a,n,t,v);if(!g)return m;var f=g.title,y=g.source,b=g.relativePath,L=(0,c.WF)().themeConfig,A=L.githubUrl,k=L.playground,P=(0,x.useState)(),Z=r()(P,2),S=Z[0],_=Z[1],z=(0,x.useState)(!1),M=r()(z,2),T=(M[0],M[1]),R=((0,c.bU)(),(0,w.jsx)(C,{title:(0,l.ic)(f),relativePath:b,githubUrl:A})),H="".concat(n,"_").concat(t,"_").concat(v);return(0,w.jsxs)(u.Z,{split:"vertical",defaultSize:"".concat(100*(1-h),"%"),minSize:100,children:[(0,w.jsx)(o.G,{exampleId:H,error:S,header:R,isPlayground:I}),(0,w.jsx)(d.p,{exampleId:H,source:y,relativePath:b,replaceId:p,onError:_,onFullscreen:T,onDestroy:i.Z,onReady:i.Z,playground:k})]})}},72916:function(e,a,n){var t=n(35957),r=(n(92379),n(48229)),s=n(651),d=function(){return(0,s.jsx)("img",{width:16,style:{margin:"5px"},src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*iDSwRorar_QAAAAAAAAAAAAADmJ7AQ/original",alt:"react 组件库"})};a.Z=function(e){e.readingTime;return(0,s.jsxs)("div",{style:{float:"right",display:"flex",gap:"10px"},children:[(0,s.jsx)(r.Z,{href:"https://github.com/antvis/L7/issues/new","data-icon":"octicon-issue-opened","data-size":"large","data-show-count":"true","aria-label":"Issue antvis/l7 on GitHub",children:"反馈问题"}),(0,s.jsx)(r.Z,{href:"https://github.com/antvis/l7","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star antvis/l7 on GitHub",children:"关注项目"}),(0,s.jsx)(t.Z,{icon:(0,s.jsx)(d,{}),style:{fontWeight:600,height:"30px",padding:"1px 6px"},target:"blank",href:"https://larkmap.antv.antgroup.com/components/lark-map",children:"React 组件库"})]})}},54014:function(e,a,n){function t(){for(var e=window.location.pathname.replace("/docs/","/").replace("/zh/","/").split("/"),a=[],n=e.length;n>0;n--){var t=e.slice(0,n);a.push(t.join("/"))}return a}function r(){var e=window.location.pathname;e=(e=e.replace("/zh/","/")).replace("/docs","");var a=window.location.pathname.startsWith("/en")?/(\/[A-z]*\/?\/[A-z]*)\/?/:/(\/[A-z]*)\/?/;return e.match(a)[1]}function s(e){var a=[],n=e[0];for(a.push(n.key);n.children;)n=n.children[0],a.push(n.key);return a[a.length-1]}function d(e,a,n){return e.includes("/docs/")||e.includes("/zh/")?e.replace("/docs/","/").replace("/zh/","/"):n.every((function(a){var n="".concat(a).toLowerCase();return![n,"".concat(n,"/")].includes(e.toLowerCase())}))?a:e}n.d(a,{Gd:function(){return d},KI:function(){return r},Xd:function(){return t},iX:function(){return s}})},13412:function(e,a,n){n.r(a),n.d(a,{texts:function(){return t}});const t=[{value:"CanvasLayer",paraId:0},{value:" 会在官方图层画布之上额外创建一个 ",paraId:0},{value:"canvas",paraId:0},{value:" 画布，允许用户通过 ",paraId:0},{value:"canvas",paraId:0},{value:" 绘制的方法自定义图层的内容和样式，相比于 ",paraId:0},{value:"Marker",paraId:0},{value:" 通过创建实际 ",paraId:0},{value:"DOM",paraId:0},{value:" 的方式，",paraId:0},{value:"CanvasLayer",paraId:0},{value:" 无疑有更佳的性能，同时 ",paraId:0},{value:"CanvasLayer",paraId:0},{value:" 的绘制内容会永远覆盖在官方图层的内容之上。",paraId:0},{value:"用户主要通过 ",paraId:1},{value:"CanvasLayer",paraId:1},{value:" 的 ",paraId:1},{value:"draw",paraId:1},{value:" 回调函数来自定义 ",paraId:1},{value:"canvas",paraId:1},{value:" 上绘制的内容，并且 ",paraId:1},{value:"CanvasLayer",paraId:1},{value:" 在用户进行地图缩放、移动等操作时会自动调用 ",paraId:1},{value:"draw",paraId:1},{value:" 方法保证绘制物与地图位置相对不变。",paraId:1},{value:"import { CanvasLayer, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  //...\n});\n\nscene.on('loaded', () => {\n  const layer = new CanvasLayer({\n    trigger: 'change',\n  });\n\n  layer.draw(({ container, ctx, utils }) => {\n    const [width, height] = size;\n    // 清空画布\n    ctx.clearRect(0, 0, container.width, container.height);\n    // 经纬度 => 像素坐标 的转换\n    const { x, y } = utils.lngLatToContainer([120, 30]);\n    // 设置绘制颜色\n    ctx.fillStyle = 'red';\n    // 绘制一个矩形\n    ctx.fillRect(x, y, 10, 10);\n  });\n\n  scene.addLayer(layer);\n});\n",paraId:2,tocIndex:0},{value:"在线案例",paraId:3},{value:"类型：",paraId:4,tocIndex:2},{value:"(drawParams: ICanvasLayerRenderParams) => void",paraId:4,tocIndex:2},{value:"type ICanvasLayerRenderParams = {\n  canvas: HTMLCanvasELement;\n  ctx: RenderingContext;\n  container: {\n    width: number;\n    height: number;\n    bounds: [\n      [number, number],\n      [number, number],\n    ];\n  };\n  utils: {\n    lngLatToContainer: IMapService['lngLatToContainer'];\n  };\n  mapService: IMapService;\n}\n",paraId:5,tocIndex:2},{value:"作用：",paraId:6,tocIndex:2},{value:"draw",paraId:6,tocIndex:2},{value:" 方法是用于在地图状态更新时调用的渲染函数，接受相关参数，用户在该函数中写 canvas 的绘制逻辑",paraId:6,tocIndex:2},{value:"canvas CanvasLayer 生成的 canvas DOM 节点",paraId:7,tocIndex:2},{value:"ctx 生成的 canvas DOM 的上下文",paraId:7,tocIndex:2},{value:"container 当前视图的实际绘图范围和地图展示的经纬度范围",paraId:7,tocIndex:2},{value:"utils 提供在 ",paraId:7,tocIndex:2},{value:"draw",paraId:7,tocIndex:2},{value:" 方法中常用的工具函数",paraId:7,tocIndex:2},{value:"mapService 当前地图的 ",paraId:7,tocIndex:2},{value:"mapService",paraId:7,tocIndex:2},{value:"，提供位置转换的相关方法",paraId:7,tocIndex:2},{value:"类型：",paraId:8,tocIndex:3},{value:"'change' | 'end'",paraId:8,tocIndex:3},{value:"作用：指定 CanvasLayer 的更新方式，update 有两个值 'change'、'end'，默认为 'change'",paraId:9,tocIndex:3},{value:"change：地图更新时触发 ",paraId:10,tocIndex:3},{value:"draw",paraId:10,tocIndex:3},{value:" 方法",paraId:10,tocIndex:3},{value:"end： 地图拖动完后/缩放完后触发 ",paraId:10,tocIndex:3},{value:"draw",paraId:10,tocIndex:3},{value:" 方法",paraId:10,tocIndex:3},{value:"类型：",paraId:11,tocIndex:4},{value:"number",paraId:11,tocIndex:4},{value:"作用：每个创建一个 CanvasLayer，L7 会生成一个 Canvas DOM 的实例，我们通过设置 zIndex 的值来调整 CanvasLayer 的层级。",paraId:12,tocIndex:4},{value:"类型：",paraId:13,tocIndex:6},{value:"(drawCallback: (renderParams: ICanvasLayerRenderParams) => void) => this",paraId:13,tocIndex:6},{value:"作用：更新 draw 绘制方法",paraId:14,tocIndex:6},{value:"类型：",paraId:15,tocIndex:7},{value:"(options: Partial<ICanvasLayerOptions>) => this",paraId:15,tocIndex:7},{value:"作用：更新 ",paraId:16,tocIndex:7},{value:"CanvasLayer",paraId:16,tocIndex:7},{value:" 的配置",paraId:16,tocIndex:7},{value:"类型：",paraId:17,tocIndex:8},{value:"() => void",paraId:17,tocIndex:8},{value:"作用：触发 CanvasLayer 的重新渲染",paraId:18,tocIndex:8},{value:"类型：",paraId:19,tocIndex:9},{value:"() => HTMLCanvasElement | null",paraId:19,tocIndex:9},{value:"作用：获取 ",paraId:20,tocIndex:9},{value:"Canvas",paraId:20,tocIndex:9},{value:" 实例，只有在 ",paraId:20,tocIndex:9},{value:"CanvasLayer",paraId:20,tocIndex:9},{value:" 的 ",paraId:20,tocIndex:9},{value:"add",paraId:20,tocIndex:9},{value:" 事件触发后，",paraId:20,tocIndex:9},{value:"getCanvas",paraId:20,tocIndex:9},{value:" 才能获取到值",paraId:20,tocIndex:9},{value:"类型：",paraId:21,tocIndex:10},{value:"() => this",paraId:21,tocIndex:10},{value:"作用：显示 ",paraId:22,tocIndex:10},{value:"CanvasLayer",paraId:22,tocIndex:10},{value:"类型：",paraId:23,tocIndex:11},{value:"() => this",paraId:23,tocIndex:11},{value:"作用：隐藏 ",paraId:24,tocIndex:11},{value:"CanvasLayer",paraId:24,tocIndex:11},{value:"图层基础事件可见 ",paraId:25,tocIndex:12},{value:"图层事件",paraId:26,tocIndex:12},{value:"注意",paraId:27,tocIndex:12},{value:"：如需监听 ",paraId:27,tocIndex:12},{value:"canvas",paraId:27,tocIndex:12},{value:" 画布相关事件，需要在 ",paraId:27,tocIndex:12},{value:"CanvasLayer",paraId:27,tocIndex:12},{value:" 触发 ",paraId:27,tocIndex:12},{value:"add",paraId:27,tocIndex:12},{value:" 事件后（",paraId:27,tocIndex:12},{value:"canvas",paraId:27,tocIndex:12},{value:" DOM 初始化并挂载完成后），方可监听相应事件。",paraId:27,tocIndex:12},{value:"例如：",paraId:28,tocIndex:12},{value:"const layer = new CanvasLayer({\n  // ...\n});\nscene.addLayer(layer);\n\nlayer.on('add', () => {\n  // 通过 getCanvas 获取 canvas DOM 实例\n  layer.getCanvas().addEventListener('click', (e) => {\n    console.log(e);\n  });\n});\n",paraId:29,tocIndex:12}]}}]);